var Tx=function(){function e(r){this.propagationStopped,this.defaultPrevented,this.type=r,this.target=null}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}(),dn=Tx,qn={PROPERTYCHANGE:"propertychange"},Ex=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}(),Mc=Ex;function Sx(e,r,t){for(var i,n,a=t||Qn,o=0,s=e.length,l=!1;o<s;)i=o+(s-o>>1),n=+a(e[i],r),n<0?o=i+1:(s=i,l=!n);return l?o:~o}function Qn(e,r){return e>r?1:e<r?-1:0}function Lc(e,r,t){var i=e.length;if(e[0]<=r)return 0;if(r<=e[i-1])return i-1;var n=void 0;if(t>0){for(n=1;n<i;++n)if(e[n]<r)return n-1}else if(t<0){for(n=1;n<i;++n)if(e[n]<=r)return n}else for(n=1;n<i;++n){if(e[n]==r)return n;if(e[n]<r)return typeof t=="function"?t(r,e[n-1],e[n])>0?n-1:n:e[n-1]-r<r-e[n]?n-1:n}return i-1}function xx(e,r,t){for(;r<t;){var i=e[r];e[r]=e[t],e[t]=i,++r,--t}}function Fc(e,r){for(var t=Array.isArray(r)?r:[r],i=t.length,n=0;n<i;n++)e[e.length]=t[n]}function co(e,r){var t=e.length;if(t!==r.length)return!1;for(var i=0;i<t;i++)if(e[i]!==r[i])return!1;return!0}function Cx(e,r,t){var i=r||Qn;return e.every(function(n,a){if(a===0)return!0;var o=i(e[a-1],n);return!(o>0||t&&o===0)})}function vo(){return!0}function Hu(){return!1}function Jn(){}function Ox(e){var r=!1,t,i,n;return function(){var a=Array.prototype.slice.call(arguments);return(!r||this!==n||!co(a,i))&&(r=!0,n=this,i=a,t=e.apply(this,arguments)),t}}var me=typeof Object.assign=="function"?Object.assign:function(e,r){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1,n=arguments.length;i<n;++i){var a=arguments[i];if(a!=null)for(var o in a)a.hasOwnProperty(o)&&(t[o]=a[o])}return t};function Ys(e){for(var r in e)delete e[r]}var $m=typeof Object.values=="function"?Object.values:function(e){var r=[];for(var t in e)r.push(e[t]);return r};function js(e){var r;for(r in e)return!1;return!r}var Ix=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Px=function(e){Ix(r,e);function r(t){var i=e.call(this)||this;return i.eventTarget_=t,i.pendingRemovals_=null,i.dispatching_=null,i.listeners_=null,i}return r.prototype.addEventListener=function(t,i){if(!(!t||!i)){var n=this.listeners_||(this.listeners_={}),a=n[t]||(n[t]=[]);a.indexOf(i)===-1&&a.push(i)}},r.prototype.dispatchEvent=function(t){var i=typeof t=="string"?new dn(t):t,n=i.type;i.target||(i.target=this.eventTarget_||this);var a=this.listeners_&&this.listeners_[n],o;if(a){var s=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});n in s||(s[n]=0,l[n]=0),++s[n];for(var u=0,h=a.length;u<h;++u)if("handleEvent"in a[u]?o=a[u].handleEvent(i):o=a[u].call(this,i),o===!1||i.propagationStopped){o=!1;break}if(--s[n],s[n]===0){var f=l[n];for(delete l[n];f--;)this.removeEventListener(n,Jn);delete s[n]}return o}},r.prototype.disposeInternal=function(){this.listeners_&&Ys(this.listeners_)},r.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},r.prototype.hasListener=function(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1},r.prototype.removeEventListener=function(t,i){var n=this.listeners_&&this.listeners_[t];if(n){var a=n.indexOf(i);a!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[a]=Jn,++this.pendingRemovals_[t]):(n.splice(a,1),n.length===0&&delete this.listeners_[t]))}},r}(Mc),po=Px,q={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function wt(e,r,t,i,n){if(i&&i!==e&&(t=t.bind(i)),n){var a=t;t=function(){e.removeEventListener(r,t),a.apply(this,arguments)}}var o={target:e,type:r,listener:t};return e.addEventListener(r,t),o}function Bu(e,r,t,i){return wt(e,r,t,i,!0)}function Nt(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Ys(e))}var kx=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Uu=function(e){kx(r,e);function r(){var t=e.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return r.prototype.changed=function(){++this.revision_,this.dispatchEvent(q.CHANGE)},r.prototype.getRevision=function(){return this.revision_},r.prototype.onInternal=function(t,i){if(Array.isArray(t)){for(var n=t.length,a=new Array(n),o=0;o<n;++o)a[o]=wt(this,t[o],i);return a}else return wt(this,t,i)},r.prototype.onceInternal=function(t,i){var n;if(Array.isArray(t)){var a=t.length;n=new Array(a);for(var o=0;o<a;++o)n[o]=Bu(this,t[o],i)}else n=Bu(this,t,i);return i.ol_key=n,n},r.prototype.unInternal=function(t,i){var n=i.ol_key;if(n)Dx(n);else if(Array.isArray(t))for(var a=0,o=t.length;a<o;++a)this.removeEventListener(t[a],i);else this.removeEventListener(t,i)},r}(po);Uu.prototype.on;Uu.prototype.once;Uu.prototype.un;function Dx(e){if(Array.isArray(e))for(var r=0,t=e.length;r<t;++r)Nt(e[r]);else Nt(e)}var Gm=Uu;function ht(){return function(){throw new Error("Unimplemented abstract method.")}()}var Rx=0;function bt(e){return e.ol_uid||(e.ol_uid=String(++Rx))}var Ax="6.9.0",Ym=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),jm=function(e){Ym(r,e);function r(t,i,n){var a=e.call(this,t)||this;return a.key=i,a.oldValue=n,a}return r}(dn),Mx=function(e){Ym(r,e);function r(t){var i=e.call(this)||this;return i.on,i.once,i.un,bt(i),i.values_=null,t!==void 0&&i.setProperties(t),i}return r.prototype.get=function(t){var i;return this.values_&&this.values_.hasOwnProperty(t)&&(i=this.values_[t]),i},r.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},r.prototype.getProperties=function(){return this.values_&&me({},this.values_)||{}},r.prototype.hasProperties=function(){return!!this.values_},r.prototype.notify=function(t,i){var n;n="change:"+t,this.dispatchEvent(new jm(n,t,i)),n=qn.PROPERTYCHANGE,this.dispatchEvent(new jm(n,t,i))},r.prototype.addChangeListener=function(t,i){this.addEventListener("change:"+t,i)},r.prototype.removeChangeListener=function(t,i){this.removeEventListener("change:"+t,i)},r.prototype.set=function(t,i,n){var a=this.values_||(this.values_={});if(n)a[t]=i;else{var o=a[t];a[t]=i,o!==i&&this.notify(t,o)}},r.prototype.setProperties=function(t,i){for(var n in t)this.set(n,t[n],i)},r.prototype.applyProperties=function(t){!t.values_||me(this.values_||(this.values_={}),t.values_)},r.prototype.unset=function(t,i){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],js(this.values_)&&(this.values_=null),i||this.notify(t,n)}},r}(Gm),Lr=Mx,Lx=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Fx=function(e){Lx(r,e);function r(t){var i=this,n="v"+Ax.split("-")[0],a="Assertion failed. See https://openlayers.org/en/"+n+"/doc/errors/#"+t+" for details.";return i=e.call(this,a)||this,i.code=t,i.name="AssertionError",i.message=a,i}return r}(Error),Wm=Fx;function ft(e,r){if(!e)throw new Wm(r)}var Nx=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$x=function(e){Nx(r,e);function r(t){var i=e.call(this)||this;if(i.on,i.once,i.un,i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addChangeListener(i.geometryName_,i.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){var n=t;i.setGeometry(n)}else{var a=t;i.setProperties(a)}return i}return r.prototype.clone=function(){var t=new r(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},r.prototype.getGeometry=function(){return this.get(this.geometryName_)},r.prototype.getId=function(){return this.id_},r.prototype.getGeometryName=function(){return this.geometryName_},r.prototype.getStyle=function(){return this.style_},r.prototype.getStyleFunction=function(){return this.styleFunction_},r.prototype.handleGeometryChange_=function(){this.changed()},r.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Nt(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=wt(t,q.CHANGE,this.handleGeometryChange_,this)),this.changed()},r.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},r.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?Gx(t):void 0,this.changed()},r.prototype.setId=function(t){this.id_=t,this.changed()},r.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},r}(Lr);function Gx(e){if(typeof e=="function")return e;var r;if(Array.isArray(e))r=e;else{ft(typeof e.getZIndex=="function",41);var t=e;r=[t]}return function(){return r}}var X4=$x,mo=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",Yx=mo.indexOf("firefox")!==-1;mo.indexOf("safari")!==-1&&mo.indexOf("chrom")==-1;var jx=mo.indexOf("webkit")!==-1&&mo.indexOf("edge")==-1,Wx=mo.indexOf("macintosh")!==-1,Hm=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,zu=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,Hx=typeof Image!="undefined"&&Image.prototype.decode,Bm=function(){var e=!1;try{var r=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,r),window.removeEventListener("_",null,r)}catch(t){}return e}();new Array(6);function qr(){return[1,0,0,1,0,0]}function Bx(e,r){var t=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=r[0],u=r[1],h=r[2],f=r[3],c=r[4],d=r[5];return e[0]=t*l+n*u,e[1]=i*l+a*u,e[2]=t*h+n*f,e[3]=i*h+a*f,e[4]=t*c+n*d+o,e[5]=i*c+a*d+s,e}function Ux(e,r,t,i,n,a,o){return e[0]=r,e[1]=t,e[2]=i,e[3]=n,e[4]=a,e[5]=o,e}function zx(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function ne(e,r){var t=r[0],i=r[1];return r[0]=e[0]*t+e[2]*i+e[4],r[1]=e[1]*t+e[3]*i+e[5],r}function Vx(e,r,t){return Ux(e,r,0,0,t,0,0)}function Ei(e,r,t,i,n,a,o,s){var l=Math.sin(a),u=Math.cos(a);return e[0]=i*u,e[1]=n*l,e[2]=-i*l,e[3]=n*u,e[4]=o*i*u-s*i*l+r,e[5]=o*n*l+s*n*u+t,e}function Nc(e,r){var t=Xx(r);ft(t!==0,32);var i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],l=r[5];return e[0]=o/t,e[1]=-n/t,e[2]=-a/t,e[3]=i/t,e[4]=(a*l-o*s)/t,e[5]=-(i*l-n*s)/t,e}function Xx(e){return e[0]*e[3]-e[1]*e[2]}var Um;function zm(e){var r="matrix("+e.join(", ")+")";if(zu)return r;var t=Um||(Um=document.createElement("div"));return t.style.transform=r,t.style.transform}var Ws={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},ce={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Vm(e){for(var r=Fr(),t=0,i=e.length;t<i;++t)Bs(r,e[t]);return r}function $c(e,r,t){return t?(t[0]=e[0]-r,t[1]=e[1]-r,t[2]=e[2]+r,t[3]=e[3]+r,t):[e[0]-r,e[1]-r,e[2]+r,e[3]+r]}function Xm(e,r){return r?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r):e.slice()}function Gc(e,r,t){var i,n;return r<e[0]?i=e[0]-r:e[2]<r?i=r-e[2]:i=0,t<e[1]?n=e[1]-t:e[3]<t?n=t-e[3]:n=0,i*i+n*n}function Vu(e,r){return Km(e,r[0],r[1])}function ta(e,r){return e[0]<=r[0]&&r[2]<=e[2]&&e[1]<=r[1]&&r[3]<=e[3]}function Km(e,r,t){return e[0]<=r&&r<=e[2]&&e[1]<=t&&t<=e[3]}function Yc(e,r){var t=e[0],i=e[1],n=e[2],a=e[3],o=r[0],s=r[1],l=ce.UNKNOWN;return o<t?l=l|ce.LEFT:o>n&&(l=l|ce.RIGHT),s<i?l=l|ce.BELOW:s>a&&(l=l|ce.ABOVE),l===ce.UNKNOWN&&(l=ce.INTERSECTING),l}function Fr(){return[1/0,1/0,-1/0,-1/0]}function Si(e,r,t,i,n){return n?(n[0]=e,n[1]=r,n[2]=t,n[3]=i,n):[e,r,t,i]}function Xu(e){return Si(1/0,1/0,-1/0,-1/0,e)}function Kx(e,r){var t=e[0],i=e[1];return Si(t,i,t,i,r)}function Zx(e,r,t,i,n){var a=Xu(n);return Zm(a,e,r,t,i)}function Hs(e,r){return e[0]==r[0]&&e[2]==r[2]&&e[1]==r[1]&&e[3]==r[3]}function qx(e,r){return r[0]<e[0]&&(e[0]=r[0]),r[2]>e[2]&&(e[2]=r[2]),r[1]<e[1]&&(e[1]=r[1]),r[3]>e[3]&&(e[3]=r[3]),e}function Bs(e,r){r[0]<e[0]&&(e[0]=r[0]),r[0]>e[2]&&(e[2]=r[0]),r[1]<e[1]&&(e[1]=r[1]),r[1]>e[3]&&(e[3]=r[1])}function Zm(e,r,t,i,n){for(;t<i;t+=n)Qx(e,r[t],r[t+1]);return e}function Qx(e,r,t){e[0]=Math.min(e[0],r),e[1]=Math.min(e[1],t),e[2]=Math.max(e[2],r),e[3]=Math.max(e[3],t)}function qm(e,r){var t;return t=r(Ku(e)),t||(t=r(Zu(e)),t)||(t=r(qu(e)),t)||(t=r(ea(e)),t)?t:!1}function jc(e){var r=0;return Hc(e)||(r=Xt(e)*Nr(e)),r}function Ku(e){return[e[0],e[1]]}function Zu(e){return[e[2],e[1]]}function go(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function Jx(e,r){var t;return r===Ws.BOTTOM_LEFT?t=Ku(e):r===Ws.BOTTOM_RIGHT?t=Zu(e):r===Ws.TOP_LEFT?t=ea(e):r===Ws.TOP_RIGHT?t=qu(e):ft(!1,13),t}function Wc(e,r,t,i,n){var a=r*i[0]/2,o=r*i[1]/2,s=Math.cos(t),l=Math.sin(t),u=a*s,h=a*l,f=o*s,c=o*l,d=e[0],v=e[1],m=d-u+c,p=d-u-c,g=d+u-c,_=d+u+c,y=v-h-f,w=v-h+f,T=v+h+f,S=v+h-f;return Si(Math.min(m,p,g,_),Math.min(y,w,T,S),Math.max(m,p,g,_),Math.max(y,w,T,S),n)}function Nr(e){return e[3]-e[1]}function Us(e,r,t){var i=t||Fr();return qe(e,r)?(e[0]>r[0]?i[0]=e[0]:i[0]=r[0],e[1]>r[1]?i[1]=e[1]:i[1]=r[1],e[2]<r[2]?i[2]=e[2]:i[2]=r[2],e[3]<r[3]?i[3]=e[3]:i[3]=r[3]):Xu(i),i}function ea(e){return[e[0],e[3]]}function qu(e){return[e[2],e[3]]}function Xt(e){return e[2]-e[0]}function qe(e,r){return e[0]<=r[2]&&e[2]>=r[0]&&e[1]<=r[3]&&e[3]>=r[1]}function Hc(e){return e[2]<e[0]||e[3]<e[1]}function tC(e,r){return r?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r):e}function eC(e,r,t){var i=!1,n=Yc(e,r),a=Yc(e,t);if(n===ce.INTERSECTING||a===ce.INTERSECTING)i=!0;else{var o=e[0],s=e[1],l=e[2],u=e[3],h=r[0],f=r[1],c=t[0],d=t[1],v=(d-f)/(c-h),m=void 0,p=void 0;!!(a&ce.ABOVE)&&!(n&ce.ABOVE)&&(m=c-(d-u)/v,i=m>=o&&m<=l),!i&&!!(a&ce.RIGHT)&&!(n&ce.RIGHT)&&(p=d-(c-l)*v,i=p>=s&&p<=u),!i&&!!(a&ce.BELOW)&&!(n&ce.BELOW)&&(m=c-(d-s)/v,i=m>=o&&m<=l),!i&&!!(a&ce.LEFT)&&!(n&ce.LEFT)&&(p=d-(c-o)*v,i=p>=s&&p<=u)}return i}function rC(e,r){var t=r.getExtent(),i=go(e);if(r.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){var n=Xt(t),a=Math.floor((i[0]-t[0])/n),o=a*n;e[0]-=o,e[2]-=o}return e}function Qt(e,r,t){return Math.min(Math.max(e,r),t)}var iC=function(){var e;return"cosh"in Math?e=Math.cosh:e=function(r){var t=Math.exp(r);return(t+1/t)/2},e}(),nC=function(){var e;return"log2"in Math?e=Math.log2:e=function(r){return Math.log(r)*Math.LOG2E},e}();function aC(e,r,t,i,n,a){var o=n-t,s=a-i;if(o!==0||s!==0){var l=((e-t)*o+(r-i)*s)/(o*o+s*s);l>1?(t=n,i=a):l>0&&(t+=o*l,i+=s*l)}return yo(e,r,t,i)}function yo(e,r,t,i){var n=t-e,a=i-r;return n*n+a*a}function oC(e){for(var r=e.length,t=0;t<r;t++){for(var i=t,n=Math.abs(e[t][t]),a=t+1;a<r;a++){var o=Math.abs(e[a][t]);o>n&&(n=o,i=a)}if(n===0)return null;var s=e[i];e[i]=e[t],e[t]=s;for(var l=t+1;l<r;l++)for(var u=-e[l][t]/e[t][t],h=t;h<r+1;h++)t==h?e[l][h]=0:e[l][h]+=u*e[t][h]}for(var f=new Array(r),c=r-1;c>=0;c--){f[c]=e[c][r]/e[c][c];for(var d=c-1;d>=0;d--)e[d][r]-=e[d][c]*f[c]}return f}function Qu(e){return e*Math.PI/180}function vn(e,r){var t=e%r;return t*r<0?t+r:t}function xi(e,r,t){return e+t*(r-e)}var sC=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,lC=/^([a-z]*)$|^hsla?\(.*\)$/i;function Qm(e){return typeof e=="string"?e:eg(e)}function uC(e){var r=document.createElement("div");if(r.style.color=e,r.style.color!==""){document.body.appendChild(r);var t=getComputedStyle(r).color;return document.body.removeChild(r),t}else return""}var hC=function(){var e=1024,r={},t=0;return function(i){var n;if(r.hasOwnProperty(i))n=r[i];else{if(t>=e){var a=0;for(var o in r)(a++&3)==0&&(delete r[o],--t)}n=fC(i),r[i]=n,++t}return n}}();function Jm(e){return Array.isArray(e)?e:hC(e)}function fC(e){var r,t,i,n,a;if(lC.exec(e)&&(e=uC(e)),sC.exec(e)){var o=e.length-1,s=void 0;o<=4?s=1:s=2;var l=o===4||o===8;r=parseInt(e.substr(1+0*s,s),16),t=parseInt(e.substr(1+1*s,s),16),i=parseInt(e.substr(1+2*s,s),16),l?n=parseInt(e.substr(1+3*s,s),16):n=255,s==1&&(r=(r<<4)+r,t=(t<<4)+t,i=(i<<4)+i,l&&(n=(n<<4)+n)),a=[r,t,i,n/255]}else e.indexOf("rgba(")==0?(a=e.slice(5,-1).split(",").map(Number),tg(a)):e.indexOf("rgb(")==0?(a=e.slice(4,-1).split(",").map(Number),a.push(1),tg(a)):ft(!1,14);return a}function tg(e){return e[0]=Qt(e[0]+.5|0,0,255),e[1]=Qt(e[1]+.5|0,0,255),e[2]=Qt(e[2]+.5|0,0,255),e[3]=Qt(e[3],0,1),e}function eg(e){var r=e[0];r!=(r|0)&&(r=r+.5|0);var t=e[1];t!=(t|0)&&(t=t+.5|0);var i=e[2];i!=(i|0)&&(i=i+.5|0);var n=e[3]===void 0?1:e[3];return"rgba("+r+","+t+","+i+","+n+")"}var cC=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var r=0;for(var t in this.cache_){var i=this.cache_[t];(r++&3)==0&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}},e.prototype.get=function(r,t,i){var n=rg(r,t,i);return n in this.cache_?this.cache_[n]:null},e.prototype.set=function(r,t,i,n){var a=rg(r,t,i);this.cache_[a]=n,++this.cacheSize_},e.prototype.setSize=function(r){this.maxCacheSize_=r,this.expire()},e}();function rg(e,r,t){var i=t?Qm(t):"null";return r+":"+e+":"+i}var Ju=new cC,Rt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"},dC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),vC=function(e){dC(r,e);function r(t){var i=e.call(this)||this;i.on,i.once,i.un;var n=me({},t);return typeof t.properties=="object"&&(delete n.properties,me(n,t.properties)),n[Rt.OPACITY]=t.opacity!==void 0?t.opacity:1,ft(typeof n[Rt.OPACITY]=="number",64),n[Rt.VISIBLE]=t.visible!==void 0?t.visible:!0,n[Rt.Z_INDEX]=t.zIndex,n[Rt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,n[Rt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,n[Rt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,n[Rt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,i.className_=n.className!==void 0?t.className:"ol-layer",delete n.className,i.setProperties(n),i.state_=null,i}return r.prototype.getClassName=function(){return this.className_},r.prototype.getLayerState=function(t){var i=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return i.opacity=Qt(Math.round(this.getOpacity()*100)/100,0,1),i.sourceState=this.getSourceState(),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=n===void 0&&!i.managed?1/0:n,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i},r.prototype.getLayersArray=function(t){return ht()},r.prototype.getLayerStatesArray=function(t){return ht()},r.prototype.getExtent=function(){return this.get(Rt.EXTENT)},r.prototype.getMaxResolution=function(){return this.get(Rt.MAX_RESOLUTION)},r.prototype.getMinResolution=function(){return this.get(Rt.MIN_RESOLUTION)},r.prototype.getMinZoom=function(){return this.get(Rt.MIN_ZOOM)},r.prototype.getMaxZoom=function(){return this.get(Rt.MAX_ZOOM)},r.prototype.getOpacity=function(){return this.get(Rt.OPACITY)},r.prototype.getSourceState=function(){return ht()},r.prototype.getVisible=function(){return this.get(Rt.VISIBLE)},r.prototype.getZIndex=function(){return this.get(Rt.Z_INDEX)},r.prototype.setExtent=function(t){this.set(Rt.EXTENT,t)},r.prototype.setMaxResolution=function(t){this.set(Rt.MAX_RESOLUTION,t)},r.prototype.setMinResolution=function(t){this.set(Rt.MIN_RESOLUTION,t)},r.prototype.setMaxZoom=function(t){this.set(Rt.MAX_ZOOM,t)},r.prototype.setMinZoom=function(t){this.set(Rt.MIN_ZOOM,t)},r.prototype.setOpacity=function(t){ft(typeof t=="number",64),this.set(Rt.OPACITY,t)},r.prototype.setVisible=function(t){this.set(Rt.VISIBLE,t)},r.prototype.setZIndex=function(t){this.set(Rt.Z_INDEX,t)},r.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),e.prototype.disposeInternal.call(this)},r}(Lr),ig=vC,ra={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ia={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},pC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),mC=function(e){pC(r,e);function r(t){var i=this,n=me({},t);delete n.source,i=e.call(this,n)||this,i.on,i.once,i.un,i.mapPrecomposeKey_=null,i.mapRenderKey_=null,i.sourceChangeKey_=null,i.renderer_=null,t.render&&(i.render=t.render),t.map&&i.setMap(t.map),i.addChangeListener(Rt.SOURCE,i.handleSourcePropertyChange_);var a=t.source?t.source:null;return i.setSource(a),i}return r.prototype.getLayersArray=function(t){var i=t||[];return i.push(this),i},r.prototype.getLayerStatesArray=function(t){var i=t||[];return i.push(this.getLayerState()),i},r.prototype.getSource=function(){return this.get(Rt.SOURCE)||null},r.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():ia.UNDEFINED},r.prototype.handleSourceChange_=function(){this.changed()},r.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Nt(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=wt(t,q.CHANGE,this.handleSourceChange_,this)),this.changed()},r.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(i){return i([])})},r.prototype.render=function(t,i){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,i)},r.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Nt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Nt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=wt(t,ra.PRECOMPOSE,function(i){var n=i,a=n.frameState.layerStatesArray,o=this.getLayerState(!1);ft(!a.some(function(s){return s.layer===o.layer}),67),a.push(o)},this),this.mapRenderKey_=wt(this,q.CHANGE,t.render,t),this.changed())},r.prototype.setSource=function(t){this.set(Rt.SOURCE,t)},r.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},r.prototype.hasRenderer=function(){return!!this.renderer_},r.prototype.createRenderer=function(){return null},r.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),e.prototype.disposeInternal.call(this)},r}(ig);function th(e,r){if(!e.visible)return!1;var t=r.resolution;if(t<e.minResolution||t>=e.maxResolution)return!1;var i=r.zoom;return i>e.minZoom&&i<=e.maxZoom}var ng=mC;function ag(e,r,t){var i=t!==void 0?e.toFixed(t):""+e,n=i.indexOf(".");return n=n===-1?i.length:n,n>r?i:new Array(1+r-n).join("0")+i}function gC(e,r){return e[0]+=+r[0],e[1]+=+r[1],e}function og(e,r,t){var i=vn(r+180,360)-180,n=Math.abs(3600*i),a=t||0,o=Math.pow(10,a),s=Math.floor(n/3600),l=Math.floor((n-s*3600)/60),u=n-s*3600-l*60;return u=Math.ceil(u*o)/o,u>=60&&(u=0,l+=1),l>=60&&(l=0,s+=1),s+"\xB0 "+ag(l,2)+"\u2032 "+ag(u,2,a)+"\u2033"+(i==0?"":" "+e.charAt(i<0?1:0))}function Bc(e,r){for(var t=!0,i=e.length-1;i>=0;--i)if(e[i]!=r[i]){t=!1;break}return t}function Uc(e,r){var t=Math.cos(r),i=Math.sin(r),n=e[0]*t-e[1]*i,a=e[1]*t+e[0]*i;return e[0]=n,e[1]=a,e}function yC(e,r){return e[0]*=r,e[1]*=r,e}function K4(e,r){return e?og("NS",e[1],r)+" "+og("EW",e[0],r):""}function sg(e,r){if(r.canWrapX()){var t=Xt(r.getExtent()),i=_C(e,r,t);i&&(e[0]-=i*t)}return e}function _C(e,r,t){var i=r.getExtent(),n=0;if(r.canWrapX()&&(e[0]<i[0]||e[0]>i[2])){var a=t||Xt(i);n=Math.floor((e[0]-i[0])/a)}return n}var wC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),bC=function(e){wC(r,e);function r(t){var i=e.call(this)||this;return i.map_=t,i}return r.prototype.dispatchRenderEvent=function(t,i){ht()},r.prototype.calculateMatrices2D=function(t){var i=t.viewState,n=t.coordinateToPixelTransform,a=t.pixelToCoordinateTransform;Ei(n,t.size[0]/2,t.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),Nc(a,n)},r.prototype.forEachFeatureAtCoordinate=function(t,i,n,a,o,s,l,u){var h,f=i.viewState;function c(W,U,H,k){return o.call(s,U,W?H:null,k)}var d=f.projection,v=sg(t.slice(),d),m=[[0,0]];if(d.canWrapX()&&a){var p=d.getExtent(),g=Xt(p);m.push([-g,0],[g,0])}for(var _=i.layerStatesArray,y=_.length,w=[],T=[],S=0;S<m.length;S++)for(var x=y-1;x>=0;--x){var E=_[x],I=E.layer;if(I.hasRenderer()&&th(E,f)&&l.call(u,I)){var A=I.getRenderer(),P=I.getSource();if(A&&P){var R=P.getWrapX()?v:t,N=c.bind(null,E.managed);T[0]=R[0]+m[S][0],T[1]=R[1]+m[S][1],h=A.forEachFeatureAtCoordinate(T,i,n,N,w)}if(h)return h}}if(w.length!==0){var j=1/w.length;return w.forEach(function(W,U){return W.distanceSq+=U*j}),w.sort(function(W,U){return W.distanceSq-U.distanceSq}),w.some(function(W){return h=W.callback(W.feature,W.layer,W.geometry)}),h}},r.prototype.forEachLayerAtPixel=function(t,i,n,a,o){return ht()},r.prototype.hasFeatureAtCoordinate=function(t,i,n,a,o,s){var l=this.forEachFeatureAtCoordinate(t,i,n,a,vo,this,o,s);return l!==void 0},r.prototype.getMap=function(){return this.map_},r.prototype.renderFrame=function(t){ht()},r.prototype.scheduleExpireIconCache=function(t){Ju.canExpireCache()&&t.postRenderFunctions.push(TC)},r}(Mc);function TC(e,r){Ju.expire()}var EC=bC,SC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),xC=function(e){SC(r,e);function r(t,i,n,a){var o=e.call(this,t)||this;return o.inversePixelTransform=i,o.frameState=n,o.context=a,o}return r}(dn),lg=xC,eh="ol-hidden",CC="ol-selectable",rh="ol-unselectable",zc="ol-control",ug="ol-collapsed",OC=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),hg=["style","variant","weight","size","lineHeight","family"],fg=function(e){var r=e.match(OC);if(!r)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},i=0,n=hg.length;i<n;++i){var a=r[i+1];a!==void 0&&(t[hg[i]]=a)}return t.families=t.family.split(/,\s?/),t};function Vc(e){return e===1?"":String(Math.round(e*100)/100)}function pr(e,r,t,i){var n;return t&&t.length?n=t.shift():zu?n=new OffscreenCanvas(e||300,r||300):(n=document.createElement("canvas"),n.style.all="unset"),e&&(n.width=e),r&&(n.height=r),n.getContext("2d",i)}function IC(e){var r=e.offsetWidth,t=getComputedStyle(e);return r+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),r}function PC(e){var r=e.offsetHeight,t=getComputedStyle(e);return r+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),r}function cg(e,r){var t=r.parentNode;t&&t.replaceChild(e,r)}function ih(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function dg(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function kC(e,r){for(var t=e.childNodes,i=0;;++i){var n=t[i],a=r[i];if(!n&&!a)break;if(n!==a){if(!n){e.appendChild(a);continue}if(!a){e.removeChild(n),--i;continue}e.insertBefore(a,n)}}}var vg="10px sans-serif",Ci="#000",nh="round",zs=[],Vs=0,_o="round",Xs=10,Ks="#000",Zs="center",ah="middle",na=[0,0,0,0],qs=1,Oi=new Lr,DC=new po;DC.setSize=function(){console.warn("labelCache is deprecated.")};var wo=null,Xc,Kc={},RC=function(){var e=100,r="32px ",t=["monospace","serif"],i=t.length,n="wmytzilWMYTZIL@#/&?$%10\uF013",a,o;function s(u,h,f){for(var c=!0,d=0;d<i;++d){var v=t[d];if(o=oh(u+" "+h+" "+r+v,n),f!=v){var m=oh(u+" "+h+" "+r+f+","+v,n);c=c&&m!=o}}return!!c}function l(){for(var u=!0,h=Oi.getKeys(),f=0,c=h.length;f<c;++f){var d=h[f];Oi.get(d)<e&&(s.apply(this,d.split(`
`))?(Ys(Kc),wo=null,Xc=void 0,Oi.set(d,e)):(Oi.set(d,Oi.get(d)+1,!0),u=!1))}u&&(clearInterval(a),a=void 0)}return function(u){var h=fg(u);if(!!h)for(var f=h.families,c=0,d=f.length;c<d;++c){var v=f[c],m=h.style+`
`+h.weight+`
`+v;Oi.get(m)===void 0&&(Oi.set(m,e,!0),s(h.style,h.weight,v)||(Oi.set(m,0,!0),a===void 0&&(a=setInterval(l,32))))}}}(),AC=function(){var e;return function(r){var t=Kc[r];if(t==null){if(zu){var i=fg(r),n=pg(r,"\u017Dg"),a=isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight);t=a*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=r,document.body.appendChild(e),t=e.offsetHeight,document.body.removeChild(e);Kc[r]=t}return t}}();function pg(e,r){return wo||(wo=pr(1,1)),e!=Xc&&(wo.font=e,Xc=wo.font),wo.measureText(r)}function oh(e,r){return pg(e,r).width}function mg(e,r,t){if(r in t)return t[r];var i=oh(e,r);return t[r]=i,i}function MC(e,r,t){for(var i=r.length,n=0,a=0;a<i;++a){var o=oh(e,r[a]);n=Math.max(n,o),t.push(o)}return n}function LC(e,r,t,i,n,a,o,s,l,u,h){e.save(),t!==1&&(e.globalAlpha*=t),r&&e.setTransform.apply(e,r),i.contextInstructions?(e.translate(l,u),e.scale(h[0],h[1]),FC(i,e)):h[0]<0||h[1]<0?(e.translate(l,u),e.scale(h[0],h[1]),e.drawImage(i,n,a,o,s,0,0,o,s)):e.drawImage(i,n,a,o,s,l,u,o*h[0],s*h[1]),e.restore()}function FC(e,r){for(var t=e.contextInstructions,i=0,n=t.length;i<n;i+=2)Array.isArray(t[i+1])?r[t[i]].apply(r,t[i+1]):r[t[i]]=t[i+1]}var NC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$C=function(e){NC(r,e);function r(t){var i=e.call(this,t)||this;i.fontChangeListenerKey_=wt(Oi,qn.PROPERTYCHANGE,t.redrawText.bind(t)),i.element_=document.createElement("div");var n=i.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",i.element_.className=rh+" ol-layers";var a=t.getViewport();return a.insertBefore(i.element_,a.firstChild||null),i.children_=[],i.renderedVisible_=!0,i}return r.prototype.dispatchRenderEvent=function(t,i){var n=this.getMap();if(n.hasListener(t)){var a=new lg(t,void 0,i);n.dispatchEvent(a)}},r.prototype.disposeInternal=function(){Nt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},r.prototype.renderFrame=function(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(ra.PRECOMPOSE,t);var i=t.layerStatesArray.sort(function(c,d){return c.zIndex-d.zIndex}),n=t.viewState;this.children_.length=0;for(var a=[],o=null,s=0,l=i.length;s<l;++s){var u=i[s];if(t.layerIndex=s,!(!th(u,n)||u.sourceState!=ia.READY&&u.sourceState!=ia.UNDEFINED)){var h=u.layer,f=h.render(t,o);!f||(f!==o&&(this.children_.push(f),o=f),"getDeclutter"in h&&a.push(h))}}for(var s=a.length-1;s>=0;--s)a[s].renderDeclutter(t);kC(this.element_,this.children_),this.dispatchRenderEvent(ra.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)},r.prototype.forEachLayerAtPixel=function(t,i,n,a,o){for(var s=i.viewState,l=i.layerStatesArray,u=l.length,h=u-1;h>=0;--h){var f=l[h],c=f.layer;if(c.hasRenderer()&&th(f,s)&&o(c)){var d=c.getRenderer(),v=d.getDataAtPixel(t,i,n);if(v){var m=a(c,v);if(m)return m}}}},r}(EC),GC=$C,$e={ADD:"add",REMOVE:"remove"},gg=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yg={LENGTH:"length"},sh=function(e){gg(r,e);function r(t,i,n){var a=e.call(this,t)||this;return a.element=i,a.index=n,a}return r}(dn),YC=function(e){gg(r,e);function r(t,i){var n=e.call(this)||this;n.on,n.once,n.un;var a=i||{};if(n.unique_=!!a.unique,n.array_=t||[],n.unique_)for(var o=0,s=n.array_.length;o<s;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return r.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},r.prototype.extend=function(t){for(var i=0,n=t.length;i<n;++i)this.push(t[i]);return this},r.prototype.forEach=function(t){for(var i=this.array_,n=0,a=i.length;n<a;++n)t(i[n],n,i)},r.prototype.getArray=function(){return this.array_},r.prototype.item=function(t){return this.array_[t]},r.prototype.getLength=function(){return this.get(yg.LENGTH)},r.prototype.insertAt=function(t,i){this.unique_&&this.assertUnique_(i),this.array_.splice(t,0,i),this.updateLength_(),this.dispatchEvent(new sh($e.ADD,i,t))},r.prototype.pop=function(){return this.removeAt(this.getLength()-1)},r.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var i=this.getLength();return this.insertAt(i,t),this.getLength()},r.prototype.remove=function(t){for(var i=this.array_,n=0,a=i.length;n<a;++n)if(i[n]===t)return this.removeAt(n)},r.prototype.removeAt=function(t){var i=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new sh($e.REMOVE,i,t)),i},r.prototype.setAt=function(t,i){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(i,t);var a=this.array_[t];this.array_[t]=i,this.dispatchEvent(new sh($e.REMOVE,a,t)),this.dispatchEvent(new sh($e.ADD,i,t))}else{for(var o=n;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,i)}},r.prototype.updateLength_=function(){this.set(yg.LENGTH,this.array_.length)},r.prototype.assertUnique_=function(t,i){for(var n=0,a=this.array_.length;n<a;++n)if(this.array_[n]===t&&n!==i)throw new Wm(58)},r}(Lr),mr=YC,jC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Zc={LAYERS:"layers"},WC=function(e){jC(r,e);function r(t){var i=this,n=t||{},a=me({},n);delete a.layers;var o=n.layers;return i=e.call(this,a)||this,i.on,i.once,i.un,i.layersListenerKeys_=[],i.listenerKeys_={},i.addChangeListener(Zc.LAYERS,i.handleLayersChanged_),o?Array.isArray(o)?o=new mr(o.slice(),{unique:!0}):ft(typeof o.getArray=="function",43):o=new mr(void 0,{unique:!0}),i.setLayers(o),i}return r.prototype.handleLayerChange_=function(){this.changed()},r.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Nt),this.layersListenerKeys_.length=0;var t=this.getLayers();this.layersListenerKeys_.push(wt(t,$e.ADD,this.handleLayersAdd_,this),wt(t,$e.REMOVE,this.handleLayersRemove_,this));for(var i in this.listenerKeys_)this.listenerKeys_[i].forEach(Nt);Ys(this.listenerKeys_);for(var n=t.getArray(),a=0,o=n.length;a<o;a++){var s=n[a];this.listenerKeys_[bt(s)]=[wt(s,qn.PROPERTYCHANGE,this.handleLayerChange_,this),wt(s,q.CHANGE,this.handleLayerChange_,this)]}this.changed()},r.prototype.handleLayersAdd_=function(t){var i=t.element;this.listenerKeys_[bt(i)]=[wt(i,qn.PROPERTYCHANGE,this.handleLayerChange_,this),wt(i,q.CHANGE,this.handleLayerChange_,this)],this.changed()},r.prototype.handleLayersRemove_=function(t){var i=t.element,n=bt(i);this.listenerKeys_[n].forEach(Nt),delete this.listenerKeys_[n],this.changed()},r.prototype.getLayers=function(){return this.get(Zc.LAYERS)},r.prototype.setLayers=function(t){this.set(Zc.LAYERS,t)},r.prototype.getLayersArray=function(t){var i=t!==void 0?t:[];return this.getLayers().forEach(function(n){n.getLayersArray(i)}),i},r.prototype.getLayerStatesArray=function(t){var i=t!==void 0?t:[],n=i.length;this.getLayers().forEach(function(h){h.getLayerStatesArray(i)});var a=this.getLayerState(),o=a.zIndex;!t&&a.zIndex===void 0&&(o=0);for(var s=n,l=i.length;s<l;s++){var u=i[s];u.opacity*=a.opacity,u.visible=u.visible&&a.visible,u.maxResolution=Math.min(u.maxResolution,a.maxResolution),u.minResolution=Math.max(u.minResolution,a.minResolution),u.minZoom=Math.max(u.minZoom,a.minZoom),u.maxZoom=Math.min(u.maxZoom,a.maxZoom),a.extent!==void 0&&(u.extent!==void 0?u.extent=Us(u.extent,a.extent):u.extent=a.extent),u.zIndex===void 0&&(u.zIndex=o)}return i},r.prototype.getSourceState=function(){return ia.READY},r}(ig),HC=WC,BC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),UC=function(e){BC(r,e);function r(t,i,n){var a=e.call(this,t)||this;return a.map=i,a.frameState=n!==void 0?n:null,a}return r}(dn),lh=UC,zC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),VC=function(e){zC(r,e);function r(t,i,n,a,o){var s=e.call(this,t,i,o)||this;return s.originalEvent=n,s.pixel_=null,s.coordinate_=null,s.dragging=a!==void 0?a:!1,s}return Object.defineProperty(r.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),r.prototype.preventDefault=function(){e.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){e.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},r}(lh),pn=VC,$t={SINGLECLICK:"singleclick",CLICK:q.CLICK,DBLCLICK:q.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},qc={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},XC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),KC=function(e){XC(r,e);function r(t,i){var n=e.call(this,t)||this;n.map_=t,n.clickTimeoutId_,n.emulateClicks_=!1,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=i===void 0?1:i,n.down_=null;var a=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=a,n.pointerdownListenerKey_=wt(a,qc.POINTERDOWN,n.handlePointerDown_,n),n.originalPointerMoveEvent_,n.relayedListenerKey_=wt(a,qc.POINTERMOVE,n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(q.TOUCHMOVE,n.boundHandleTouchMove_,Bm?{passive:!1}:!1),n}return r.prototype.emulateClick_=function(t){var i=new pn($t.CLICK,this.map_,t);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new pn($t.DBLCLICK,this.map_,t),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var n=new pn($t.SINGLECLICK,this.map_,t);this.dispatchEvent(n)}.bind(this),250)},r.prototype.updateActivePointers_=function(t){var i=t;i.type==$t.POINTERUP||i.type==$t.POINTERCANCEL?delete this.trackedTouches_[i.pointerId]:i.type==$t.POINTERDOWN&&(this.trackedTouches_[i.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},r.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var i=new pn($t.POINTERUP,this.map_,t);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_===0&&(this.dragListenerKeys_.forEach(Nt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},r.prototype.isMouseActionButton_=function(t){return t.button===0},r.prototype.handlePointerDown_=function(t){this.emulateClicks_=this.activePointers_===0,this.updateActivePointers_(t);var i=new pn($t.POINTERDOWN,this.map_,t);this.dispatchEvent(i),this.down_={};for(var n in t){var a=t[n];this.down_[n]=typeof a=="function"?Jn:a}if(this.dragListenerKeys_.length===0){var o=this.map_.getOwnerDocument();this.dragListenerKeys_.push(wt(o,$t.POINTERMOVE,this.handlePointerMove_,this),wt(o,$t.POINTERUP,this.handlePointerUp_,this),wt(this.element_,$t.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==o&&this.dragListenerKeys_.push(wt(this.element_.getRootNode(),$t.POINTERUP,this.handlePointerUp_,this))}},r.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var i=new pn($t.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(i)}},r.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var i=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new pn(t.type,this.map_,t,i))},r.prototype.handleTouchMove_=function(t){var i=this.originalPointerMoveEvent_;(!i||i.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()},r.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},r.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Nt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(q.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Nt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Nt),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},r}(po),ZC=KC,Qs={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"},_e={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},uh=1/0,qC=function(){function e(r,t){this.priorityFunction_=r,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return e.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Ys(this.queuedElements_)},e.prototype.dequeue=function(){var r=this.elements_,t=this.priorities_,i=r[0];r.length==1?(r.length=0,t.length=0):(r[0]=r.pop(),t[0]=t.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},e.prototype.enqueue=function(r){ft(!(this.keyFunction_(r)in this.queuedElements_),31);var t=this.priorityFunction_(r);return t!=uh?(this.elements_.push(r),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(r)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},e.prototype.getCount=function(){return this.elements_.length},e.prototype.getLeftChildIndex_=function(r){return r*2+1},e.prototype.getRightChildIndex_=function(r){return r*2+2},e.prototype.getParentIndex_=function(r){return r-1>>1},e.prototype.heapify_=function(){var r;for(r=(this.elements_.length>>1)-1;r>=0;r--)this.siftUp_(r)},e.prototype.isEmpty=function(){return this.elements_.length===0},e.prototype.isKeyQueued=function(r){return r in this.queuedElements_},e.prototype.isQueued=function(r){return this.isKeyQueued(this.keyFunction_(r))},e.prototype.siftUp_=function(r){for(var t=this.elements_,i=this.priorities_,n=t.length,a=t[r],o=i[r],s=r;r<n>>1;){var l=this.getLeftChildIndex_(r),u=this.getRightChildIndex_(r),h=u<n&&i[u]<i[l]?u:l;t[r]=t[h],i[r]=i[h],r=h}t[r]=a,i[r]=o,this.siftDown_(s,r)},e.prototype.siftDown_=function(r,t){for(var i=this.elements_,n=this.priorities_,a=i[t],o=n[t];t>r;){var s=this.getParentIndex_(t);if(n[s]>o)i[t]=i[s],n[t]=n[s],t=s;else break}i[t]=a,n[t]=o},e.prototype.reprioritize=function(){var r=this.priorityFunction_,t=this.elements_,i=this.priorities_,n=0,a=t.length,o,s,l;for(s=0;s<a;++s)o=t[s],l=r(o),l==uh?delete this.queuedElements_[this.keyFunction_(o)]:(i[n]=l,t[n++]=o);t.length=n,i.length=n,this.heapify_()},e}(),QC=qC,K={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},JC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),tO=function(e){JC(r,e);function r(t,i){var n=e.call(this,function(a){return t.apply(null,a)},function(a){return a[0].getKey()})||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=i,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return r.prototype.enqueue=function(t){var i=e.prototype.enqueue.call(this,t);if(i){var n=t[0];n.addEventListener(q.CHANGE,this.boundHandleTileChange_)}return i},r.prototype.getTilesLoading=function(){return this.tilesLoading_},r.prototype.handleTileChange=function(t){var i=t.target,n=i.getState();if(n===K.LOADED||n===K.ERROR||n===K.EMPTY){i.removeEventListener(q.CHANGE,this.boundHandleTileChange_);var a=i.getKey();a in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[a],--this.tilesLoading_),this.tileChangeCallback_()}},r.prototype.loadMoreTiles=function(t,i){for(var n=0,a,o,s;this.tilesLoading_<t&&n<i&&this.getCount()>0;)o=this.dequeue()[0],s=o.getKey(),a=o.getState(),a===K.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++n,o.load())},r}(QC),eO=tO;function rO(e,r,t,i,n){if(!e||!(t in e.wantedTiles)||!e.wantedTiles[t][r.getKey()])return uh;var a=e.viewState.center,o=i[0]-a[0],s=i[1]-a[1];return 65536*Math.log(n)+Math.sqrt(o*o+s*s)/n}var rt={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},bo={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Qr={};Qr[bo.RADIANS]=6370997/(2*Math.PI);Qr[bo.DEGREES]=2*Math.PI*6370997/360;Qr[bo.FEET]=.3048;Qr[bo.METERS]=1;Qr[bo.USFEET]=1200/3937;var mn=bo,we={ANIMATING:0,INTERACTING:1},Jr={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},iO=42,Qc=256,nO=function(){function e(r){this.code_=r.code,this.units_=r.units,this.extent_=r.extent!==void 0?r.extent:null,this.worldExtent_=r.worldExtent!==void 0?r.worldExtent:null,this.axisOrientation_=r.axisOrientation!==void 0?r.axisOrientation:"enu",this.global_=r.global!==void 0?r.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=r.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=r.metersPerUnit}return e.prototype.canWrapX=function(){return this.canWrapX_},e.prototype.getCode=function(){return this.code_},e.prototype.getExtent=function(){return this.extent_},e.prototype.getUnits=function(){return this.units_},e.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Qr[this.units_]},e.prototype.getWorldExtent=function(){return this.worldExtent_},e.prototype.getAxisOrientation=function(){return this.axisOrientation_},e.prototype.isGlobal=function(){return this.global_},e.prototype.setGlobal=function(r){this.global_=r,this.canWrapX_=!!(r&&this.extent_)},e.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},e.prototype.setDefaultTileGrid=function(r){this.defaultTileGrid_=r},e.prototype.setExtent=function(r){this.extent_=r,this.canWrapX_=!!(this.global_&&r)},e.prototype.setWorldExtent=function(r){this.worldExtent_=r},e.prototype.setGetPointResolution=function(r){this.getPointResolutionFunc_=r},e.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e}(),_g=nO,aO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Js=6378137,To=Math.PI*Js,oO=[-To,-To,To,To],sO=[-180,-85,180,85],hh=Js*Math.log(Math.tan(Math.PI/2)),Eo=function(e){aO(r,e);function r(t){return e.call(this,{code:t,units:mn.METERS,extent:oO,global:!0,worldExtent:sO,getPointResolution:function(i,n){return i/iC(n[1]/Js)}})||this}return r}(_g),wg=[new Eo("EPSG:3857"),new Eo("EPSG:102100"),new Eo("EPSG:102113"),new Eo("EPSG:900913"),new Eo("http://www.opengis.net/def/crs/EPSG/0/3857"),new Eo("http://www.opengis.net/gml/srs/epsg.xml#3857")];function lO(e,r,t){var i=e.length,n=t>1?t:2,a=r;a===void 0&&(n>2?a=e.slice():a=new Array(i));for(var o=0;o<i;o+=n){a[o]=To*e[o]/180;var s=Js*Math.log(Math.tan(Math.PI*(+e[o+1]+90)/360));s>hh?s=hh:s<-hh&&(s=-hh),a[o+1]=s}return a}function uO(e,r,t){var i=e.length,n=t>1?t:2,a=r;a===void 0&&(n>2?a=e.slice():a=new Array(i));for(var o=0;o<i;o+=n)a[o]=180*e[o]/To,a[o+1]=360*Math.atan(Math.exp(e[o+1]/Js))/Math.PI-90;return a}var hO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),fO=6378137,bg=[-180,-90,180,90],cO=Math.PI*fO/180,aa=function(e){hO(r,e);function r(t,i){return e.call(this,{code:t,units:mn.DEGREES,extent:bg,axisOrientation:i,global:!0,metersPerUnit:cO,worldExtent:bg})||this}return r}(_g),Tg=[new aa("CRS:84"),new aa("EPSG:4326","neu"),new aa("urn:ogc:def:crs:OGC:1.3:CRS84"),new aa("urn:ogc:def:crs:OGC:2:84"),new aa("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new aa("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new aa("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Jc={};function dO(e){return Jc[e]||Jc[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function vO(e,r){Jc[e]=r}var So={};function fh(e,r,t){var i=e.getCode(),n=r.getCode();i in So||(So[i]={}),So[i][n]=t}function pO(e,r){var t;return e in So&&r in So[e]&&(t=So[e][r]),t}var mO=63710088e-1;function Eg(e,r,t){var i=t||mO,n=Qu(e[1]),a=Qu(r[1]),o=(a-n)/2,s=Qu(r[0]-e[0])/2,l=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(n)*Math.cos(a);return 2*i*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function td(e,r,t){var i;if(r!==void 0){for(var n=0,a=e.length;n<a;++n)r[n]=e[n];i=r}else i=e.slice();return i}function Sg(e,r,t){if(r!==void 0&&e!==r){for(var i=0,n=e.length;i<n;++i)r[i]=e[i];e=r}return e}function gO(e){vO(e.getCode(),e),fh(e,e,td)}function yO(e){e.forEach(gO)}function $r(e){return typeof e=="string"?dO(e):e||null}function xg(e,r,t,i){e=$r(e);var n,a=e.getPointResolutionFunc();if(a){if(n=a(r,t),i&&i!==e.getUnits()){var o=e.getMetersPerUnit();o&&(n=n*o/Qr[i])}}else{var s=e.getUnits();if(s==mn.DEGREES&&!i||i==mn.DEGREES)n=r;else{var l=rd(e,$r("EPSG:4326"));if(l===Sg&&s!==mn.DEGREES)n=r*e.getMetersPerUnit();else{var u=[t[0]-r/2,t[1],t[0]+r/2,t[1],t[0],t[1]-r/2,t[0],t[1]+r/2];u=l(u,u,2);var h=Eg(u.slice(0,2),u.slice(2,4)),f=Eg(u.slice(4,6),u.slice(6,8));n=(h+f)/2}var o=i?Qr[i]:e.getMetersPerUnit();o!==void 0&&(n/=o)}}return n}function Cg(e){yO(e),e.forEach(function(r){e.forEach(function(t){r!==t&&fh(r,t,td)})})}function _O(e,r,t,i){e.forEach(function(n){r.forEach(function(a){fh(n,a,t),fh(a,n,i)})})}function ed(e,r){return e?typeof e=="string"?$r(e):e:$r(r)}function Z4(e,r){var t=Og(e,r!==void 0?r:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=vn(i+180,360)-180),t}function xo(e,r){if(e===r)return!0;var t=e.getUnits()===r.getUnits();if(e.getCode()===r.getCode())return t;var i=rd(e,r);return i===td&&t}function rd(e,r){var t=e.getCode(),i=r.getCode(),n=pO(t,i);return n||(n=Sg),n}function ch(e,r){var t=$r(e),i=$r(r);return rd(t,i)}function Og(e,r,t){var i=ch(r,t);return i(e,void 0,e.length)}var wO=null;function bO(){return wO}function id(e,r){return e}function Ii(e,r){return e}function Ig(e,r){return e}function oa(e,r){return e}function TO(){Cg(wg),Cg(Tg),_O(Tg,wg,lO,uO)}TO();function Pg(e,r,t){return function(i,n,a,o,s){if(i){var l=r?0:a[0]*n,u=r?0:a[1]*n,h=s?s[0]:0,f=s?s[1]:0,c=e[0]+l/2+h,d=e[2]-l/2+h,v=e[1]+u/2+f,m=e[3]-u/2+f;c>d&&(c=(d+c)/2,d=c),v>m&&(v=(m+v)/2,m=v);var p=Qt(i[0],c,d),g=Qt(i[1],v,m),_=30*n;return o&&t&&(p+=-_*Math.log(1+Math.max(0,c-i[0])/_)+_*Math.log(1+Math.max(0,i[0]-d)/_),g+=-_*Math.log(1+Math.max(0,v-i[1])/_)+_*Math.log(1+Math.max(0,i[1]-m)/_)),[p,g]}else return}}function EO(e){return e}function nd(e,r,t,i){var n=Xt(r)/t[0],a=Nr(r)/t[1];return i?Math.min(e,Math.max(n,a)):Math.min(e,Math.min(n,a))}function ad(e,r,t){var i=Math.min(e,r),n=50;return i*=Math.log(1+n*Math.max(0,e/r-1))/n+1,t&&(i=Math.max(i,t),i/=Math.log(1+n*Math.max(0,t/e-1))/n+1),Qt(i,t/2,r*2)}function SO(e,r,t,i){return function(n,a,o,s){if(n!==void 0){var l=e[0],u=e[e.length-1],h=t?nd(l,t,o,i):l;if(s){var f=r!==void 0?r:!0;return f?ad(n,h,u):Qt(n,u,h)}var c=Math.min(h,n),d=Math.floor(Lc(e,c,a));return e[d]>h&&d<e.length-1?e[d+1]:e[d]}else return}}function xO(e,r,t,i,n,a){return function(o,s,l,u){if(o!==void 0){var h=n?nd(r,n,l,a):r,f=t!==void 0?t:0;if(u){var c=i!==void 0?i:!0;return c?ad(o,h,f):Qt(o,f,h)}var d=1e-9,v=Math.ceil(Math.log(r/h)/Math.log(e)-d),m=-s*(.5-d)+.5,p=Math.min(h,o),g=Math.floor(Math.log(r/p)/Math.log(e)+m),_=Math.max(v,g),y=r/Math.pow(e,_);return Qt(y,f,h)}else return}}function kg(e,r,t,i,n){return function(a,o,s,l){if(a!==void 0){var u=i?nd(e,i,s,n):e,h=t!==void 0?t:!0;return!h||!l?Qt(a,r,u):ad(a,u,r)}else return}}function od(e){if(e!==void 0)return 0}function Dg(e){if(e!==void 0)return e}function CO(e){var r=2*Math.PI/e;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/r+.5)*r,t}}function OO(e){var r=e||Qu(5);return function(t,i){if(i)return t;if(t!==void 0)return Math.abs(t)<=r?0:t}}function Rg(e){return Math.pow(e,3)}function Co(e){return 1-Rg(1-e)}function IO(e){return 3*e*e-2*e*e*e}function PO(e){return e}var be={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};function sa(e,r,t,i,n,a){for(var o=a||[],s=0,l=r;l<t;l+=i){var u=e[l],h=e[l+1];o[s++]=n[0]*u+n[2]*h+n[4],o[s++]=n[1]*u+n[3]*h+n[5]}return a&&o.length!=s&&(o.length=s),o}function Ag(e,r,t,i,n,a,o){for(var s=o||[],l=Math.cos(n),u=Math.sin(n),h=a[0],f=a[1],c=0,d=r;d<t;d+=i){var v=e[d]-h,m=e[d+1]-f;s[c++]=h+v*l-m*u,s[c++]=f+v*u+m*l;for(var p=d+2;p<d+i;++p)s[c++]=e[p]}return o&&s.length!=c&&(s.length=c),s}function kO(e,r,t,i,n,a,o,s){for(var l=s||[],u=o[0],h=o[1],f=0,c=r;c<t;c+=i){var d=e[c]-u,v=e[c+1]-h;l[f++]=u+n*d,l[f++]=h+a*v;for(var m=c+2;m<c+i;++m)l[f++]=e[m]}return s&&l.length!=f&&(l.length=f),l}function DO(e,r,t,i,n,a,o){for(var s=o||[],l=0,u=r;u<t;u+=i){s[l++]=e[u]+n,s[l++]=e[u+1]+a;for(var h=u+2;h<u+i;++h)s[l++]=e[h]}return o&&s.length!=l&&(s.length=l),s}var RO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Mg=qr(),AO=function(e){RO(r,e);function r(){var t=e.call(this)||this;return t.extent_=Fr(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=Ox(function(i,n,a){if(!a)return this.getSimplifiedGeometry(n);var o=this.clone();return o.applyTransform(a),o.getSimplifiedGeometry(n)}),t}return r.prototype.simplifyTransformed=function(t,i){return this.simplifyTransformedInternal(this.getRevision(),t,i)},r.prototype.clone=function(){return ht()},r.prototype.closestPointXY=function(t,i,n,a){return ht()},r.prototype.containsXY=function(t,i){var n=this.getClosestPoint([t,i]);return n[0]===t&&n[1]===i},r.prototype.getClosestPoint=function(t,i){var n=i||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},r.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},r.prototype.computeExtent=function(t){return ht()},r.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&Xu(i),this.extentRevision_=this.getRevision()}return tC(this.extent_,t)},r.prototype.rotate=function(t,i){ht()},r.prototype.scale=function(t,i,n){ht()},r.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},r.prototype.getSimplifiedGeometry=function(t){return ht()},r.prototype.getType=function(){return ht()},r.prototype.applyTransform=function(t){ht()},r.prototype.intersectsExtent=function(t){return ht()},r.prototype.translate=function(t,i){ht()},r.prototype.transform=function(t,i){var n=$r(t),a=n.getUnits()==mn.TILE_PIXELS?function(o,s,l){var u=n.getExtent(),h=n.getWorldExtent(),f=Nr(h)/Nr(u);return Ei(Mg,h[0],h[3],f,-f,0,0,0),sa(o,0,o.length,l,Mg,s),ch(n,i)(o,s,l)}:ch(n,i);return this.applyTransform(a),this},r}(Lr),MO=AO,LO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),FO=function(e){LO(r,e);function r(){var t=e.call(this)||this;return t.layout=be.XY,t.stride=2,t.flatCoordinates=null,t}return r.prototype.computeExtent=function(t){return Zx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},r.prototype.getCoordinates=function(){return ht()},r.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},r.prototype.getFlatCoordinates=function(){return this.flatCoordinates},r.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},r.prototype.getLayout=function(){return this.layout},r.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=this.getSimplifiedGeometryInternal(t),n=i.getFlatCoordinates();return n.length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},r.prototype.getSimplifiedGeometryInternal=function(t){return this},r.prototype.getStride=function(){return this.stride},r.prototype.setFlatCoordinates=function(t,i){this.stride=Lg(t),this.layout=t,this.flatCoordinates=i},r.prototype.setCoordinates=function(t,i){ht()},r.prototype.setLayout=function(t,i,n){var a;if(t)a=Lg(t);else{for(var o=0;o<n;++o)if(i.length===0){this.layout=be.XY,this.stride=2;return}else i=i[0];a=i.length,t=NO(a)}this.layout=t,this.stride=a},r.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},r.prototype.rotate=function(t,i){var n=this.getFlatCoordinates();if(n){var a=this.getStride();Ag(n,0,n.length,a,t,i,n),this.changed()}},r.prototype.scale=function(t,i,n){var a=i;a===void 0&&(a=t);var o=n;o||(o=go(this.getExtent()));var s=this.getFlatCoordinates();if(s){var l=this.getStride();kO(s,0,s.length,l,t,a,o,s),this.changed()}},r.prototype.translate=function(t,i){var n=this.getFlatCoordinates();if(n){var a=this.getStride();DO(n,0,n.length,a,t,i,n),this.changed()}},r}(MO);function NO(e){var r;return e==2?r=be.XY:e==3?r=be.XYZ:e==4&&(r=be.XYZM),r}function Lg(e){var r;return e==be.XY?r=2:e==be.XYZ||e==be.XYM?r=3:e==be.XYZM&&(r=4),r}function $O(e,r,t){var i=e.getFlatCoordinates();if(i){var n=e.getStride();return sa(i,0,i.length,n,r,t)}else return null}var dh=FO;function Fg(e,r,t,i,n,a,o){var s=e[r],l=e[r+1],u=e[t]-s,h=e[t+1]-l,f;if(u===0&&h===0)f=r;else{var c=((n-s)*u+(a-l)*h)/(u*u+h*h);if(c>1)f=t;else if(c>0){for(var d=0;d<i;++d)o[d]=xi(e[r+d],e[t+d],c);o.length=i;return}else f=r}for(var d=0;d<i;++d)o[d]=e[f+d];o.length=i}function sd(e,r,t,i,n){var a=e[r],o=e[r+1];for(r+=i;r<t;r+=i){var s=e[r],l=e[r+1],u=yo(a,o,s,l);u>n&&(n=u),a=s,o=l}return n}function GO(e,r,t,i,n){for(var a=0,o=t.length;a<o;++a){var s=t[a];n=sd(e,r,s,i,n),r=s}return n}function ld(e,r,t,i,n,a,o,s,l,u,h){if(r==t)return u;var f,c;if(n===0)if(c=yo(o,s,e[r],e[r+1]),c<u){for(f=0;f<i;++f)l[f]=e[r+f];return l.length=i,c}else return u;for(var d=h||[NaN,NaN],v=r+i;v<t;)if(Fg(e,v-i,v,i,o,s,d),c=yo(o,s,d[0],d[1]),c<u){for(u=c,f=0;f<i;++f)l[f]=d[f];l.length=i,v+=i}else v+=i*Math.max((Math.sqrt(c)-Math.sqrt(u))/n|0,1);if(a&&(Fg(e,t-i,r,i,o,s,d),c=yo(o,s,d[0],d[1]),c<u)){for(u=c,f=0;f<i;++f)l[f]=d[f];l.length=i}return u}function YO(e,r,t,i,n,a,o,s,l,u,h){for(var f=h||[NaN,NaN],c=0,d=t.length;c<d;++c){var v=t[c];u=ld(e,r,v,i,n,a,o,s,l,u,f),r=v}return u}function jO(e,r,t,i){for(var n=0,a=t.length;n<a;++n)e[r++]=t[n];return r}function ud(e,r,t,i){for(var n=0,a=t.length;n<a;++n)for(var o=t[n],s=0;s<i;++s)e[r++]=o[s];return r}function WO(e,r,t,i,n){for(var a=n||[],o=0,s=0,l=t.length;s<l;++s){var u=ud(e,r,t[s],i);a[o++]=u,r=u}return a.length=o,a}function Ng(e,r,t,i,n,a,o){var s=(t-r)/i;if(s<3){for(;r<t;r+=i)a[o++]=e[r],a[o++]=e[r+1];return o}var l=new Array(s);l[0]=1,l[s-1]=1;for(var u=[r,t-i],h=0;u.length>0;){for(var f=u.pop(),c=u.pop(),d=0,v=e[c],m=e[c+1],p=e[f],g=e[f+1],_=c+i;_<f;_+=i){var y=e[_],w=e[_+1],T=aC(y,w,v,m,p,g);T>d&&(h=_,d=T)}d>n&&(l[(h-r)/i]=1,c+i<h&&u.push(c,h),h+i<f&&u.push(h,f))}for(var _=0;_<s;++_)l[_]&&(a[o++]=e[r+_*i],a[o++]=e[r+_*i+1]);return o}function la(e,r){return r*Math.round(e/r)}function HO(e,r,t,i,n,a,o){if(r==t)return o;var s=la(e[r],n),l=la(e[r+1],n);r+=i,a[o++]=s,a[o++]=l;var u,h;do if(u=la(e[r],n),h=la(e[r+1],n),r+=i,r==t)return a[o++]=u,a[o++]=h,o;while(u==s&&h==l);for(;r<t;){var f=la(e[r],n),c=la(e[r+1],n);if(r+=i,!(f==u&&c==h)){var d=u-s,v=h-l,m=f-s,p=c-l;if(d*p==v*m&&(d<0&&m<d||d==m||d>0&&m>d)&&(v<0&&p<v||v==p||v>0&&p>v)){u=f,h=c;continue}a[o++]=u,a[o++]=h,s=u,l=h,u=f,h=c}}return a[o++]=u,a[o++]=h,o}function BO(e,r,t,i,n,a,o,s){for(var l=0,u=t.length;l<u;++l){var h=t[l];o=HO(e,r,h,i,n,a,o),s.push(o),r=h}return o}function ua(e,r,t,i,n){for(var a=n!==void 0?n:[],o=0,s=r;s<t;s+=i)a[o++]=e.slice(s,s+i);return a.length=o,a}function vh(e,r,t,i,n){for(var a=n!==void 0?n:[],o=0,s=0,l=t.length;s<l;++s){var u=t[s];a[o++]=ua(e,r,u,i,a[o]),r=u}return a.length=o,a}function $g(e,r,t,i,n){for(var a=n!==void 0?n:[],o=0,s=0,l=t.length;s<l;++s){var u=t[s];a[o++]=vh(e,r,u,i,a[o]),r=u[u.length-1]}return a.length=o,a}function Gg(e,r,t,i){for(var n=0,a=e[t-i],o=e[t-i+1];r<t;r+=i){var s=e[r],l=e[r+1];n+=o*s-a*l,a=s,o=l}return n/2}function UO(e,r,t,i){for(var n=0,a=0,o=t.length;a<o;++a){var s=t[a];n+=Gg(e,r,s,i),r=s}return n}var zO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),VO=function(e){zO(r,e);function r(t,i){var n=e.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?n.setFlatCoordinates(i,t):n.setCoordinates(t,i),n}return r.prototype.clone=function(){return new r(this.flatCoordinates.slice(),this.layout)},r.prototype.closestPointXY=function(t,i,n,a){return a<Gc(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ld(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,n,a))},r.prototype.getArea=function(){return Gg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getCoordinates=function(){return ua(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Ng(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new r(i,be.XY)},r.prototype.getType=function(){return rt.LINEAR_RING},r.prototype.intersectsExtent=function(t){return!1},r.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ud(this.flatCoordinates,0,t,this.stride),this.changed()},r}(dh),Yg=VO,XO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),KO=function(e){XO(r,e);function r(t,i){var n=e.call(this)||this;return n.setCoordinates(t,i),n}return r.prototype.clone=function(){var t=new r(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},r.prototype.closestPointXY=function(t,i,n,a){var o=this.flatCoordinates,s=yo(t,i,o[0],o[1]);if(s<a){for(var l=this.stride,u=0;u<l;++u)n[u]=o[u];return n.length=l,s}else return a},r.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},r.prototype.computeExtent=function(t){return Kx(this.flatCoordinates,t)},r.prototype.getType=function(){return rt.POINT},r.prototype.intersectsExtent=function(t){return Km(t,this.flatCoordinates[0],this.flatCoordinates[1])},r.prototype.setCoordinates=function(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=jO(this.flatCoordinates,0,t,this.stride),this.changed()},r}(dh),ZO=KO;function qO(e,r,t,i,n){var a=qm(n,function(o){return!ha(e,r,t,i,o[0],o[1])});return!a}function ha(e,r,t,i,n,a){for(var o=0,s=e[t-i],l=e[t-i+1];r<t;r+=i){var u=e[r],h=e[r+1];l<=a?h>a&&(u-s)*(a-l)-(n-s)*(h-l)>0&&o++:h<=a&&(u-s)*(a-l)-(n-s)*(h-l)<0&&o--,s=u,l=h}return o!==0}function jg(e,r,t,i,n,a){if(t.length===0||!ha(e,r,t[0],i,n,a))return!1;for(var o=1,s=t.length;o<s;++o)if(ha(e,t[o-1],t[o],i,n,a))return!1;return!0}function QO(e,r,t,i,n,a,o){for(var s,l,u,h,f,c,d,v=n[a+1],m=[],p=0,g=t.length;p<g;++p){var _=t[p];for(h=e[_-i],c=e[_-i+1],s=r;s<_;s+=i)f=e[s],d=e[s+1],(v<=c&&d<=v||c<=v&&v<=d)&&(u=(v-c)/(d-c)*(f-h)+h,m.push(u)),h=f,c=d}var y=NaN,w=-1/0;for(m.sort(Qn),h=m[0],s=1,l=m.length;s<l;++s){f=m[s];var T=Math.abs(f-h);T>w&&(u=(h+f)/2,jg(e,r,t,i,u,v)&&(y=u,w=T)),h=f}return isNaN(y)&&(y=n[a]),o?(o.push(y,v,w),o):[y,v,w]}function Wg(e,r,t,i,n){var a;for(r+=i;r<t;r+=i)if(a=n(e.slice(r-i,r),e.slice(r,r+i)),a)return a;return!1}function hd(e,r,t,i,n){var a=Zm(Fr(),e,r,t,i);return qe(n,a)?ta(n,a)||a[0]>=n[0]&&a[2]<=n[2]||a[1]>=n[1]&&a[3]<=n[3]?!0:Wg(e,r,t,i,function(o,s){return eC(n,o,s)}):!1}function JO(e,r,t,i,n){return!!(hd(e,r,t,i,n)||ha(e,r,t,i,n[0],n[1])||ha(e,r,t,i,n[0],n[3])||ha(e,r,t,i,n[2],n[1])||ha(e,r,t,i,n[2],n[3]))}function tI(e,r,t,i,n){if(!JO(e,r,t[0],i,n))return!1;if(t.length===1)return!0;for(var a=1,o=t.length;a<o;++a)if(qO(e,t[a-1],t[a],i,n)&&!hd(e,t[a-1],t[a],i,n))return!1;return!0}function eI(e,r,t,i){for(;r<t-i;){for(var n=0;n<i;++n){var a=e[r+n];e[r+n]=e[t-i+n],e[t-i+n]=a}r+=i,t-=i}}function Hg(e,r,t,i){for(var n=0,a=e[t-i],o=e[t-i+1];r<t;r+=i){var s=e[r],l=e[r+1];n+=(s-a)*(l+o),a=s,o=l}return n===0?void 0:n>0}function rI(e,r,t,i,n){for(var a=n!==void 0?n:!1,o=0,s=t.length;o<s;++o){var l=t[o],u=Hg(e,r,l,i);if(o===0){if(a&&u||!a&&!u)return!1}else if(a&&!u||!a&&u)return!1;r=l}return!0}function Bg(e,r,t,i,n){for(var a=n!==void 0?n:!1,o=0,s=t.length;o<s;++o){var l=t[o],u=Hg(e,r,l,i),h=o===0?a&&u||!a&&!u:a&&!u||!a&&u;h&&eI(e,r,l,i),r=l}return r}var iI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ug=function(e){iI(r,e);function r(t,i,n){var a=e.call(this)||this;return a.ends_=[],a.flatInteriorPointRevision_=-1,a.flatInteriorPoint_=null,a.maxDelta_=-1,a.maxDeltaRevision_=-1,a.orientedRevision_=-1,a.orientedFlatCoordinates_=null,i!==void 0&&n?(a.setFlatCoordinates(i,t),a.ends_=n):a.setCoordinates(t,i),a}return r.prototype.appendLinearRing=function(t){this.flatCoordinates?Fc(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},r.prototype.clone=function(){var t=new r(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},r.prototype.closestPointXY=function(t,i,n,a){return a<Gc(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(GO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),YO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,n,a))},r.prototype.containsXY=function(t,i){return jg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)},r.prototype.getArea=function(){return UO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},r.prototype.getCoordinates=function(t){var i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),Bg(i,0,this.ends_,this.stride,t)):i=this.flatCoordinates,vh(i,0,this.ends_,this.stride)},r.prototype.getEnds=function(){return this.ends_},r.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=go(this.getExtent());this.flatInteriorPoint_=QO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},r.prototype.getInteriorPoint=function(){return new ZO(this.getFlatInteriorPoint(),be.XYM)},r.prototype.getLinearRingCount=function(){return this.ends_.length},r.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Yg(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},r.prototype.getLinearRings=function(){for(var t=this.layout,i=this.flatCoordinates,n=this.ends_,a=[],o=0,s=0,l=n.length;s<l;++s){var u=n[s],h=new Yg(i.slice(o,u),t);a.push(h),o=u}return a},r.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;rI(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Bg(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},r.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=BO(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new r(i,be.XY,n)},r.prototype.getType=function(){return rt.POLYGON},r.prototype.intersectsExtent=function(t){return tI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},r.prototype.setCoordinates=function(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=WO(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()},r}(dh);function zg(e){var r=e[0],t=e[1],i=e[2],n=e[3],a=[r,t,r,n,i,n,i,t,r,t];return new Ug(a,be.XY,[a.length])}var nI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),fd=0,aI=function(e){nI(r,e);function r(t){var i=e.call(this)||this;i.on,i.once,i.un;var n=me({},t);return i.hints_=[0,0],i.animations_=[],i.updateAnimationKey_,i.projection_=ed(n.projection,"EPSG:3857"),i.viewportSize_=[100,100],i.targetCenter_=null,i.targetResolution_,i.targetRotation_,i.nextCenter_=null,i.nextResolution_,i.nextRotation_,i.cancelAnchor_=void 0,n.center&&(n.center=Ii(n.center,i.projection_)),n.extent&&(n.extent=oa(n.extent,i.projection_)),i.applyOptions_(n),i}return r.prototype.applyOptions_=function(t){var i={},n=sI(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;var a=oI(t),o=n.constraint,s=lI(t);this.constraints_={center:a,resolution:o,rotation:s},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom),this.setProperties(i),this.options_=t},Object.defineProperty(r.prototype,"padding",{get:function(){return this.padding_},set:function(t){var i=this.padding_;this.padding_=t;var n=this.getCenter();if(n){var a=t||[0,0,0,0];i=i||[0,0,0,0];var o=this.getResolution(),s=o/2*(a[3]-i[3]+i[1]-a[1]),l=o/2*(a[0]-i[0]+i[2]-a[2]);this.setCenterInternal([n[0]+s,n[1]-l])}},enumerable:!1,configurable:!0}),r.prototype.getUpdatedOptions_=function(t){var i=me({},this.options_);return i.resolution!==void 0?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),me({},i,t)},r.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var i=new Array(arguments.length),n=0;n<i.length;++n){var a=arguments[n];a.center&&(a=me({},a),a.center=Ii(a.center,this.getProjection())),a.anchor&&(a=me({},a),a.anchor=Ii(a.anchor,this.getProjection())),i[n]=a}this.animateInternal.apply(this,i)},r.prototype.animateInternal=function(t){var i=arguments.length,n;i>1&&typeof arguments[i-1]=="function"&&(n=arguments[i-1],--i);for(var a=0;a<i&&!this.isDef();++a){var o=arguments[a];o.center&&this.setCenterInternal(o.center),o.zoom!==void 0?this.setZoom(o.zoom):o.resolution&&this.setResolution(o.resolution),o.rotation!==void 0&&this.setRotation(o.rotation)}if(a===i){n&&ph(n,!0);return}for(var s=Date.now(),l=this.targetCenter_.slice(),u=this.targetResolution_,h=this.targetRotation_,f=[];a<i;++a){var c=arguments[a],d={start:s,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||IO,callback:n};if(c.center&&(d.sourceCenter=l,d.targetCenter=c.center.slice(),l=d.targetCenter),c.zoom!==void 0?(d.sourceResolution=u,d.targetResolution=this.getResolutionForZoom(c.zoom),u=d.targetResolution):c.resolution&&(d.sourceResolution=u,d.targetResolution=c.resolution,u=d.targetResolution),c.rotation!==void 0){d.sourceRotation=h;var v=vn(c.rotation-h+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=h+v,h=d.targetRotation}uI(d)?d.complete=!0:s+=d.duration,f.push(d)}this.animations_.push(f),this.setHint(we.ANIMATING,1),this.updateAnimations_()},r.prototype.getAnimating=function(){return this.hints_[we.ANIMATING]>0},r.prototype.getInteracting=function(){return this.hints_[we.INTERACTING]>0},r.prototype.cancelAnimations=function(){this.setHint(we.ANIMATING,-this.hints_[we.ANIMATING]);for(var t,i=0,n=this.animations_.length;i<n;++i){var a=this.animations_[i];if(a[0].callback&&ph(a[0].callback,!1),!t)for(var o=0,s=a.length;o<s;++o){var l=a[o];if(!l.complete){t=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},r.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var t=Date.now(),i=!1,n=this.animations_.length-1;n>=0;--n){for(var a=this.animations_[n],o=!0,s=0,l=a.length;s<l;++s){var u=a[s];if(!u.complete){var h=t-u.start,f=u.duration>0?h/u.duration:1;f>=1?(u.complete=!0,f=1):o=!1;var c=u.easing(f);if(u.sourceCenter){var d=u.sourceCenter[0],v=u.sourceCenter[1],m=u.targetCenter[0],p=u.targetCenter[1];this.nextCenter_=u.targetCenter;var g=d+c*(m-d),_=v+c*(p-v);this.targetCenter_=[g,_]}if(u.sourceResolution&&u.targetResolution){var y=c===1?u.targetResolution:u.sourceResolution+c*(u.targetResolution-u.sourceResolution);if(u.anchor){var w=this.getViewportSize_(this.getRotation()),T=this.constraints_.resolution(y,0,w,!0);this.targetCenter_=this.calculateCenterZoom(T,u.anchor)}this.nextResolution_=u.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(u.sourceRotation!==void 0&&u.targetRotation!==void 0){var S=c===1?vn(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+c*(u.targetRotation-u.sourceRotation);if(u.anchor){var x=this.constraints_.rotation(S,!0);this.targetCenter_=this.calculateCenterRotate(x,u.anchor)}this.nextRotation_=u.targetRotation,this.targetRotation_=S}if(this.applyTargetState_(!0),i=!0,!u.complete)break}}if(o){this.animations_[n]=null,this.setHint(we.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var E=a[0].callback;E&&ph(E,!0)}}this.animations_=this.animations_.filter(Boolean),i&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},r.prototype.calculateCenterRotate=function(t,i){var n,a=this.getCenterInternal();return a!==void 0&&(n=[a[0]-i[0],a[1]-i[1]],Uc(n,t-this.getRotation()),gC(n,i)),n},r.prototype.calculateCenterZoom=function(t,i){var n,a=this.getCenterInternal(),o=this.getResolution();if(a!==void 0&&o!==void 0){var s=i[0]-t*(i[0]-a[0])/o,l=i[1]-t*(i[1]-a[1])/o;n=[s,l]}return n},r.prototype.getViewportSize_=function(t){var i=this.viewportSize_;if(t){var n=i[0],a=i[1];return[Math.abs(n*Math.cos(t))+Math.abs(a*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(a*Math.cos(t))]}else return i},r.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},r.prototype.getCenter=function(){var t=this.getCenterInternal();return t&&id(t,this.getProjection())},r.prototype.getCenterInternal=function(){return this.get(Jr.CENTER)},r.prototype.getConstraints=function(){return this.constraints_},r.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},r.prototype.getHints=function(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},r.prototype.calculateExtent=function(t){var i=this.calculateExtentInternal(t);return Ig(i,this.getProjection())},r.prototype.calculateExtentInternal=function(t){var i=t||this.getViewportSizeMinusPadding_(),n=this.getCenterInternal();ft(n,1);var a=this.getResolution();ft(a!==void 0,2);var o=this.getRotation();return ft(o!==void 0,3),Wc(n,a,o,i)},r.prototype.getMaxResolution=function(){return this.maxResolution_},r.prototype.getMinResolution=function(){return this.minResolution_},r.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},r.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},r.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},r.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},r.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},r.prototype.getProjection=function(){return this.projection_},r.prototype.getResolution=function(){return this.get(Jr.RESOLUTION)},r.prototype.getResolutions=function(){return this.resolutions_},r.prototype.getResolutionForExtent=function(t,i){return this.getResolutionForExtentInternal(oa(t,this.getProjection()),i)},r.prototype.getResolutionForExtentInternal=function(t,i){var n=i||this.getViewportSizeMinusPadding_(),a=Xt(t)/n[0],o=Nr(t)/n[1];return Math.max(a,o)},r.prototype.getResolutionForValueFunction=function(t){var i=t||2,n=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,o=Math.log(n/a)/Math.log(i);return function(s){var l=n/Math.pow(i,s*o);return l}},r.prototype.getRotation=function(){return this.get(Jr.ROTATION)},r.prototype.getValueForResolutionFunction=function(t){var i=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,o=Math.log(n/a)/i;return function(s){var l=Math.log(n/s)/i/o;return l}},r.prototype.getViewportSizeMinusPadding_=function(t){var i=this.getViewportSize_(t),n=this.padding_;return n&&(i=[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]),i},r.prototype.getState=function(){var t=this.getProjection(),i=this.getResolution(),n=this.getRotation(),a=this.getCenterInternal(),o=this.padding_;if(o){var s=this.getViewportSizeMinusPadding_();a=cd(a,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],i,n)}return{center:a.slice(0),projection:t!==void 0?t:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}},r.prototype.getZoom=function(){var t,i=this.getResolution();return i!==void 0&&(t=this.getZoomForResolution(i)),t},r.prototype.getZoomForResolution=function(t){var i=this.minZoom_||0,n,a;if(this.resolutions_){var o=Lc(this.resolutions_,t,1);i=o,n=this.resolutions_[o],o==this.resolutions_.length-1?a=2:a=n/this.resolutions_[o+1]}else n=this.maxResolution_,a=this.zoomFactor_;return i+Math.log(n/t)/Math.log(a)},r.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var i=Qt(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(n,Qt(t-i,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},r.prototype.fit=function(t,i){var n;if(ft(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){ft(!Hc(t),25);var a=oa(t,this.getProjection());n=zg(a)}else if(t.getType()===rt.CIRCLE){var a=oa(t.getExtent(),this.getProjection());n=zg(a),n.rotate(this.getRotation(),go(a))}else{var o=bO();o?n=t.clone().transform(o,this.getProjection()):n=t}this.fitInternal(n,i)},r.prototype.rotatedExtentForGeometry=function(t){for(var i=this.getRotation(),n=Math.cos(i),a=Math.sin(-i),o=t.getFlatCoordinates(),s=t.getStride(),l=1/0,u=1/0,h=-1/0,f=-1/0,c=0,d=o.length;c<d;c+=s){var v=o[c]*n-o[c+1]*a,m=o[c]*a+o[c+1]*n;l=Math.min(l,v),u=Math.min(u,m),h=Math.max(h,v),f=Math.max(f,m)}return[l,u,h,f]},r.prototype.fitInternal=function(t,i){var n=i||{},a=n.size;a||(a=this.getViewportSizeMinusPadding_());var o=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1,l;n.minResolution!==void 0?l=n.minResolution:n.maxZoom!==void 0?l=this.getResolutionForZoom(n.maxZoom):l=0;var u=this.rotatedExtentForGeometry(t),h=this.getResolutionForExtentInternal(u,[a[0]-o[1]-o[3],a[1]-o[0]-o[2]]);h=isNaN(h)?l:Math.max(h,l),h=this.getConstrainedResolution(h,s?0:1);var f=this.getRotation(),c=Math.sin(f),d=Math.cos(f),v=go(u);v[0]+=(o[1]-o[3])/2*h,v[1]+=(o[0]-o[2])/2*h;var m=v[0]*d-v[1]*c,p=v[1]*d+v[0]*c,g=this.getConstrainedCenter([m,p],h),_=n.callback?n.callback:Jn;n.duration!==void 0?this.animateInternal({resolution:h,center:g,duration:n.duration,easing:n.easing},_):(this.targetResolution_=h,this.targetCenter_=g,this.applyTargetState_(!1,!0),ph(_,!0))},r.prototype.centerOn=function(t,i,n){this.centerOnInternal(Ii(t,this.getProjection()),i,n)},r.prototype.centerOnInternal=function(t,i,n){this.setCenterInternal(cd(t,i,n,this.getResolution(),this.getRotation()))},r.prototype.calculateCenterShift=function(t,i,n,a){var o,s=this.padding_;if(s&&t){var l=this.getViewportSizeMinusPadding_(-n),u=cd(t,a,[l[0]/2+s[3],l[1]/2+s[0]],i,n);o=[t[0]-u[0],t[1]-u[1]]}return o},r.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},r.prototype.adjustCenter=function(t){var i=id(this.targetCenter_,this.getProjection());this.setCenter([i[0]+t[0],i[1]+t[1]])},r.prototype.adjustCenterInternal=function(t){var i=this.targetCenter_;this.setCenterInternal([i[0]+t[0],i[1]+t[1]])},r.prototype.adjustResolution=function(t,i){var n=i&&Ii(i,this.getProjection());this.adjustResolutionInternal(t,n)},r.prototype.adjustResolutionInternal=function(t,i){var n=this.getAnimating()||this.getInteracting(),a=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,a,n);i&&(this.targetCenter_=this.calculateCenterZoom(o,i)),this.targetResolution_*=t,this.applyTargetState_()},r.prototype.adjustZoom=function(t,i){this.adjustResolution(Math.pow(this.zoomFactor_,-t),i)},r.prototype.adjustRotation=function(t,i){i&&(i=Ii(i,this.getProjection())),this.adjustRotationInternal(t,i)},r.prototype.adjustRotationInternal=function(t,i){var n=this.getAnimating()||this.getInteracting(),a=this.constraints_.rotation(this.targetRotation_+t,n);i&&(this.targetCenter_=this.calculateCenterRotate(a,i)),this.targetRotation_+=t,this.applyTargetState_()},r.prototype.setCenter=function(t){this.setCenterInternal(Ii(t,this.getProjection()))},r.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},r.prototype.setHint=function(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]},r.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},r.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},r.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},r.prototype.applyTargetState_=function(t,i){var n=this.getAnimating()||this.getInteracting()||i,a=this.constraints_.rotation(this.targetRotation_,n),o=this.getViewportSize_(a),s=this.constraints_.resolution(this.targetResolution_,0,o,n),l=this.constraints_.center(this.targetCenter_,s,o,n,this.calculateCenterShift(this.targetCenter_,s,a,o));this.get(Jr.ROTATION)!==a&&this.set(Jr.ROTATION,a),this.get(Jr.RESOLUTION)!==s&&this.set(Jr.RESOLUTION,s),(!this.get(Jr.CENTER)||!Bc(this.get(Jr.CENTER),l))&&this.set(Jr.CENTER,l),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},r.prototype.resolveConstraints=function(t,i,n){var a=t!==void 0?t:200,o=i||0,s=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(s),u=this.constraints_.resolution(this.targetResolution_,o,l),h=this.constraints_.center(this.targetCenter_,u,l,!1,this.calculateCenterShift(this.targetCenter_,u,s,l));if(a===0&&!this.cancelAnchor_){this.targetResolution_=u,this.targetRotation_=s,this.targetCenter_=h,this.applyTargetState_();return}var f=n||(a===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==u||this.getRotation()!==s||!this.getCenterInternal()||!Bc(this.getCenterInternal(),h))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:h,resolution:u,duration:a,easing:Co,anchor:f}))},r.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(we.INTERACTING,1)},r.prototype.endInteraction=function(t,i,n){var a=n&&Ii(n,this.getProjection());this.endInteractionInternal(t,i,a)},r.prototype.endInteractionInternal=function(t,i,n){this.setHint(we.INTERACTING,-1),this.resolveConstraints(t,i,n)},r.prototype.getConstrainedCenter=function(t,i){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,i||this.getResolution(),n)},r.prototype.getConstrainedZoom=function(t,i){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,i))},r.prototype.getConstrainedResolution=function(t,i){var n=i||0,a=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,a)},r}(Lr);function ph(e,r){setTimeout(function(){e(r)},0)}function oI(e){if(e.extent!==void 0){var r=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return Pg(e.extent,e.constrainOnlyCenter,r)}var t=ed(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){var i=t.getExtent().slice();return i[0]=-1/0,i[2]=1/0,Pg(i,!1,!1)}return EO}function sI(e){var r,t,i,n=28,a=2,o=e.minZoom!==void 0?e.minZoom:fd,s=e.maxZoom!==void 0?e.maxZoom:n,l=e.zoomFactor!==void 0?e.zoomFactor:a,u=e.multiWorld!==void 0?e.multiWorld:!1,h=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,f=e.showFullExtent!==void 0?e.showFullExtent:!1,c=ed(e.projection,"EPSG:3857"),d=c.getExtent(),v=e.constrainOnlyCenter,m=e.extent;if(!u&&!m&&c.isGlobal()&&(v=!1,m=d),e.resolutions!==void 0){var p=e.resolutions;t=p[o],i=p[s]!==void 0?p[s]:p[p.length-1],e.constrainResolution?r=SO(p,h,!v&&m,f):r=kg(t,i,h,!v&&m,f)}else{var g=d?Math.max(Xt(d),Nr(d)):360*Qr[mn.DEGREES]/c.getMetersPerUnit(),_=g/Qc/Math.pow(a,fd),y=_/Math.pow(a,n-fd);t=e.maxResolution,t!==void 0?o=0:t=_/Math.pow(l,o),i=e.minResolution,i===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?i=t/Math.pow(l,s):i=_/Math.pow(l,s):i=y),s=o+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,s-o),e.constrainResolution?r=xO(l,t,i,h,!v&&m,f):r=kg(t,i,h,!v&&m,f)}return{constraint:r,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:l}}function lI(e){var r=e.enableRotation!==void 0?e.enableRotation:!0;if(r){var t=e.constrainRotation;return t===void 0||t===!0?OO():t===!1?Dg:typeof t=="number"?CO(t):Dg}else return od}function uI(e){return!(e.sourceCenter&&e.targetCenter&&!Bc(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function cd(e,r,t,i,n){var a=Math.cos(-n),o=Math.sin(-n),s=e[0]*a-e[1]*o,l=e[1]*a+e[0]*o;s+=(r[0]/2-t[0])*i,l+=(t[1]-r[1]/2)*i,o=-o;var u=s*a-l*o,h=l*a+s*o;return[u,h]}var fa=aI;function Vg(e){return e[0]>0&&e[1]>0}function hI(e,r,t){return t===void 0&&(t=[0,0]),t[0]=e[0]*r+.5|0,t[1]=e[1]*r+.5|0,t}function ti(e,r){return Array.isArray(e)?e:(r===void 0?r=[e,e]:(r[0]=e,r[1]=e),r)}var fI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),cI=function(e){fI(r,e);function r(t){var i=e.call(this)||this;i.on,i.once,i.un;var n=dI(t);i.boundHandleBrowserEvent_=i.handleBrowserEvent.bind(i),i.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,i.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:Hm,i.postRenderTimeoutHandle_,i.animationDelayKey_,i.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(i),i.coordinateToPixelTransform_=qr(),i.pixelToCoordinateTransform_=qr(),i.frameIndex_=0,i.frameState_=null,i.previousExtent_=null,i.viewPropertyListenerKey_=null,i.viewChangeListenerKey_=null,i.layerGroupPropertyListenerKeys_=null,i.viewport_=document.createElement("div"),i.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.viewport_.style.position="relative",i.viewport_.style.overflow="hidden",i.viewport_.style.width="100%",i.viewport_.style.height="100%",i.overlayContainer_=document.createElement("div"),i.overlayContainer_.style.position="absolute",i.overlayContainer_.style.zIndex="0",i.overlayContainer_.style.width="100%",i.overlayContainer_.style.height="100%",i.overlayContainer_.style.pointerEvents="none",i.overlayContainer_.className="ol-overlaycontainer",i.viewport_.appendChild(i.overlayContainer_),i.overlayContainerStopEvent_=document.createElement("div"),i.overlayContainerStopEvent_.style.position="absolute",i.overlayContainerStopEvent_.style.zIndex="0",i.overlayContainerStopEvent_.style.width="100%",i.overlayContainerStopEvent_.style.height="100%",i.overlayContainerStopEvent_.style.pointerEvents="none",i.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",i.viewport_.appendChild(i.overlayContainerStopEvent_),i.mapBrowserEventHandler_=null,i.moveTolerance_=t.moveTolerance,i.keyboardEventTarget_=n.keyboardEventTarget,i.keyHandlerKeys_=null,i.controls=n.controls||new mr,i.interactions=n.interactions||new mr,i.overlays_=n.overlays,i.overlayIdIndex_={},i.renderer_=null,i.handleResize_,i.postRenderFunctions_=[],i.tileQueue_=new eO(i.getTilePriority.bind(i),i.handleTileChange_.bind(i)),i.addChangeListener(_e.LAYERGROUP,i.handleLayerGroupChanged_),i.addChangeListener(_e.VIEW,i.handleViewChanged_),i.addChangeListener(_e.SIZE,i.handleSizeChanged_),i.addChangeListener(_e.TARGET,i.handleTargetChanged_),i.setProperties(n.values);var a=i;return t.view&&!(t.view instanceof fa)&&t.view.then(function(o){a.setView(new fa(o))}),i.controls.addEventListener($e.ADD,function(o){o.element.setMap(this)}.bind(i)),i.controls.addEventListener($e.REMOVE,function(o){o.element.setMap(null)}.bind(i)),i.interactions.addEventListener($e.ADD,function(o){o.element.setMap(this)}.bind(i)),i.interactions.addEventListener($e.REMOVE,function(o){o.element.setMap(null)}.bind(i)),i.overlays_.addEventListener($e.ADD,function(o){this.addOverlayInternal_(o.element)}.bind(i)),i.overlays_.addEventListener($e.REMOVE,function(o){var s=o.element,l=s.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],o.element.setMap(null)}.bind(i)),i.controls.forEach(function(o){o.setMap(this)}.bind(i)),i.interactions.forEach(function(o){o.setMap(this)}.bind(i)),i.overlays_.forEach(i.addOverlayInternal_.bind(i)),i}return r.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},r.prototype.addControl=function(t){this.getControls().push(t)},r.prototype.addInteraction=function(t){this.getInteractions().push(t)},r.prototype.addLayer=function(t){var i=this.getLayerGroup().getLayers();i.push(t)},r.prototype.addOverlay=function(t){this.getOverlays().push(t)},r.prototype.addOverlayInternal_=function(t){var i=t.getId();i!==void 0&&(this.overlayIdIndex_[i.toString()]=t),t.setMap(this)},r.prototype.disposeInternal=function(){this.setTarget(null),e.prototype.disposeInternal.call(this)},r.prototype.forEachFeatureAtPixel=function(t,i,n){if(!!this.frameState_){var a=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};var o=n.hitTolerance!==void 0?n.hitTolerance:0,s=n.layerFilter!==void 0?n.layerFilter:vo,l=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(a,this.frameState_,o,l,i,null,s,null)}},r.prototype.getFeaturesAtPixel=function(t,i){var n=[];return this.forEachFeatureAtPixel(t,function(a){n.push(a)},i),n},r.prototype.forEachLayerAtPixel=function(t,i,n){if(!!this.frameState_){var a=n||{},o=a.hitTolerance!==void 0?a.hitTolerance:0,s=a.layerFilter||vo;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,o,i,s)}},r.prototype.hasFeatureAtPixel=function(t,i){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};var a=i.layerFilter!==void 0?i.layerFilter:vo,o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,o,s,a,null)},r.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},r.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},r.prototype.getEventPixel=function(t){var i=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-i.left,n.clientY-i.top]},r.prototype.getTarget=function(){return this.get(_e.TARGET)},r.prototype.getTargetElement=function(){var t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null},r.prototype.getCoordinateFromPixel=function(t){return id(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},r.prototype.getCoordinateFromPixelInternal=function(t){var i=this.frameState_;return i?ne(i.pixelToCoordinateTransform,t.slice()):null},r.prototype.getControls=function(){return this.controls},r.prototype.getOverlays=function(){return this.overlays_},r.prototype.getOverlayById=function(t){var i=this.overlayIdIndex_[t.toString()];return i!==void 0?i:null},r.prototype.getInteractions=function(){return this.interactions},r.prototype.getLayerGroup=function(){return this.get(_e.LAYERGROUP)},r.prototype.setLayers=function(t){var i=this.getLayerGroup();if(t instanceof mr){i.setLayers(t);return}var n=i.getLayers();n.clear(),n.extend(t)},r.prototype.getLayers=function(){var t=this.getLayerGroup().getLayers();return t},r.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),i=0,n=t.length;i<n;++i){var a=t[i].layer,o=a.getSource();if(o&&o.loading)return!0}return!1},r.prototype.getPixelFromCoordinate=function(t){var i=Ii(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(i)},r.prototype.getPixelFromCoordinateInternal=function(t){var i=this.frameState_;return i?ne(i.coordinateToPixelTransform,t.slice(0,2)):null},r.prototype.getRenderer=function(){return this.renderer_},r.prototype.getSize=function(){return this.get(_e.SIZE)},r.prototype.getView=function(){return this.get(_e.VIEW)},r.prototype.getViewport=function(){return this.viewport_},r.prototype.getOverlayContainer=function(){return this.overlayContainer_},r.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},r.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},r.prototype.getTilePriority=function(t,i,n,a){return rO(this.frameState_,t,i,n,a)},r.prototype.handleBrowserEvent=function(t,i){var n=i||t.type,a=new pn(n,this,t);this.handleMapBrowserEvent(a)},r.prototype.handleMapBrowserEvent=function(t){if(!!this.frameState_){var i=t.originalEvent,n=i.type;if(n===qc.POINTERDOWN||n===q.WHEEL||n===q.KEYDOWN){var a=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():a,s=i.target;if(this.overlayContainerStopEvent_.contains(s)||!(o===a?a.documentElement:o).contains(s))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1)for(var l=this.getInteractions().getArray().slice(),u=l.length-1;u>=0;u--){var h=l[u];if(!(h.getMap()!==this||!h.getActive()||!this.getTargetElement())){var f=h.handleEvent(t);if(!f||t.propagationStopped)break}}}},r.prototype.handlePostRender=function(){var t=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){var n=this.maxTilesLoading_,a=n;if(t){var o=t.viewHints;if(o[we.ANIMATING]||o[we.INTERACTING]){var s=Date.now()-t.time>8;n=s?0:8,a=s?0:2}}i.getTilesLoading()<n&&(i.reprioritize(),i.loadMoreTiles(n,a))}t&&this.hasListener(ra.RENDERCOMPLETE)&&!t.animate&&!this.tileQueue_.getTilesLoading()&&!this.getLoading()&&this.renderer_.dispatchRenderEvent(ra.RENDERCOMPLETE,t);for(var l=this.postRenderFunctions_,u=0,h=l.length;u<h;++u)l[u](this,t);l.length=0},r.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},r.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.mapBrowserEventHandler_){for(var i=0,n=this.keyHandlerKeys_.length;i<n;++i)Nt(this.keyHandlerKeys_[i]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(q.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(q.WHEEL,this.boundHandleBrowserEvent_),this.handleResize_!==void 0&&(removeEventListener(q.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,ih(this.viewport_)}if(!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new ZC(this,this.moveTolerance_);for(var a in $t)this.mapBrowserEventHandler_.addEventListener($t[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(q.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(q.WHEEL,this.boundHandleBrowserEvent_,Bm?{passive:!1}:!1);var o=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[wt(o,q.KEYDOWN,this.handleBrowserEvent,this),wt(o,q.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(q.RESIZE,this.handleResize_,!1))}this.updateSize()},r.prototype.handleTileChange_=function(){this.render()},r.prototype.handleViewPropertyChanged_=function(){this.render()},r.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Nt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Nt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=wt(t,qn.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=wt(t,q.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},r.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Nt),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[wt(t,qn.PROPERTYCHANGE,this.render,this),wt(t,q.CHANGE,this.render,this)]),this.render()},r.prototype.isRendered=function(){return!!this.frameState_},r.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},r.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),i=0,n=t.length;i<n;++i){var a=t[i].layer;a.hasRenderer()&&a.getRenderer().handleFontsChanged()}},r.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},r.prototype.removeControl=function(t){return this.getControls().remove(t)},r.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},r.prototype.removeLayer=function(t){var i=this.getLayerGroup().getLayers();return i.remove(t)},r.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},r.prototype.renderFrame_=function(t){var i=this,n=this.getSize(),a=this.getView(),o=this.frameState_,s=null;if(n!==void 0&&Vg(n)&&a&&a.isDef()){var l=a.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=a.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Wc(u.center,u.resolution,u.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:u,viewHints:l,wantedTiles:{}},u.nextCenter&&u.nextResolution){var h=isNaN(u.nextRotation)?u.rotation:u.nextRotation;s.nextExtent=Wc(u.nextCenter,u.nextResolution,h,n)}}if(this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),o){var f=!this.previousExtent_||!Hc(this.previousExtent_)&&!Hs(s.extent,this.previousExtent_);f&&(this.dispatchEvent(new lh(Qs.MOVESTART,this,o)),this.previousExtent_=Xu(this.previousExtent_))}var c=this.previousExtent_&&!s.viewHints[we.ANIMATING]&&!s.viewHints[we.INTERACTING]&&!Hs(s.extent,this.previousExtent_);c&&(this.dispatchEvent(new lh(Qs.MOVEEND,this,s)),Xm(s.extent,this.previousExtent_))}this.dispatchEvent(new lh(Qs.POSTRENDER,this,s)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){i.postRenderTimeoutHandle_=void 0,i.handlePostRender()},0))},r.prototype.setLayerGroup=function(t){this.set(_e.LAYERGROUP,t)},r.prototype.setSize=function(t){this.set(_e.SIZE,t)},r.prototype.setTarget=function(t){this.set(_e.TARGET,t)},r.prototype.setView=function(t){if(!t||t instanceof fa){this.set(_e.VIEW,t);return}this.set(_e.VIEW,new fa);var i=this;t.then(function(n){i.setView(new fa(n))})},r.prototype.updateSize=function(){var t=this.getTargetElement(),i=void 0;if(t){var n=getComputedStyle(t),a=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),o=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);!isNaN(a)&&!isNaN(o)&&(i=[a,o],!Vg(i)&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(i),this.updateViewportSize_()},r.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var i=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(i=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(i)}},r}(Lr);function dI(e){var r=null;e.keyboardEventTarget!==void 0&&(r=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var t={},i=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new HC({layers:e.layers});t[_e.LAYERGROUP]=i,t[_e.TARGET]=e.target,t[_e.VIEW]=e.view instanceof fa?e.view:new fa;var n;e.controls!==void 0&&(Array.isArray(e.controls)?n=new mr(e.controls.slice()):(ft(typeof e.controls.getArray=="function",47),n=e.controls));var a;e.interactions!==void 0&&(Array.isArray(e.interactions)?a=new mr(e.interactions.slice()):(ft(typeof e.interactions.getArray=="function",48),a=e.interactions));var o;return e.overlays!==void 0?Array.isArray(e.overlays)?o=new mr(e.overlays.slice()):(ft(typeof e.overlays.getArray=="function",49),o=e.overlays):o=new mr,{controls:n,interactions:a,keyboardEventTarget:r,overlays:o,values:t}}var vI=cI,pI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),mI=function(e){pI(r,e);function r(t){var i=e.call(this)||this,n=t.element;return n&&!t.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),i.element=n||null,i.target_=null,i.map_=null,i.listenerKeys=[],t.render&&(i.render=t.render),t.target&&i.setTarget(t.target),i}return r.prototype.disposeInternal=function(){ih(this.element),e.prototype.disposeInternal.call(this)},r.prototype.getMap=function(){return this.map_},r.prototype.setMap=function(t){this.map_&&ih(this.element);for(var i=0,n=this.listenerKeys.length;i<n;++i)Nt(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=t,this.map_){var a=this.target_?this.target_:t.getOverlayContainerStopEvent();a.appendChild(this.element),this.render!==Jn&&this.listenerKeys.push(wt(t,Qs.POSTRENDER,this.render,this)),t.render()}},r.prototype.render=function(t){},r.prototype.setTarget=function(t){this.target_=typeof t=="string"?document.getElementById(t):t},r}(Lr),dd=mI,gI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yI=function(e){gI(r,e);function r(t){var i=this,n=t||{};i=e.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this,i.ulElement_=document.createElement("ul"),i.collapsed_=n.collapsed!==void 0?n.collapsed:!0,i.userCollapsed_=i.collapsed_,i.overrideCollapsible_=n.collapsible!==void 0,i.collapsible_=n.collapsible!==void 0?n.collapsible:!0,i.collapsible_||(i.collapsed_=!1);var a=n.className!==void 0?n.className:"ol-attribution",o=n.tipLabel!==void 0?n.tipLabel:"Attributions",s=n.expandClassName!==void 0?n.expandClassName:a+"-expand",l=n.collapseLabel!==void 0?n.collapseLabel:"\u203A",u=n.collapseClassName!==void 0?n.collapseClassName:a+"-collpase";typeof l=="string"?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=l,i.collapseLabel_.className=u):i.collapseLabel_=l;var h=n.label!==void 0?n.label:"i";typeof h=="string"?(i.label_=document.createElement("span"),i.label_.textContent=h,i.label_.className=s):i.label_=h;var f=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_;i.toggleButton_=document.createElement("button"),i.toggleButton_.setAttribute("type","button"),i.toggleButton_.setAttribute("aria-expanded",String(!i.collapsed_)),i.toggleButton_.title=o,i.toggleButton_.appendChild(f),i.toggleButton_.addEventListener(q.CLICK,i.handleClick_.bind(i),!1);var c=a+" "+rh+" "+zc+(i.collapsed_&&i.collapsible_?" "+ug:"")+(i.collapsible_?"":" ol-uncollapsible"),d=i.element;return d.className=c,d.appendChild(i.toggleButton_),d.appendChild(i.ulElement_),i.renderedAttributions_=[],i.renderedVisible_=!0,i}return r.prototype.collectSourceAttributions_=function(t){for(var i={},n=[],a=!0,o=t.layerStatesArray,s=0,l=o.length;s<l;++s){var u=o[s];if(!!th(u,t.viewState)){var h=u.layer.getSource();if(!!h){var f=h.getAttributions();if(!!f){var c=f(t);if(!!c)if(a=a&&h.getAttributionsCollapsible()!==!1,Array.isArray(c))for(var d=0,v=c.length;d<v;++d)c[d]in i||(n.push(c[d]),i[c[d]]=!0);else c in i||(n.push(c),i[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(a),n},r.prototype.updateElement_=function(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var i=this.collectSourceAttributions_(t),n=i.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!co(i,this.renderedAttributions_)){dg(this.ulElement_);for(var a=0,o=i.length;a<o;++a){var s=document.createElement("li");s.innerHTML=i[a],this.ulElement_.appendChild(s)}this.renderedAttributions_=i}},r.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},r.prototype.handleToggle_=function(){this.element.classList.toggle(ug),this.collapsed_?cg(this.collapseLabel_,this.label_):cg(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},r.prototype.getCollapsible=function(){return this.collapsible_},r.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},r.prototype.setCollapsed=function(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()},r.prototype.getCollapsed=function(){return this.collapsed_},r.prototype.render=function(t){this.updateElement_(t.frameState)},r}(dd),_I=yI,wI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),bI=function(e){wI(r,e);function r(t){var i=this,n=t||{};i=e.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this;var a=n.className!==void 0?n.className:"ol-rotate",o=n.label!==void 0?n.label:"\u21E7",s=n.compassClassName!==void 0?n.compassClassName:"ol-compass";i.label_=null,typeof o=="string"?(i.label_=document.createElement("span"),i.label_.className=s,i.label_.textContent=o):(i.label_=o,i.label_.classList.add(s));var l=n.tipLabel?n.tipLabel:"Reset rotation",u=document.createElement("button");u.className=a+"-reset",u.setAttribute("type","button"),u.title=l,u.appendChild(i.label_),u.addEventListener(q.CLICK,i.handleClick_.bind(i),!1);var h=a+" "+rh+" "+zc,f=i.element;return f.className=h,f.appendChild(u),i.callResetNorth_=n.resetNorth?n.resetNorth:void 0,i.duration_=n.duration!==void 0?n.duration:250,i.autoHide_=n.autoHide!==void 0?n.autoHide:!0,i.rotation_=void 0,i.autoHide_&&i.element.classList.add(eh),i}return r.prototype.handleClick_=function(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},r.prototype.resetNorth_=function(){var t=this.getMap(),i=t.getView();if(!!i){var n=i.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!=0?i.animate({rotation:0,duration:this.duration_,easing:Co}):i.setRotation(0))}},r.prototype.render=function(t){var i=t.frameState;if(!!i){var n=i.viewState.rotation;if(n!=this.rotation_){var a="rotate("+n+"rad)";if(this.autoHide_){var o=this.element.classList.contains(eh);!o&&n===0?this.element.classList.add(eh):o&&n!==0&&this.element.classList.remove(eh)}this.label_.style.transform=a}this.rotation_=n}},r}(dd),TI=bI,EI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),SI=function(e){EI(r,e);function r(t){var i=this,n=t||{};i=e.call(this,{element:document.createElement("div"),target:n.target})||this;var a=n.className!==void 0?n.className:"ol-zoom",o=n.delta!==void 0?n.delta:1,s=n.zoomInClassName!==void 0?n.zoomInClassName:a+"-in",l=n.zoomOutClassName!==void 0?n.zoomOutClassName:a+"-out",u=n.zoomInLabel!==void 0?n.zoomInLabel:"+",h=n.zoomOutLabel!==void 0?n.zoomOutLabel:"\u2013",f=n.zoomInTipLabel!==void 0?n.zoomInTipLabel:"Zoom in",c=n.zoomOutTipLabel!==void 0?n.zoomOutTipLabel:"Zoom out",d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=f,d.appendChild(typeof u=="string"?document.createTextNode(u):u),d.addEventListener(q.CLICK,i.handleClick_.bind(i,o),!1);var v=document.createElement("button");v.className=l,v.setAttribute("type","button"),v.title=c,v.appendChild(typeof h=="string"?document.createTextNode(h):h),v.addEventListener(q.CLICK,i.handleClick_.bind(i,-o),!1);var m=a+" "+rh+" "+zc,p=i.element;return p.className=m,p.appendChild(d),p.appendChild(v),i.duration_=n.duration!==void 0?n.duration:250,i}return r.prototype.handleClick_=function(t,i){i.preventDefault(),this.zoomByDelta_(t)},r.prototype.zoomByDelta_=function(t){var i=this.getMap(),n=i.getView();if(!!n){var a=n.getZoom();if(a!==void 0){var o=n.getConstrainedZoom(a+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:o,duration:this.duration_,easing:Co})):n.setZoom(o)}}},r}(dd),xI=SI,Qe={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},CI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Te={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},OI=function(e){CI(r,e);function r(t){var i=e.call(this)||this;i.on,i.once,i.un,i.options=t,i.id=t.id,i.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,i.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,i.element=document.createElement("div"),i.element.className=t.className!==void 0?t.className:"ol-overlay-container "+CC,i.element.style.position="absolute",i.element.style.pointerEvents="auto";var n=t.autoPan;return n&&typeof n!="object"&&(n={animation:t.autoPanAnimation,margin:t.autoPanMargin}),i.autoPan=n||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(Te.ELEMENT,i.handleElementChanged),i.addChangeListener(Te.MAP,i.handleMapChanged),i.addChangeListener(Te.OFFSET,i.handleOffsetChanged),i.addChangeListener(Te.POSITION,i.handlePositionChanged),i.addChangeListener(Te.POSITIONING,i.handlePositioningChanged),t.element!==void 0&&i.setElement(t.element),i.setOffset(t.offset!==void 0?t.offset:[0,0]),i.setPositioning(t.positioning!==void 0?t.positioning:Qe.TOP_LEFT),t.position!==void 0&&i.setPosition(t.position),i}return r.prototype.getElement=function(){return this.get(Te.ELEMENT)},r.prototype.getId=function(){return this.id},r.prototype.getMap=function(){return this.get(Te.MAP)},r.prototype.getOffset=function(){return this.get(Te.OFFSET)},r.prototype.getPosition=function(){return this.get(Te.POSITION)},r.prototype.getPositioning=function(){return this.get(Te.POSITIONING)},r.prototype.handleElementChanged=function(){dg(this.element);var t=this.getElement();t&&this.element.appendChild(t)},r.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(ih(this.element),Nt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=wt(t,Qs.POSTRENDER,this.render,this),this.updatePixelPosition();var i=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}},r.prototype.render=function(){this.updatePixelPosition()},r.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},r.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},r.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},r.prototype.setElement=function(t){this.set(Te.ELEMENT,t)},r.prototype.setMap=function(t){this.set(Te.MAP,t)},r.prototype.setOffset=function(t){this.set(Te.OFFSET,t)},r.prototype.setPosition=function(t){this.set(Te.POSITION,t)},r.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},r.prototype.panIntoView=function(t){var i=this.getMap();if(!(!i||!i.getTargetElement()||!this.get(Te.POSITION))){var n=this.getRect(i.getTargetElement(),i.getSize()),a=this.getElement(),o=this.getRect(a,[IC(a),PC(a)]),s=t||{},l=s.margin===void 0?20:s.margin;if(!ta(n,o)){var u=o[0]-n[0],h=n[2]-o[2],f=o[1]-n[1],c=n[3]-o[3],d=[0,0];if(u<0?d[0]=u-l:h<0&&(d[0]=Math.abs(h)+l),f<0?d[1]=f-l:c<0&&(d[1]=Math.abs(c)+l),d[0]!==0||d[1]!==0){var v=i.getView().getCenterInternal(),m=i.getPixelFromCoordinateInternal(v);if(!m)return;var p=[m[0]+d[0],m[1]+d[1]],g=s.animation||{};i.getView().animateInternal({center:i.getCoordinateFromPixelInternal(p),duration:g.duration,easing:g.easing})}}}},r.prototype.getRect=function(t,i){var n=t.getBoundingClientRect(),a=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[a,o,a+i[0],o+i[1]]},r.prototype.setPositioning=function(t){this.set(Te.POSITIONING,t)},r.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},r.prototype.updatePixelPosition=function(){var t=this.getMap(),i=this.getPosition();if(!t||!t.isRendered()||!i){this.setVisible(!1);return}var n=t.getPixelFromCoordinate(i),a=t.getSize();this.updateRenderedPosition(n,a)},r.prototype.updateRenderedPosition=function(t,i){var n=this.element.style,a=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var s=Math.round(t[0]+a[0])+"px",l=Math.round(t[1]+a[1])+"px",u="0%",h="0%";o==Qe.BOTTOM_RIGHT||o==Qe.CENTER_RIGHT||o==Qe.TOP_RIGHT?u="-100%":(o==Qe.BOTTOM_CENTER||o==Qe.CENTER_CENTER||o==Qe.TOP_CENTER)&&(u="-50%"),o==Qe.BOTTOM_LEFT||o==Qe.BOTTOM_CENTER||o==Qe.BOTTOM_RIGHT?h="-100%":(o==Qe.CENTER_LEFT||o==Qe.CENTER_CENTER||o==Qe.CENTER_RIGHT)&&(h="-50%");var f="translate("+u+", "+h+") translate("+s+", "+l+")";this.rendered.transform_!=f&&(this.rendered.transform_=f,n.transform=f,n.msTransform=f)},r.prototype.getOptions=function(){return this.options},r}(Lr),q4=OI;function II(e){var r=e||{},t=new mr,i=r.zoom!==void 0?r.zoom:!0;i&&t.push(new xI(r.zoomOptions));var n=r.rotate!==void 0?r.rotate:!0;n&&t.push(new TI(r.rotateOptions));var a=r.attribution!==void 0?r.attribution:!0;return a&&t.push(new _I(r.attributionOptions)),t}var Xg={ACTIVE:"active"},PI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),kI=function(e){PI(r,e);function r(t){var i=e.call(this)||this;return i.on,i.once,i.un,t&&t.handleEvent&&(i.handleEvent=t.handleEvent),i.map_=null,i.setActive(!0),i}return r.prototype.getActive=function(){return this.get(Xg.ACTIVE)},r.prototype.getMap=function(){return this.map_},r.prototype.handleEvent=function(t){return!0},r.prototype.setActive=function(t){this.set(Xg.ACTIVE,t)},r.prototype.setMap=function(t){this.map_=t},r}(Lr);function DI(e,r,t){var i=e.getCenterInternal();if(i){var n=[i[0]+r[0],i[1]+r[1]];e.animateInternal({duration:t!==void 0?t:250,easing:PO,center:e.getConstrainedCenter(n)})}}function vd(e,r,t,i){var n=e.getZoom();if(n!==void 0){var a=e.getConstrainedZoom(n+r),o=e.getResolutionForZoom(a);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:Co})}}var tl=kI,RI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),AI=function(e){RI(r,e);function r(t){var i=e.call(this)||this,n=t||{};return i.delta_=n.delta?n.delta:1,i.duration_=n.duration!==void 0?n.duration:250,i}return r.prototype.handleEvent=function(t){var i=!1;if(t.type==$t.DBLCLICK){var n=t.originalEvent,a=t.map,o=t.coordinate,s=n.shiftKey?-this.delta_:this.delta_,l=a.getView();vd(l,s,o,this.duration_),n.preventDefault(),i=!0}return!i},r}(tl),MI=AI,LI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),FI=function(e){LI(r,e);function r(t){var i=this,n=t||{};return i=e.call(this,n)||this,n.handleDownEvent&&(i.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(i.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(i.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(i.handleUpEvent=n.handleUpEvent),n.stopDown&&(i.stopDown=n.stopDown),i.handlingDownUpSequence=!1,i.trackedPointers_={},i.targetPointers=[],i}return r.prototype.getPointerCount=function(){return this.targetPointers.length},r.prototype.handleDownEvent=function(t){return!1},r.prototype.handleDragEvent=function(t){},r.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var i=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==$t.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==$t.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==$t.POINTERDOWN){var a=this.handleDownEvent(t);this.handlingDownUpSequence=a,i=this.stopDown(a)}else t.type==$t.POINTERMOVE&&this.handleMoveEvent(t);return!i},r.prototype.handleMoveEvent=function(t){},r.prototype.handleUpEvent=function(t){return!1},r.prototype.stopDown=function(t){return t},r.prototype.updateTrackedPointers_=function(t){if(NI(t)){var i=t.originalEvent,n=i.pointerId.toString();t.type==$t.POINTERUP?delete this.trackedPointers_[n]:t.type==$t.POINTERDOWN?this.trackedPointers_[n]=i:n in this.trackedPointers_&&(this.trackedPointers_[n]=i),this.targetPointers=$m(this.trackedPointers_)}},r}(tl);function pd(e){for(var r=e.length,t=0,i=0,n=0;n<r;n++)t+=e[n].clientX,i+=e[n].clientY;return[t/r,i/r]}function NI(e){var r=e.type;return r===$t.POINTERDOWN||r===$t.POINTERDRAG||r===$t.POINTERUP}var el=FI;function md(e){var r=arguments;return function(t){for(var i=!0,n=0,a=r.length;n<a&&(i=i&&r[n](t),!!i);++n);return i}}var $I=function(e){var r=e.originalEvent;return r.altKey&&!(r.metaKey||r.ctrlKey)&&r.shiftKey},GI=function(e){return e.target.getTargetElement().contains(document.activeElement)},Kg=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?GI(e):!0},YI=vo,Zg=function(e){var r=e.originalEvent;return r.button==0&&!(jx&&Wx&&r.ctrlKey)},qg=function(e){var r=e.originalEvent;return!r.altKey&&!(r.metaKey||r.ctrlKey)&&!r.shiftKey},jI=function(e){var r=e.originalEvent;return!r.altKey&&!(r.metaKey||r.ctrlKey)&&r.shiftKey},Qg=function(e){var r=e.originalEvent,t=r.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"},gd=function(e){var r=e.originalEvent;return ft(r!==void 0,56),r.pointerType=="mouse"},WI=function(e){var r=e.originalEvent;return ft(r!==void 0,56),r.isPrimary&&r.button===0},HI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),BI=function(e){HI(r,e);function r(t){var i=e.call(this,{stopDown:Hu})||this,n=t||{};i.kinetic_=n.kinetic,i.lastCentroid=null,i.lastPointersCount_,i.panning_=!1;var a=n.condition?n.condition:md(qg,WI);return i.condition_=n.onFocusOnly?md(Kg,a):a,i.noKinetic_=!1,i}return r.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var i=this.targetPointers,n=pd(i);if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var a=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],o=t.map,s=o.getView();yC(a,s.getResolution()),Uc(a,s.getRotation()),s.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()},r.prototype.handleUpEvent=function(t){var i=t.map,n=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var a=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=n.getCenterInternal(),l=i.getPixelFromCoordinateInternal(s),u=i.getCoordinateFromPixelInternal([l[0]-a*Math.cos(o),l[1]-a*Math.sin(o)]);n.animateInternal({center:n.getConstrainedCenter(u),duration:500,easing:Co})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},r.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var i=t.map,n=i.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},r}(el),UI=BI,zI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),VI=function(e){zI(r,e);function r(t){var i=this,n=t||{};return i=e.call(this,{stopDown:Hu})||this,i.condition_=n.condition?n.condition:$I,i.lastAngle_=void 0,i.duration_=n.duration!==void 0?n.duration:250,i}return r.prototype.handleDragEvent=function(t){if(!!gd(t)){var i=t.map,n=i.getView();if(n.getConstraints().rotation!==od){var a=i.getSize(),o=t.pixel,s=Math.atan2(a[1]/2-o[1],o[0]-a[0]/2);if(this.lastAngle_!==void 0){var l=s-this.lastAngle_;n.adjustRotationInternal(-l)}this.lastAngle_=s}}},r.prototype.handleUpEvent=function(t){if(!gd(t))return!0;var i=t.map,n=i.getView();return n.endInteraction(this.duration_),!1},r.prototype.handleDownEvent=function(t){if(!gd(t))return!1;if(Zg(t)&&this.condition_(t)){var i=t.map;return i.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},r}(el),XI=VI,KI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ZI=function(e){KI(r,e);function r(t){var i=e.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.style.pointerEvents="auto",i.element_.className="ol-box "+t,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return r.prototype.disposeInternal=function(){this.setMap(null)},r.prototype.render_=function(){var t=this.startPixel_,i=this.endPixel_,n="px",a=this.element_.style;a.left=Math.min(t[0],i[0])+n,a.top=Math.min(t[1],i[1])+n,a.width=Math.abs(i[0]-t[0])+n,a.height=Math.abs(i[1]-t[1])+n},r.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},r.prototype.setPixels=function(t,i){this.startPixel_=t,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()},r.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,i=this.endPixel_,n=[t,[t[0],i[1]],i,[i[0],t[1]]],a=n.map(this.map_.getCoordinateFromPixelInternal,this.map_);a[4]=a[0].slice(),this.geometry_?this.geometry_.setCoordinates([a]):this.geometry_=new Ug([a])},r.prototype.getGeometry=function(){return this.geometry_},r}(Mc),qI=ZI,Jg=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),mh={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},yd=function(e){Jg(r,e);function r(t,i,n){var a=e.call(this,t)||this;return a.coordinate=i,a.mapBrowserEvent=n,a}return r}(dn),QI=function(e){Jg(r,e);function r(t){var i=e.call(this)||this;i.on,i.once,i.un;var n=t||{};return i.box_=new qI(n.className||"ol-dragbox"),i.minArea_=n.minArea!==void 0?n.minArea:64,n.onBoxEnd&&(i.onBoxEnd=n.onBoxEnd),i.startPixel_=null,i.condition_=n.condition?n.condition:Zg,i.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:i.defaultBoxEndCondition,i}return r.prototype.defaultBoxEndCondition=function(t,i,n){var a=n[0]-i[0],o=n[1]-i[1];return a*a+o*o>=this.minArea_},r.prototype.getGeometry=function(){return this.box_.getGeometry()},r.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new yd(mh.BOXDRAG,t.coordinate,t))},r.prototype.handleUpEvent=function(t){this.box_.setMap(null);var i=this.boxEndCondition_(t,this.startPixel_,t.pixel);return i&&this.onBoxEnd(t),this.dispatchEvent(new yd(i?mh.BOXEND:mh.BOXCANCEL,t.coordinate,t)),!1},r.prototype.handleDownEvent=function(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new yd(mh.BOXSTART,t.coordinate,t)),!0):!1},r.prototype.onBoxEnd=function(t){},r}(el),JI=QI,tP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),eP=function(e){tP(r,e);function r(t){var i=this,n=t||{},a=n.condition?n.condition:jI;return i=e.call(this,{condition:a,className:n.className||"ol-dragzoom",minArea:n.minArea})||this,i.duration_=n.duration!==void 0?n.duration:200,i.out_=n.out!==void 0?n.out:!1,i}return r.prototype.onBoxEnd=function(t){var i=this.getMap(),n=i.getView(),a=this.getGeometry();if(this.out_){var o=n.rotatedExtentForGeometry(a),s=n.getResolutionForExtentInternal(o),l=n.getResolution()/s;a=a.clone(),a.scale(l*l)}n.fitInternal(a,{duration:this.duration_,easing:Co})},r}(JI),rP=eP,ca={LEFT:37,UP:38,RIGHT:39,DOWN:40},iP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),nP=function(e){iP(r,e);function r(t){var i=e.call(this)||this,n=t||{};return i.defaultCondition_=function(a){return qg(a)&&Qg(a)},i.condition_=n.condition!==void 0?n.condition:i.defaultCondition_,i.duration_=n.duration!==void 0?n.duration:100,i.pixelDelta_=n.pixelDelta!==void 0?n.pixelDelta:128,i}return r.prototype.handleEvent=function(t){var i=!1;if(t.type==q.KEYDOWN){var n=t.originalEvent,a=n.keyCode;if(this.condition_(t)&&(a==ca.DOWN||a==ca.LEFT||a==ca.RIGHT||a==ca.UP)){var o=t.map,s=o.getView(),l=s.getResolution()*this.pixelDelta_,u=0,h=0;a==ca.DOWN?h=-l:a==ca.LEFT?u=-l:a==ca.RIGHT?u=l:h=l;var f=[u,h];Uc(f,s.getRotation()),DI(s,f,this.duration_),n.preventDefault(),i=!0}}return!i},r}(tl),aP=nP,oP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),sP=function(e){oP(r,e);function r(t){var i=e.call(this)||this,n=t||{};return i.condition_=n.condition?n.condition:Qg,i.delta_=n.delta?n.delta:1,i.duration_=n.duration!==void 0?n.duration:100,i}return r.prototype.handleEvent=function(t){var i=!1;if(t.type==q.KEYDOWN||t.type==q.KEYPRESS){var n=t.originalEvent,a=n.charCode;if(this.condition_(t)&&(a=="+".charCodeAt(0)||a=="-".charCodeAt(0))){var o=t.map,s=a=="+".charCodeAt(0)?this.delta_:-this.delta_,l=o.getView();vd(l,s,void 0,this.duration_),n.preventDefault(),i=!0}}return!i},r}(tl),lP=sP,uP=function(){function e(r,t,i){this.decay_=r,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},e.prototype.update=function(r,t){this.points_.push(r,t,Date.now())},e.prototype.end=function(){if(this.points_.length<6)return!1;var r=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<r)return!1;for(var i=t-3;i>0&&this.points_[i+2]>r;)i-=3;var n=this.points_[t+2]-this.points_[i+2];if(n<1e3/60)return!1;var a=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,a),this.initialVelocity_=Math.sqrt(a*a+o*o)/n,this.initialVelocity_>this.minVelocity_},e.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},e.prototype.getAngle=function(){return this.angle_},e}(),hP=uP,fP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),_d={TRACKPAD:"trackpad",WHEEL:"wheel"},cP=function(e){fP(r,e);function r(t){var i=this,n=t||{};i=e.call(this,n)||this,i.totalDelta_=0,i.lastDelta_=0,i.maxDelta_=n.maxDelta!==void 0?n.maxDelta:1,i.duration_=n.duration!==void 0?n.duration:250,i.timeout_=n.timeout!==void 0?n.timeout:80,i.useAnchor_=n.useAnchor!==void 0?n.useAnchor:!0,i.constrainResolution_=n.constrainResolution!==void 0?n.constrainResolution:!1;var a=n.condition?n.condition:YI;return i.condition_=n.onFocusOnly?md(Kg,a):a,i.lastAnchor_=null,i.startTime_=void 0,i.timeoutId_,i.mode_=void 0,i.trackpadEventGap_=400,i.trackpadTimeoutId_,i.deltaPerZoom_=300,i}return r.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var t=this.getMap().getView();t.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},r.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var i=t.type;if(i!==q.WHEEL)return!0;var n=t.map,a=t.originalEvent;a.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);var o;if(t.type==q.WHEEL&&(o=a.deltaY,Yx&&a.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=Hm),a.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),o===0)return!1;this.lastDelta_=o;var s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?_d.TRACKPAD:_d.WHEEL);var l=n.getView();if(this.mode_===_d.TRACKPAD&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=o;var u=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),u),!1},r.prototype.handleWheelZoom_=function(t){var i=t.getView();i.getAnimating()&&i.cancelAnimations();var n=-Qt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),vd(i,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},r.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},r}(tl),dP=cP,vP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),pP=function(e){vP(r,e);function r(t){var i=this,n=t||{},a=n;return a.stopDown||(a.stopDown=Hu),i=e.call(this,a)||this,i.anchor_=null,i.lastAngle_=void 0,i.rotating_=!1,i.rotationDelta_=0,i.threshold_=n.threshold!==void 0?n.threshold:.3,i.duration_=n.duration!==void 0?n.duration:250,i}return r.prototype.handleDragEvent=function(t){var i=0,n=this.targetPointers[0],a=this.targetPointers[1],o=Math.atan2(a.clientY-n.clientY,a.clientX-n.clientX);if(this.lastAngle_!==void 0){var s=o-this.lastAngle_;this.rotationDelta_+=s,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=s}this.lastAngle_=o;var l=t.map,u=l.getView();if(u.getConstraints().rotation!==od){var h=l.getViewport().getBoundingClientRect(),f=pd(this.targetPointers);f[0]-=h.left,f[1]-=h.top,this.anchor_=l.getCoordinateFromPixelInternal(f),this.rotating_&&(l.render(),u.adjustRotationInternal(i,this.anchor_))}},r.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var i=t.map,n=i.getView();return n.endInteraction(this.duration_),!1}else return!0},r.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}else return!1},r}(el),mP=pP,gP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yP=function(e){gP(r,e);function r(t){var i=this,n=t||{},a=n;return a.stopDown||(a.stopDown=Hu),i=e.call(this,a)||this,i.anchor_=null,i.duration_=n.duration!==void 0?n.duration:400,i.lastDistance_=void 0,i.lastScaleDelta_=1,i}return r.prototype.handleDragEvent=function(t){var i=1,n=this.targetPointers[0],a=this.targetPointers[1],o=n.clientX-a.clientX,s=n.clientY-a.clientY,l=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(i=this.lastDistance_/l),this.lastDistance_=l;var u=t.map,h=u.getView();i!=1&&(this.lastScaleDelta_=i);var f=u.getViewport().getBoundingClientRect(),c=pd(this.targetPointers);c[0]-=f.left,c[1]-=f.top,this.anchor_=u.getCoordinateFromPixelInternal(c),u.render(),h.adjustResolutionInternal(i,this.anchor_)},r.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var i=t.map,n=i.getView(),a=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,a),!1}else return!0},r.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}else return!1},r}(el),_P=yP,rl={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};function wP(e,r,t,i,n,a,o){var s,l,u=(t-r)/i;if(u===1)s=r;else if(u===2)s=r,l=n;else if(u!==0){for(var h=e[r],f=e[r+1],c=0,d=[0],v=r+i;v<t;v+=i){var m=e[v],p=e[v+1];c+=Math.sqrt((m-h)*(m-h)+(p-f)*(p-f)),d.push(c),h=m,f=p}var g=n*c,_=Sx(d,g);_<0?(l=(g-d[-_-2])/(d[-_-1]-d[-_-2]),s=r+(-_-2)*i):s=r+_*i}for(var y=o>1?o:2,w=a||new Array(y),v=0;v<y;++v)w[v]=s===void 0?NaN:l===void 0?e[s+v]:xi(e[s+v],e[s+i+v],l);return w}function bP(e,r,t,i,n,a){if(t==r)return null;var o;if(n<e[r+i-1])return a?(o=e.slice(r,r+i),o[i-1]=n,o):null;if(e[t-1]<n)return a?(o=e.slice(t-i,t),o[i-1]=n,o):null;if(n==e[r+i-1])return e.slice(r,r+i);for(var s=r/i,l=t/i;s<l;){var u=s+l>>1;n<e[(u+1)*i-1]?l=u:s=u+1}var h=e[s*i-1];if(n==h)return e.slice((s-1)*i,(s-1)*i+i);var f=e[(s+1)*i-1],c=(n-h)/(f-h);o=[];for(var d=0;d<i-1;++d)o.push(xi(e[(s-1)*i+d],e[s*i+d],c));return o.push(n),o}function ty(e,r,t,i){for(var n=e[r],a=e[r+1],o=0,s=r+i;s<t;s+=i){var l=e[s],u=e[s+1];o+=Math.sqrt((l-n)*(l-n)+(u-a)*(u-a)),n=l,a=u}return o}var TP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),EP=function(e){TP(r,e);function r(t,i){var n=e.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?n.setFlatCoordinates(i,t):n.setCoordinates(t,i),n}return r.prototype.appendCoordinate=function(t){this.flatCoordinates?Fc(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},r.prototype.clone=function(){var t=new r(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},r.prototype.closestPointXY=function(t,i,n,a){return a<Gc(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ld(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,n,a))},r.prototype.forEachSegment=function(t){return Wg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},r.prototype.getCoordinateAtM=function(t,i){if(this.layout!=be.XYM&&this.layout!=be.XYZM)return null;var n=i!==void 0?i:!1;return bP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},r.prototype.getCoordinates=function(){return ua(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getCoordinateAt=function(t,i){return wP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,this.stride)},r.prototype.getLength=function(){return ty(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},r.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Ng(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new r(i,be.XY)},r.prototype.getType=function(){return rt.LINE_STRING},r.prototype.intersectsExtent=function(t){return hd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},r.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ud(this.flatCoordinates,0,t,this.stride),this.changed()},r}(dh),Q4=EP;function SP(e,r,t,i,n){ey(e,r,t||0,i||e.length-1,n||xP)}function ey(e,r,t,i,n){for(;i>t;){if(i-t>600){var a=i-t+1,o=r-t+1,s=Math.log(a),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1),h=Math.max(t,Math.floor(r-o*l/a+u)),f=Math.min(i,Math.floor(r+(a-o)*l/a+u));ey(e,r,h,f,n)}var c=e[r],d=t,v=i;for(il(e,t,r),n(e[i],c)>0&&il(e,t,i);d<v;){for(il(e,d,v),d++,v--;n(e[d],c)<0;)d++;for(;n(e[v],c)>0;)v--}n(e[t],c)===0?il(e,t,v):(v++,il(e,v,i)),v<=r&&(t=v+1),r<=v&&(i=v-1)}}function il(e,r,t){var i=e[r];e[r]=e[t],e[t]=i}function xP(e,r){return e<r?-1:e>r?1:0}class ry{constructor(r=9){this._maxEntries=Math.max(4,r),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(r){let t=this.data;const i=[];if(!yh(r,t))return i;const n=this.toBBox,a=[];for(;t;){for(let o=0;o<t.children.length;o++){const s=t.children[o],l=t.leaf?n(s):s;yh(r,l)&&(t.leaf?i.push(s):bd(r,l)?this._all(s,i):a.push(s))}t=a.pop()}return i}collides(r){let t=this.data;if(!yh(r,t))return!1;const i=[];for(;t;){for(let n=0;n<t.children.length;n++){const a=t.children[n],o=t.leaf?this.toBBox(a):a;if(yh(r,o)){if(t.leaf||bd(r,o))return!0;i.push(a)}}t=i.pop()}return!1}load(r){if(!(r&&r.length))return this;if(r.length<this._minEntries){for(let i=0;i<r.length;i++)this.insert(r[i]);return this}let t=this._build(r.slice(),0,r.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(r){return r&&this._insert(r,this.data.height-1),this}clear(){return this.data=Io([]),this}remove(r,t){if(!r)return this;let i=this.data;const n=this.toBBox(r),a=[],o=[];let s,l,u;for(;i||a.length;){if(i||(i=a.pop(),l=a[a.length-1],s=o.pop(),u=!0),i.leaf){const h=CP(r,i.children,t);if(h!==-1)return i.children.splice(h,1),a.push(i),this._condense(a),this}!u&&!i.leaf&&bd(i,n)?(a.push(i),o.push(s),s=0,l=i,i=i.children[0]):l?(s++,i=l.children[s],u=!1):i=null}return this}toBBox(r){return r}compareMinX(r,t){return r.minX-t.minX}compareMinY(r,t){return r.minY-t.minY}toJSON(){return this.data}fromJSON(r){return this.data=r,this}_all(r,t){const i=[];for(;r;)r.leaf?t.push(...r.children):i.push(...r.children),r=i.pop();return t}_build(r,t,i,n){const a=i-t+1;let o=this._maxEntries,s;if(a<=o)return s=Io(r.slice(t,i+1)),Oo(s,this.toBBox),s;n||(n=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,n-1))),s=Io([]),s.leaf=!1,s.height=n;const l=Math.ceil(a/o),u=l*Math.ceil(Math.sqrt(o));iy(r,t,i,u,this.compareMinX);for(let h=t;h<=i;h+=u){const f=Math.min(h+u-1,i);iy(r,h,f,l,this.compareMinY);for(let c=h;c<=f;c+=l){const d=Math.min(c+l-1,f);s.children.push(this._build(r,c,d,n-1))}}return Oo(s,this.toBBox),s}_chooseSubtree(r,t,i,n){for(;n.push(t),!(t.leaf||n.length-1===i);){let a=1/0,o=1/0,s;for(let l=0;l<t.children.length;l++){const u=t.children[l],h=wd(u),f=PP(r,u)-h;f<o?(o=f,a=h<a?h:a,s=u):f===o&&h<a&&(a=h,s=u)}t=s||t.children[0]}return t}_insert(r,t,i){const n=i?r:this.toBBox(r),a=[],o=this._chooseSubtree(n,this.data,t,a);for(o.children.push(r),al(o,n);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(n,a,t)}_split(r,t){const i=r[t],n=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,n);const o=this._chooseSplitIndex(i,a,n),s=Io(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,Oo(i,this.toBBox),Oo(s,this.toBBox),t?r[t-1].children.push(s):this._splitRoot(i,s)}_splitRoot(r,t){this.data=Io([r,t]),this.data.height=r.height+1,this.data.leaf=!1,Oo(this.data,this.toBBox)}_chooseSplitIndex(r,t,i){let n,a=1/0,o=1/0;for(let s=t;s<=i-t;s++){const l=nl(r,0,s,this.toBBox),u=nl(r,s,i,this.toBBox),h=kP(l,u),f=wd(l)+wd(u);h<a?(a=h,n=s,o=f<o?f:o):h===a&&f<o&&(o=f,n=s)}return n||i-t}_chooseSplitAxis(r,t,i){const n=r.leaf?this.compareMinX:OP,a=r.leaf?this.compareMinY:IP,o=this._allDistMargin(r,t,i,n),s=this._allDistMargin(r,t,i,a);o<s&&r.children.sort(n)}_allDistMargin(r,t,i,n){r.children.sort(n);const a=this.toBBox,o=nl(r,0,t,a),s=nl(r,i-t,i,a);let l=gh(o)+gh(s);for(let u=t;u<i-t;u++){const h=r.children[u];al(o,r.leaf?a(h):h),l+=gh(o)}for(let u=i-t-1;u>=t;u--){const h=r.children[u];al(s,r.leaf?a(h):h),l+=gh(s)}return l}_adjustParentBBoxes(r,t,i){for(let n=i;n>=0;n--)al(t[n],r)}_condense(r){for(let t=r.length-1,i;t>=0;t--)r[t].children.length===0?t>0?(i=r[t-1].children,i.splice(i.indexOf(r[t]),1)):this.clear():Oo(r[t],this.toBBox)}}function CP(e,r,t){if(!t)return r.indexOf(e);for(let i=0;i<r.length;i++)if(t(e,r[i]))return i;return-1}function Oo(e,r){nl(e,0,e.children.length,r,e)}function nl(e,r,t,i,n){n||(n=Io(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let a=r;a<t;a++){const o=e.children[a];al(n,e.leaf?i(o):o)}return n}function al(e,r){return e.minX=Math.min(e.minX,r.minX),e.minY=Math.min(e.minY,r.minY),e.maxX=Math.max(e.maxX,r.maxX),e.maxY=Math.max(e.maxY,r.maxY),e}function OP(e,r){return e.minX-r.minX}function IP(e,r){return e.minY-r.minY}function wd(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function gh(e){return e.maxX-e.minX+(e.maxY-e.minY)}function PP(e,r){return(Math.max(r.maxX,e.maxX)-Math.min(r.minX,e.minX))*(Math.max(r.maxY,e.maxY)-Math.min(r.minY,e.minY))}function kP(e,r){const t=Math.max(e.minX,r.minX),i=Math.max(e.minY,r.minY),n=Math.min(e.maxX,r.maxX),a=Math.min(e.maxY,r.maxY);return Math.max(0,n-t)*Math.max(0,a-i)}function bd(e,r){return e.minX<=r.minX&&e.minY<=r.minY&&r.maxX<=e.maxX&&r.maxY<=e.maxY}function yh(e,r){return r.minX<=e.maxX&&r.minY<=e.maxY&&r.maxX>=e.minX&&r.maxY>=e.minY}function Io(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function iy(e,r,t,i,n){const a=[r,t];for(;a.length;){if(t=a.pop(),r=a.pop(),t-r<=i)continue;const o=r+Math.ceil((t-r)/i/2)*i;SP(e,o,r,t,n),a.push(r,o,o,t)}}var Mt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},DP=function(){function e(r){this.opacity_=r.opacity,this.rotateWithView_=r.rotateWithView,this.rotation_=r.rotation,this.scale_=r.scale,this.scaleArray_=ti(r.scale),this.displacement_=r.displacement}return e.prototype.clone=function(){var r=this.getScale();return new e({opacity:this.getOpacity(),scale:Array.isArray(r)?r.slice():r,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},e.prototype.getOpacity=function(){return this.opacity_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.getRotation=function(){return this.rotation_},e.prototype.getScale=function(){return this.scale_},e.prototype.getScaleArray=function(){return this.scaleArray_},e.prototype.getDisplacement=function(){return this.displacement_},e.prototype.getAnchor=function(){return ht()},e.prototype.getImage=function(r){return ht()},e.prototype.getHitDetectionImage=function(){return ht()},e.prototype.getPixelRatio=function(r){return 1},e.prototype.getImageState=function(){return ht()},e.prototype.getImageSize=function(){return ht()},e.prototype.getOrigin=function(){return ht()},e.prototype.getSize=function(){return ht()},e.prototype.setOpacity=function(r){this.opacity_=r},e.prototype.setRotateWithView=function(r){this.rotateWithView_=r},e.prototype.setRotation=function(r){this.rotation_=r},e.prototype.setScale=function(r){this.scale_=r,this.scaleArray_=ti(r)},e.prototype.listenImageChange=function(r){ht()},e.prototype.load=function(){ht()},e.prototype.unlistenImageChange=function(r){ht()},e}(),ny=DP;function ei(e){return Array.isArray(e)?eg(e):e}var RP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),AP=function(e){RP(r,e);function r(t){var i=this,n=t.rotateWithView!==void 0?t.rotateWithView:!1;return i=e.call(this,{opacity:1,rotateWithView:n,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0]})||this,i.canvas_=void 0,i.hitDetectionCanvas_=null,i.fill_=t.fill!==void 0?t.fill:null,i.origin_=[0,0],i.points_=t.points,i.radius_=t.radius!==void 0?t.radius:t.radius1,i.radius2_=t.radius2,i.angle_=t.angle!==void 0?t.angle:0,i.stroke_=t.stroke!==void 0?t.stroke:null,i.anchor_=null,i.size_=null,i.renderOptions_=null,i.render(),i}return r.prototype.clone=function(){var t=this.getScale(),i=new r({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},r.prototype.getAnchor=function(){return this.anchor_},r.prototype.getAngle=function(){return this.angle_},r.prototype.getFill=function(){return this.fill_},r.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},r.prototype.getImage=function(t){var i=this.canvas_[t];if(!i){var n=this.renderOptions_,a=pr(n.size*t,n.size*t);this.draw_(n,a,t),i=a.canvas,this.canvas_[t]=i}return i},r.prototype.getPixelRatio=function(t){return t},r.prototype.getImageSize=function(){return this.size_},r.prototype.getImageState=function(){return Mt.LOADED},r.prototype.getOrigin=function(){return this.origin_},r.prototype.getPoints=function(){return this.points_},r.prototype.getRadius=function(){return this.radius_},r.prototype.getRadius2=function(){return this.radius2_},r.prototype.getSize=function(){return this.size_},r.prototype.getStroke=function(){return this.stroke_},r.prototype.listenImageChange=function(t){},r.prototype.load=function(){},r.prototype.unlistenImageChange=function(t){},r.prototype.calculateLineJoinSize_=function(t,i,n){if(i===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return i;var a=this.radius_,o=this.radius2_===void 0?a:this.radius2_;if(a<o){var s=a;a=o,o=s}var l=this.radius2_===void 0?this.points_:this.points_*2,u=2*Math.PI/l,h=o*Math.sin(u),f=Math.sqrt(o*o-h*h),c=a-f,d=Math.sqrt(h*h+c*c),v=d/h;if(t==="miter"&&v<=n)return v*i;var m=i/2/v,p=i/2*(c/d),g=Math.sqrt((a+m)*(a+m)+p*p),_=g-a;if(this.radius2_===void 0||t==="bevel")return _*2;var y=a*Math.sin(u),w=Math.sqrt(a*a-y*y),T=o-w,S=Math.sqrt(y*y+T*T),x=S/y;if(x<=n){var E=x*i/2-o-a;return 2*Math.max(_,E)}return _*2},r.prototype.createRenderOptions=function(){var t=_o,i=0,n=null,a=0,o,s=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=Ks),o=ei(o),s=this.stroke_.getWidth(),s===void 0&&(s=qs),n=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=_o),i=this.stroke_.getMiterLimit(),i===void 0&&(i=Xs));var l=this.calculateLineJoinSize_(t,s,i),u=Math.max(this.radius_,this.radius2_||0),h=Math.ceil(2*u+l);return{strokeStyle:o,strokeWidth:s,size:h,lineDash:n,lineDashOffset:a,lineJoin:t,miterLimit:i}},r.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size,i=this.getDisplacement();this.canvas_={},this.anchor_=[t/2-i[0],t/2+i[1]],this.size_=[t,t]},r.prototype.draw_=function(t,i,n){if(i.scale(n,n),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){var a=this.fill_.getColor();a===null&&(a=Ci),i.fillStyle=ei(a),i.fill()}this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.setLineDash&&t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())},r.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var i=this.fill_.getColor(),n=0;if(typeof i=="string"&&(i=Jm(i)),i===null?n=1:Array.isArray(i)&&(n=i.length===4?i[3]:1),n===0){var a=pr(t.size,t.size);this.hitDetectionCanvas_=a.canvas,this.drawHitDetectionCanvas_(t,a)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},r.prototype.createPath_=function(t){var i=this.points_,n=this.radius_;if(i===1/0)t.arc(0,0,n,0,2*Math.PI);else{var a=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(i*=2);for(var o=this.angle_-Math.PI/2,s=2*Math.PI/i,l=0;l<i;l++){var u=o+l*s,h=l%2==0?n:a;t.lineTo(h*Math.cos(u),h*Math.sin(u))}t.closePath()}},r.prototype.drawHitDetectionCanvas_=function(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=Ci,i.fill(),this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())},r}(ny),MP=AP,LP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),FP=function(e){LP(r,e);function r(t){var i=this,n=t||{};return i=e.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:n.scale!==void 0?n.scale:1,rotation:n.rotation!==void 0?n.rotation:0,rotateWithView:n.rotateWithView!==void 0?n.rotateWithView:!1,displacement:n.displacement!==void 0?n.displacement:[0,0]})||this,i}return r.prototype.clone=function(){var t=this.getScale(),i=new r({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},r.prototype.setRadius=function(t){this.radius_=t,this.render()},r}(MP),NP=FP,$P=function(){function e(r){var t=r||{};this.color_=t.color!==void 0?t.color:null}return e.prototype.clone=function(){var r=this.getColor();return new e({color:Array.isArray(r)?r.slice():r||void 0})},e.prototype.getColor=function(){return this.color_},e.prototype.setColor=function(r){this.color_=r},e}(),GP=$P,YP=function(){function e(r){var t=r||{};this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return e.prototype.clone=function(){var r=this.getColor();return new e({color:Array.isArray(r)?r.slice():r||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},e.prototype.getColor=function(){return this.color_},e.prototype.getLineCap=function(){return this.lineCap_},e.prototype.getLineDash=function(){return this.lineDash_},e.prototype.getLineDashOffset=function(){return this.lineDashOffset_},e.prototype.getLineJoin=function(){return this.lineJoin_},e.prototype.getMiterLimit=function(){return this.miterLimit_},e.prototype.getWidth=function(){return this.width_},e.prototype.setColor=function(r){this.color_=r},e.prototype.setLineCap=function(r){this.lineCap_=r},e.prototype.setLineDash=function(r){this.lineDash_=r},e.prototype.setLineDashOffset=function(r){this.lineDashOffset_=r},e.prototype.setLineJoin=function(r){this.lineJoin_=r},e.prototype.setMiterLimit=function(r){this.miterLimit_=r},e.prototype.setWidth=function(r){this.width_=r},e}(),jP=YP,ay=function(){function e(r){var t=r||{};this.geometry_=null,this.geometryFunction_=oy,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}return e.prototype.clone=function(){var r=this.getGeometry();return r&&typeof r=="object"&&(r=r.clone()),new e({geometry:r,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.setRenderer=function(r){this.renderer_=r},e.prototype.setHitDetectionRenderer=function(r){this.hitDetectionRenderer_=r},e.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},e.prototype.getGeometry=function(){return this.geometry_},e.prototype.getGeometryFunction=function(){return this.geometryFunction_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(r){this.fill_=r},e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(r){this.image_=r},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(r){this.stroke_=r},e.prototype.getText=function(){return this.text_},e.prototype.setText=function(r){this.text_=r},e.prototype.getZIndex=function(){return this.zIndex_},e.prototype.setGeometry=function(r){typeof r=="function"?this.geometryFunction_=r:typeof r=="string"?this.geometryFunction_=function(t){return t.get(r)}:r?r!==void 0&&(this.geometryFunction_=function(){return r}):this.geometryFunction_=oy,this.geometry_=r},e.prototype.setZIndex=function(r){this.zIndex_=r},e}();function WP(e){var r;if(typeof e=="function")r=e;else{var t;if(Array.isArray(e))t=e;else{ft(typeof e.getZIndex=="function",41);var i=e;t=[i]}r=function(){return t}}return r}var Td=null;function HP(e,r){if(!Td){var t=new GP({color:"rgba(255,255,255,0.4)"}),i=new jP({color:"#3399CC",width:1.25});Td=[new ay({image:new NP({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return Td}function oy(e){return e.getGeometry()}var J4=ay,BP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),sy={RENDER_ORDER:"renderOrder"},UP=function(e){BP(r,e);function r(t){var i=this,n=t||{},a=me({},n);return delete a.style,delete a.renderBuffer,delete a.updateWhileAnimating,delete a.updateWhileInteracting,i=e.call(this,a)||this,i.declutter_=n.declutter!==void 0?n.declutter:!1,i.renderBuffer_=n.renderBuffer!==void 0?n.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(n.style),i.updateWhileAnimating_=n.updateWhileAnimating!==void 0?n.updateWhileAnimating:!1,i.updateWhileInteracting_=n.updateWhileInteracting!==void 0?n.updateWhileInteracting:!1,i}return r.prototype.getDeclutter=function(){return this.declutter_},r.prototype.getFeatures=function(t){return e.prototype.getFeatures.call(this,t)},r.prototype.getRenderBuffer=function(){return this.renderBuffer_},r.prototype.getRenderOrder=function(){return this.get(sy.RENDER_ORDER)},r.prototype.getStyle=function(){return this.style_},r.prototype.getStyleFunction=function(){return this.styleFunction_},r.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},r.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},r.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new ry(9)),this.getRenderer().renderDeclutter(t)},r.prototype.setRenderOrder=function(t){this.set(sy.RENDER_ORDER,t)},r.prototype.setStyle=function(t){this.style_=t!==void 0?t:HP,this.styleFunction_=t===null?void 0:WP(this.style_),this.changed()},r}(ng),zP=UP,ol={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},_h=[ol.FILL],gn=[ol.STROKE],da=[ol.BEGIN_PATH],ly=[ol.CLOSE_PATH],X=ol,VP=function(){function e(){}return e.prototype.drawCustom=function(r,t,i,n){},e.prototype.drawGeometry=function(r){},e.prototype.setStyle=function(r){},e.prototype.drawCircle=function(r,t){},e.prototype.drawFeature=function(r,t){},e.prototype.drawGeometryCollection=function(r,t){},e.prototype.drawLineString=function(r,t){},e.prototype.drawMultiLineString=function(r,t){},e.prototype.drawMultiPoint=function(r,t){},e.prototype.drawMultiPolygon=function(r,t){},e.prototype.drawPoint=function(r,t){},e.prototype.drawPolygon=function(r,t){},e.prototype.drawText=function(r,t){},e.prototype.setFillStrokeStyle=function(r,t){},e.prototype.setImageStyle=function(r,t){},e.prototype.setTextStyle=function(r,t){},e}(),uy=VP,XP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),KP=function(e){XP(r,e);function r(t,i,n,a){var o=e.call(this)||this;return o.tolerance=t,o.maxExtent=i,o.pixelRatio=a,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return r.prototype.applyPixelRatio=function(t){var i=this.pixelRatio;return i==1?t:t.map(function(n){return n*i})},r.prototype.appendFlatPointCoordinates=function(t,i){for(var n=this.getBufferedMaxExtent(),a=this.tmpCoordinate_,o=this.coordinates,s=o.length,l=0,u=t.length;l<u;l+=i)a[0]=t[l],a[1]=t[l+1],Vu(n,a)&&(o[s++]=a[0],o[s++]=a[1]);return s},r.prototype.appendFlatLineCoordinates=function(t,i,n,a,o,s){var l=this.coordinates,u=l.length,h=this.getBufferedMaxExtent();s&&(i+=a);var f=t[i],c=t[i+1],d=this.tmpCoordinate_,v=!0,m,p,g;for(m=i+a;m<n;m+=a)d[0]=t[m],d[1]=t[m+1],g=Yc(h,d),g!==p?(v&&(l[u++]=f,l[u++]=c,v=!1),l[u++]=d[0],l[u++]=d[1]):g===ce.INTERSECTING?(l[u++]=d[0],l[u++]=d[1],v=!1):v=!0,f=d[0],c=d[1],p=g;return(o&&v||m===i+a)&&(l[u++]=f,l[u++]=c),u},r.prototype.drawCustomCoordinates_=function(t,i,n,a,o){for(var s=0,l=n.length;s<l;++s){var u=n[s],h=this.appendFlatLineCoordinates(t,i,u,a,!1,!1);o.push(h),i=u}return i},r.prototype.drawCustom=function(t,i,n,a){this.beginGeometry(t,i);var o=t.getType(),s=t.getStride(),l=this.coordinates.length,u,h,f,c,d;switch(o){case rt.MULTI_POLYGON:u=t.getOrientedFlatCoordinates(),c=[];var v=t.getEndss();d=0;for(var m=0,p=v.length;m<p;++m){var g=[];d=this.drawCustomCoordinates_(u,d,v[m],s,g),c.push(g)}this.instructions.push([X.CUSTOM,l,c,t,n,$g]),this.hitDetectionInstructions.push([X.CUSTOM,l,c,t,a||n,$g]);break;case rt.POLYGON:case rt.MULTI_LINE_STRING:f=[],u=o==rt.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(u,0,t.getEnds(),s,f),this.instructions.push([X.CUSTOM,l,f,t,n,vh]),this.hitDetectionInstructions.push([X.CUSTOM,l,f,t,a||n,vh]);break;case rt.LINE_STRING:case rt.CIRCLE:u=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(u,0,u.length,s,!1,!1),this.instructions.push([X.CUSTOM,l,h,t,n,ua]),this.hitDetectionInstructions.push([X.CUSTOM,l,h,t,a||n,ua]);break;case rt.MULTI_POINT:u=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(u,s),h>l&&(this.instructions.push([X.CUSTOM,l,h,t,n,ua]),this.hitDetectionInstructions.push([X.CUSTOM,l,h,t,a||n,ua]));break;case rt.POINT:u=t.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),h=this.coordinates.length,this.instructions.push([X.CUSTOM,l,h,t,n]),this.hitDetectionInstructions.push([X.CUSTOM,l,h,t,a||n]);break}this.endGeometry(i)},r.prototype.beginGeometry=function(t,i){this.beginGeometryInstruction1_=[X.BEGIN_GEOMETRY,i,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[X.BEGIN_GEOMETRY,i,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},r.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},r.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var i,n=t.length,a,o,s=-1;for(i=0;i<n;++i)a=t[i],o=a[0],o==X.END_GEOMETRY?s=i:o==X.BEGIN_GEOMETRY&&(a[2]=i,xx(this.hitDetectionInstructions,s,i),s=-1)},r.prototype.setFillStrokeStyle=function(t,i){var n=this.state;if(t){var a=t.getColor();n.fillStyle=ei(a||Ci)}else n.fillStyle=void 0;if(i){var o=i.getColor();n.strokeStyle=ei(o||Ks);var s=i.getLineCap();n.lineCap=s!==void 0?s:nh;var l=i.getLineDash();n.lineDash=l?l.slice():zs;var u=i.getLineDashOffset();n.lineDashOffset=u||Vs;var h=i.getLineJoin();n.lineJoin=h!==void 0?h:_o;var f=i.getWidth();n.lineWidth=f!==void 0?f:qs;var c=i.getMiterLimit();n.miterLimit=c!==void 0?c:Xs,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},r.prototype.createFill=function(t){var i=t.fillStyle,n=[X.SET_FILL_STYLE,i];return typeof i!="string"&&n.push(!0),n},r.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},r.prototype.createStroke=function(t){return[X.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},r.prototype.updateFillStyle=function(t,i){var n=t.fillStyle;(typeof n!="string"||t.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(i.call(this,t)),t.currentFillStyle=n)},r.prototype.updateStrokeStyle=function(t,i){var n=t.strokeStyle,a=t.lineCap,o=t.lineDash,s=t.lineDashOffset,l=t.lineJoin,u=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=a||o!=t.currentLineDash&&!co(t.currentLineDash,o)||t.currentLineDashOffset!=s||t.currentLineJoin!=l||t.currentLineWidth!=u||t.currentMiterLimit!=h)&&(n!==void 0&&i.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=a,t.currentLineDash=o,t.currentLineDashOffset=s,t.currentLineJoin=l,t.currentLineWidth=u,t.currentMiterLimit=h)},r.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[X.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)},r.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Xm(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;$c(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},r}(uy),sl=KP,ZP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),qP=function(e){ZP(r,e);function r(t,i,n,a){var o=e.call(this,t,i,n,a)||this;return o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterImageWithText_=void 0,o}return r.prototype.drawPoint=function(t,i){if(!!this.image_){this.beginGeometry(t,i);var n=t.getFlatCoordinates(),a=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(n,a);this.instructions.push([X.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([X.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(i)}},r.prototype.drawMultiPoint=function(t,i){if(!!this.image_){this.beginGeometry(t,i);var n=t.getFlatCoordinates(),a=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(n,a);this.instructions.push([X.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([X.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(i)}},r.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,e.prototype.finish.call(this)},r.prototype.setImageStyle=function(t,i){var n=t.getAnchor(),a=t.getSize(),o=t.getHitDetectionImage(),s=t.getImage(this.pixelRatio),l=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=o,this.image_=s,this.height_=a[1],this.opacity_=t.getOpacity(),this.originX_=l[0]*this.imagePixelRatio_,this.originY_=l[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=a[0],this.declutterImageWithText_=i},r}(sl),QP=qP,JP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),tk=function(e){JP(r,e);function r(t,i,n,a){return e.call(this,t,i,n,a)||this}return r.prototype.drawFlatCoordinates_=function(t,i,n,a){var o=this.coordinates.length,s=this.appendFlatLineCoordinates(t,i,n,a,!1,!1),l=[X.MOVE_TO_LINE_TO,o,s];return this.instructions.push(l),this.hitDetectionInstructions.push(l),n},r.prototype.drawLineString=function(t,i){var n=this.state,a=n.strokeStyle,o=n.lineWidth;if(!(a===void 0||o===void 0)){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,zs,Vs],da);var s=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(s,0,s.length,l),this.hitDetectionInstructions.push(gn),this.endGeometry(i)}},r.prototype.drawMultiLineString=function(t,i){var n=this.state,a=n.strokeStyle,o=n.lineWidth;if(!(a===void 0||o===void 0)){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],da);for(var s=t.getEnds(),l=t.getFlatCoordinates(),u=t.getStride(),h=0,f=0,c=s.length;f<c;++f)h=this.drawFlatCoordinates_(l,h,s[f],u);this.hitDetectionInstructions.push(gn),this.endGeometry(i)}},r.prototype.finish=function(){var t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(gn),this.reverseHitDetectionInstructions(),this.state=null,e.prototype.finish.call(this)},r.prototype.applyStroke=function(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(gn),t.lastStroke=this.coordinates.length),t.lastStroke=0,e.prototype.applyStroke.call(this,t),this.instructions.push(da)},r}(sl),ek=tk,rk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ik=function(e){rk(r,e);function r(t,i,n,a){return e.call(this,t,i,n,a)||this}return r.prototype.drawFlatCoordinatess_=function(t,i,n,a){var o=this.state,s=o.fillStyle!==void 0,l=o.strokeStyle!==void 0,u=n.length;this.instructions.push(da),this.hitDetectionInstructions.push(da);for(var h=0;h<u;++h){var f=n[h],c=this.coordinates.length,d=this.appendFlatLineCoordinates(t,i,f,a,!0,!l),v=[X.MOVE_TO_LINE_TO,c,d];this.instructions.push(v),this.hitDetectionInstructions.push(v),l&&(this.instructions.push(ly),this.hitDetectionInstructions.push(ly)),i=f}return s&&(this.instructions.push(_h),this.hitDetectionInstructions.push(_h)),l&&(this.instructions.push(gn),this.hitDetectionInstructions.push(gn)),i},r.prototype.drawCircle=function(t,i){var n=this.state,a=n.fillStyle,o=n.strokeStyle;if(!(a===void 0&&o===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_FILL_STYLE,Ci]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var s=t.getFlatCoordinates(),l=t.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,l,!1,!1);var h=[X.CIRCLE,u];this.instructions.push(da,h),this.hitDetectionInstructions.push(da,h),n.fillStyle!==void 0&&(this.instructions.push(_h),this.hitDetectionInstructions.push(_h)),n.strokeStyle!==void 0&&(this.instructions.push(gn),this.hitDetectionInstructions.push(gn)),this.endGeometry(i)}},r.prototype.drawPolygon=function(t,i){var n=this.state,a=n.fillStyle,o=n.strokeStyle;if(!(a===void 0&&o===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_FILL_STYLE,Ci]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var s=t.getEnds(),l=t.getOrientedFlatCoordinates(),u=t.getStride();this.drawFlatCoordinatess_(l,0,s,u),this.endGeometry(i)}},r.prototype.drawMultiPolygon=function(t,i){var n=this.state,a=n.fillStyle,o=n.strokeStyle;if(!(a===void 0&&o===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_FILL_STYLE,Ci]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([X.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var s=t.getEndss(),l=t.getOrientedFlatCoordinates(),u=t.getStride(),h=0,f=0,c=s.length;f<c;++f)h=this.drawFlatCoordinatess_(l,h,s[f],u);this.endGeometry(i)}},r.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(t!==0)for(var i=this.coordinates,n=0,a=i.length;n<a;++n)i[n]=la(i[n],t);return e.prototype.finish.call(this)},r.prototype.setFillStrokeStyles_=function(){var t=this.state,i=t.fillStyle;i!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)},r}(sl),hy=ik,nk={POINT:"point",LINE:"line"};function ak(e,r,t,i,n){var a=t,o=t,s=0,l=0,u=t,h,f,c,d,v,m,p,g,_,y;for(f=t;f<i;f+=n){var w=r[f],T=r[f+1];v!==void 0&&(_=w-v,y=T-m,d=Math.sqrt(_*_+y*y),p!==void 0&&(l+=c,h=Math.acos((p*_+g*y)/(c*d)),h>e&&(l>s&&(s=l,a=u,o=f),l=0,u=f-n)),c=d,p=_,g=y),v=w,m=T}return l+=d,l>s?[u,f]:[a,o]}var ok=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),wh={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},sk=function(e){ok(r,e);function r(t,i,n,a){var o=e.call(this,t,i,n,a)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return r.prototype.finish=function(){var t=e.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},r.prototype.drawText=function(t,i){var n=this.textFillState_,a=this.textStrokeState_,o=this.textState_;if(!(this.text_===""||!o||!n&&!a)){var s=this.coordinates,l=s.length,u=t.getType(),h=null,f=t.getStride();if(o.placement===nk.LINE&&(u==rt.LINE_STRING||u==rt.MULTI_LINE_STRING||u==rt.POLYGON||u==rt.MULTI_POLYGON)){if(!qe(this.getBufferedMaxExtent(),t.getExtent()))return;var c=void 0;if(h=t.getFlatCoordinates(),u==rt.LINE_STRING)c=[h.length];else if(u==rt.MULTI_LINE_STRING)c=t.getEnds();else if(u==rt.POLYGON)c=t.getEnds().slice(0,1);else if(u==rt.MULTI_POLYGON){var d=t.getEndss();c=[];for(var v=0,m=d.length;v<m;++v)c.push(d[v][0])}this.beginGeometry(t,i);for(var p=o.textAlign,g=0,_=void 0,y=0,w=c.length;y<w;++y){if(p==null){var T=ak(o.maxAngle,h,g,c[y],f);g=T[0],_=T[1]}else _=c[y];for(var v=g;v<_;v+=f)s.push(h[v],h[v+1]);var S=s.length;g=c[y],this.drawChars_(l,S),l=S}this.endGeometry(i)}else{var x=o.overflow?null:[];switch(u){case rt.POINT:case rt.MULTI_POINT:h=t.getFlatCoordinates();break;case rt.LINE_STRING:h=t.getFlatMidpoint();break;case rt.CIRCLE:h=t.getCenter();break;case rt.MULTI_LINE_STRING:h=t.getFlatMidpoints(),f=2;break;case rt.POLYGON:h=t.getFlatInteriorPoint(),o.overflow||x.push(h[2]/this.resolution),f=3;break;case rt.MULTI_POLYGON:var E=t.getFlatInteriorPoints();h=[];for(var v=0,m=E.length;v<m;v+=3)o.overflow||x.push(E[v+2]/this.resolution),h.push(E[v],E[v+1]);if(h.length===0)return;f=2;break}var S=this.appendFlatPointCoordinates(h,f);if(S===l)return;if(x&&(S-l)/2!=h.length/f){var I=l/2;x=x.filter(function(k,O){var M=s[(I+O)*2]===h[O*f]&&s[(I+O)*2+1]===h[O*f+1];return M||--I,M})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i);var A=o.padding;if(A!=na&&(o.scale[0]<0||o.scale[1]<0)){var P=o.padding[0],R=o.padding[1],N=o.padding[2],j=o.padding[3];o.scale[0]<0&&(R=-R,j=-j),o.scale[1]<0&&(P=-P,N=-N),A=[P,R,N,j]}var W=this.pixelRatio;this.instructions.push([X.DRAW_IMAGE,l,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,A==na?na:A.map(function(k){return k*W}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]);var U=1/W;this.hitDetectionInstructions.push([X.DRAW_IMAGE,l,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[U,U],NaN,this.declutterImageWithText_,A,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]),this.endGeometry(i)}}},r.prototype.saveTextStates_=function(){var t=this.textStrokeState_,i=this.textState_,n=this.textFillState_,a=this.strokeKey_;t&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var o=this.textKey_;o in this.textStates||(this.textStates[o]={font:i.font,textAlign:i.textAlign||Zs,textBaseline:i.textBaseline||ah,scale:i.scale});var s=this.fillKey_;n&&(s in this.fillStates||(this.fillStates[s]={fillStyle:n.fillStyle}))},r.prototype.drawChars_=function(t,i){var n=this.textStrokeState_,a=this.textState_,o=this.strokeKey_,s=this.textKey_,l=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,h=wh[a.textBaseline],f=this.textOffsetY_*u,c=this.text_,d=n?n.lineWidth*Math.abs(a.scale[0])/2:0;this.instructions.push([X.DRAW_CHARS,t,i,h,a.overflow,l,a.maxAngle,u,f,o,d*u,c,s,1]),this.hitDetectionInstructions.push([X.DRAW_CHARS,t,i,h,a.overflow,l,a.maxAngle,1,f,o,d,c,s,1/u])},r.prototype.setTextStyle=function(t,i){var n,a,o;if(!t)this.text_="";else{var s=t.getFill();s?(a=this.textFillState_,a||(a={},this.textFillState_=a),a.fillStyle=ei(s.getColor()||Ci)):(a=null,this.textFillState_=a);var l=t.getStroke();if(!l)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);var u=l.getLineDash(),h=l.getLineDashOffset(),f=l.getWidth(),c=l.getMiterLimit();o.lineCap=l.getLineCap()||nh,o.lineDash=u?u.slice():zs,o.lineDashOffset=h===void 0?Vs:h,o.lineJoin=l.getLineJoin()||_o,o.lineWidth=f===void 0?qs:f,o.miterLimit=c===void 0?Xs:c,o.strokeStyle=ei(l.getColor()||Ks)}n=this.textState_;var d=t.getFont()||vg;RC(d);var v=t.getScaleArray();n.overflow=t.getOverflow(),n.font=d,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||ah,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||na,n.scale=v===void 0?[1,1]:v;var m=t.getOffsetX(),p=t.getOffsetY(),g=t.getRotateWithView(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=m===void 0?0:m,this.textOffsetY_=p===void 0?0:p,this.textRotateWithView_=g===void 0?!1:g,this.textRotation_=_===void 0?0:_,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:bt(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.textBaseline||"?"),this.fillKey_=a?typeof a.fillStyle=="string"?a.fillStyle:"|"+bt(a.fillStyle):""}this.declutterImageWithText_=i},r}(sl),lk=sk,uk={Circle:hy,Default:sl,Image:QP,LineString:ek,Polygon:hy,Text:lk},hk=function(){function e(r,t,i,n){this.tolerance_=r,this.maxExtent_=t,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return e.prototype.finish=function(){var r={};for(var t in this.buildersByZIndex_){r[t]=r[t]||{};var i=this.buildersByZIndex_[t];for(var n in i){var a=i[n].finish();r[t][n]=a}}return r},e.prototype.getBuilder=function(r,t){var i=r!==void 0?r.toString():"0",n=this.buildersByZIndex_[i];n===void 0&&(n={},this.buildersByZIndex_[i]=n);var a=n[t];if(a===void 0){var o=uk[t];a=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[t]=a}return a},e}(),fy=hk,fk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ck=function(e){fk(r,e);function r(t){var i=e.call(this)||this;return i.boundHandleImageChange_=i.handleImageChange_.bind(i),i.layer_=t,i.declutterExecutorGroup=null,i}return r.prototype.getFeatures=function(t){return ht()},r.prototype.prepareFrame=function(t){return ht()},r.prototype.renderFrame=function(t,i){return ht()},r.prototype.loadedTileCallback=function(t,i,n){t[i]||(t[i]={}),t[i][n.tileCoord.toString()]=n},r.prototype.createLoadedTileFinder=function(t,i,n){return function(a,o){var s=this.loadedTileCallback.bind(this,n,a);return t.forEachLoadedTile(i,a,o,s)}.bind(this)},r.prototype.forEachFeatureAtCoordinate=function(t,i,n,a,o){},r.prototype.getDataAtPixel=function(t,i,n){return null},r.prototype.getLayer=function(){return this.layer_},r.prototype.handleFontsChanged=function(){},r.prototype.handleImageChange_=function(t){var i=t.target;i.getState()===Mt.LOADED&&this.renderIfReadyAndVisible()},r.prototype.loadImage=function(t){var i=t.getState();return i!=Mt.LOADED&&i!=Mt.ERROR&&t.addEventListener(q.CHANGE,this.boundHandleImageChange_),i==Mt.IDLE&&(t.load(),i=t.getState()),i==Mt.LOADED},r.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==ia.READY&&t.changed()},r}(Gm),dk=ck,vk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),pk=function(e){vk(r,e);function r(t){var i=e.call(this,t)||this;return i.container=null,i.renderedResolution,i.tempTransform=qr(),i.pixelTransform=qr(),i.inversePixelTransform=qr(),i.context=null,i.containerReused=!1,i}return r.prototype.useContainer=function(t,i,n){var a=this.getLayer().getClassName(),o,s;if(t&&t.style.opacity===Vc(n)&&t.className===a){var l=t.firstElementChild;l instanceof HTMLCanvasElement&&(s=l.getContext("2d"))}if(s&&s.canvas.style.transform===i?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){o=document.createElement("div"),o.className=a;var u=o.style;u.position="absolute",u.width="100%",u.height="100%",s=pr();var l=s.canvas;o.appendChild(l),u=l.style,u.position="absolute",u.left="0",u.transformOrigin="top left",this.container=o,this.context=s}},r.prototype.clipUnrotated=function(t,i,n){var a=ea(n),o=qu(n),s=Zu(n),l=Ku(n);ne(i.coordinateToPixelTransform,a),ne(i.coordinateToPixelTransform,o),ne(i.coordinateToPixelTransform,s),ne(i.coordinateToPixelTransform,l);var u=this.inversePixelTransform;ne(u,a),ne(u,o),ne(u,s),ne(u,l),t.save(),t.beginPath(),t.moveTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()},r.prototype.dispatchRenderEvent_=function(t,i,n){var a=this.getLayer();if(a.hasListener(t)){var o=new lg(t,this.inversePixelTransform,n,i);a.dispatchEvent(o)}},r.prototype.preRender=function(t,i){this.dispatchRenderEvent_(ra.PRERENDER,t,i)},r.prototype.postRender=function(t,i){this.dispatchRenderEvent_(ra.POSTRENDER,t,i)},r.prototype.getRenderTransform=function(t,i,n,a,o,s,l){var u=o/2,h=s/2,f=a/i,c=-f,d=-t[0]+l,v=-t[1];return Ei(this.tempTransform,u,h,f,c,-n,d,v)},r.prototype.getDataAtPixel=function(t,i,n){var a=ne(this.inversePixelTransform,t.slice()),o=this.context,s=this.getLayer(),l=s.getExtent();if(l){var u=ne(i.pixelToCoordinateTransform,t.slice());if(!Vu(l,u))return null}var h;try{var f=Math.round(a[0]),c=Math.round(a[1]),d=document.createElement("canvas"),v=d.getContext("2d");d.width=1,d.height=1,v.clearRect(0,0,1,1),v.drawImage(o.canvas,f,c,1,1,0,0,1,1),h=v.getImageData(0,0,1,1).data}catch(m){return m.name==="SecurityError"?new Uint8Array:h}return h[3]===0?null:h},r}(dk),cy=pk,Vt={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function mk(e,r,t,i,n,a,o,s,l,u,h,f){var c=e[r],d=e[r+1],v=0,m=0,p=0,g=0;function _(){v=c,m=d,r+=i,c=e[r],d=e[r+1],g+=p,p=Math.sqrt((c-v)*(c-v)+(d-m)*(d-m))}do _();while(r<t-i&&g+p<a);for(var y=p===0?0:(a-g)/p,w=xi(v,c,y),T=xi(m,d,y),S=r-i,x=g,E=a+s*l(u,n,h);r<t-i&&g+p<E;)_();y=p===0?0:(E-g)/p;var I=xi(v,c,y),A=xi(m,d,y),P;if(f){var R=[w,T,I,A];Ag(R,0,4,2,f,R,R),P=R[0]>R[2]}else P=w>I;var N=Math.PI,j=[],W=S+i===r;r=S,p=0,g=x,c=e[r],d=e[r+1];var U;if(W){_(),U=Math.atan2(d-m,c-v),P&&(U+=U>0?-N:N);var H=(I+w)/2,k=(A+T)/2;return j[0]=[H,k,(E-a)/2,U,n],j}for(var O=0,M=n.length;O<M;){_();var $=Math.atan2(d-m,c-v);if(P&&($+=$>0?-N:N),U!==void 0){var C=$-U;if(C+=C>N?-2*N:C<-N?2*N:0,Math.abs(C)>o)return null}U=$;for(var ut=O,V=0;O<M;++O){var vt=P?M-O-1:O,At=s*l(u,n[vt],h);if(r+i<t&&g+p<a+V+At/2)break;V+=At}if(O!==ut){var St=P?n.substring(M-ut,M-O):n.substring(ut,O);y=p===0?0:(a+V/2-g)/p;var H=xi(v,c,y),k=xi(m,d,y);j.push([H,k,V/2,$,St]),a+=V}}return j}var Po=Fr(),yn=[],Pi=[],ki=[],_n=[];function dy(e){return e[3].declutterBox}var gk=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function vy(e,r){return(r==="start"||r==="end")&&!gk.test(e)&&(r=r==="start"?"left":"right"),wh[r]}var yk=function(){function e(r,t,i,n){this.overlaps=i,this.pixelRatio=t,this.resolution=r,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=qr(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return e.prototype.createLabel=function(r,t,i,n){var a=r+t+i+n;if(this.labels_[a])return this.labels_[a];var o=n?this.strokeStates[n]:null,s=i?this.fillStates[i]:null,l=this.textStates[t],u=this.pixelRatio,h=[l.scale[0]*u,l.scale[1]*u],f=vy(r,l.textAlign||Zs),c=n&&o.lineWidth?o.lineWidth:0,d=r.split(`
`),v=d.length,m=[],p=MC(l.font,d,m),g=AC(l.font),_=g*v,y=p+c,w=[],T=(y+2)*h[0],S=(_+c)*h[1],x={width:T<0?Math.floor(T):Math.ceil(T),height:S<0?Math.floor(S):Math.ceil(S),contextInstructions:w};if((h[0]!=1||h[1]!=1)&&w.push("scale",h),w.push("font",l.font),n){w.push("strokeStyle",o.strokeStyle),w.push("lineWidth",c),w.push("lineCap",o.lineCap),w.push("lineJoin",o.lineJoin),w.push("miterLimit",o.miterLimit);var E=zu?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;E.prototype.setLineDash&&(w.push("setLineDash",[o.lineDash]),w.push("lineDashOffset",o.lineDashOffset))}i&&w.push("fillStyle",s.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");var I=.5-f,A=f*y+I*c,P;if(n)for(P=0;P<v;++P)w.push("strokeText",[d[P],A+I*m[P],.5*(c+g)+P*g]);if(i)for(P=0;P<v;++P)w.push("fillText",[d[P],A+I*m[P],.5*(c+g)+P*g]);return this.labels_[a]=x,x},e.prototype.replayTextBackground_=function(r,t,i,n,a,o,s){r.beginPath(),r.moveTo.apply(r,t),r.lineTo.apply(r,i),r.lineTo.apply(r,n),r.lineTo.apply(r,a),r.lineTo.apply(r,t),o&&(this.alignFill_=o[2],this.fill_(r)),s&&(this.setStrokeStyle_(r,s),r.stroke())},e.prototype.calculateImageOrLabelDimensions_=function(r,t,i,n,a,o,s,l,u,h,f,c,d,v,m,p){s*=c[0],l*=c[1];var g=i-s,_=n-l,y=a+u>r?r-u:a,w=o+h>t?t-h:o,T=v[3]+y*c[0]+v[1],S=v[0]+w*c[1]+v[2],x=g-v[3],E=_-v[0];(m||f!==0)&&(yn[0]=x,_n[0]=x,yn[1]=E,Pi[1]=E,Pi[0]=x+T,ki[0]=Pi[0],ki[1]=E+S,_n[1]=ki[1]);var I;return f!==0?(I=Ei(qr(),i,n,1,1,f,-i,-n),ne(I,yn),ne(I,Pi),ne(I,ki),ne(I,_n),Si(Math.min(yn[0],Pi[0],ki[0],_n[0]),Math.min(yn[1],Pi[1],ki[1],_n[1]),Math.max(yn[0],Pi[0],ki[0],_n[0]),Math.max(yn[1],Pi[1],ki[1],_n[1]),Po)):Si(Math.min(x,x+T),Math.min(E,E+S),Math.max(x,x+T),Math.max(E,E+S),Po),d&&(g=Math.round(g),_=Math.round(_)),{drawImageX:g,drawImageY:_,drawImageW:y,drawImageH:w,originX:u,originY:h,declutterBox:{minX:Po[0],minY:Po[1],maxX:Po[2],maxY:Po[3],value:p},canvasTransform:I,scale:c}},e.prototype.replayImageOrLabel_=function(r,t,i,n,a,o,s){var l=!!(o||s),u=n.declutterBox,h=r.canvas,f=s?s[2]*n.scale[0]/2:0,c=u.minX-f<=h.width/t&&u.maxX+f>=0&&u.minY-f<=h.height/t&&u.maxY+f>=0;return c&&(l&&this.replayTextBackground_(r,yn,Pi,ki,_n,o,s),LC(r,n.canvasTransform,a,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0},e.prototype.fill_=function(r){if(this.alignFill_){var t=ne(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;r.save(),r.translate(t[0]%i,t[1]%i),r.rotate(this.viewRotation_)}r.fill(),this.alignFill_&&r.restore()},e.prototype.setStrokeStyle_=function(r,t){r.strokeStyle=t[1],r.lineWidth=t[2],r.lineCap=t[3],r.lineJoin=t[4],r.miterLimit=t[5],r.setLineDash&&(r.lineDashOffset=t[7],r.setLineDash(t[6]))},e.prototype.drawLabelWithPointPlacement_=function(r,t,i,n){var a=this.textStates[t],o=this.createLabel(r,t,n,i),s=this.strokeStates[i],l=this.pixelRatio,u=vy(r,a.textAlign||Zs),h=wh[a.textBaseline||ah],f=s&&s.lineWidth?s.lineWidth:0,c=o.width/l-2*a.scale[0],d=u*c+2*(.5-u)*f,v=h*o.height/l+2*(.5-h)*f;return{label:o,anchorX:d,anchorY:v}},e.prototype.execute_=function(r,t,i,n,a,o,s,l){var u;this.pixelCoordinates_&&co(i,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=sa(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),zx(this.renderedTransform_,i));for(var h=0,f=n.length,c=0,d,v,m,p,g,_,y,w,T,S,x,E,I=0,A=0,P=null,R=null,N=this.coordinateCache_,j=this.viewRotation_,W=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,U={context:r,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:j},H=this.instructions!=n||this.overlaps?0:200,k,O,M,$;h<f;){var C=n[h],ut=C[0];switch(ut){case X.BEGIN_GEOMETRY:k=C[1],$=C[3],k.getGeometry()?s!==void 0&&!qe(s,$.getExtent())?h=C[2]+1:++h:h=C[2];break;case X.BEGIN_PATH:I>H&&(this.fill_(r),I=0),A>H&&(r.stroke(),A=0),!I&&!A&&(r.beginPath(),p=NaN,g=NaN),++h;break;case X.CIRCLE:c=C[1];var V=u[c],vt=u[c+1],At=u[c+2],St=u[c+3],fe=At-V,ie=St-vt,Fe=Math.sqrt(fe*fe+ie*ie);r.moveTo(V+Fe,vt),r.arc(V,vt,Fe,0,2*Math.PI,!0),++h;break;case X.CLOSE_PATH:r.closePath(),++h;break;case X.CUSTOM:c=C[1],d=C[2];var Zr=C[3],Mu=C[4],Lu=C.length==6?C[5]:void 0;U.geometry=Zr,U.feature=k,h in N||(N[h]=[]);var un=N[h];Lu?Lu(u,c,d,2,un):(un[0]=u[c],un[1]=u[c+1],un.length=2),Mu(un,U),++h;break;case X.DRAW_IMAGE:c=C[1],d=C[2],w=C[3],v=C[4],m=C[5];var so=C[6],Fu=C[7],Rs=C[8],Nu=C[9],Xn=C[10],As=C[11],$u=C[12],lo=C[13],hn=C[14];if(!w&&C.length>=19){T=C[18],S=C[19],x=C[20],E=C[21];var uo=this.drawLabelWithPointPlacement_(T,S,x,E);w=uo.label,C[3]=w;var Pc=C[22];v=(uo.anchorX-Pc)*this.pixelRatio,C[4]=v;var Gu=C[23];m=(uo.anchorY-Gu)*this.pixelRatio,C[5]=m,so=w.height,C[6]=so,lo=w.width,C[13]=lo}var Ms=void 0;C.length>24&&(Ms=C[24]);var fn=void 0,Ti=void 0,Kn=void 0;C.length>16?(fn=C[15],Ti=C[16],Kn=C[17]):(fn=na,Ti=!1,Kn=!1),Xn&&W?As+=j:!Xn&&!W&&(As-=j);for(var ho=0;c<d;c+=2)if(!(Ms&&Ms[ho++]<lo/this.pixelRatio)){var Ar=this.calculateImageOrLabelDimensions_(w.width,w.height,u[c],u[c+1],lo,so,v,m,Rs,Nu,As,$u,a,fn,Ti||Kn,k),Mr=[r,t,w,Ar,Fu,Ti?P:null,Kn?R:null],Zn=void 0,fo=void 0;if(l&&hn){var Yu=d-c;if(!hn[Yu]){hn[Yu]=Mr;continue}if(Zn=hn[Yu],delete hn[Yu],fo=dy(Zn),l.collides(fo))continue}l&&l.collides(Ar.declutterBox)||(Zn&&(l&&l.insert(fo),this.replayImageOrLabel_.apply(this,Zn)),l&&l.insert(Ar.declutterBox),this.replayImageOrLabel_.apply(this,Mr))}++h;break;case X.DRAW_CHARS:var km=C[1],Dm=C[2],kc=C[3],gx=C[4];E=C[5];var yx=C[6],Rm=C[7],Am=C[8];x=C[9];var Dc=C[10];T=C[11],S=C[12];var Mm=[C[13],C[13]],Rc=this.textStates[S],Ls=Rc.font,Fs=[Rc.scale[0]*Rm,Rc.scale[1]*Rm],Ns=void 0;Ls in this.widths_?Ns=this.widths_[Ls]:(Ns={},this.widths_[Ls]=Ns);var Lm=ty(u,km,Dm,2),Fm=Math.abs(Fs[0])*mg(Ls,T,Ns);if(gx||Fm<=Lm){var _x=this.textStates[S].textAlign,wx=(Lm-Fm)*wh[_x],$s=mk(u,km,Dm,2,T,wx,yx,Math.abs(Fs[0]),mg,Ls,Ns,W?0:this.viewRotation_);t:if($s){var Gs=[],cn=void 0,ju=void 0,Wu=void 0,Ne=void 0,vr=void 0;if(x)for(cn=0,ju=$s.length;cn<ju;++cn){vr=$s[cn],Wu=vr[4],Ne=this.createLabel(Wu,S,"",x),v=vr[2]+(Fs[0]<0?-Dc:Dc),m=kc*Ne.height+(.5-kc)*2*Dc*Fs[1]/Fs[0]-Am;var Ar=this.calculateImageOrLabelDimensions_(Ne.width,Ne.height,vr[0],vr[1],Ne.width,Ne.height,v,m,0,0,vr[3],Mm,!1,na,!1,k);if(l&&l.collides(Ar.declutterBox))break t;Gs.push([r,t,Ne,Ar,1,null,null])}if(E)for(cn=0,ju=$s.length;cn<ju;++cn){vr=$s[cn],Wu=vr[4],Ne=this.createLabel(Wu,S,E,""),v=vr[2],m=kc*Ne.height-Am;var Ar=this.calculateImageOrLabelDimensions_(Ne.width,Ne.height,vr[0],vr[1],Ne.width,Ne.height,v,m,0,0,vr[3],Mm,!1,na,!1,k);if(l&&l.collides(Ar.declutterBox))break t;Gs.push([r,t,Ne,Ar,1,null,null])}l&&l.load(Gs.map(dy));for(var Ac=0,bx=Gs.length;Ac<bx;++Ac)this.replayImageOrLabel_.apply(this,Gs[Ac])}}++h;break;case X.END_GEOMETRY:if(o!==void 0){k=C[1];var Nm=o(k,$);if(Nm)return Nm}++h;break;case X.FILL:H?I++:this.fill_(r),++h;break;case X.MOVE_TO_LINE_TO:for(c=C[1],d=C[2],O=u[c],M=u[c+1],_=O+.5|0,y=M+.5|0,(_!==p||y!==g)&&(r.moveTo(O,M),p=_,g=y),c+=2;c<d;c+=2)O=u[c],M=u[c+1],_=O+.5|0,y=M+.5|0,(c==d-2||_!==p||y!==g)&&(r.lineTo(O,M),p=_,g=y);++h;break;case X.SET_FILL_STYLE:P=C,this.alignFill_=C[2],I&&(this.fill_(r),I=0,A&&(r.stroke(),A=0)),r.fillStyle=C[1],++h;break;case X.SET_STROKE_STYLE:R=C,A&&(r.stroke(),A=0),this.setStrokeStyle_(r,C),++h;break;case X.STROKE:H?A++:r.stroke(),++h;break;default:++h;break}}I&&this.fill_(r),A&&r.stroke()},e.prototype.execute=function(r,t,i,n,a,o){this.viewRotation_=n,this.execute_(r,t,i,this.instructions,a,void 0,void 0,o)},e.prototype.executeHitDetection=function(r,t,i,n,a){return this.viewRotation_=i,this.execute_(r,1,t,this.hitDetectionInstructions,!0,n,a)},e}(),_k=yk,Ed=[Vt.POLYGON,Vt.CIRCLE,Vt.LINE_STRING,Vt.IMAGE,Vt.TEXT,Vt.DEFAULT],wk=function(){function e(r,t,i,n,a,o){this.maxExtent_=r,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=qr(),this.createExecutors_(a)}return e.prototype.clip=function(r,t){var i=this.getClipCoords(t);r.beginPath(),r.moveTo(i[0],i[1]),r.lineTo(i[2],i[3]),r.lineTo(i[4],i[5]),r.lineTo(i[6],i[7]),r.clip()},e.prototype.createExecutors_=function(r){for(var t in r){var i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);var n=r[t];for(var a in n){var o=n[a];i[a]=new _k(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},e.prototype.hasExecutors=function(r){for(var t in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[t],n=0,a=r.length;n<a;++n)if(r[n]in i)return!0;return!1},e.prototype.forEachFeatureAtCoordinate=function(r,t,i,n,a,o){n=Math.round(n);var s=n*2+1,l=Ei(this.hitDetectionTransform_,n+.5,n+.5,1/t,-1/t,-i,-r[0],-r[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=pr(s,s));var h=this.hitDetectionContext_;h.canvas.width!==s||h.canvas.height!==s?(h.canvas.width=s,h.canvas.height=s):u||h.clearRect(0,0,s,s);var f;this.renderBuffer_!==void 0&&(f=Fr(),Bs(f,r),$c(f,t*(this.renderBuffer_+n),f));var c=bk(n),d;function v(S,x){for(var E=h.getImageData(0,0,s,s).data,I=0,A=c.length;I<A;I++)if(E[c[I]]>0){if(!o||d!==Vt.IMAGE&&d!==Vt.TEXT||o.indexOf(S)!==-1){var P=(c[I]-3)/4,R=n-P%s,N=n-(P/s|0),j=a(S,x,R*R+N*N);if(j)return j}h.clearRect(0,0,s,s);break}}var m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(Qn);var p,g,_,y,w;for(p=m.length-1;p>=0;--p){var T=m[p].toString();for(_=this.executorsByZIndex_[T],g=Ed.length-1;g>=0;--g)if(d=Ed[g],y=_[d],y!==void 0&&(w=y.executeHitDetection(h,l,i,v,f),w))return w}},e.prototype.getClipCoords=function(r){var t=this.maxExtent_;if(!t)return null;var i=t[0],n=t[1],a=t[2],o=t[3],s=[i,n,i,o,a,o,a,n];return sa(s,0,8,2,r,s),s},e.prototype.isEmpty=function(){return js(this.executorsByZIndex_)},e.prototype.execute=function(r,t,i,n,a,o,s){var l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Qn),this.maxExtent_&&(r.save(),this.clip(r,i));var u=o||Ed,h,f,c,d,v,m;for(s&&l.reverse(),h=0,f=l.length;h<f;++h){var p=l[h].toString();for(v=this.executorsByZIndex_[p],c=0,d=u.length;c<d;++c){var g=u[c];m=v[g],m!==void 0&&m.execute(r,t,i,n,a,s)}}this.maxExtent_&&r.restore()},e}(),Sd={};function bk(e){if(Sd[e]!==void 0)return Sd[e];for(var r=e*2+1,t=e*e,i=new Array(t+1),n=0;n<=e;++n)for(var a=0;a<=e;++a){var o=n*n+a*a;if(o>t)break;var s=i[o];s||(s=[],i[o]=s),s.push(((e+n)*r+(e+a))*4+3),n>0&&s.push(((e-n)*r+(e+a))*4+3),a>0&&(s.push(((e+n)*r+(e-a))*4+3),n>0&&s.push(((e-n)*r+(e-a))*4+3))}for(var l=[],n=0,u=i.length;n<u;++n)i[n]&&l.push.apply(l,i[n]);return Sd[e]=l,l}var py=wk,Tk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ek=function(e){Tk(r,e);function r(t,i,n,a,o,s,l){var u=e.call(this)||this;return u.context_=t,u.pixelRatio_=i,u.extent_=n,u.transform_=a,u.viewRotation_=o,u.squaredTolerance_=s,u.userTransform_=l,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=[0,0],u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=[0,0],u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=qr(),u}return r.prototype.drawImages_=function(t,i,n,a){if(!!this.image_){var o=sa(t,i,n,a,this.transform_,this.pixelCoordinates_),s=this.context_,l=this.tmpLocalTransform_,u=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=u*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var f=0,c=o.length;f<c;f+=2){var d=o[f]-this.imageAnchorX_,v=o[f+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){var m=d+this.imageAnchorX_,p=v+this.imageAnchorY_;Ei(l,m,p,1,1,h,-m,-p),s.setTransform.apply(s,l),s.translate(m,p),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,v,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=u)}},r.prototype.drawText_=function(t,i,n,a){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=sa(t,i,n,a,this.transform_,this.pixelCoordinates_),s=this.context_,l=this.textRotation_;for(this.textRotateWithView_&&(l+=this.viewRotation_);i<n;i+=a){var u=o[i]+this.textOffsetX_,h=o[i+1]+this.textOffsetY_;if(l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1){var f=Ei(this.tmpLocalTransform_,u,h,1,1,l,-u,-h);s.setTransform.apply(s,f),s.translate(u,h),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&s.strokeText(this.text_,u,h),this.textFillState_&&s.fillText(this.text_,u,h)}}},r.prototype.moveToLineTo_=function(t,i,n,a,o){var s=this.context_,l=sa(t,i,n,a,this.transform_,this.pixelCoordinates_);s.moveTo(l[0],l[1]);var u=l.length;o&&(u-=2);for(var h=2;h<u;h+=2)s.lineTo(l[h],l[h+1]);return o&&s.closePath(),n},r.prototype.drawRings_=function(t,i,n,a){for(var o=0,s=n.length;o<s;++o)i=this.moveToLineTo_(t,i,n[o],a,!0);return i},r.prototype.drawCircle=function(t){if(!!qe(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=$O(t,this.transform_,this.pixelCoordinates_),n=i[2]-i[0],a=i[3]-i[1],o=Math.sqrt(n*n+a*a),s=this.context_;s.beginPath(),s.arc(i[0],i[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}},r.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},r.prototype.setTransform=function(t){this.transform_=t},r.prototype.drawGeometry=function(t){var i=t.getType();switch(i){case rt.POINT:this.drawPoint(t);break;case rt.LINE_STRING:this.drawLineString(t);break;case rt.POLYGON:this.drawPolygon(t);break;case rt.MULTI_POINT:this.drawMultiPoint(t);break;case rt.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case rt.MULTI_POLYGON:this.drawMultiPolygon(t);break;case rt.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case rt.CIRCLE:this.drawCircle(t);break}},r.prototype.drawFeature=function(t,i){var n=i.getGeometryFunction()(t);!n||!qe(this.extent_,n.getExtent())||(this.setStyle(i),this.drawGeometry(n))},r.prototype.drawGeometryCollection=function(t){for(var i=t.getGeometriesArray(),n=0,a=i.length;n<a;++n)this.drawGeometry(i[n])},r.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(i,0,i.length,n),this.text_!==""&&this.drawText_(i,0,i.length,n)},r.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(i,0,i.length,n),this.text_!==""&&this.drawText_(i,0,i.length,n)},r.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!qe(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),i.stroke()}if(this.text_!==""){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}},r.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getExtent();if(!!qe(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,a=t.getFlatCoordinates(),o=0,s=t.getEnds(),l=t.getStride();n.beginPath();for(var u=0,h=s.length;u<h;++u)o=this.moveToLineTo_(a,o,s[u],l,!1);n.stroke()}if(this.text_!==""){var f=t.getFlatMidpoints();this.drawText_(f,0,f.length,2)}}},r.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!qe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},r.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!qe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getOrientedFlatCoordinates(),a=0,o=t.getEndss(),s=t.getStride();i.beginPath();for(var l=0,u=o.length;l<u;++l){var h=o[l];a=this.drawRings_(n,a,h,s)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){var f=t.getFlatInteriorPoints();this.drawText_(f,0,f.length,2)}}},r.prototype.setContextFillState_=function(t){var i=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},r.prototype.setContextStrokeState_=function(t){var i=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,i.lineCap=t.lineCap),i.setLineDash&&(co(n.lineDash,t.lineDash)||i.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,i.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,i.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,i.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,i.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,i.setLineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},r.prototype.setContextTextState_=function(t){var i=this.context_,n=this.contextTextState_,a=t.textAlign?t.textAlign:Zs;n?(n.font!=t.font&&(n.font=t.font,i.font=t.font),n.textAlign!=a&&(n.textAlign=a,i.textAlign=a),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=a,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:a,textBaseline:t.textBaseline})},r.prototype.setFillStrokeStyle=function(t,i){var n=this;if(!t)this.fillState_=null;else{var a=t.getColor();this.fillState_={fillStyle:ei(a||Ci)}}if(!i)this.strokeState_=null;else{var o=i.getColor(),s=i.getLineCap(),l=i.getLineDash(),u=i.getLineDashOffset(),h=i.getLineJoin(),f=i.getWidth(),c=i.getMiterLimit(),d=l||zs;this.strokeState_={lineCap:s!==void 0?s:nh,lineDash:this.pixelRatio_===1?d:d.map(function(v){return v*n.pixelRatio_}),lineDashOffset:(u||Vs)*this.pixelRatio_,lineJoin:h!==void 0?h:_o,lineWidth:(f!==void 0?f:qs)*this.pixelRatio_,miterLimit:c!==void 0?c:Xs,strokeStyle:ei(o||Ks)}}},r.prototype.setImageStyle=function(t){var i;if(!t||!(i=t.getSize())){this.image_=null;return}var n=t.getAnchor(),a=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*this.pixelRatio_,this.imageAnchorY_=n[1]*this.pixelRatio_,this.imageHeight_=i[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=i[0]*this.pixelRatio_},r.prototype.setTextStyle=function(t){if(!t)this.text_="";else{var i=t.getFill();if(!i)this.textFillState_=null;else{var n=i.getColor();this.textFillState_={fillStyle:ei(n||Ci)}}var a=t.getStroke();if(!a)this.textStrokeState_=null;else{var o=a.getColor(),s=a.getLineCap(),l=a.getLineDash(),u=a.getLineDashOffset(),h=a.getLineJoin(),f=a.getWidth(),c=a.getMiterLimit();this.textStrokeState_={lineCap:s!==void 0?s:nh,lineDash:l||zs,lineDashOffset:u||Vs,lineJoin:h!==void 0?h:_o,lineWidth:f!==void 0?f:qs,miterLimit:c!==void 0?c:Xs,strokeStyle:ei(o||Ks)}}var d=t.getFont(),v=t.getOffsetX(),m=t.getOffsetY(),p=t.getRotateWithView(),g=t.getRotation(),_=t.getScaleArray(),y=t.getText(),w=t.getTextAlign(),T=t.getTextBaseline();this.textState_={font:d!==void 0?d:vg,textAlign:w!==void 0?w:Zs,textBaseline:T!==void 0?T:ah},this.text_=y!==void 0?y:"",this.textOffsetX_=v!==void 0?this.pixelRatio_*v:0,this.textOffsetY_=m!==void 0?this.pixelRatio_*m:0,this.textRotateWithView_=p!==void 0?p:!1,this.textRotation_=g!==void 0?g:0,this.textScale_=[this.pixelRatio_*_[0],this.pixelRatio_*_[1]]}},r}(uy),my=Ek,wn={FRACTION:"fraction",PIXELS:"pixels"},gr={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Sk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),xk=function(e){Sk(r,e);function r(t,i,n,a){var o=e.call(this)||this;return o.extent=t,o.pixelRatio_=n,o.resolution=i,o.state=a,o}return r.prototype.changed=function(){this.dispatchEvent(q.CHANGE)},r.prototype.getExtent=function(){return this.extent},r.prototype.getImage=function(){return ht()},r.prototype.getPixelRatio=function(){return this.pixelRatio_},r.prototype.getResolution=function(){return this.resolution},r.prototype.getState=function(){return this.state},r.prototype.load=function(){ht()},r}(po),Ck=xk,Ok=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();(function(e){Ok(r,e);function r(t,i,n,a,o,s){var l=e.call(this,t,i,n,Mt.IDLE)||this;return l.src_=a,l.image_=new Image,o!==null&&(l.image_.crossOrigin=o),l.unlisten_=null,l.state=Mt.IDLE,l.imageLoadFunction_=s,l}return r.prototype.getImage=function(){return this.image_},r.prototype.handleImageError_=function(){this.state=Mt.ERROR,this.unlistenImage_(),this.changed()},r.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=Nr(this.extent)/this.image_.height),this.state=Mt.LOADED,this.unlistenImage_(),this.changed()},r.prototype.load=function(){(this.state==Mt.IDLE||this.state==Mt.ERROR)&&(this.state=Mt.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=xd(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},r.prototype.setImage=function(t){this.image_=t,this.resolution=Nr(this.extent)/this.image_.height},r.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},r})(Ck);function xd(e,r,t){var i=e;if(i.src&&Hx){var n=i.decode(),a=!0,o=function(){a=!1};return n.then(function(){a&&r()}).catch(function(l){a&&(l.name==="EncodingError"&&l.message==="Invalid image type."?r():t())}),o}var s=[Bu(i,q.LOAD,r),Bu(i,q.ERROR,t)];return function(){s.forEach(Nt)}}var Ik=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ll=null,Pk=function(e){Ik(r,e);function r(t,i,n,a,o,s){var l=e.call(this)||this;return l.hitDetectionImage_=null,l.image_=t||new Image,a!==null&&(l.image_.crossOrigin=a),l.canvas_={},l.color_=s,l.unlisten_=null,l.imageState_=o,l.size_=n,l.src_=i,l.tainted_,l}return r.prototype.isTainted_=function(){if(this.tainted_===void 0&&this.imageState_===Mt.LOADED){ll||(ll=pr(1,1)),ll.drawImage(this.image_,0,0);try{ll.getImageData(0,0,1,1),this.tainted_=!1}catch(t){ll=null,this.tainted_=!0}}return this.tainted_===!0},r.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(q.CHANGE)},r.prototype.handleImageError_=function(){this.imageState_=Mt.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},r.prototype.handleImageLoad_=function(){this.imageState_=Mt.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},r.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},r.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},r.prototype.getImageState=function(){return this.imageState_},r.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],i=this.size_[1],n=pr(t,i);n.fillRect(0,0,t,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},r.prototype.getSize=function(){return this.size_},r.prototype.getSrc=function(){return this.src_},r.prototype.load=function(){if(this.imageState_==Mt.IDLE){this.imageState_=Mt.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=xd(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},r.prototype.replaceColor_=function(t){if(!(!this.color_||this.canvas_[t]||this.imageState_!==Mt.LOADED)){var i=document.createElement("canvas");this.canvas_[t]=i,i.width=Math.ceil(this.image_.width*t),i.height=Math.ceil(this.image_.height*t);var n=i.getContext("2d");if(n.scale(t,t),n.drawImage(this.image_,0,0),n.globalCompositeOperation="multiply",n.globalCompositeOperation==="multiply"||this.isTainted_())n.fillStyle=Qm(this.color_),n.fillRect(0,0,i.width/t,i.height/t),n.globalCompositeOperation="destination-in",n.drawImage(this.image_,0,0);else{for(var a=n.getImageData(0,0,i.width,i.height),o=a.data,s=this.color_[0]/255,l=this.color_[1]/255,u=this.color_[2]/255,h=this.color_[3],f=0,c=o.length;f<c;f+=4)o[f]*=s,o[f+1]*=l,o[f+2]*=u,o[f+3]*=h;n.putImageData(a,0,0)}}},r.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},r}(po);function kk(e,r,t,i,n,a){var o=Ju.get(r,i,a);return o||(o=new Pk(e,r,t,i,n,a),Ju.set(r,i,a,o)),o}var Dk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Rk=function(e){Dk(r,e);function r(t){var i=this,n=t||{},a=n.opacity!==void 0?n.opacity:1,o=n.rotation!==void 0?n.rotation:0,s=n.scale!==void 0?n.scale:1,l=n.rotateWithView!==void 0?n.rotateWithView:!1;i=e.call(this,{opacity:a,rotation:o,scale:s,displacement:n.displacement!==void 0?n.displacement:[0,0],rotateWithView:l})||this,i.anchor_=n.anchor!==void 0?n.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=n.anchorOrigin!==void 0?n.anchorOrigin:gr.TOP_LEFT,i.anchorXUnits_=n.anchorXUnits!==void 0?n.anchorXUnits:wn.FRACTION,i.anchorYUnits_=n.anchorYUnits!==void 0?n.anchorYUnits:wn.FRACTION,i.crossOrigin_=n.crossOrigin!==void 0?n.crossOrigin:null;var u=n.img!==void 0?n.img:null,h=n.imgSize!==void 0?n.imgSize:null,f=n.src;ft(!(f!==void 0&&u),4),ft(!u||u&&h,5),(f===void 0||f.length===0)&&u&&(f=u.src||bt(u)),ft(f!==void 0&&f.length>0,6);var c=n.src!==void 0?Mt.IDLE:Mt.LOADED;return i.color_=n.color!==void 0?Jm(n.color):null,i.iconImage_=kk(u,f,h,i.crossOrigin_,c,i.color_),i.offset_=n.offset!==void 0?n.offset:[0,0],i.offsetOrigin_=n.offsetOrigin!==void 0?n.offsetOrigin:gr.TOP_LEFT,i.origin_=null,i.size_=n.size!==void 0?n.size:null,i}return r.prototype.clone=function(){var t=this.getScale();return new r({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:this.size_!==null?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},r.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,i=this.getSize();if(this.anchorXUnits_==wn.FRACTION||this.anchorYUnits_==wn.FRACTION){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_==wn.FRACTION&&(t[0]*=i[0]),this.anchorYUnits_==wn.FRACTION&&(t[1]*=i[1])}if(this.anchorOrigin_!=gr.TOP_LEFT){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_==gr.TOP_RIGHT||this.anchorOrigin_==gr.BOTTOM_RIGHT)&&(t[0]=-t[0]+i[0]),(this.anchorOrigin_==gr.BOTTOM_LEFT||this.anchorOrigin_==gr.BOTTOM_RIGHT)&&(t[1]=-t[1]+i[1])}var n=this.getDisplacement();return t[0]-=n[0],t[1]+=n[1],this.normalizedAnchor_=t,this.normalizedAnchor_},r.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},r.prototype.getColor=function(){return this.color_},r.prototype.getImage=function(t){return this.iconImage_.getImage(t)},r.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},r.prototype.getImageSize=function(){return this.iconImage_.getSize()},r.prototype.getImageState=function(){return this.iconImage_.getImageState()},r.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},r.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=gr.TOP_LEFT){var i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),(this.offsetOrigin_==gr.TOP_RIGHT||this.offsetOrigin_==gr.BOTTOM_RIGHT)&&(t[0]=n[0]-i[0]-t[0]),(this.offsetOrigin_==gr.BOTTOM_LEFT||this.offsetOrigin_==gr.BOTTOM_RIGHT)&&(t[1]=n[1]-i[1]-t[1])}return this.origin_=t,this.origin_},r.prototype.getSrc=function(){return this.iconImage_.getSrc()},r.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},r.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(q.CHANGE,t)},r.prototype.load=function(){this.iconImage_.load()},r.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(q.CHANGE,t)},r}(ny),Ak=Rk,ri=.5;function Mk(e,r,t,i,n,a,o){var s=e[0]*ri,l=e[1]*ri,u=pr(s,l);u.imageSmoothingEnabled=!1;for(var h=u.canvas,f=new my(u,ri,n,null,o),c=t.length,d=Math.floor((256*256*256-1)/c),v={},m=1;m<=c;++m){var p=t[m-1],g=p.getStyleFunction()||i;if(!!i){var _=g(p,a);if(!!_){Array.isArray(_)||(_=[_]);for(var y=m*d,w="#"+("000000"+y.toString(16)).slice(-6),T=0,S=_.length;T<S;++T){var x=_[T],E=x.getGeometryFunction()(p);if(!(!E||!qe(n,E.getExtent()))){var I=x.clone(),A=I.getFill();A&&A.setColor(w);var P=I.getStroke();P&&(P.setColor(w),P.setLineDash(null)),I.setText(void 0);var R=x.getImage();if(R&&R.getOpacity()!==0){var N=R.getImageSize();if(!N)continue;var j=pr(N[0],N[1],void 0,{alpha:!1}),W=j.canvas;j.fillStyle=w,j.fillRect(0,0,W.width,W.height),I.setImage(new Ak({img:W,imgSize:N,anchor:R.getAnchor(),anchorXUnits:wn.PIXELS,anchorYUnits:wn.PIXELS,offset:R.getOrigin(),opacity:1,size:R.getSize(),scale:R.getScale(),rotation:R.getRotation(),rotateWithView:R.getRotateWithView()}))}var U=I.getZIndex()||0,H=v[U];H||(H={},v[U]=H,H[rt.POLYGON]=[],H[rt.CIRCLE]=[],H[rt.LINE_STRING]=[],H[rt.POINT]=[]),H[E.getType().replace("Multi","")].push(E,I)}}}}}for(var k=Object.keys(v).map(Number).sort(Qn),m=0,O=k.length;m<O;++m){var H=v[k[m]];for(var M in H)for(var $=H[M],T=0,S=$.length;T<S;T+=2){f.setStyle($[T+1]);for(var C=0,ut=r.length;C<ut;++C)f.setTransform(r[C]),f.drawGeometry($[T])}}return u.getImageData(0,0,h.width,h.height)}function Lk(e,r,t){var i=[];if(t){var n=Math.floor(Math.round(e[0])*ri),a=Math.floor(Math.round(e[1])*ri),o=(Qt(n,0,t.width-1)+Qt(a,0,t.height-1)*t.width)*4,s=t.data[o],l=t.data[o+1],u=t.data[o+2],h=u+256*(l+256*s),f=Math.floor((256*256*256-1)/r.length);h&&h%f==0&&i.push(r[h/f-1])}return i}var Fk=.5,gy={Point:Bk,LineString:jk,Polygon:zk,MultiPoint:Uk,MultiLineString:Wk,MultiPolygon:Hk,GeometryCollection:Yk,Circle:$k};function Nk(e,r){return parseInt(bt(e),10)-parseInt(bt(r),10)}function yy(e,r){var t=Cd(e,r);return t*t}function Cd(e,r){return Fk*e/r}function $k(e,r,t,i,n){var a=t.getFill(),o=t.getStroke();if(a||o){var s=e.getBuilder(t.getZIndex(),Vt.CIRCLE);s.setFillStrokeStyle(a,o),s.drawCircle(r,i)}var l=t.getText();if(l&&l.getText()){var u=(n||e).getBuilder(t.getZIndex(),Vt.TEXT);u.setTextStyle(l),u.drawText(r,i)}}function _y(e,r,t,i,n,a,o){var s=!1,l=t.getImage();if(l){var u=l.getImageState();u==Mt.LOADED||u==Mt.ERROR?l.unlistenImageChange(n):(u==Mt.IDLE&&l.load(),u=l.getImageState(),l.listenImageChange(n),s=!0)}return Gk(e,r,t,i,a,o),s}function Gk(e,r,t,i,n,a){var o=t.getGeometryFunction()(r);if(!!o){var s=o.simplifyTransformed(i,n),l=t.getRenderer();if(l)wy(e,s,t,r);else{var u=gy[s.getType()];u(e,s,t,r,a)}}}function wy(e,r,t,i){if(r.getType()==rt.GEOMETRY_COLLECTION){for(var n=r.getGeometries(),a=0,o=n.length;a<o;++a)wy(e,n[a],t,i);return}var s=e.getBuilder(t.getZIndex(),Vt.DEFAULT);s.drawCustom(r,i,t.getRenderer(),t.getHitDetectionRenderer())}function Yk(e,r,t,i,n){var a=r.getGeometriesArray(),o,s;for(o=0,s=a.length;o<s;++o){var l=gy[a[o].getType()];l(e,a[o],t,i,n)}}function jk(e,r,t,i,n){var a=t.getStroke();if(a){var o=e.getBuilder(t.getZIndex(),Vt.LINE_STRING);o.setFillStrokeStyle(null,a),o.drawLineString(r,i)}var s=t.getText();if(s&&s.getText()){var l=(n||e).getBuilder(t.getZIndex(),Vt.TEXT);l.setTextStyle(s),l.drawText(r,i)}}function Wk(e,r,t,i,n){var a=t.getStroke();if(a){var o=e.getBuilder(t.getZIndex(),Vt.LINE_STRING);o.setFillStrokeStyle(null,a),o.drawMultiLineString(r,i)}var s=t.getText();if(s&&s.getText()){var l=(n||e).getBuilder(t.getZIndex(),Vt.TEXT);l.setTextStyle(s),l.drawText(r,i)}}function Hk(e,r,t,i,n){var a=t.getFill(),o=t.getStroke();if(o||a){var s=e.getBuilder(t.getZIndex(),Vt.POLYGON);s.setFillStrokeStyle(a,o),s.drawMultiPolygon(r,i)}var l=t.getText();if(l&&l.getText()){var u=(n||e).getBuilder(t.getZIndex(),Vt.TEXT);u.setTextStyle(l),u.drawText(r,i)}}function Bk(e,r,t,i,n){var a=t.getImage(),o=t.getText(),s;if(n&&(e=n,s=a&&o&&o.getText()?{}:void 0),a){if(a.getImageState()!=Mt.LOADED)return;var l=e.getBuilder(t.getZIndex(),Vt.IMAGE);l.setImageStyle(a,s),l.drawPoint(r,i)}if(o&&o.getText()){var u=e.getBuilder(t.getZIndex(),Vt.TEXT);u.setTextStyle(o,s),u.drawText(r,i)}}function Uk(e,r,t,i,n){var a=t.getImage(),o=t.getText(),s;if(n&&(e=n,s=a&&o&&o.getText()?{}:void 0),a){if(a.getImageState()!=Mt.LOADED)return;var l=e.getBuilder(t.getZIndex(),Vt.IMAGE);l.setImageStyle(a,s),l.drawMultiPoint(r,i)}if(o&&o.getText()){var u=(n||e).getBuilder(t.getZIndex(),Vt.TEXT);u.setTextStyle(o,s),u.drawText(r,i)}}function zk(e,r,t,i,n){var a=t.getFill(),o=t.getStroke();if(a||o){var s=e.getBuilder(t.getZIndex(),Vt.POLYGON);s.setFillStrokeStyle(a,o),s.drawPolygon(r,i)}var l=t.getText();if(l&&l.getText()){var u=(n||e).getBuilder(t.getZIndex(),Vt.TEXT);u.setTextStyle(l),u.drawText(r,i)}}var Vk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Xk=function(e){Vk(r,e);function r(t){var i=e.call(this,t)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=Fr(),i.wrappedRenderedExtent_=Fr(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return r.prototype.useContainer=function(t,i,n){n<1&&(t=null),e.prototype.useContainer.call(this,t,i,n)},r.prototype.renderWorlds=function(t,i,n){var a=i.extent,o=i.viewState,s=o.center,l=o.resolution,u=o.projection,h=o.rotation,f=u.getExtent(),c=this.getLayer().getSource(),d=i.pixelRatio,v=i.viewHints,m=!(v[we.ANIMATING]||v[we.INTERACTING]),p=this.context,g=Math.round(i.size[0]*d),_=Math.round(i.size[1]*d),y=c.getWrapX()&&u.canWrapX(),w=y?Xt(f):null,T=y?Math.ceil((a[2]-f[2])/w)+1:1,S=y?Math.floor((a[0]-f[0])/w):0;do{var x=this.getRenderTransform(s,l,h,d,g,_,S*w);t.execute(p,1,x,h,m,void 0,n)}while(++S<T)},r.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},r.prototype.renderFrame=function(t,i){var n=t.pixelRatio,a=t.layerStatesArray[t.layerIndex];Vx(this.pixelTransform,1/n,1/n),Nc(this.inversePixelTransform,this.pixelTransform);var o=zm(this.pixelTransform);this.useContainer(i,o,a.opacity);var s=this.context,l=s.canvas,u=this.replayGroup_,h=this.declutterExecutorGroup;if((!u||u.isEmpty())&&(!h||h.isEmpty()))return null;var f=Math.round(t.size[0]*n),c=Math.round(t.size[1]*n);l.width!=f||l.height!=c?(l.width=f,l.height=c,l.style.transform!==o&&(l.style.transform=o)):this.containerReused||s.clearRect(0,0,f,c),this.preRender(s,t);var d=t.viewState;d.projection;var v=!1,m=!0;if(a.extent&&this.clipping){var p=oa(a.extent);m=qe(p,t.extent),v=m&&!ta(p,t.extent),v&&this.clipUnrotated(s,t,p)}m&&this.renderWorlds(u,t),v&&s.restore(),this.postRender(s,t);var g=Vc(a.opacity),_=this.container;return g!==_.style.opacity&&(_.style.opacity=g),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container},r.prototype.getFeatures=function(t){return new Promise(function(i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];ne(this.pixelTransform,n);var a=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,l=this.renderedProjection_,u=this.wrappedRenderedExtent_,h=this.getLayer(),f=[],c=n[0]*ri,d=n[1]*ri;f.push(this.getRenderTransform(a,o,s,ri,c,d,0).slice());var v=h.getSource(),m=l.getExtent();if(v.getWrapX()&&l.canWrapX()&&!ta(m,u)){for(var p=u[0],g=Xt(m),_=0,y=void 0;p<m[0];)--_,y=g*_,f.push(this.getRenderTransform(a,o,s,ri,c,d,y).slice()),p+=g;for(_=0,p=u[2];p>m[2];)++_,y=g*_,f.push(this.getRenderTransform(a,o,s,ri,c,d,y).slice()),p-=g}this.hitDetectionImageData_=Mk(n,f,this.renderedFeatures_,h.getStyleFunction(),u,o,s)}i(Lk(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},r.prototype.forEachFeatureAtCoordinate=function(t,i,n,a,o){var s=this;if(!!this.replayGroup_){var l=i.viewState.resolution,u=i.viewState.rotation,h=this.getLayer(),f={},c=function(m,p,g){var _=bt(m),y=f[_];if(y){if(y!==!0&&g<y.distanceSq){if(g===0)return f[_]=!0,o.splice(o.lastIndexOf(y),1),a(m,h,p);y.geometry=p,y.distanceSq=g}}else{if(g===0)return f[_]=!0,a(m,h,p);o.push(f[_]={feature:m,layer:h,geometry:p,distanceSq:g,callback:a})}},d,v=[this.replayGroup_];return this.declutterExecutorGroup&&v.push(this.declutterExecutorGroup),v.some(function(m){return d=m.forEachFeatureAtCoordinate(t,l,u,n,c,m===s.declutterExecutorGroup?i.declutterTree.all().map(function(p){return p.value}):null)}),d}},r.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},r.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},r.prototype.prepareFrame=function(t){var i=this.getLayer(),n=i.getSource();if(!n)return!1;var a=t.viewHints[we.ANIMATING],o=t.viewHints[we.INTERACTING],s=i.getUpdateWhileAnimating(),l=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&a||!l&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var u=t.extent,h=t.viewState,f=h.projection,c=h.resolution,d=t.pixelRatio,v=i.getRevision(),m=i.getRenderBuffer(),p=i.getRenderOrder();p===void 0&&(p=Nk);var g=h.center.slice(),_=$c(u,m*c),y=_.slice(),w=[_.slice()],T=f.getExtent();if(n.getWrapX()&&f.canWrapX()&&!ta(T,t.extent)){var S=Xt(T),x=Math.max(Xt(_)/2,S);_[0]=T[0]-x,_[2]=T[2]+x,sg(g,f);var E=rC(w[0],f);E[0]<T[0]&&E[2]<T[2]?w.push([E[0]+S,E[1],E[2]+S,E[3]]):E[0]>T[0]&&E[2]>T[2]&&w.push([E[0]-S,E[1],E[2]-S,E[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==v&&this.renderedRenderOrder_==p&&ta(this.wrappedRenderedExtent_,_))return co(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var I=new fy(Cd(c,d),_,c,d),A;this.getLayer().getDeclutter()&&(A=new fy(Cd(c,d),_,c,d));for(var P,R,N,R=0,N=w.length;R<N;++R)n.loadFeatures(w[R],c,f);var j=yy(c,d),W=function(M){var $,C=M.getStyleFunction()||i.getStyleFunction();if(C&&($=C(M,c)),$){var ut=this.renderFeature(M,j,$,I,P,A);this.dirty_=this.dirty_||ut}}.bind(this),U=Ig(_),H=n.getFeaturesInExtent(U);p&&H.sort(p);for(var R=0,N=H.length;R<N;++R)W(H[R]);this.renderedFeatures_=H;var k=I.finish(),O=new py(_,c,d,n.getOverlaps(),k,i.getRenderBuffer());return A&&(this.declutterExecutorGroup=new py(_,c,d,n.getOverlaps(),A.finish(),i.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=v,this.renderedRenderOrder_=p,this.renderedExtent_=y,this.wrappedRenderedExtent_=_,this.renderedCenter_=g,this.renderedProjection_=f,this.replayGroup_=O,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},r.prototype.renderFeature=function(t,i,n,a,o,s){if(!n)return!1;var l=!1;if(Array.isArray(n))for(var u=0,h=n.length;u<h;++u)l=_y(a,t,n[u],i,this.boundHandleStyleImageChange_,o,s)||l;else l=_y(a,t,n,i,this.boundHandleStyleImageChange_,o,s);return l},r}(cy),Kk=Xk,Zk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),qk=function(e){Zk(r,e);function r(t){return e.call(this,t)||this}return r.prototype.createRenderer=function(){return new Kk(this)},r}(zP),t6=qk,Qk=function(){function e(r){this.rbush_=new ry(r),this.items_={}}return e.prototype.insert=function(r,t){var i={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:t};this.rbush_.insert(i),this.items_[bt(t)]=i},e.prototype.load=function(r,t){for(var i=new Array(t.length),n=0,a=t.length;n<a;n++){var o=r[n],s=t[n],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[n]=l,this.items_[bt(s)]=l}this.rbush_.load(i)},e.prototype.remove=function(r){var t=bt(r),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null},e.prototype.update=function(r,t){var i=this.items_[bt(t)],n=[i.minX,i.minY,i.maxX,i.maxY];Hs(n,r)||(this.remove(t),this.insert(r,t))},e.prototype.getAll=function(){var r=this.rbush_.all();return r.map(function(t){return t.value})},e.prototype.getInExtent=function(r){var t={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]},i=this.rbush_.search(t);return i.map(function(n){return n.value})},e.prototype.forEach=function(r){return this.forEach_(this.getAll(),r)},e.prototype.forEachInExtent=function(r,t){return this.forEach_(this.getInExtent(r),t)},e.prototype.forEach_=function(r,t){for(var i,n=0,a=r.length;n<a;n++)if(i=t(r[n]),i)return i;return i},e.prototype.isEmpty=function(){return js(this.items_)},e.prototype.clear=function(){this.rbush_.clear(),this.items_={}},e.prototype.getExtent=function(r){var t=this.rbush_.toJSON();return Si(t.minX,t.minY,t.maxX,t.maxY,r)},e.prototype.concat=function(r){this.rbush_.load(r.rbush_.all());for(var t in r.items_)this.items_[t]=r.items_[t]},e}(),by=Qk,Jk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),tD=function(e){Jk(r,e);function r(t){var i=e.call(this)||this;i.projection=$r(t.projection),i.attributions_=Ty(t.attributions),i.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,i.loading=!1,i.state_=t.state!==void 0?t.state:ia.READY,i.wrapX_=t.wrapX!==void 0?t.wrapX:!1,i.viewResolver=null,i.viewRejector=null;var n=i;return i.viewPromise_=new Promise(function(a,o){n.viewResolver=a,n.viewRejector=o}),i}return r.prototype.getAttributions=function(){return this.attributions_},r.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},r.prototype.getProjection=function(){return this.projection},r.prototype.getResolutions=function(){return ht()},r.prototype.getView=function(){return this.viewPromise_},r.prototype.getState=function(){return this.state_},r.prototype.getWrapX=function(){return this.wrapX_},r.prototype.getContextOptions=function(){},r.prototype.refresh=function(){this.changed()},r.prototype.setAttributions=function(t){this.attributions_=Ty(t),this.changed()},r.prototype.setState=function(t){this.state_=t,this.changed()},r}(Lr);function Ty(e){return e?Array.isArray(e)?function(r){return e}:typeof e=="function"?e:function(r){return[e]}:null}var Ey=tD,ii={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function eD(e,r){return[[-1/0,-1/0,1/0,1/0]]}var rD=!1;function iD(e,r,t,i,n,a,o){var s=new XMLHttpRequest;s.open("GET",typeof e=="function"?e(t,i,n):e,!0),r.getType()==rl.ARRAY_BUFFER&&(s.responseType="arraybuffer"),s.withCredentials=rD,s.onload=function(l){if(!s.status||s.status>=200&&s.status<300){var u=r.getType(),h=void 0;u==rl.JSON||u==rl.TEXT?h=s.responseText:u==rl.XML?(h=s.responseXML,h||(h=new DOMParser().parseFromString(s.responseText,"application/xml"))):u==rl.ARRAY_BUFFER&&(h=s.response),h?a(r.readFeatures(h,{extent:t,featureProjection:n}),r.readProjection(h)):o()}else o()},s.onerror=o,s.send()}function Sy(e,r){return function(t,i,n,a,o){var s=this;iD(e,r,t,i,n,function(l,u){s.addFeatures(l),a!==void 0&&a(l)},o||Jn)}}var xy=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),bn=function(e){xy(r,e);function r(t,i,n){var a=e.call(this,t)||this;return a.feature=i,a.features=n,a}return r}(dn),nD=function(e){xy(r,e);function r(t){var i=this,n=t||{};i=e.call(this,{attributions:n.attributions,projection:void 0,state:ia.READY,wrapX:n.wrapX!==void 0?n.wrapX:!0})||this,i.on,i.once,i.un,i.loader_=Jn,i.format_=n.format,i.overlaps_=n.overlaps===void 0?!0:n.overlaps,i.url_=n.url,n.loader!==void 0?i.loader_=n.loader:i.url_!==void 0&&(ft(i.format_,7),i.loader_=Sy(i.url_,i.format_)),i.strategy_=n.strategy!==void 0?n.strategy:eD;var a=n.useSpatialIndex!==void 0?n.useSpatialIndex:!0;i.featuresRtree_=a?new by:null,i.loadedExtentsRtree_=new by,i.loadingExtentsCount_=0,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null;var o,s;return Array.isArray(n.features)?s=n.features:n.features&&(o=n.features,s=o.getArray()),!a&&o===void 0&&(o=new mr(s)),s!==void 0&&i.addFeaturesInternal(s),o!==void 0&&i.bindFeaturesCollection_(o),i}return r.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},r.prototype.addFeatureInternal=function(t){var i=bt(t);if(!this.addToIndex_(i,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(i,t);var n=t.getGeometry();if(n){var a=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(a,t)}else this.nullGeometryFeatures_[i]=t;this.dispatchEvent(new bn(ii.ADDFEATURE,t))},r.prototype.setupChangeEvents_=function(t,i){this.featureChangeKeys_[t]=[wt(i,q.CHANGE,this.handleFeatureChange_,this),wt(i,qn.PROPERTYCHANGE,this.handleFeatureChange_,this)]},r.prototype.addToIndex_=function(t,i){var n=!0,a=i.getId();return a!==void 0&&(a.toString()in this.idIndex_?n=!1:this.idIndex_[a.toString()]=i),n&&(ft(!(t in this.uidIndex_),30),this.uidIndex_[t]=i),n},r.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},r.prototype.addFeaturesInternal=function(t){for(var i=[],n=[],a=[],o=0,s=t.length;o<s;o++){var l=t[o],u=bt(l);this.addToIndex_(u,l)&&n.push(l)}for(var o=0,h=n.length;o<h;o++){var l=n[o],u=bt(l);this.setupChangeEvents_(u,l);var f=l.getGeometry();if(f){var c=f.getExtent();i.push(c),a.push(l)}else this.nullGeometryFeatures_[u]=l}this.featuresRtree_&&this.featuresRtree_.load(i,a);for(var o=0,d=n.length;o<d;o++)this.dispatchEvent(new bn(ii.ADDFEATURE,n[o]))},r.prototype.bindFeaturesCollection_=function(t){var i=!1;this.addEventListener(ii.ADDFEATURE,function(n){i||(i=!0,t.push(n.feature),i=!1)}),this.addEventListener(ii.REMOVEFEATURE,function(n){i||(i=!0,t.remove(n.feature),i=!1)}),t.addEventListener($e.ADD,function(n){i||(i=!0,this.addFeature(n.element),i=!1)}.bind(this)),t.addEventListener($e.REMOVE,function(n){i||(i=!0,this.removeFeature(n.element),i=!1)}.bind(this)),this.featuresCollection_=t},r.prototype.clear=function(t){if(t){for(var i in this.featureChangeKeys_){var n=this.featureChangeKeys_[i];n.forEach(Nt)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this));for(var a in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[a])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var o=new bn(ii.CLEAR);this.dispatchEvent(o),this.changed()},r.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},r.prototype.forEachFeatureAtCoordinateDirect=function(t,i){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(a){var o=a.getGeometry();if(o.intersectsCoordinate(t))return i(a)})},r.prototype.forEachFeatureInExtent=function(t,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)},r.prototype.forEachFeatureIntersectingExtent=function(t,i){return this.forEachFeatureInExtent(t,function(n){var a=n.getGeometry();if(a.intersectsExtent(t)){var o=i(n);if(o)return o}})},r.prototype.getFeaturesCollection=function(){return this.featuresCollection_},r.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),js(this.nullGeometryFeatures_)||Fc(t,$m(this.nullGeometryFeatures_))),t},r.prototype.getFeaturesAtCoordinate=function(t){var i=[];return this.forEachFeatureAtCoordinateDirect(t,function(n){i.push(n)}),i},r.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},r.prototype.getClosestFeatureToCoordinate=function(t,i){var n=t[0],a=t[1],o=null,s=[NaN,NaN],l=1/0,u=[-1/0,-1/0,1/0,1/0],h=i||vo;return this.featuresRtree_.forEachInExtent(u,function(f){if(h(f)){var c=f.getGeometry(),d=l;if(l=c.closestPointXY(n,a,s,l),l<d){o=f;var v=Math.sqrt(l);u[0]=n-v,u[1]=a-v,u[2]=n+v,u[3]=a+v}}}),o},r.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},r.prototype.getFeatureById=function(t){var i=this.idIndex_[t.toString()];return i!==void 0?i:null},r.prototype.getFeatureByUid=function(t){var i=this.uidIndex_[t];return i!==void 0?i:null},r.prototype.getFormat=function(){return this.format_},r.prototype.getOverlaps=function(){return this.overlaps_},r.prototype.getUrl=function(){return this.url_},r.prototype.handleFeatureChange_=function(t){var i=t.target,n=bt(i),a=i.getGeometry();if(!a)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[n]=i);else{var o=a.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,i)):this.featuresRtree_&&this.featuresRtree_.update(o,i)}var s=i.getId();if(s!==void 0){var l=s.toString();this.idIndex_[l]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[l]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[n]=i;this.changed(),this.dispatchEvent(new bn(ii.CHANGEFEATURE,i))},r.prototype.hasFeature=function(t){var i=t.getId();return i!==void 0?i in this.idIndex_:bt(t)in this.uidIndex_},r.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&js(this.nullGeometryFeatures_)},r.prototype.loadFeatures=function(t,i,n){for(var a=this.loadedExtentsRtree_,o=this.strategy_(t,i,n),s=function(f,c){var d=o[f],v=a.forEachInExtent(d,function(m){return ta(m.extent,d)});v||(++l.loadingExtentsCount_,l.dispatchEvent(new bn(ii.FEATURESLOADSTART)),l.loader_.call(l,d,i,n,function(m){--this.loadingExtentsCount_,this.dispatchEvent(new bn(ii.FEATURESLOADEND,void 0,m))}.bind(l),function(){--this.loadingExtentsCount_,this.dispatchEvent(new bn(ii.FEATURESLOADERROR))}.bind(l)),a.insert(d,{extent:d.slice()}))},l=this,u=0,h=o.length;u<h;++u)s(u);this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0},r.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),e.prototype.refresh.call(this)},r.prototype.removeLoadedExtent=function(t){var i=this.loadedExtentsRtree_,n;i.forEachInExtent(t,function(a){if(Hs(a.extent,t))return n=a,!0}),n&&i.remove(n)},r.prototype.removeFeature=function(t){var i=bt(t);i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},r.prototype.removeFeatureInternal=function(t){var i=bt(t);this.featureChangeKeys_[i].forEach(Nt),delete this.featureChangeKeys_[i];var n=t.getId();n!==void 0&&delete this.idIndex_[n.toString()],delete this.uidIndex_[i],this.dispatchEvent(new bn(ii.REMOVEFEATURE,t))},r.prototype.removeFromIdIndex_=function(t){var i=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],i=!0;break}return i},r.prototype.setLoader=function(t){this.loader_=t},r.prototype.setUrl=function(t){ft(this.format_,7),this.url_=t,this.setLoader(Sy(t,this.format_))},r}(Ey),e6=nD;function aD(e){var r=e||{},t=new mr,i=new hP(-.005,.05,100),n=r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0;n&&t.push(new XI);var a=r.doubleClickZoom!==void 0?r.doubleClickZoom:!0;a&&t.push(new MI({delta:r.zoomDelta,duration:r.zoomDuration}));var o=r.dragPan!==void 0?r.dragPan:!0;o&&t.push(new UI({onFocusOnly:r.onFocusOnly,kinetic:i}));var s=r.pinchRotate!==void 0?r.pinchRotate:!0;s&&t.push(new mP);var l=r.pinchZoom!==void 0?r.pinchZoom:!0;l&&t.push(new _P({duration:r.zoomDuration}));var u=r.keyboard!==void 0?r.keyboard:!0;u&&(t.push(new aP),t.push(new lP({delta:r.zoomDelta,duration:r.zoomDuration})));var h=r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0;h&&t.push(new dP({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration}));var f=r.shiftDragZoom!==void 0?r.shiftDragZoom:!0;return f&&t.push(new rP({duration:r.zoomDuration})),t}var oD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),sD=function(e){oD(r,e);function r(t){var i=this;return t=me({},t),t.controls||(t.controls=II()),t.interactions||(t.interactions=aD({onFocusOnly:!0})),i=e.call(this,t)||this,i}return r.prototype.createRenderer=function(){return new GC(this)},r}(vI),r6=sD,lD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),uD=function(e){lD(r,e);function r(t,i,n){var a=e.call(this)||this,o=n||{};return a.tileCoord=t,a.state=i,a.interimTile=null,a.key="",a.transition_=o.transition===void 0?250:o.transition,a.transitionStarts_={},a}return r.prototype.changed=function(){this.dispatchEvent(q.CHANGE)},r.prototype.release=function(){},r.prototype.getKey=function(){return this.key+"/"+this.tileCoord},r.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==K.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},r.prototype.refreshInterimChain=function(){if(!!this.interimTile){var t=this.interimTile,i=this;do{if(t.getState()==K.LOADED){t.interimTile=null;break}else t.getState()==K.LOADING?i=t:t.getState()==K.IDLE?i.interimTile=t.interimTile:i=t;t=i.interimTile}while(t)}},r.prototype.getTileCoord=function(){return this.tileCoord},r.prototype.getState=function(){return this.state},r.prototype.setState=function(t){if(this.state!==K.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},r.prototype.load=function(){ht()},r.prototype.getAlpha=function(t,i){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(!n)n=i,this.transitionStarts_[t]=n;else if(n===-1)return 1;var a=i-n+1e3/60;return a>=this.transition_?1:Rg(a/this.transition_)},r.prototype.inTransition=function(t){return this.transition_?this.transitionStarts_[t]!==-1:!1},r.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},r}(po),Cy=uD,hD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),fD=function(e){hD(r,e);function r(t,i,n,a,o,s){var l=e.call(this,t,i,s)||this;return l.crossOrigin_=a,l.src_=n,l.key=n,l.image_=new Image,a!==null&&(l.image_.crossOrigin=a),l.unlisten_=null,l.tileLoadFunction_=o,l}return r.prototype.getImage=function(){return this.image_},r.prototype.setImage=function(t){this.image_=t,this.state=K.LOADED,this.unlistenImage_(),this.changed()},r.prototype.handleImageError_=function(){this.state=K.ERROR,this.unlistenImage_(),this.image_=cD(),this.changed()},r.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=K.LOADED:this.state=K.EMPTY,this.unlistenImage_(),this.changed()},r.prototype.load=function(){this.state==K.ERROR&&(this.state=K.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==K.IDLE&&(this.state=K.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=xd(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},r.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},r}(Cy);function cD(){var e=pr(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}var dD=fD,vD=.5,Di=!0,pD=10,Oy=.25,mD=function(){function e(r,t,i,n,a,o){this.sourceProj_=r,this.targetProj_=t;var s={},l=ch(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){var w=y[0]+"/"+y[1];return s[w]||(s[w]=l(y)),s[w]},this.maxSourceExtent_=n,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Xt(n)==Xt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Xt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Xt(this.targetProj_.getExtent()):null;var u=ea(i),h=qu(i),f=Zu(i),c=Ku(i),d=this.transformInv_(u),v=this.transformInv_(h),m=this.transformInv_(f),p=this.transformInv_(c),g=pD+(o?Math.max(0,Math.ceil(nC(jc(i)/(o*o*256*256)))):0);if(this.addQuad_(u,h,f,c,d,v,m,p,g),this.wrapsXInSource_){var _=1/0;this.triangles_.forEach(function(y,w,T){_=Math.min(_,y.source[0][0],y.source[1][0],y.source[2][0])}),this.triangles_.forEach(function(y){if(Math.max(y.source[0][0],y.source[1][0],y.source[2][0])-_>this.sourceWorldWidth_/2){var w=[[y.source[0][0],y.source[0][1]],[y.source[1][0],y.source[1][1]],[y.source[2][0],y.source[2][1]]];w[0][0]-_>this.sourceWorldWidth_/2&&(w[0][0]-=this.sourceWorldWidth_),w[1][0]-_>this.sourceWorldWidth_/2&&(w[1][0]-=this.sourceWorldWidth_),w[2][0]-_>this.sourceWorldWidth_/2&&(w[2][0]-=this.sourceWorldWidth_);var T=Math.min(w[0][0],w[1][0],w[2][0]),S=Math.max(w[0][0],w[1][0],w[2][0]);S-T<this.sourceWorldWidth_/2&&(y.source=w)}}.bind(this))}s={}}return e.prototype.addTriangle_=function(r,t,i,n,a,o){this.triangles_.push({source:[n,a,o],target:[r,t,i]})},e.prototype.addQuad_=function(r,t,i,n,a,o,s,l,u){var h=Vm([a,o,s,l]),f=this.sourceWorldWidth_?Xt(h)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&f>.5&&f<1,v=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var m=Vm([r,t,i,n]),p=Xt(m)/this.targetWorldWidth_;v=p>Oy||v}!d&&this.sourceProj_.isGlobal()&&f&&(v=f>Oy||v)}if(!(!v&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!qe(h,this.maxSourceExtent_))){var g=0;if(!v&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)v=!0;else if(g=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(s[0])||!isFinite(s[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),g!=1&&g!=2&&g!=4&&g!=8)return}if(u>0){if(!v){var _=[(r[0]+i[0])/2,(r[1]+i[1])/2],y=this.transformInv_(_),w=void 0;if(d){var T=(vn(a[0],c)+vn(s[0],c))/2;w=T-vn(y[0],c)}else w=(a[0]+s[0])/2-y[0];var S=(a[1]+s[1])/2-y[1],x=w*w+S*S;v=x>this.errorThresholdSquared_}if(v){if(Math.abs(r[0]-i[0])<=Math.abs(r[1]-i[1])){var E=[(t[0]+i[0])/2,(t[1]+i[1])/2],I=this.transformInv_(E),A=[(n[0]+r[0])/2,(n[1]+r[1])/2],P=this.transformInv_(A);this.addQuad_(r,t,E,A,a,o,I,P,u-1),this.addQuad_(A,E,i,n,P,I,s,l,u-1)}else{var R=[(r[0]+t[0])/2,(r[1]+t[1])/2],N=this.transformInv_(R),j=[(i[0]+n[0])/2,(i[1]+n[1])/2],W=this.transformInv_(j);this.addQuad_(r,R,j,n,a,N,W,l,u-1),this.addQuad_(R,t,i,j,N,o,s,W,u-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(g&11)==0&&this.addTriangle_(r,i,n,a,s,l),(g&14)==0&&this.addTriangle_(r,i,t,a,s,o),g&&((g&13)==0&&this.addTriangle_(t,n,r,o,l,a),(g&7)==0&&this.addTriangle_(t,n,i,o,l,s))}},e.prototype.calculateSourceExtent=function(){var r=Fr();return this.triangles_.forEach(function(t,i,n){var a=t.source;Bs(r,a[0]),Bs(r,a[1]),Bs(r,a[2])}),r},e.prototype.getTriangles=function(){return this.triangles_},e}(),gD=mD,Iy={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Od;function Py(e,r,t,i,n){e.beginPath(),e.moveTo(0,0),e.lineTo(r,t),e.lineTo(i,n),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(r,i)+1,Math.max(t,n)),e.restore()}function Id(e,r){return Math.abs(e[r*4]-210)>2||Math.abs(e[r*4+3]-.75*255)>2}function yD(){if(Od===void 0){var e=document.createElement("canvas").getContext("2d");e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",Py(e,4,5,4,0),Py(e,4,5,0,5);var r=e.getImageData(0,0,3,3).data;Od=Id(r,0)||Id(r,4)||Id(r,8)}return Od}function ky(e,r,t,i){var n=Og(t,r,e),a=xg(r,i,t),o=r.getMetersPerUnit();o!==void 0&&(a*=o);var s=e.getMetersPerUnit();s!==void 0&&(a/=s);var l=e.getExtent();if(!l||Vu(l,n)){var u=xg(e,a,n)/a;isFinite(u)&&u>0&&(a/=u)}return a}function _D(e,r,t,i){var n=go(t),a=ky(e,r,n,i);return(!isFinite(a)||a<=0)&&qm(t,function(o){return a=ky(e,r,o,i),isFinite(a)&&a>0}),a}function wD(e,r,t,i,n,a,o,s,l,u,h,f){var c=pr(Math.round(t*e),Math.round(t*r));if(me(c,f),l.length===0)return c.canvas;c.scale(t,t);function d(w){return Math.round(w*t)/t}c.globalCompositeOperation="lighter";var v=Fr();l.forEach(function(w,T,S){qx(v,w.extent)});var m=Xt(v),p=Nr(v),g=pr(Math.round(t*m/i),Math.round(t*p/i));me(g,f);var _=t/i;l.forEach(function(w,T,S){var x=w.extent[0]-v[0],E=-(w.extent[3]-v[3]),I=Xt(w.extent),A=Nr(w.extent);w.image.width>0&&w.image.height>0&&g.drawImage(w.image,u,u,w.image.width-2*u,w.image.height-2*u,x*_,E*_,I*_,A*_)});var y=ea(o);return s.getTriangles().forEach(function(w,T,S){var x=w.source,E=w.target,I=x[0][0],A=x[0][1],P=x[1][0],R=x[1][1],N=x[2][0],j=x[2][1],W=d((E[0][0]-y[0])/a),U=d(-(E[0][1]-y[1])/a),H=d((E[1][0]-y[0])/a),k=d(-(E[1][1]-y[1])/a),O=d((E[2][0]-y[0])/a),M=d(-(E[2][1]-y[1])/a),$=I,C=A;I=0,A=0,P-=$,R-=C,N-=$,j-=C;var ut=[[P,R,0,0,H-W],[N,j,0,0,O-W],[0,0,P,R,k-U],[0,0,N,j,M-U]],V=oC(ut);if(!!V){if(c.save(),c.beginPath(),yD()||f===Iy){c.moveTo(H,k);for(var vt=4,At=W-H,St=U-k,fe=0;fe<vt;fe++)c.lineTo(H+d((fe+1)*At/vt),k+d(fe*St/(vt-1))),fe!=vt-1&&c.lineTo(H+d((fe+1)*At/vt),k+d((fe+1)*St/(vt-1)));c.lineTo(O,M)}else c.moveTo(H,k),c.lineTo(W,U),c.lineTo(O,M);c.clip(),c.transform(V[0],V[2],V[1],V[3],W,U),c.translate(v[0]-$,v[3]-C),c.scale(i/t,-i/t),c.drawImage(g.canvas,0,0),c.restore()}}),h&&(c.save(),c.globalCompositeOperation="source-over",c.strokeStyle="black",c.lineWidth=1,s.getTriangles().forEach(function(w,T,S){var x=w.target,E=(x[0][0]-y[0])/a,I=-(x[0][1]-y[1])/a,A=(x[1][0]-y[0])/a,P=-(x[1][1]-y[1])/a,R=(x[2][0]-y[0])/a,N=-(x[2][1]-y[1])/a;c.beginPath(),c.moveTo(A,P),c.lineTo(E,I),c.lineTo(R,N),c.closePath(),c.stroke()}),c.restore()),c.canvas}var bD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),TD=function(e){bD(r,e);function r(t,i,n,a,o,s,l,u,h,f,c,d){var v=e.call(this,o,K.IDLE)||this;v.renderEdges_=c!==void 0?c:!1,v.contextOptions_=d,v.pixelRatio_=l,v.gutter_=u,v.canvas_=null,v.sourceTileGrid_=i,v.targetTileGrid_=a,v.wrappedTileCoord_=s||o,v.sourceTiles_=[],v.sourcesListenerKeys_=null,v.sourceZ_=0;var m=a.getTileCoordExtent(v.wrappedTileCoord_),p=v.targetTileGrid_.getExtent(),g=v.sourceTileGrid_.getExtent(),_=p?Us(m,p):m;if(jc(_)===0)return v.state=K.EMPTY,v;var y=t.getExtent();y&&(g?g=Us(g,y):g=y);var w=a.getResolution(v.wrappedTileCoord_[0]),T=_D(t,n,_,w);if(!isFinite(T)||T<=0)return v.state=K.EMPTY,v;var S=f!==void 0?f:vD;if(v.triangulation_=new gD(t,n,_,g,T*S,w),v.triangulation_.getTriangles().length===0)return v.state=K.EMPTY,v;v.sourceZ_=i.getZForResolution(T);var x=v.triangulation_.calculateSourceExtent();if(g&&(t.canWrapX()?(x[1]=Qt(x[1],g[1],g[3]),x[3]=Qt(x[3],g[1],g[3])):x=Us(x,g)),!jc(x))v.state=K.EMPTY;else{for(var E=i.getTileRangeForExtentAndZ(x,v.sourceZ_),I=E.minX;I<=E.maxX;I++)for(var A=E.minY;A<=E.maxY;A++){var P=h(v.sourceZ_,I,A,l);P&&v.sourceTiles_.push(P)}v.sourceTiles_.length===0&&(v.state=K.EMPTY)}return v}return r.prototype.getImage=function(){return this.canvas_},r.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(h,f,c){h&&h.getState()==K.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(h.tileCoord),image:h.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=K.ERROR;else{var i=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(i),a=typeof n=="number"?n:n[0],o=typeof n=="number"?n:n[1],s=this.targetTileGrid_.getResolution(i),l=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=wD(a,o,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),s,u,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=K.LOADED}this.changed()},r.prototype.load=function(){if(this.state==K.IDLE){this.state=K.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(i,n,a){var o=i.getState();if(o==K.IDLE||o==K.LOADING){t++;var s=wt(i,q.CHANGE,function(l){var u=i.getState();(u==K.LOADED||u==K.ERROR||u==K.EMPTY)&&(Nt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(i,n,a){var o=i.getState();o==K.IDLE&&i.load()})}},r.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Nt),this.sourcesListenerKeys_=null},r}(Cy),ED=TD,SD=function(){function e(r){this.highWaterMark=r!==void 0?r:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},e.prototype.containsKey=function(r){return this.entries_.hasOwnProperty(r)},e.prototype.forEach=function(r){for(var t=this.oldest_;t;)r(t.value_,t.key_,this),t=t.newer},e.prototype.get=function(r,t){var i=this.entries_[r];return ft(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_},e.prototype.remove=function(r){var t=this.entries_[r];return ft(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[r],--this.count_,t.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var r=new Array(this.count_),t=0,i;for(i=this.newest_;i;i=i.older)r[t++]=i.key_;return r},e.prototype.getValues=function(){var r=new Array(this.count_),t=0,i;for(i=this.newest_;i;i=i.older)r[t++]=i.value_;return r},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var r=this.oldest_;return delete this.entries_[r.key_],r.newer&&(r.newer.older=null),this.oldest_=r.newer,this.oldest_||(this.newest_=null),--this.count_,r.value_},e.prototype.replace=function(r,t){this.get(r),this.entries_[r].value_=t},e.prototype.set=function(r,t){ft(!(r in this.entries_),16);var i={key_:r,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[r]=i,++this.count_},e.prototype.setSize=function(r){this.highWaterMark=r},e}(),xD=SD;function Dy(e,r,t,i){return i!==void 0?(i[0]=e,i[1]=r,i[2]=t,i):[e,r,t]}function bh(e,r,t){return e+"/"+r+"/"+t}function Ry(e){return bh(e[0],e[1],e[2])}function CD(e){return e.split("/").map(Number)}function OD(e){return(e[1]<<e[0])+e[2]}function ID(e,r){var t=e[0],i=e[1],n=e[2];if(r.getMinZoom()>t||t>r.getMaxZoom())return!1;var a=r.getFullTileRange(t);return a?a.containsXY(i,n):!0}var PD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),kD=function(e){PD(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.expireCache=function(t){for(;this.canExpireCache();){var i=this.peekLast();if(i.getKey()in t)break;this.pop().release()}},r.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var t=this.peekFirstKey(),i=CD(t),n=i[0];this.forEach(function(a){a.tileCoord[0]!==n&&(this.remove(Ry(a.tileCoord)),a.release())}.bind(this))}},r}(xD),Ay=kD,Pd={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},My=function(){function e(r,t,i,n){this.minX=r,this.maxX=t,this.minY=i,this.maxY=n}return e.prototype.contains=function(r){return this.containsXY(r[1],r[2])},e.prototype.containsTileRange=function(r){return this.minX<=r.minX&&r.maxX<=this.maxX&&this.minY<=r.minY&&r.maxY<=this.maxY},e.prototype.containsXY=function(r,t){return this.minX<=r&&r<=this.maxX&&this.minY<=t&&t<=this.maxY},e.prototype.equals=function(r){return this.minX==r.minX&&this.minY==r.minY&&this.maxX==r.maxX&&this.maxY==r.maxY},e.prototype.extend=function(r){r.minX<this.minX&&(this.minX=r.minX),r.maxX>this.maxX&&(this.maxX=r.maxX),r.minY<this.minY&&(this.minY=r.minY),r.maxY>this.maxY&&(this.maxY=r.maxY)},e.prototype.getHeight=function(){return this.maxY-this.minY+1},e.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},e.prototype.getWidth=function(){return this.maxX-this.minX+1},e.prototype.intersects=function(r){return this.minX<=r.maxX&&this.maxX>=r.minX&&this.minY<=r.maxY&&this.maxY>=r.minY},e}();function ko(e,r,t,i,n){return n!==void 0?(n.minX=e,n.maxX=r,n.minY=t,n.maxY=i,n):new My(e,r,t,i)}var Ly=My,DD=[0,0,0],RD=function(){function e(r){this.minZoom=r.minZoom!==void 0?r.minZoom:0,this.resolutions_=r.resolutions,ft(Cx(this.resolutions_,function(o,s){return s-o},!0),17);var t;if(!r.origins){for(var i=0,n=this.resolutions_.length-1;i<n;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=r.origin!==void 0?r.origin:null,this.origins_=null,r.origins!==void 0&&(this.origins_=r.origins,ft(this.origins_.length==this.resolutions_.length,20));var a=r.extent;a!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ea(a)),ft(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,r.tileSizes!==void 0&&(this.tileSizes_=r.tileSizes,ft(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=r.tileSize!==void 0?r.tileSize:this.tileSizes_?null:Qc,ft(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=a!==void 0?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],r.sizes!==void 0?this.fullTileRanges_=r.sizes.map(function(o,s){var l=new Ly(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(a){var u=this.getTileRangeForExtentAndZ(a,s);l.minX=Math.max(u.minX,l.minX),l.maxX=Math.min(u.maxX,l.maxX),l.minY=Math.max(u.minY,l.minY),l.maxY=Math.min(u.maxY,l.maxY)}return l},this):a&&this.calculateTileRanges_(a)}return e.prototype.forEachTileCoord=function(r,t,i){for(var n=this.getTileRangeForExtentAndZ(r,t),a=n.minX,o=n.maxX;a<=o;++a)for(var s=n.minY,l=n.maxY;s<=l;++s)i([t,a,s])},e.prototype.forEachTileCoordParentTileRange=function(r,t,i,n){var a,o,s,l=null,u=r[0]-1;for(this.zoomFactor_===2?(o=r[1],s=r[2]):l=this.getTileCoordExtent(r,n);u>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),s=Math.floor(s/2),a=ko(o,o,s,s,i)):a=this.getTileRangeForExtentAndZ(l,u,i),t(u,a))return!0;--u}return!1},e.prototype.getExtent=function(){return this.extent_},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.getMinZoom=function(){return this.minZoom},e.prototype.getOrigin=function(r){return this.origin_?this.origin_:this.origins_[r]},e.prototype.getResolution=function(r){return this.resolutions_[r]},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getTileCoordChildTileRange=function(r,t,i){if(r[0]<this.maxZoom){if(this.zoomFactor_===2){var n=r[1]*2,a=r[2]*2;return ko(n,n+1,a,a+1,t)}var o=this.getTileCoordExtent(r,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,r[0]+1,t)}return null},e.prototype.getTileRangeForTileCoordAndZ=function(r,t,i){if(t>this.maxZoom||t<this.minZoom)return null;var n=r[0],a=r[1],o=r[2];if(t===n)return ko(a,o,a,o,i);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,t-n),l=Math.floor(a*s),u=Math.floor(o*s);if(t<n)return ko(l,l,u,u,i);var h=Math.floor(s*(a+1))-1,f=Math.floor(s*(o+1))-1;return ko(l,h,u,f,i)}var c=this.getTileCoordExtent(r,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,t,i)},e.prototype.getTileRangeExtent=function(r,t,i){var n=this.getOrigin(r),a=this.getResolution(r),o=ti(this.getTileSize(r),this.tmpSize_),s=n[0]+t.minX*o[0]*a,l=n[0]+(t.maxX+1)*o[0]*a,u=n[1]+t.minY*o[1]*a,h=n[1]+(t.maxY+1)*o[1]*a;return Si(s,u,l,h,i)},e.prototype.getTileRangeForExtentAndZ=function(r,t,i){var n=DD;this.getTileCoordForXYAndZ_(r[0],r[3],t,!1,n);var a=n[1],o=n[2];return this.getTileCoordForXYAndZ_(r[2],r[1],t,!0,n),ko(a,n[1],o,n[2],i)},e.prototype.getTileCoordCenter=function(r){var t=this.getOrigin(r[0]),i=this.getResolution(r[0]),n=ti(this.getTileSize(r[0]),this.tmpSize_);return[t[0]+(r[1]+.5)*n[0]*i,t[1]-(r[2]+.5)*n[1]*i]},e.prototype.getTileCoordExtent=function(r,t){var i=this.getOrigin(r[0]),n=this.getResolution(r[0]),a=ti(this.getTileSize(r[0]),this.tmpSize_),o=i[0]+r[1]*a[0]*n,s=i[1]-(r[2]+1)*a[1]*n,l=o+a[0]*n,u=s+a[1]*n;return Si(o,s,l,u,t)},e.prototype.getTileCoordForCoordAndResolution=function(r,t,i){return this.getTileCoordForXYAndResolution_(r[0],r[1],t,!1,i)},e.prototype.getTileCoordForXYAndResolution_=function(r,t,i,n,a){var o=this.getZForResolution(i),s=i/this.getResolution(o),l=this.getOrigin(o),u=ti(this.getTileSize(o),this.tmpSize_),h=n?.5:0,f=n?.5:0,c=Math.floor((r-l[0])/i+h),d=Math.floor((l[1]-t)/i+f),v=s*c/u[0],m=s*d/u[1];return n?(v=Math.ceil(v)-1,m=Math.ceil(m)-1):(v=Math.floor(v),m=Math.floor(m)),Dy(o,v,m,a)},e.prototype.getTileCoordForXYAndZ_=function(r,t,i,n,a){var o=this.getOrigin(i),s=this.getResolution(i),l=ti(this.getTileSize(i),this.tmpSize_),u=n?.5:0,h=n?.5:0,f=Math.floor((r-o[0])/s+u),c=Math.floor((o[1]-t)/s+h),d=f/l[0],v=c/l[1];return n?(d=Math.ceil(d)-1,v=Math.ceil(v)-1):(d=Math.floor(d),v=Math.floor(v)),Dy(i,d,v,a)},e.prototype.getTileCoordForCoordAndZ=function(r,t,i){return this.getTileCoordForXYAndZ_(r[0],r[1],t,!1,i)},e.prototype.getTileCoordResolution=function(r){return this.resolutions_[r[0]]},e.prototype.getTileSize=function(r){return this.tileSize_?this.tileSize_:this.tileSizes_[r]},e.prototype.getFullTileRange=function(r){return this.fullTileRanges_?this.fullTileRanges_[r]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,r):null},e.prototype.getZForResolution=function(r,t){var i=Lc(this.resolutions_,r,t||0);return Qt(i,this.minZoom,this.maxZoom)},e.prototype.calculateTileRanges_=function(r){for(var t=this.resolutions_.length,i=new Array(t),n=this.minZoom;n<t;++n)i[n]=this.getTileRangeForExtentAndZ(r,n);this.fullTileRanges_=i},e}(),Fy=RD;function Ny(e){var r=e.getDefaultTileGrid();return r||(r=FD(e),e.setDefaultTileGrid(r)),r}function AD(e,r,t){var i=r[0],n=e.getTileCoordCenter(r),a=kd(t);if(Vu(a,n))return r;var o=Xt(a),s=Math.ceil((a[0]-n[0])/o);return n[0]+=o*s,e.getTileCoordForCoordAndZ(n,i)}function MD(e,r,t,i){var n=i!==void 0?i:Ws.TOP_LEFT,a=$y(e,r,t);return new Fy({extent:e,origin:Jx(e,n),resolutions:a,tileSize:t})}function LD(e){var r=e||{},t=r.extent||$r("EPSG:3857").getExtent(),i={extent:t,minZoom:r.minZoom,tileSize:r.tileSize,resolutions:$y(t,r.maxZoom,r.tileSize,r.maxResolution)};return new Fy(i)}function $y(e,r,t,i){for(var n=r!==void 0?r:iO,a=Nr(e),o=Xt(e),s=ti(t!==void 0?t:Qc),l=i>0?i:Math.max(o/s[0],a/s[1]),u=n+1,h=new Array(u),f=0;f<u;++f)h[f]=l/Math.pow(2,f);return h}function FD(e,r,t,i){var n=kd(e);return MD(n,r,t,i)}function kd(e){e=$r(e);var r=e.getExtent();if(!r){var t=180*Qr[mn.DEGREES]/e.getMetersPerUnit();r=Si(-t,-t,t,t)}return r}var Gy=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ND=function(e){Gy(r,e);function r(t){var i=e.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX})||this;i.on,i.once,i.un,i.opaque_=t.opaque!==void 0?t.opaque:!1,i.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,i.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;var n=[256,256],a=t.tileGrid;return a&&ti(a.getTileSize(a.getMinZoom()),n),i.tileCache=new Ay(t.cacheSize||0),i.tmpSize=[0,0],i.key_=t.key||"",i.tileOptions={transition:t.transition},i.zDirection=t.zDirection?t.zDirection:0,i}return r.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},r.prototype.expireCache=function(t,i){var n=this.getTileCacheForProjection(t);n&&n.expireCache(i)},r.prototype.forEachLoadedTile=function(t,i,n,a){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var s=!0,l,u,h,f=n.minX;f<=n.maxX;++f)for(var c=n.minY;c<=n.maxY;++c)u=bh(i,f,c),h=!1,o.containsKey(u)&&(l=o.get(u),h=l.getState()===K.LOADED,h&&(h=a(l)!==!1)),h||(s=!1);return s},r.prototype.getGutterForProjection=function(t){return 0},r.prototype.getKey=function(){return this.key_},r.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},r.prototype.getOpaque=function(t){return this.opaque_},r.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},r.prototype.getTile=function(t,i,n,a,o){return ht()},r.prototype.getTileGrid=function(){return this.tileGrid},r.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Ny(t)},r.prototype.getTileCacheForProjection=function(t){return ft(xo(this.getProjection(),t),68),this.tileCache},r.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},r.prototype.getTilePixelSize=function(t,i,n){var a=this.getTileGridForProjection(n),o=this.getTilePixelRatio(i),s=ti(a.getTileSize(t),this.tmpSize);return o==1?s:hI(s,o,this.tmpSize)},r.prototype.getTileCoordForTileUrlFunction=function(t,i){var n=i!==void 0?i:this.getProjection(),a=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=AD(a,t,n)),ID(t,a)?t:null},r.prototype.clear=function(){this.tileCache.clear()},r.prototype.refresh=function(){this.clear(),e.prototype.refresh.call(this)},r.prototype.updateCacheSize=function(t,i){var n=this.getTileCacheForProjection(i);t>n.highWaterMark&&(n.highWaterMark=t)},r.prototype.useTile=function(t,i,n,a){},r}(Ey),$D=function(e){Gy(r,e);function r(t,i){var n=e.call(this,t)||this;return n.tile=i,n}return r}(dn),GD=ND;function YD(e,r){var t=/\{z\}/g,i=/\{x\}/g,n=/\{y\}/g,a=/\{-y\}/g;return function(o,s,l){if(o)return e.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(n,o[2].toString()).replace(a,function(){var u=o[0],h=r.getFullTileRange(u);ft(h,55);var f=h.getHeight()-o[2]-1;return f.toString()})}}function jD(e,r){for(var t=e.length,i=new Array(t),n=0;n<t;++n)i[n]=YD(e[n],r);return WD(i)}function WD(e){return e.length===1?e[0]:function(r,t,i){if(r){var n=OD(r),a=vn(n,e.length);return e[a](r,t,i)}else return}}function HD(e){var r=[],t=/\{([a-z])-([a-z])\}/.exec(e);if(t){var i=t[1].charCodeAt(0),n=t[2].charCodeAt(0),a=void 0;for(a=i;a<=n;++a)r.push(e.replace(t[0],String.fromCharCode(a)));return r}if(t=/\{(\d+)-(\d+)\}/.exec(e),t){for(var o=parseInt(t[2],10),s=parseInt(t[1],10);s<=o;s++)r.push(e.replace(t[0],s.toString()));return r}return r.push(e),r}var BD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),UD=function(e){BD(r,e);function r(t){var i=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return i.generateTileUrlFunction_=i.tileUrlFunction===r.prototype.tileUrlFunction,i.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(i.tileUrlFunction=t.tileUrlFunction),i.urls=null,t.urls?i.setUrls(t.urls):t.url&&i.setUrl(t.url),i.tileLoadingKeys_={},i}return r.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},r.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},r.prototype.getUrls=function(){return this.urls},r.prototype.handleTileChange=function(t){var i=t.target,n=bt(i),a=i.getState(),o;a==K.LOADING?(this.tileLoadingKeys_[n]=!0,o=Pd.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],o=a==K.ERROR?Pd.TILELOADERROR:a==K.LOADED?Pd.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new $D(o,i))},r.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},r.prototype.setTileUrlFunction=function(t,i){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof i!="undefined"?this.setKey(i):this.changed()},r.prototype.setUrl=function(t){var i=HD(t);this.urls=i,this.setUrls(i)},r.prototype.setUrls=function(t){this.urls=t;var i=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(jD(t,this.tileGrid),i):this.setKey(i)},r.prototype.tileUrlFunction=function(t,i,n){},r.prototype.useTile=function(t,i,n){var a=bh(t,i,n);this.tileCache.containsKey(a)&&this.tileCache.get(a)},r}(GD),zD=UD,VD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),XD=function(e){VD(r,e);function r(t){var i=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:KD,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return i.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,i.tileClass=t.tileClass!==void 0?t.tileClass:dD,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,i.contextOptions_=t.imageSmoothing===!1?Iy:void 0,i.renderReprojectionEdges_=!1,i}return r.prototype.canExpireCache=function(){if(!Di)return e.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},r.prototype.expireCache=function(t,i){if(!Di){e.prototype.expireCache.call(this,t,i);return}var n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?i:{});for(var a in this.tileCacheForProjection){var o=this.tileCacheForProjection[a];o.expireCache(o==n?i:{})}},r.prototype.getContextOptions=function(){return this.contextOptions_},r.prototype.getGutterForProjection=function(t){return Di&&this.getProjection()&&t&&!xo(this.getProjection(),t)?0:this.getGutter()},r.prototype.getGutter=function(){return 0},r.prototype.getKey=function(){return e.prototype.getKey.call(this)+(this.contextOptions_?`
`+JSON.stringify(this.contextOptions_):"")},r.prototype.getOpaque=function(t){return Di&&this.getProjection()&&t&&!xo(this.getProjection(),t)?!1:e.prototype.getOpaque.call(this,t)},r.prototype.getTileGridForProjection=function(t){if(!Di)return e.prototype.getTileGridForProjection.call(this,t);var i=this.getProjection();if(this.tileGrid&&(!i||xo(i,t)))return this.tileGrid;var n=bt(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Ny(t)),this.tileGridForProjection[n]},r.prototype.getTileCacheForProjection=function(t){if(!Di)return e.prototype.getTileCacheForProjection.call(this,t);var i=this.getProjection();if(!i||xo(i,t))return this.tileCache;var n=bt(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Ay(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},r.prototype.createTile_=function(t,i,n,a,o,s){var l=[t,i,n],u=this.getTileCoordForTileUrlFunction(l,o),h=u?this.tileUrlFunction(u,a,o):void 0,f=new this.tileClass(l,h!==void 0?K.IDLE:K.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=s,f.addEventListener(q.CHANGE,this.handleTileChange.bind(this)),f},r.prototype.getTile=function(t,i,n,a,o){var s=this.getProjection();if(!Di||!s||!o||xo(s,o))return this.getTileInternal(t,i,n,a,s||o);var l=this.getTileCacheForProjection(o),u=[t,i,n],h=void 0,f=Ry(u);l.containsKey(f)&&(h=l.get(f));var c=this.getKey();if(h&&h.key==c)return h;var d=this.getTileGridForProjection(s),v=this.getTileGridForProjection(o),m=this.getTileCoordForTileUrlFunction(u,o),p=new ED(s,d,o,v,u,m,this.getTilePixelRatio(a),this.getGutter(),function(g,_,y,w){return this.getTileInternal(g,_,y,w,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return p.key=c,h?(p.interimTile=h,p.refreshInterimChain(),l.replace(f,p)):l.set(f,p),p},r.prototype.getTileInternal=function(t,i,n,a,o){var s=null,l=bh(t,i,n),u=this.getKey();if(!this.tileCache.containsKey(l))s=this.createTile_(t,i,n,a,o,u),this.tileCache.set(l,s);else if(s=this.tileCache.get(l),s.key!=u){var h=s;s=this.createTile_(t,i,n,a,o,u),h.getState()==K.IDLE?s.interimTile=h.interimTile:s.interimTile=h,s.refreshInterimChain(),this.tileCache.replace(l,s)}return s},r.prototype.setRenderReprojectionEdges=function(t){if(!(!Di||this.renderReprojectionEdges_==t)){this.renderReprojectionEdges_=t;for(var i in this.tileCacheForProjection)this.tileCacheForProjection[i].clear();this.changed()}},r.prototype.setTileGridForProjection=function(t,i){if(Di){var n=$r(t);if(n){var a=bt(n);a in this.tileGridForProjection||(this.tileGridForProjection[a]=i)}}},r}(zD);function KD(e,r){e.getImage().src=r}var ZD=XD,qD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),QD=function(e){qD(r,e);function r(t){var i=this,n=t||{},a=n.projection!==void 0?n.projection:"EPSG:3857",o=n.tileGrid!==void 0?n.tileGrid:LD({extent:kd(a),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return i=e.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,opaque:n.opaque,projection:a,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX!==void 0?n.wrapX:!0,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this,i}return r}(ZD),i6=QD;function n6(e){var r=e.inversePixelTransform[0],t=e.frameState,i=Bx(e.inversePixelTransform.slice(),t.coordinateToPixelTransform),n=yy(t.viewState.resolution,r),a;return new my(e.context,r,t.extent,i,t.viewState.rotation,n,a)}var JD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Yy=function(e){JD(r,e);function r(t){var i=e.call(this,t)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=Fr(),i.tmpTileRange_=new Ly(0,0,0,0),i}return r.prototype.isDrawableTile=function(t){var i=this.getLayer(),n=t.getState(),a=i.getUseInterimTilesOnError();return n==K.LOADED||n==K.EMPTY||n==K.ERROR&&!a},r.prototype.getTile=function(t,i,n,a){var o=a.pixelRatio,s=a.viewState.projection,l=this.getLayer(),u=l.getSource(),h=u.getTile(t,i,n,o,s);return h.getState()==K.ERROR&&(l.getUseInterimTilesOnError()?l.getPreload()>0&&(this.newTiles_=!0):h.setState(K.LOADED)),this.isDrawableTile(h)||(h=h.getInterimTile()),h},r.prototype.loadedTileCallback=function(t,i,n){return this.isDrawableTile(n)?e.prototype.loadedTileCallback.call(this,t,i,n):!1},r.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},r.prototype.renderFrame=function(t,i){var n=t.layerStatesArray[t.layerIndex],a=t.viewState,o=a.projection,s=a.resolution,l=a.center,u=a.rotation,h=t.pixelRatio,f=this.getLayer(),c=f.getSource(),d=c.getRevision(),v=c.getTileGridForProjection(o),m=v.getZForResolution(s,c.zDirection),p=v.getResolution(m),g=t.extent,_=n.extent&&oa(n.extent);_&&(g=Us(g,oa(n.extent)));var y=c.getTilePixelRatio(h),w=Math.round(t.size[0]*y),T=Math.round(t.size[1]*y);if(u){var S=Math.round(Math.sqrt(w*w+T*T));w=S,T=S}var x=p*w/2/y,E=p*T/2/y,I=[l[0]-x,l[1]-E,l[0]+x,l[1]+E],A=v.getTileRangeForExtentAndZ(g,m),P={};P[m]={};var R=this.createLoadedTileFinder(c,o,P),N=this.tmpExtent,j=this.tmpTileRange_;this.newTiles_=!1;for(var W=A.minX;W<=A.maxX;++W)for(var U=A.minY;U<=A.maxY;++U){var H=this.getTile(m,W,U,t);if(this.isDrawableTile(H)){var k=bt(this);if(H.getState()==K.LOADED){P[m][H.tileCoord.toString()]=H;var O=H.inTransition(k);!this.newTiles_&&(O||this.renderedTiles.indexOf(H)===-1)&&(this.newTiles_=!0)}if(H.getAlpha(k,t.time)===1)continue}var M=v.getTileCoordChildTileRange(H.tileCoord,j,N),$=!1;M&&($=R(m+1,M)),$||v.forEachTileCoordParentTileRange(H.tileCoord,R,j,N)}var C=p/s;Ei(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/y,1/y,u,-w/2,-T/2);var ut=zm(this.pixelTransform);this.useContainer(i,ut,n.opacity);var V=this.context,vt=V.canvas;Nc(this.inversePixelTransform,this.pixelTransform),Ei(this.tempTransform,w/2,T/2,C,C,0,-w/2,-T/2),vt.width!=w||vt.height!=T?(vt.width=w,vt.height=T):this.containerReused||V.clearRect(0,0,w,T),_&&this.clipUnrotated(V,t,_),me(V,c.getContextOptions()),this.preRender(V,t),this.renderedTiles.length=0;var At=Object.keys(P).map(Number);At.sort(Qn);var St,fe,ie;n.opacity===1&&(!this.containerReused||c.getOpaque(t.viewState.projection))?At=At.reverse():(St=[],fe=[]);for(var Fe=At.length-1;Fe>=0;--Fe){var Zr=At[Fe],Mu=c.getTilePixelSize(Zr,h,o),Lu=v.getResolution(Zr),un=Lu/p,so=Mu[0]*un*C,Fu=Mu[1]*un*C,Rs=v.getTileCoordForCoordAndZ(ea(I),Zr),Nu=v.getTileCoordExtent(Rs),Xn=ne(this.tempTransform,[y*(Nu[0]-I[0])/p,y*(I[3]-Nu[3])/p]),As=y*c.getGutterForProjection(o),$u=P[Zr];for(var lo in $u){var H=$u[lo],hn=H.tileCoord,uo=Rs[1]-hn[1],Pc=Math.round(Xn[0]-(uo-1)*so),Gu=Rs[2]-hn[2],Ms=Math.round(Xn[1]-(Gu-1)*Fu),W=Math.round(Xn[0]-uo*so),U=Math.round(Xn[1]-Gu*Fu),fn=Pc-W,Ti=Ms-U,Kn=m===Zr,O=Kn&&H.getAlpha(bt(this),t.time)!==1;if(!O)if(St){V.save(),ie=[W,U,W+fn,U,W+fn,U+Ti,W,U+Ti];for(var ho=0,Ar=St.length;ho<Ar;++ho)if(m!==Zr&&Zr<fe[ho]){var Mr=St[ho];V.beginPath(),V.moveTo(ie[0],ie[1]),V.lineTo(ie[2],ie[3]),V.lineTo(ie[4],ie[5]),V.lineTo(ie[6],ie[7]),V.moveTo(Mr[6],Mr[7]),V.lineTo(Mr[4],Mr[5]),V.lineTo(Mr[2],Mr[3]),V.lineTo(Mr[0],Mr[1]),V.clip()}St.push(ie),fe.push(Zr)}else V.clearRect(W,U,fn,Ti);this.drawTileImage(H,t,W,U,fn,Ti,As,Kn),St&&!O?(V.restore(),this.renderedTiles.unshift(H)):this.renderedTiles.push(H),this.updateUsedTiles(t.usedTiles,c,H)}}this.renderedRevision=d,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!Hs(this.renderedExtent_,I),this.renderedExtent_=I,this.renderedPixelRatio=h,this.renderedProjection=o,this.manageTilePyramid(t,c,v,h,o,g,m,f.getPreload()),this.scheduleExpireCache(t,c),this.postRender(V,t),n.extent&&V.restore(),ut!==vt.style.transform&&(vt.style.transform=ut);var Zn=Vc(n.opacity),fo=this.container;return Zn!==fo.style.opacity&&(fo.style.opacity=Zn),this.container},r.prototype.drawTileImage=function(t,i,n,a,o,s,l,u){var h=this.getTileImage(t);if(!!h){var f=bt(this),c=u?t.getAlpha(f,i.time):1,d=c!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(h,l,l,h.width-2*l,h.height-2*l,n,a,o,s),d&&this.context.restore(),c!==1?i.animate=!0:u&&t.endTransition(f)}},r.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},r.prototype.getTileImage=function(t){return t.getImage()},r.prototype.scheduleExpireCache=function(t,i){if(i.canExpireCache()){var n=function(a,o,s){var l=bt(a);l in s.usedTiles&&a.expireCache(s.viewState.projection,s.usedTiles[l])}.bind(null,i);t.postRenderFunctions.push(n)}},r.prototype.updateUsedTiles=function(t,i,n){var a=bt(i);a in t||(t[a]={}),t[a][n.getKey()]=!0},r.prototype.manageTilePyramid=function(t,i,n,a,o,s,l,u,h){var f=bt(i);f in t.wantedTiles||(t.wantedTiles[f]={});var c=t.wantedTiles[f],d=t.tileQueue,v=n.getMinZoom(),m=0,p,g,_,y,w,T;for(T=v;T<=l;++T)for(g=n.getTileRangeForExtentAndZ(s,T,g),_=n.getResolution(T),y=g.minX;y<=g.maxX;++y)for(w=g.minY;w<=g.maxY;++w)l-T<=u?(++m,p=i.getTile(T,y,w,a,o),p.getState()==K.IDLE&&(c[p.getKey()]=!0,d.isKeyQueued(p.getKey())||d.enqueue([p,f,n.getTileCoordCenter(p.tileCoord),_])),h!==void 0&&h(p)):i.useTile(T,y,w,o);i.updateCacheSize(m,o)},r}(cy);Yy.prototype.getLayer;var tR=Yy,Th={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"},eR=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rR=function(e){eR(r,e);function r(t){var i=this,n=t||{},a=me({},n);return delete a.preload,delete a.useInterimTilesOnError,i=e.call(this,a)||this,i.on,i.once,i.un,i.setPreload(n.preload!==void 0?n.preload:0),i.setUseInterimTilesOnError(n.useInterimTilesOnError!==void 0?n.useInterimTilesOnError:!0),i}return r.prototype.getPreload=function(){return this.get(Th.PRELOAD)},r.prototype.setPreload=function(t){this.set(Th.PRELOAD,t)},r.prototype.getUseInterimTilesOnError=function(){return this.get(Th.USE_INTERIM_TILES_ON_ERROR)},r.prototype.setUseInterimTilesOnError=function(t){this.set(Th.USE_INTERIM_TILES_ON_ERROR,t)},r}(ng),iR=rR,nR=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),aR=function(e){nR(r,e);function r(t){return e.call(this,t)||this}return r.prototype.createRenderer=function(){return new tR(this)},r}(iR),a6=aR;/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 7.1.2
 * @date    2021-01-08T20:37:11.601Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var jy=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ni(e){var r={exports:{}};return e(r,r.exports),r.exports}var Eh=function(e){return e&&e.Math==Math&&e},Ht=Eh(typeof globalThis=="object"&&globalThis)||Eh(typeof window=="object"&&window)||Eh(typeof self=="object"&&self)||Eh(typeof jy=="object"&&jy)||function(){return this}()||Function("return this")(),Gt=function(e){try{return!!e()}catch(r){return!0}},Tt=!Gt(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Wy={}.propertyIsEnumerable,Hy=Object.getOwnPropertyDescriptor,oR=Hy&&!Wy.call({1:2},1),sR=oR?function(r){var t=Hy(this,r);return!!t&&t.enumerable}:Wy,ul={f:sR},va=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},lR={}.toString,Tn=function(e){return lR.call(e).slice(8,-1)},uR="".split,Sh=Gt(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return Tn(e)=="String"?uR.call(e,""):Object(e)}:Object,hl=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e},Je=function(e){return Sh(hl(e))},ae=function(e){return typeof e=="object"?e!==null:typeof e=="function"},Do=function(e,r){if(!ae(e))return e;var t,i;if(r&&typeof(t=e.toString)=="function"&&!ae(i=t.call(e))||typeof(t=e.valueOf)=="function"&&!ae(i=t.call(e))||!r&&typeof(t=e.toString)=="function"&&!ae(i=t.call(e)))return i;throw TypeError("Can't convert object to primitive value")},hR={}.hasOwnProperty,nt=function(e,r){return hR.call(e,r)},Dd=Ht.document,fR=ae(Dd)&&ae(Dd.createElement),By=function(e){return fR?Dd.createElement(e):{}},Uy=!Tt&&!Gt(function(){return Object.defineProperty(By("div"),"a",{get:function(){return 7}}).a!=7}),zy=Object.getOwnPropertyDescriptor,cR=Tt?zy:function(r,t){if(r=Je(r),t=Do(t,!0),Uy)try{return zy(r,t)}catch(i){}if(nt(r,t))return va(!ul.f.call(r,t),r[t])},fl={f:cR},dR=/#|\.prototype\./,cl=function(e,r){var t=pR[vR(e)];return t==gR?!0:t==mR?!1:typeof r=="function"?Gt(r):!!r},vR=cl.normalize=function(e){return String(e).replace(dR,".").toLowerCase()},pR=cl.data={},mR=cl.NATIVE="N",gR=cl.POLYFILL="P",yR=cl,dt={},pa=function(e){if(typeof e!="function")throw TypeError(String(e)+" is not a function");return e},ma=function(e,r,t){if(pa(e),r===void 0)return e;switch(t){case 0:return function(){return e.call(r)};case 1:return function(i){return e.call(r,i)};case 2:return function(i,n){return e.call(r,i,n)};case 3:return function(i,n,a){return e.call(r,i,n,a)}}return function(){return e.apply(r,arguments)}},Ge=function(e){if(!ae(e))throw TypeError(String(e)+" is not an object");return e},Vy=Object.defineProperty,_R=Tt?Vy:function(r,t,i){if(Ge(r),t=Do(t,!0),Ge(i),Uy)try{return Vy(r,t,i)}catch(n){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(r[t]=i.value),r},yr={f:_R},Gr=Tt?function(e,r,t){return yr.f(e,r,va(1,t))}:function(e,r,t){return e[r]=t,e},wR=fl.f,bR=function(e){var r=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return r.prototype=e.prototype,r},Q=function(e,r){var t=e.target,i=e.global,n=e.stat,a=e.proto,o=i?Ht:n?Ht[t]:(Ht[t]||{}).prototype,s=i?dt:dt[t]||(dt[t]={}),l=s.prototype,u,h,f,c,d,v,m,p,g;for(c in r)u=yR(i?c:t+(n?".":"#")+c,e.forced),h=!u&&o&&nt(o,c),v=s[c],h&&(e.noTargetGet?(g=wR(o,c),m=g&&g.value):m=o[c]),d=h&&m?m:r[c],!(h&&typeof v==typeof d)&&(e.bind&&h?p=ma(d,Ht):e.wrap&&h?p=bR(d):a&&typeof d=="function"?p=ma(Function.call,d):p=d,(e.sham||d&&d.sham||v&&v.sham)&&Gr(p,"sham",!0),s[c]=p,a&&(f=t+"Prototype",nt(dt,f)||Gr(dt,f,{}),dt[f][c]=d,e.real&&l&&!l[c]&&Gr(l,c,d)))},Ri=Array.isArray||function(r){return Tn(r)=="Array"},TR=Math.ceil,ER=Math.floor,xh=function(e){return isNaN(e=+e)?0:(e>0?ER:TR)(e)},SR=Math.min,Yr=function(e){return e>0?SR(xh(e),9007199254740991):0},Xy=function(e,r,t,i,n,a,o,s){for(var l=n,u=0,h=o?ma(o,s,3):!1,f;u<i;){if(u in t){if(f=h?h(t[u],u,r):t[u],a>0&&Ri(f))l=Xy(e,r,f,Yr(f.length),l,a-1)-1;else{if(l>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[l]=f}l++}u++}return l},xR=Xy,Ye=function(e){return Object(hl(e))},CR=function(e,r){try{Gr(Ht,e,r)}catch(t){Ht[e]=r}return r},Ky="__core-js_shared__",OR=Ht[Ky]||CR(Ky,{}),ga=OR,ya=ni(function(e){(e.exports=function(r,t){return ga[r]||(ga[r]=t!==void 0?t:{})})("versions",[]).push({version:"3.7.0",mode:"pure",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})}),IR=0,PR=Math.random(),dl=function(e){return"Symbol("+String(e===void 0?"":e)+")_"+(++IR+PR).toString(36)},Ai=!!Object.getOwnPropertySymbols&&!Gt(function(){return!String(Symbol())}),Zy=Ai&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Ch=ya("wks"),vl=Ht.Symbol,kR=Zy?vl:vl&&vl.withoutSetter||dl,Jt=function(e){return nt(Ch,e)||(Ai&&nt(vl,e)?Ch[e]=vl[e]:Ch[e]=kR("Symbol."+e)),Ch[e]},DR=Jt("species"),Oh=function(e,r){var t;return Ri(e)&&(t=e.constructor,typeof t=="function"&&(t===Array||Ri(t.prototype))?t=void 0:ae(t)&&(t=t[DR],t===null&&(t=void 0))),new(t===void 0?Array:t)(r===0?0:r)};Q({target:"Array",proto:!0},{flatMap:function(r){var t=Ye(this),i=Yr(t.length),n;return pa(r),n=Oh(t,0),n.length=xR(n,t,t,i,0,1,r,arguments.length>1?arguments[1]:void 0),n}});var te=function(e){return dt[e+"Prototype"]},RR=te("Array").flatMap,qy=Array.prototype,AR=function(e){var r=e.flatMap;return e===qy||e instanceof Array&&r===qy.flatMap?RR:r},MR=AR,LR=MR,FR=[].push,_a=function(e){var r=e==1,t=e==2,i=e==3,n=e==4,a=e==6,o=e==5||a;return function(s,l,u,h){for(var f=Ye(s),c=Sh(f),d=ma(l,u,3),v=Yr(c.length),m=0,p=h||Oh,g=r?p(s,v):t?p(s,0):void 0,_,y;v>m;m++)if((o||m in c)&&(_=c[m],y=d(_,m,f),e)){if(r)g[m]=y;else if(y)switch(e){case 3:return!0;case 5:return _;case 6:return m;case 2:FR.call(g,_)}else if(n)return!1}return a?-1:i||n?n:g}},Ro={forEach:_a(0),map:_a(1),filter:_a(2),some:_a(3),every:_a(4),find:_a(5),findIndex:_a(6)},Qy=function(e){return typeof e=="function"?e:void 0},wa=function(e,r){return arguments.length<2?Qy(dt[e])||Qy(Ht[e]):dt[e]&&dt[e][r]||Ht[e]&&Ht[e][r]},Ih=wa("navigator","userAgent")||"",Jy=Ht.process,t_=Jy&&Jy.versions,e_=t_&&t_.v8,Mi,Ph;e_?(Mi=e_.split("."),Ph=Mi[0]+Mi[1]):Ih&&(Mi=Ih.match(/Edge\/(\d+)/),(!Mi||Mi[1]>=74)&&(Mi=Ih.match(/Chrome\/(\d+)/),Mi&&(Ph=Mi[1])));var kh=Ph&&+Ph,NR=Jt("species"),pl=function(e){return kh>=51||!Gt(function(){var r=[],t=r.constructor={};return t[NR]=function(){return{foo:1}},r[e](Boolean).foo!==1})},$R=Object.defineProperty,Rd={},r_=function(e){throw e},Li=function(e,r){if(nt(Rd,e))return Rd[e];r||(r={});var t=[][e],i=nt(r,"ACCESSORS")?r.ACCESSORS:!1,n=nt(r,0)?r[0]:r_,a=nt(r,1)?r[1]:void 0;return Rd[e]=!!t&&!Gt(function(){if(i&&!Tt)return!0;var o={length:-1};i?$R(o,1,{enumerable:!0,get:r_}):o[1]=1,t.call(o,n,a)})},GR=Ro.map,YR=pl("map"),jR=Li("map");Q({target:"Array",proto:!0,forced:!YR||!jR},{map:function(r){return GR(this,r,arguments.length>1?arguments[1]:void 0)}});var WR=te("Array").map,i_=Array.prototype,HR=function(e){var r=e.map;return e===i_||e instanceof Array&&r===i_.map?WR:r},BR=HR,tr=BR,UR=Ro.filter,zR=pl("filter"),VR=Li("filter");Q({target:"Array",proto:!0,forced:!zR||!VR},{filter:function(r){return UR(this,r,arguments.length>1?arguments[1]:void 0)}});var XR=te("Array").filter,n_=Array.prototype,KR=function(e){var r=e.filter;return e===n_||e instanceof Array&&r===n_.filter?XR:r},ZR=KR,de=ZR,a_=function(e){return function(r,t,i,n){pa(t);var a=Ye(r),o=Sh(a),s=Yr(a.length),l=e?s-1:0,u=e?-1:1;if(i<2)for(;;){if(l in o){n=o[l],l+=u;break}if(l+=u,e?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=u)l in o&&(n=t(n,o[l],l,a));return n}},qR={left:a_(!1),right:a_(!0)},ml=function(e,r){var t=[][e];return!!t&&Gt(function(){t.call(null,r||function(){throw 1},1)})},QR=Tn(Ht.process)=="process",JR=qR.left,tA=ml("reduce"),eA=Li("reduce",{1:0}),rA=!QR&&kh>79&&kh<83;Q({target:"Array",proto:!0,forced:!tA||!eA||rA},{reduce:function(r){return JR(this,r,arguments.length,arguments.length>1?arguments[1]:void 0)}});var iA=te("Array").reduce,o_=Array.prototype,nA=function(e){var r=e.reduce;return e===o_||e instanceof Array&&r===o_.reduce?iA:r},aA=nA,s_=aA,l_=[].slice,Ad={},oA=function(e,r,t){if(!(r in Ad)){for(var i=[],n=0;n<r;n++)i[n]="a["+n+"]";Ad[r]=Function("C,a","return new C("+i.join(",")+")")}return Ad[r](e,t)},u_=Function.bind||function(r){var t=pa(this),i=l_.call(arguments,1),n=function(){var o=i.concat(l_.call(arguments));return this instanceof n?oA(t,o.length,o):t.apply(r,o)};return ae(t.prototype)&&(n.prototype=t.prototype),n};Q({target:"Function",proto:!0},{bind:u_});var sA=te("Function").bind,h_=Function.prototype,lA=function(e){var r=e.bind;return e===h_||e instanceof Function&&r===h_.bind?sA:r},uA=lA,ba=uA;function hA(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Ta=hA;Q({target:"Object",stat:!0,forced:!Tt,sham:!Tt},{defineProperty:yr.f});var f_=ni(function(e){var r=dt.Object,t=e.exports=function(n,a,o){return r.defineProperty(n,a,o)};r.defineProperty.sham&&(t.sham=!0)}),fA=f_,c_=fA;function d_(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),c_(e,i.key,i)}}function cA(e,r,t){return r&&d_(e.prototype,r),t&&d_(e,t),e}var Ea=cA;function dA(e){return new pA(e)}var vA=function(){function e(r,t,i){var n,a,o;Ta(this,e),this._source=r,this._transformers=t,this._target=i,this._listeners={add:ba(n=this._add).call(n,this),remove:ba(a=this._remove).call(a,this),update:ba(o=this._update).call(o,this)}}return Ea(e,[{key:"all",value:function(){return this._target.update(this._transformItems(this._source.get())),this}},{key:"start",value:function(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}},{key:"stop",value:function(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}},{key:"_transformItems",value:function(t){var i;return s_(i=this._transformers).call(i,function(n,a){return a(n)},t)}},{key:"_add",value:function(t,i){i!=null&&this._target.add(this._transformItems(this._source.get(i.items)))}},{key:"_update",value:function(t,i){i!=null&&this._target.update(this._transformItems(this._source.get(i.items)))}},{key:"_remove",value:function(t,i){i!=null&&this._target.remove(this._transformItems(i.oldData))}}]),e}(),pA=function(){function e(r){Ta(this,e),this._source=r,this._transformers=[]}return Ea(e,[{key:"filter",value:function(t){return this._transformers.push(function(i){return de(i).call(i,t)}),this}},{key:"map",value:function(t){return this._transformers.push(function(i){return tr(i).call(i,t)}),this}},{key:"flatMap",value:function(t){return this._transformers.push(function(i){return LR(i).call(i,t)}),this}},{key:"to",value:function(t){return new vA(this._source,this._transformers,t)}}]),e}(),mA=f_,v_=mA,gA=Math.max,yA=Math.min,Ao=function(e,r){var t=xh(e);return t<0?gA(t+r,0):yA(t,r)},p_=function(e){return function(r,t,i){var n=Je(r),a=Yr(n.length),o=Ao(i,a),s;if(e&&t!=t){for(;a>o;)if(s=n[o++],s!=s)return!0}else for(;a>o;o++)if((e||o in n)&&n[o]===t)return e||o||0;return!e&&-1}},Md={includes:p_(!0),indexOf:p_(!1)},Mo={},_A=Md.indexOf,m_=function(e,r){var t=Je(e),i=0,n=[],a;for(a in t)!nt(Mo,a)&&nt(t,a)&&n.push(a);for(;r.length>i;)nt(t,a=r[i++])&&(~_A(n,a)||n.push(a));return n},Dh=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Fi=Object.keys||function(r){return m_(r,Dh)},g_=Tt?Object.defineProperties:function(r,t){Ge(r);for(var i=Fi(t),n=i.length,a=0,o;n>a;)yr.f(r,o=i[a++],t[o]);return r};Q({target:"Object",stat:!0,forced:!Tt,sham:!Tt},{defineProperties:g_});var wA=ni(function(e){var r=dt.Object,t=e.exports=function(n,a){return r.defineProperties(n,a)};r.defineProperties.sham&&(t.sham=!0)}),bA=wA,TA=bA,EA=Dh.concat("length","prototype"),SA=Object.getOwnPropertyNames||function(r){return m_(r,EA)},Ld={f:SA},xA=Object.getOwnPropertySymbols,gl={f:xA},y_=wa("Reflect","ownKeys")||function(r){var t=Ld.f(Ge(r)),i=gl.f;return i?t.concat(i(r)):t},Sa=function(e,r,t){var i=Do(r);i in e?yr.f(e,i,va(0,t)):e[i]=t};Q({target:"Object",stat:!0,sham:!Tt},{getOwnPropertyDescriptors:function(r){for(var t=Je(r),i=fl.f,n=y_(t),a={},o=0,s,l;n.length>o;)l=i(t,s=n[o++]),l!==void 0&&Sa(a,s,l);return a}});var CA=dt.Object.getOwnPropertyDescriptors,OA=CA,__=OA,w_=fl.f,IA=Gt(function(){w_(1)}),PA=!Tt||IA;Q({target:"Object",stat:!0,forced:PA,sham:!Tt},{getOwnPropertyDescriptor:function(r,t){return w_(Je(r),t)}});var kA=ni(function(e){var r=dt.Object,t=e.exports=function(n,a){return r.getOwnPropertyDescriptor(n,a)};r.getOwnPropertyDescriptor.sham&&(t.sham=!0)}),DA=kA,b_=DA,RA=wa("document","documentElement"),T_=ya("keys"),Rh=function(e){return T_[e]||(T_[e]=dl(e))},E_=">",S_="<",Fd="prototype",Nd="script",x_=Rh("IE_PROTO"),$d=function(){},C_=function(e){return S_+Nd+E_+e+S_+"/"+Nd+E_},AA=function(e){e.write(C_("")),e.close();var r=e.parentWindow.Object;return e=null,r},MA=function(){var e=By("iframe"),r="java"+Nd+":",t;return e.style.display="none",RA.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(C_("document.F=Object")),t.close(),t.F},Gd,Ah=function(){try{Gd=document.domain&&new ActiveXObject("htmlfile")}catch(r){}Ah=Gd?AA(Gd):MA();for(var e=Dh.length;e--;)delete Ah[Fd][Dh[e]];return Ah()};Mo[x_]=!0;var Ni=Object.create||function(r,t){var i;return r!==null?($d[Fd]=Ge(r),i=new $d,$d[Fd]=null,i[x_]=r):i=Ah(),t===void 0?i:g_(i,t)},O_=Ld.f,LA={}.toString,I_=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],FA=function(e){try{return O_(e)}catch(r){return I_.slice()}},NA=function(r){return I_&&LA.call(r)=="[object Window]"?FA(r):O_(Je(r))},P_={f:NA},Mh=function(e,r,t,i){i&&i.enumerable?e[r]=t:Gr(e,r,t)},$A=Jt,Yd={f:$A},GA=yr.f,oe=function(e){var r=dt.Symbol||(dt.Symbol={});nt(r,e)||GA(r,e,{value:Yd.f(e)})},YA=Jt("toStringTag"),k_={};k_[YA]="z";var jd=String(k_)==="[object z]",jA=Jt("toStringTag"),WA=Tn(function(){return arguments}())=="Arguments",HA=function(e,r){try{return e[r]}catch(t){}},En=jd?Tn:function(e){var r,t,i;return e===void 0?"Undefined":e===null?"Null":typeof(t=HA(r=Object(e),jA))=="string"?t:WA?Tn(r):(i=Tn(r))=="Object"&&typeof r.callee=="function"?"Arguments":i},BA=jd?{}.toString:function(){return"[object "+En(this)+"]"},UA=yr.f,D_=Jt("toStringTag"),yl=function(e,r,t,i){if(e){var n=t?e:e.prototype;nt(n,D_)||UA(n,D_,{configurable:!0,value:r}),i&&!jd&&Gr(n,"toString",BA)}},zA=Function.toString;typeof ga.inspectSource!="function"&&(ga.inspectSource=function(e){return zA.call(e)});var VA=ga.inspectSource,R_=Ht.WeakMap,XA=typeof R_=="function"&&/native code/.test(VA(R_)),KA=Ht.WeakMap,Lh,_l,Fh,ZA=function(e){return Fh(e)?_l(e):Lh(e,{})},qA=function(e){return function(r){var t;if(!ae(r)||(t=_l(r)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return t}};if(XA){var Lo=ga.state||(ga.state=new KA),QA=Lo.get,JA=Lo.has,tM=Lo.set;Lh=function(e,r){return r.facade=e,tM.call(Lo,e,r),r},_l=function(e){return QA.call(Lo,e)||{}},Fh=function(e){return JA.call(Lo,e)}}else{var wl=Rh("state");Mo[wl]=!0,Lh=function(e,r){return r.facade=e,Gr(e,wl,r),r},_l=function(e){return nt(e,wl)?e[wl]:{}},Fh=function(e){return nt(e,wl)}}var ai={set:Lh,get:_l,has:Fh,enforce:ZA,getterFor:qA},Nh=Ro.forEach,je=Rh("hidden"),$h="Symbol",$i="prototype",A_=Jt("toPrimitive"),eM=ai.set,M_=ai.getterFor($h),jr=Object[$i],We=Ht.Symbol,bl=wa("JSON","stringify"),L_=fl.f,Sn=yr.f,F_=P_.f,rM=ul.f,Gi=ya("symbols"),Tl=ya("op-symbols"),Wd=ya("string-to-symbol-registry"),Hd=ya("symbol-to-string-registry"),iM=ya("wks"),Bd=Ht.QObject,Ud=!Bd||!Bd[$i]||!Bd[$i].findChild,zd=Tt&&Gt(function(){return Ni(Sn({},"a",{get:function(){return Sn(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var i=L_(jr,r);i&&delete jr[r],Sn(e,r,t),i&&e!==jr&&Sn(jr,r,i)}:Sn,Vd=function(e,r){var t=Gi[e]=Ni(We[$i]);return eM(t,{type:$h,tag:e,description:r}),Tt||(t.description=r),t},Xd=Zy?function(e){return typeof e=="symbol"}:function(e){return Object(e)instanceof We},Gh=function(r,t,i){r===jr&&Gh(Tl,t,i),Ge(r);var n=Do(t,!0);return Ge(i),nt(Gi,n)?(i.enumerable?(nt(r,je)&&r[je][n]&&(r[je][n]=!1),i=Ni(i,{enumerable:va(0,!1)})):(nt(r,je)||Sn(r,je,va(1,{})),r[je][n]=!0),zd(r,n,i)):Sn(r,n,i)},N_=function(r,t){Ge(r);var i=Je(t),n=Fi(i).concat(Kd(i));return Nh(n,function(a){(!Tt||$_.call(i,a))&&Gh(r,a,i[a])}),r},nM=function(r,t){return t===void 0?Ni(r):N_(Ni(r),t)},$_=function(r){var t=Do(r,!0),i=rM.call(this,t);return this===jr&&nt(Gi,t)&&!nt(Tl,t)?!1:i||!nt(this,t)||!nt(Gi,t)||nt(this,je)&&this[je][t]?i:!0},G_=function(r,t){var i=Je(r),n=Do(t,!0);if(!(i===jr&&nt(Gi,n)&&!nt(Tl,n))){var a=L_(i,n);return a&&nt(Gi,n)&&!(nt(i,je)&&i[je][n])&&(a.enumerable=!0),a}},Y_=function(r){var t=F_(Je(r)),i=[];return Nh(t,function(n){!nt(Gi,n)&&!nt(Mo,n)&&i.push(n)}),i},Kd=function(r){var t=r===jr,i=F_(t?Tl:Je(r)),n=[];return Nh(i,function(a){nt(Gi,a)&&(!t||nt(jr,a))&&n.push(Gi[a])}),n};Ai||(We=function(){if(this instanceof We)throw TypeError("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),t=dl(r),i=function(n){this===jr&&i.call(Tl,n),nt(this,je)&&nt(this[je],t)&&(this[je][t]=!1),zd(this,t,va(1,n))};return Tt&&Ud&&zd(jr,t,{configurable:!0,set:i}),Vd(t,r)},Mh(We[$i],"toString",function(){return M_(this).tag}),Mh(We,"withoutSetter",function(e){return Vd(dl(e),e)}),ul.f=$_,yr.f=Gh,fl.f=G_,Ld.f=P_.f=Y_,gl.f=Kd,Yd.f=function(e){return Vd(Jt(e),e)},Tt&&Sn(We[$i],"description",{configurable:!0,get:function(){return M_(this).description}}));Q({global:!0,wrap:!0,forced:!Ai,sham:!Ai},{Symbol:We});Nh(Fi(iM),function(e){oe(e)});Q({target:$h,stat:!0,forced:!Ai},{for:function(e){var r=String(e);if(nt(Wd,r))return Wd[r];var t=We(r);return Wd[r]=t,Hd[t]=r,t},keyFor:function(r){if(!Xd(r))throw TypeError(r+" is not a symbol");if(nt(Hd,r))return Hd[r]},useSetter:function(){Ud=!0},useSimple:function(){Ud=!1}});Q({target:"Object",stat:!0,forced:!Ai,sham:!Tt},{create:nM,defineProperty:Gh,defineProperties:N_,getOwnPropertyDescriptor:G_});Q({target:"Object",stat:!0,forced:!Ai},{getOwnPropertyNames:Y_,getOwnPropertySymbols:Kd});Q({target:"Object",stat:!0,forced:Gt(function(){gl.f(1)})},{getOwnPropertySymbols:function(r){return gl.f(Ye(r))}});if(bl){var aM=!Ai||Gt(function(){var e=We();return bl([e])!="[null]"||bl({a:e})!="{}"||bl(Object(e))!="{}"});Q({target:"JSON",stat:!0,forced:aM},{stringify:function(r,t,i){for(var n=[r],a=1,o;arguments.length>a;)n.push(arguments[a++]);if(o=t,!(!ae(t)&&r===void 0||Xd(r)))return Ri(t)||(t=function(s,l){if(typeof o=="function"&&(l=o.call(this,s,l)),!Xd(l))return l}),n[1]=t,bl.apply(null,n)}})}We[$i][A_]||Gr(We[$i],A_,We[$i].valueOf);yl(We,$h);Mo[je]=!0;var oM=dt.Object.getOwnPropertySymbols,sM=oM,j_=sM,oi={},W_=!Gt(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),H_=Rh("IE_PROTO"),lM=Object.prototype,El=W_?Object.getPrototypeOf:function(e){return e=Ye(e),nt(e,H_)?e[H_]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?lM:null};Jt("iterator");var B_=!1,Yh,Zd,qd;[].keys&&(qd=[].keys(),"next"in qd?(Zd=El(El(qd)),Zd!==Object.prototype&&(Yh=Zd)):B_=!0);Yh==null&&(Yh={});var Qd={IteratorPrototype:Yh,BUGGY_SAFARI_ITERATORS:B_},uM=Qd.IteratorPrototype,hM=function(){return this},fM=function(e,r,t){var i=r+" Iterator";return e.prototype=Ni(uM,{next:va(1,t)}),yl(e,i,!1,!0),oi[i]=hM,e},cM=function(e){if(!ae(e)&&e!==null)throw TypeError("Can't set "+String(e)+" as a prototype");return e},dM=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(r,[]),e=r instanceof Array}catch(i){}return function(n,a){return Ge(n),cM(a),e?t.call(n,a):n.__proto__=a,n}}():void 0),vM=Qd.IteratorPrototype,jh=Qd.BUGGY_SAFARI_ITERATORS,Jd=Jt("iterator"),U_="keys",Wh="values",z_="entries",pM=function(){return this},tv=function(e,r,t,i,n,a,o){fM(t,r,i);var s=function(g){if(g===n&&c)return c;if(!jh&&g in h)return h[g];switch(g){case U_:return function(){return new t(this,g)};case Wh:return function(){return new t(this,g)};case z_:return function(){return new t(this,g)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,h=e.prototype,f=h[Jd]||h["@@iterator"]||n&&h[n],c=!jh&&f||s(n),d=r=="Array"&&h.entries||f,v,m,p;if(d&&(v=El(d.call(new e)),vM!==Object.prototype&&v.next&&(yl(v,l,!0,!0),oi[l]=pM)),n==Wh&&f&&f.name!==Wh&&(u=!0,c=function(){return f.call(this)}),o&&h[Jd]!==c&&Gr(h,Jd,c),oi[r]=c,n)if(m={values:s(Wh),keys:a?c:s(U_),entries:s(z_)},o)for(p in m)(jh||u||!(p in h))&&Mh(h,p,m[p]);else Q({target:r,proto:!0,forced:jh||u},m);return m},V_="Array Iterator",mM=ai.set,gM=ai.getterFor(V_);tv(Array,"Array",function(e,r){mM(this,{type:V_,target:Je(e),index:0,kind:r})},function(){var e=gM(this),r=e.target,t=e.kind,i=e.index++;return!r||i>=r.length?(e.target=void 0,{value:void 0,done:!0}):t=="keys"?{value:i,done:!1}:t=="values"?{value:r[i],done:!1}:{value:[i,r[i]],done:!1}},"values");oi.Arguments=oi.Array;var yM={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},X_=Jt("toStringTag");for(var ev in yM){var K_=Ht[ev],rv=K_&&K_.prototype;rv&&En(rv)!==X_&&Gr(rv,X_,ev),oi[ev]=oi.Array}var Z_=function(e){return function(r,t){var i=String(hl(r)),n=xh(t),a=i.length,o,s;return n<0||n>=a?e?"":void 0:(o=i.charCodeAt(n),o<55296||o>56319||n+1===a||(s=i.charCodeAt(n+1))<56320||s>57343?e?i.charAt(n):o:e?i.slice(n,n+2):(o-55296<<10)+(s-56320)+65536)}},_M={codeAt:Z_(!1),charAt:Z_(!0)},wM=_M.charAt,q_="String Iterator",bM=ai.set,TM=ai.getterFor(q_);tv(String,"String",function(e){bM(this,{type:q_,string:String(e),index:0})},function(){var r=TM(this),t=r.string,i=r.index,n;return i>=t.length?{value:void 0,done:!0}:(n=wM(t,i),r.index+=n.length,{value:n,done:!1})});var EM=Jt("iterator"),Hh=function(e){if(e!=null)return e[EM]||e["@@iterator"]||oi[En(e)]},SM=function(e){var r=Hh(e);if(typeof r!="function")throw TypeError(String(e)+" is not iterable");return Ge(r.call(e))},xM=SM,xn=xM,CM=Hh,Bh=CM,iv=function(e){var r=e.return;if(r!==void 0)return Ge(r.call(e)).value},OM=function(e,r,t,i){try{return i?r(Ge(t)[0],t[1]):r(t)}catch(n){throw iv(e),n}},IM=Jt("iterator"),PM=Array.prototype,Q_=function(e){return e!==void 0&&(oi.Array===e||PM[IM]===e)},kM=function(r){var t=Ye(r),i=typeof this=="function"?this:Array,n=arguments.length,a=n>1?arguments[1]:void 0,o=a!==void 0,s=Hh(t),l=0,u,h,f,c,d,v;if(o&&(a=ma(a,n>2?arguments[2]:void 0,2)),s!=null&&!(i==Array&&Q_(s)))for(c=s.call(t),d=c.next,h=new i;!(f=d.call(c)).done;l++)v=o?OM(c,a,[f.value,l],!0):f.value,Sa(h,l,v);else for(u=Yr(t.length),h=new i(u);u>l;l++)v=o?a(t[l],l):t[l],Sa(h,l,v);return h.length=l,h},J_=Jt("iterator"),t0=!1;try{var DM=0,e0={next:function(){return{done:!!DM++}},return:function(){t0=!0}};e0[J_]=function(){return this},Array.from(e0,function(){throw 2})}catch(e){}var RM=function(e,r){if(!r&&!t0)return!1;var t=!1;try{var i={};i[J_]=function(){return{next:function(){return{done:t=!0}}}},e(i)}catch(n){}return t},AM=!RM(function(e){Array.from(e)});Q({target:"Array",stat:!0,forced:AM},{from:kM});var r0=dt.Array.from,MM=r0,Uh=MM,LM=function(r){for(var t=Ye(this),i=Yr(t.length),n=arguments.length,a=Ao(n>1?arguments[1]:void 0,i),o=n>2?arguments[2]:void 0,s=o===void 0?i:Ao(o,i);s>a;)t[a++]=r;return t};Q({target:"Array",proto:!0},{fill:LM});te("Array").fill;var FM=[].slice,NM=/MSIE .\./.test(Ih),i0=function(e){return function(r,t){var i=arguments.length>2,n=i?FM.call(arguments,2):void 0;return e(i?function(){(typeof r=="function"?r:Function(r)).apply(this,n)}:r,t)}};Q({global:!0,bind:!0,forced:NM},{setTimeout:i0(Ht.setTimeout),setInterval:i0(Ht.setInterval)});var $M=dt.setTimeout,GM=$M,zh=wa("JSON","stringify"),YM=/[\uD800-\uDFFF]/g,n0=/^[\uD800-\uDBFF]$/,a0=/^[\uDC00-\uDFFF]$/,jM=function(e,r,t){var i=t.charAt(r-1),n=t.charAt(r+1);return n0.test(e)&&!a0.test(n)||a0.test(e)&&!n0.test(i)?"\\u"+e.charCodeAt(0).toString(16):e},WM=Gt(function(){return zh("\uDF06\uD834")!=='"\\udf06\\ud834"'||zh("\uDEAD")!=='"\\udead"'});zh&&Q({target:"JSON",stat:!0,forced:WM},{stringify:function(r,t,i){var n=zh.apply(null,arguments);return typeof n=="string"?n.replace(YM,jM):n}});dt.JSON||(dt.JSON={stringify:JSON.stringify});var HM=function(r,t,i){return dt.JSON.stringify.apply(null,arguments)},BM=HM,UM=BM;Q({target:"Object",stat:!0,sham:!Tt},{create:Ni});var zM=dt.Object,o0=function(r,t){return zM.create(r,t)},VM=o0,XM=VM;function KM(e,r,t){return r in e?c_(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var xa=KM,Sl=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,Vh="["+Sl+"]",ZM=RegExp("^"+Vh+Vh+"*"),qM=RegExp(Vh+Vh+"*$"),nv=function(e){return function(r){var t=String(hl(r));return e&1&&(t=t.replace(ZM,"")),e&2&&(t=t.replace(qM,"")),t}},s0={start:nv(1),end:nv(2),trim:nv(3)},l0="\u200B\x85\u180E",QM=function(e){return Gt(function(){return!!Sl[e]()||l0[e]()!=l0||Sl[e].name!==e})},JM=s0.trim;Q({target:"String",proto:!0,forced:QM("trim")},{trim:function(){return JM(this)}});te("String").trim;var tL=Md.indexOf,u0=[].indexOf,h0=!!u0&&1/[1].indexOf(1,-0)<0,eL=ml("indexOf"),rL=Li("indexOf",{ACCESSORS:!0,1:0});Q({target:"Array",proto:!0,forced:h0||!eL||!rL},{indexOf:function(r){return h0?u0.apply(this,arguments)||0:tL(this,r,arguments.length>1?arguments[1]:void 0)}});te("Array").indexOf;var iL=s0.trim,Xh=Ht.parseInt,nL=/^[+-]?0[Xx]/,aL=Xh(Sl+"08")!==8||Xh(Sl+"0x16")!==22,f0=aL?function(r,t){var i=iL(String(r));return Xh(i,t>>>0||(nL.test(i)?16:10))}:Xh;Q({global:!0,forced:parseInt!=f0},{parseInt:f0});var oL=ul.f,c0=function(e){return function(r){for(var t=Je(r),i=Fi(t),n=i.length,a=0,o=[],s;n>a;)s=i[a++],(!Tt||oL.call(t,s))&&o.push(e?[s,t[s]]:t[s]);return o}},sL={entries:c0(!0),values:c0(!1)},lL=sL.values;Q({target:"Object",stat:!0},{values:function(r){return lL(r)}});dt.Object.values;var uL=Gt(function(){El(1)});Q({target:"Object",stat:!0,forced:uL,sham:!W_},{getPrototypeOf:function(r){return El(Ye(r))}});var hL=dt.Object.getPrototypeOf,fL=Md.includes,cL=Li("indexOf",{ACCESSORS:!0,1:0});Q({target:"Array",proto:!0,forced:!cL},{includes:function(r){return fL(this,r,arguments.length>1?arguments[1]:void 0)}});te("Array").includes;var dL=Jt("match"),vL=function(e){var r;return ae(e)&&((r=e[dL])!==void 0?!!r:Tn(e)=="RegExp")},pL=function(e){if(vL(e))throw TypeError("The method doesn't accept regular expressions");return e},mL=Jt("match"),gL=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[mL]=!1,"/./"[e](r)}catch(i){}}return!1};Q({target:"String",proto:!0,forced:!gL("includes")},{includes:function(r){return!!~String(hl(this)).indexOf(pL(r),arguments.length>1?arguments[1]:void 0)}});te("String").includes;var Fo=Object.assign,d0=Object.defineProperty,v0=!Fo||Gt(function(){if(Tt&&Fo({b:1},Fo(d0({},"a",{enumerable:!0,get:function(){d0(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),i="abcdefghijklmnopqrst";return e[t]=7,i.split("").forEach(function(n){r[n]=n}),Fo({},e)[t]!=7||Fi(Fo({},r)).join("")!=i})?function(r,t){for(var i=Ye(r),n=arguments.length,a=1,o=gl.f,s=ul.f;n>a;)for(var l=Sh(arguments[a++]),u=o?Fi(l).concat(o(l)):Fi(l),h=u.length,f=0,c;h>f;)c=u[f++],(!Tt||s.call(l,c))&&(i[c]=l[c]);return i}:Fo;Q({target:"Object",stat:!0,forced:Object.assign!==v0},{assign:v0});var yL=dt.Object.assign,_L=yL,p0=_L,wL=pl("splice"),bL=Li("splice",{ACCESSORS:!0,0:0,1:2}),TL=Math.max,EL=Math.min,SL=9007199254740991,xL="Maximum allowed length exceeded";Q({target:"Array",proto:!0,forced:!wL||!bL},{splice:function(r,t){var i=Ye(this),n=Yr(i.length),a=Ao(r,n),o=arguments.length,s,l,u,h,f,c;if(o===0?s=l=0:o===1?(s=0,l=n-a):(s=o-2,l=EL(TL(xh(t),0),n-a)),n+s-l>SL)throw TypeError(xL);for(u=Oh(i,l),h=0;h<l;h++)f=a+h,f in i&&Sa(u,h,i[f]);if(u.length=l,s<l){for(h=a;h<n-l;h++)f=h+l,c=h+s,f in i?i[c]=i[f]:delete i[c];for(h=n;h>n-l+s;h--)delete i[h-1]}else if(s>l)for(h=n-l;h>a;h--)f=h+l-1,c=h+s-1,f in i?i[c]=i[f]:delete i[c];for(h=0;h<s;h++)i[h+a]=arguments[h+2];return i.length=n-l+s,u}});var CL=te("Array").splice,m0=Array.prototype,OL=function(e){var r=e.splice;return e===m0||e instanceof Array&&r===m0.splice?CL:r},IL=OL,g0=IL,PL=[].reverse,y0=[1,2];Q({target:"Array",proto:!0,forced:String(y0)===String(y0.reverse())},{reverse:function(){return Ri(this)&&(this.length=this.length),PL.call(this)}});var kL=te("Array").reverse,_0=Array.prototype,DL=function(e){var r=e.reverse;return e===_0||e instanceof Array&&r===_0.reverse?kL:r},RL=DL,AL=RL,ML=Ro.forEach,LL=ml("forEach"),FL=Li("forEach"),w0=!LL||!FL?function(r){return ML(this,r,arguments.length>1?arguments[1]:void 0)}:[].forEach;Q({target:"Array",proto:!0,forced:[].forEach!=w0},{forEach:w0});var NL=te("Array").forEach,$L=NL,b0=Array.prototype,GL={DOMTokenList:!0,NodeList:!0},YL=function(e){var r=e.forEach;return e===b0||e instanceof Array&&r===b0.forEach||GL.hasOwnProperty(En(e))?$L:r},Cn=YL;Q({target:"Array",stat:!0},{isArray:Ri});var T0=dt.Array.isArray,jL=T0,E0=jL;function WL(e){if(E0(e))return e}var HL=WL,BL=Jt("iterator"),UL=function(e){var r=Object(e);return r[BL]!==void 0||"@@iterator"in r||oi.hasOwnProperty(En(r))},zL=UL,S0=zL,x0=Jt("isConcatSpreadable"),C0=9007199254740991,O0="Maximum allowed index exceeded",VL=kh>=51||!Gt(function(){var e=[];return e[x0]=!1,e.concat()[0]!==e}),XL=pl("concat"),KL=function(e){if(!ae(e))return!1;var r=e[x0];return r!==void 0?!!r:Ri(e)},ZL=!VL||!XL;Q({target:"Array",proto:!0,forced:ZL},{concat:function(r){var t=Ye(this),i=Oh(t,0),n=0,a,o,s,l,u;for(a=-1,s=arguments.length;a<s;a++)if(u=a===-1?t:arguments[a],KL(u)){if(l=Yr(u.length),n+l>C0)throw TypeError(O0);for(o=0;o<l;o++,n++)o in u&&Sa(i,n,u[o])}else{if(n>=C0)throw TypeError(O0);Sa(i,n++,u)}return i.length=n,i}});oe("asyncIterator");oe("hasInstance");oe("isConcatSpreadable");oe("iterator");oe("match");oe("matchAll");oe("replace");oe("search");oe("species");oe("split");oe("toPrimitive");oe("toStringTag");oe("unscopables");yl(Ht.JSON,"JSON",!0);var I0=dt.Symbol;oe("asyncDispose");oe("dispose");oe("observable");oe("patternMatch");oe("replaceAll");var qL=I0,No=qL;function QL(e,r){if(!(typeof No=="undefined"||!S0(Object(e)))){var t=[],i=!0,n=!1,a=void 0;try{for(var o=xn(e),s;!(i=(s=o.next()).done)&&(t.push(s.value),!(r&&t.length===r));i=!0);}catch(l){n=!0,a=l}finally{try{!i&&o.return!=null&&o.return()}finally{if(n)throw a}}return t}}var JL=QL,tF=r0,P0=tF,eF=pl("slice"),rF=Li("slice",{ACCESSORS:!0,0:0,1:2}),iF=Jt("species"),nF=[].slice,aF=Math.max;Q({target:"Array",proto:!0,forced:!eF||!rF},{slice:function(r,t){var i=Je(this),n=Yr(i.length),a=Ao(r,n),o=Ao(t===void 0?n:t,n),s,l,u;if(Ri(i)&&(s=i.constructor,typeof s=="function"&&(s===Array||Ri(s.prototype))?s=void 0:ae(s)&&(s=s[iF],s===null&&(s=void 0)),s===Array||s===void 0))return nF.call(i,a,o);for(l=new(s===void 0?Array:s)(aF(o-a,0)),u=0;a<o;a++,u++)a in i&&Sa(l,u,i[a]);return l.length=u,l}});var oF=te("Array").slice,k0=Array.prototype,D0=function(e){var r=e.slice;return e===k0||e instanceof Array&&r===k0.slice?oF:r},sF=D0,lF=sF;function uF(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var av=uF;function hF(e,r){var t;if(!!e){if(typeof e=="string")return av(e,r);var i=lF(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return P0(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return av(e,r)}}var R0=hF;function fF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var cF=fF;function dF(e,r){return HL(e)||JL(e,r)||R0(e,r)||cF()}var He=dF;Q({target:"Date",stat:!0},{now:function(){return new Date().getTime()}});dt.Date.now;var vF=Gt(function(){Fi(1)});Q({target:"Object",stat:!0,forced:vF},{keys:function(r){return Fi(Ye(r))}});var pF=dt.Object.keys,mF=pF,ov=mF,gF=T0,Pe=gF,A0=Yd.f("iterator"),yF=A0,_F=yF,_r=ni(function(e){function r(t){return typeof No=="function"&&typeof _F=="symbol"?e.exports=r=function(n){return typeof n}:e.exports=r=function(n){return n&&typeof No=="function"&&n.constructor===No&&n!==No.prototype?"symbol":typeof n},r(t)}e.exports=r});Q({target:"Reflect",stat:!0},{ownKeys:y_});var wF=dt.Reflect.ownKeys,bF=wF,M0=bF,TF=D0,xl=TF;function EF(e){if(E0(e))return av(e)}var SF=EF;function xF(e){if(typeof No!="undefined"&&S0(Object(e)))return P0(e)}var CF=xF;function OF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var IF=OF;function PF(e){return SF(e)||CF(e)||R0(e)||IF()}var ke=PF,kF=te("Array").concat,L0=Array.prototype,DF=function(e){var r=e.concat;return e===L0||e instanceof Array&&r===L0.concat?kF:r},RF=DF,Kh=RF,AF=I0,Cl=AF,MF=ni(function(e){e.exports=r;function r(i){if(i)return t(i)}function t(i){for(var n in r.prototype)i[n]=r.prototype[n];return i}r.prototype.on=r.prototype.addEventListener=function(i,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(n),this},r.prototype.once=function(i,n){function a(){this.off(i,a),n.apply(this,arguments)}return a.fn=n,this.on(i,a),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(i,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+i];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var o,s=0;s<a.length;s++)if(o=a[s],o===n||o.fn===n){a.splice(s,1);break}return a.length===0&&delete this._callbacks["$"+i],this},r.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),a=this._callbacks["$"+i],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(a){a=a.slice(0);for(var o=0,s=a.length;o<s;++o)a[o].apply(this,n)}return this},r.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},r.prototype.hasListeners=function(i){return!!this.listeners(i).length}});/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Wr(){return Wr=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Wr.apply(this,arguments)}function wr(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function Zh(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var sv;typeof Object.assign!="function"?sv=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),i=1;i<arguments.length;i++){var n=arguments[i];if(n!=null)for(var a in n)n.hasOwnProperty(a)&&(t[a]=n[a])}return t}:sv=Object.assign;var Ca=sv,F0=["","webkit","Moz","MS","ms","o"],LF=typeof document=="undefined"?{style:{}}:document.createElement("div"),FF="function",$o=Math.round,Oa=Math.abs,lv=Date.now;function qh(e,r){for(var t,i,n=r[0].toUpperCase()+r.slice(1),a=0;a<F0.length;){if(t=F0[a],i=t?t+n:r,i in e)return i;a++}}var Yi;typeof window=="undefined"?Yi={}:Yi=window;var N0=qh(LF.style,"touchAction"),$0=N0!==void 0;function NF(){if(!$0)return!1;var e={},r=Yi.CSS&&Yi.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?Yi.CSS.supports("touch-action",t):!0}),e}var G0="compute",Y0="auto",uv="manipulation",Ia="none",Ol="pan-x",Il="pan-y",Qh=NF(),$F=/mobile|tablet|ip(ad|hone|od)|android/i,j0="ontouchstart"in Yi,GF=qh(Yi,"PointerEvent")!==void 0,YF=j0&&$F.test(navigator.userAgent),Pl="touch",jF="pen",hv="mouse",WF="kinect",HF=25,De=1,Pa=2,ee=4,Be=8,Jh=1,kl=2,Dl=4,Rl=8,Go=16,si=kl|Dl,ka=Rl|Go,W0=si|ka,H0=["x","y"],tf=["clientX","clientY"];function ji(e,r,t){var i;if(!!e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(i=0;i<e.length;)r.call(t,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&r.call(t,e[i],i,e)}function ef(e,r){return typeof e===FF?e.apply(r&&r[0]||void 0,r):e}function Da(e,r){return e.indexOf(r)>-1}function BF(e){if(Da(e,Ia))return Ia;var r=Da(e,Ol),t=Da(e,Il);return r&&t?Ia:r||t?r?Ol:Il:Da(e,uv)?uv:Y0}var B0=function(){function e(t,i){this.manager=t,this.set(i)}var r=e.prototype;return r.set=function(i){i===G0&&(i=this.compute()),$0&&this.manager.element.style&&Qh[i]&&(this.manager.element.style[N0]=i),this.actions=i.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var i=[];return ji(this.manager.recognizers,function(n){ef(n.options.enable,[n])&&(i=i.concat(n.getTouchAction()))}),BF(i.join(" "))},r.preventDefaults=function(i){var n=i.srcEvent,a=i.offsetDirection;if(this.manager.session.prevented){n.preventDefault();return}var o=this.actions,s=Da(o,Ia)&&!Qh[Ia],l=Da(o,Il)&&!Qh[Il],u=Da(o,Ol)&&!Qh[Ol];if(s){var h=i.pointers.length===1,f=i.distance<2,c=i.deltaTime<250;if(h&&f&&c)return}if(!(u&&l)&&(s||l&&a&si||u&&a&ka))return this.preventSrc(n)},r.preventSrc=function(i){this.manager.session.prevented=!0,i.preventDefault()},e}();function fv(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function U0(e){var r=e.length;if(r===1)return{x:$o(e[0].clientX),y:$o(e[0].clientY)};for(var t=0,i=0,n=0;n<r;)t+=e[n].clientX,i+=e[n].clientY,n++;return{x:$o(t/r),y:$o(i/r)}}function z0(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:$o(e.pointers[t].clientX),clientY:$o(e.pointers[t].clientY)},t++;return{timeStamp:lv(),pointers:r,center:U0(r),deltaX:e.deltaX,deltaY:e.deltaY}}function rf(e,r,t){t||(t=H0);var i=r[t[0]]-e[t[0]],n=r[t[1]]-e[t[1]];return Math.sqrt(i*i+n*n)}function cv(e,r,t){t||(t=H0);var i=r[t[0]]-e[t[0]],n=r[t[1]]-e[t[1]];return Math.atan2(n,i)*180/Math.PI}function V0(e,r){return e===r?Jh:Oa(e)>=Oa(r)?e<0?kl:Dl:r<0?Rl:Go}function UF(e,r){var t=r.center,i=e.offsetDelta||{},n=e.prevDelta||{},a=e.prevInput||{};(r.eventType===De||a.eventType===ee)&&(n=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=n.x+(t.x-i.x),r.deltaY=n.y+(t.y-i.y)}function X0(e,r,t){return{x:r/e||0,y:t/e||0}}function zF(e,r){return rf(r[0],r[1],tf)/rf(e[0],e[1],tf)}function VF(e,r){return cv(r[1],r[0],tf)+cv(e[1],e[0],tf)}function XF(e,r){var t=e.lastInterval||r,i=r.timeStamp-t.timeStamp,n,a,o,s;if(r.eventType!==Be&&(i>HF||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,h=X0(i,l,u);a=h.x,o=h.y,n=Oa(h.x)>Oa(h.y)?h.x:h.y,s=V0(l,u),e.lastInterval=r}else n=t.velocity,a=t.velocityX,o=t.velocityY,s=t.direction;r.velocity=n,r.velocityX=a,r.velocityY=o,r.direction=s}function KF(e,r){var t=e.session,i=r.pointers,n=i.length;t.firstInput||(t.firstInput=z0(r)),n>1&&!t.firstMultiple?t.firstMultiple=z0(r):n===1&&(t.firstMultiple=!1);var a=t.firstInput,o=t.firstMultiple,s=o?o.center:a.center,l=r.center=U0(i);r.timeStamp=lv(),r.deltaTime=r.timeStamp-a.timeStamp,r.angle=cv(s,l),r.distance=rf(s,l),UF(t,r),r.offsetDirection=V0(r.deltaX,r.deltaY);var u=X0(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=Oa(u.x)>Oa(u.y)?u.x:u.y,r.scale=o?zF(o.pointers,i):1,r.rotation=o?VF(o.pointers,i):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,XF(t,r);var h=e.element,f=r.srcEvent,c;f.composedPath?c=f.composedPath()[0]:f.path?c=f.path[0]:c=f.target,fv(c,h)&&(h=c),r.target=h}function ZF(e,r,t){var i=t.pointers.length,n=t.changedPointers.length,a=r&De&&i-n==0,o=r&(ee|Be)&&i-n==0;t.isFirst=!!a,t.isFinal=!!o,a&&(e.session={}),t.eventType=r,KF(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function Al(e){return e.trim().split(/\s+/g)}function Ml(e,r,t){ji(Al(r),function(i){e.addEventListener(i,t,!1)})}function Ll(e,r,t){ji(Al(r),function(i){e.removeEventListener(i,t,!1)})}function K0(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var Yo=function(){function e(t,i){var n=this;this.manager=t,this.callback=i,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(a){ef(t.options.enable,[t])&&n.handler(a)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&Ml(this.element,this.evEl,this.domHandler),this.evTarget&&Ml(this.target,this.evTarget,this.domHandler),this.evWin&&Ml(K0(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&Ll(this.element,this.evEl,this.domHandler),this.evTarget&&Ll(this.target,this.evTarget,this.domHandler),this.evWin&&Ll(K0(this.element),this.evWin,this.domHandler)},e}();function Ra(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var i=0;i<e.length;){if(t&&e[i][t]==r||!t&&e[i]===r)return i;i++}return-1}var qF={pointerdown:De,pointermove:Pa,pointerup:ee,pointercancel:Be,pointerout:Be},QF={2:Pl,3:jF,4:hv,5:WF},Z0="pointerdown",q0="pointermove pointerup pointercancel";Yi.MSPointerEvent&&!Yi.PointerEvent&&(Z0="MSPointerDown",q0="MSPointerMove MSPointerUp MSPointerCancel");var Q0=function(e){wr(r,e);function r(){var i,n=r.prototype;return n.evEl=Z0,n.evWin=q0,i=e.apply(this,arguments)||this,i.store=i.manager.session.pointerEvents=[],i}var t=r.prototype;return t.handler=function(n){var a=this.store,o=!1,s=n.type.toLowerCase().replace("ms",""),l=qF[s],u=QF[n.pointerType]||n.pointerType,h=u===Pl,f=Ra(a,n.pointerId,"pointerId");l&De&&(n.button===0||h)?f<0&&(a.push(n),f=a.length-1):l&(ee|Be)&&(o=!0),!(f<0)&&(a[f]=n,this.callback(this.manager,l,{pointers:a,changedPointers:[n],pointerType:u,srcEvent:n}),o&&a.splice(f,1))},r}(Yo);function Fl(e){return Array.prototype.slice.call(e,0)}function dv(e,r,t){for(var i=[],n=[],a=0;a<e.length;){var o=r?e[a][r]:e[a];Ra(n,o)<0&&i.push(e[a]),n[a]=o,a++}return t&&(r?i=i.sort(function(s,l){return s[r]>l[r]}):i=i.sort()),i}var JF={touchstart:De,touchmove:Pa,touchend:ee,touchcancel:Be},tN="touchstart touchmove touchend touchcancel",vv=function(e){wr(r,e);function r(){var i;return r.prototype.evTarget=tN,i=e.apply(this,arguments)||this,i.targetIds={},i}var t=r.prototype;return t.handler=function(n){var a=JF[n.type],o=eN.call(this,n,a);!o||this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:Pl,srcEvent:n})},r}(Yo);function eN(e,r){var t=Fl(e.touches),i=this.targetIds;if(r&(De|Pa)&&t.length===1)return i[t[0].identifier]=!0,[t,t];var n,a,o=Fl(e.changedTouches),s=[],l=this.target;if(a=t.filter(function(u){return fv(u.target,l)}),r===De)for(n=0;n<a.length;)i[a[n].identifier]=!0,n++;for(n=0;n<o.length;)i[o[n].identifier]&&s.push(o[n]),r&(ee|Be)&&delete i[o[n].identifier],n++;if(!!s.length)return[dv(a.concat(s),"identifier",!0),s]}var rN={mousedown:De,mousemove:Pa,mouseup:ee},iN="mousedown",nN="mousemove mouseup",pv=function(e){wr(r,e);function r(){var i,n=r.prototype;return n.evEl=iN,n.evWin=nN,i=e.apply(this,arguments)||this,i.pressed=!1,i}var t=r.prototype;return t.handler=function(n){var a=rN[n.type];a&De&&n.button===0&&(this.pressed=!0),a&Pa&&n.which!==1&&(a=ee),!!this.pressed&&(a&ee&&(this.pressed=!1),this.callback(this.manager,a,{pointers:[n],changedPointers:[n],pointerType:hv,srcEvent:n}))},r}(Yo),aN=2500,J0=25;function tw(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY},n=this.lastTouches;this.lastTouches.push(i);var a=function(){var s=n.indexOf(i);s>-1&&n.splice(s,1)};setTimeout(a,aN)}}function oN(e,r){e&De?(this.primaryTouch=r.changedPointers[0].identifier,tw.call(this,r)):e&(ee|Be)&&tw.call(this,r)}function sN(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var n=this.lastTouches[i],a=Math.abs(r-n.x),o=Math.abs(t-n.y);if(a<=J0&&o<=J0)return!0}return!1}var ew=function(){var e=function(r){wr(t,r);function t(n,a){var o;return o=r.call(this,n,a)||this,o.handler=function(s,l,u){var h=u.pointerType===Pl,f=u.pointerType===hv;if(!(f&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(h)oN.call(Zh(Zh(o)),l,u);else if(f&&sN.call(Zh(Zh(o)),u))return;o.callback(s,l,u)}},o.touch=new vv(o.manager,o.handler),o.mouse=new pv(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var i=t.prototype;return i.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(Yo);return e}();function lN(e){var r,t=e.options.inputClass;return t?r=t:GF?r=Q0:YF?r=vv:j0?r=ew:r=pv,new r(e,ZF)}function jo(e,r,t){return Array.isArray(e)?(ji(e,t[r],t),!0):!1}var nf=1,br=2,Wo=4,On=8,Wi=On,Nl=16,li=32,uN=1;function hN(){return uN++}function af(e,r){var t=r.manager;return t?t.get(e):e}function rw(e){return e&Nl?"cancel":e&On?"end":e&Wo?"move":e&br?"start":""}var $l=function(){function e(t){t===void 0&&(t={}),this.options=Wr({enable:!0},t),this.id=hN(),this.manager=null,this.state=nf,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(i){return Ca(this.options,i),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(i){if(jo(i,"recognizeWith",this))return this;var n=this.simultaneous;return i=af(i,this),n[i.id]||(n[i.id]=i,i.recognizeWith(this)),this},r.dropRecognizeWith=function(i){return jo(i,"dropRecognizeWith",this)?this:(i=af(i,this),delete this.simultaneous[i.id],this)},r.requireFailure=function(i){if(jo(i,"requireFailure",this))return this;var n=this.requireFail;return i=af(i,this),Ra(n,i)===-1&&(n.push(i),i.requireFailure(this)),this},r.dropRequireFailure=function(i){if(jo(i,"dropRequireFailure",this))return this;i=af(i,this);var n=Ra(this.requireFail,i);return n>-1&&this.requireFail.splice(n,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(i){return!!this.simultaneous[i.id]},r.emit=function(i){var n=this,a=this.state;function o(s){n.manager.emit(s,i)}a<On&&o(n.options.event+rw(a)),o(n.options.event),i.additionalEvent&&o(i.additionalEvent),a>=On&&o(n.options.event+rw(a))},r.tryEmit=function(i){if(this.canEmit())return this.emit(i);this.state=li},r.canEmit=function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(li|nf)))return!1;i++}return!0},r.recognize=function(i){var n=Ca({},i);if(!ef(this.options.enable,[this,n])){this.reset(),this.state=li;return}this.state&(Wi|Nl|li)&&(this.state=nf),this.state=this.process(n),this.state&(br|Wo|On|Nl)&&this.tryEmit(n)},r.process=function(i){},r.getTouchAction=function(){},r.reset=function(){},e}(),mv=function(e){wr(r,e);function r(i){var n;return i===void 0&&(i={}),n=e.call(this,Wr({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},i))||this,n.pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}var t=r.prototype;return t.getTouchAction=function(){return[uv]},t.process=function(n){var a=this,o=this.options,s=n.pointers.length===o.pointers,l=n.distance<o.threshold,u=n.deltaTime<o.time;if(this.reset(),n.eventType&De&&this.count===0)return this.failTimeout();if(l&&u&&s){if(n.eventType!==ee)return this.failTimeout();var h=this.pTime?n.timeStamp-this.pTime<o.interval:!0,f=!this.pCenter||rf(this.pCenter,n.center)<o.posThreshold;this.pTime=n.timeStamp,this.pCenter=n.center,!f||!h?this.count=1:this.count+=1,this._input=n;var c=this.count%o.taps;if(c===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){a.state=Wi,a.tryEmit()},o.interval),br):Wi}return li},t.failTimeout=function(){var n=this;return this._timer=setTimeout(function(){n.state=li},this.options.interval),li},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===Wi&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}($l),Ho=function(e){wr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Wr({pointers:1},i))||this}var t=r.prototype;return t.attrTest=function(n){var a=this.options.pointers;return a===0||n.pointers.length===a},t.process=function(n){var a=this.state,o=n.eventType,s=a&(br|Wo),l=this.attrTest(n);return s&&(o&Be||!l)?a|Nl:s||l?o&ee?a|On:a&br?a|Wo:br:li},r}($l);function iw(e){return e===Go?"down":e===Rl?"up":e===kl?"left":e===Dl?"right":""}var gv=function(e){wr(r,e);function r(i){var n;return i===void 0&&(i={}),n=e.call(this,Wr({event:"pan",threshold:10,pointers:1,direction:W0},i))||this,n.pX=null,n.pY=null,n}var t=r.prototype;return t.getTouchAction=function(){var n=this.options.direction,a=[];return n&si&&a.push(Il),n&ka&&a.push(Ol),a},t.directionTest=function(n){var a=this.options,o=!0,s=n.distance,l=n.direction,u=n.deltaX,h=n.deltaY;return l&a.direction||(a.direction&si?(l=u===0?Jh:u<0?kl:Dl,o=u!==this.pX,s=Math.abs(n.deltaX)):(l=h===0?Jh:h<0?Rl:Go,o=h!==this.pY,s=Math.abs(n.deltaY))),n.direction=l,o&&s>a.threshold&&l&a.direction},t.attrTest=function(n){return Ho.prototype.attrTest.call(this,n)&&(this.state&br||!(this.state&br)&&this.directionTest(n))},t.emit=function(n){this.pX=n.deltaX,this.pY=n.deltaY;var a=iw(n.direction);a&&(n.additionalEvent=this.options.event+a),e.prototype.emit.call(this,n)},r}(Ho),nw=function(e){wr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Wr({event:"swipe",threshold:10,velocity:.3,direction:si|ka,pointers:1},i))||this}var t=r.prototype;return t.getTouchAction=function(){return gv.prototype.getTouchAction.call(this)},t.attrTest=function(n){var a=this.options.direction,o;return a&(si|ka)?o=n.overallVelocity:a&si?o=n.overallVelocityX:a&ka&&(o=n.overallVelocityY),e.prototype.attrTest.call(this,n)&&a&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers===this.options.pointers&&Oa(o)>this.options.velocity&&n.eventType&ee},t.emit=function(n){var a=iw(n.offsetDirection);a&&this.manager.emit(this.options.event+a,n),this.manager.emit(this.options.event,n)},r}(Ho),aw=function(e){wr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Wr({event:"pinch",threshold:0,pointers:2},i))||this}var t=r.prototype;return t.getTouchAction=function(){return[Ia]},t.attrTest=function(n){return e.prototype.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&br)},t.emit=function(n){if(n.scale!==1){var a=n.scale<1?"in":"out";n.additionalEvent=this.options.event+a}e.prototype.emit.call(this,n)},r}(Ho),ow=function(e){wr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Wr({event:"rotate",threshold:0,pointers:2},i))||this}var t=r.prototype;return t.getTouchAction=function(){return[Ia]},t.attrTest=function(n){return e.prototype.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&br)},r}(Ho),sw=function(e){wr(r,e);function r(i){var n;return i===void 0&&(i={}),n=e.call(this,Wr({event:"press",pointers:1,time:251,threshold:9},i))||this,n._timer=null,n._input=null,n}var t=r.prototype;return t.getTouchAction=function(){return[Y0]},t.process=function(n){var a=this,o=this.options,s=n.pointers.length===o.pointers,l=n.distance<o.threshold,u=n.deltaTime>o.time;if(this._input=n,!l||!s||n.eventType&(ee|Be)&&!u)this.reset();else if(n.eventType&De)this.reset(),this._timer=setTimeout(function(){a.state=Wi,a.tryEmit()},o.time);else if(n.eventType&ee)return Wi;return li},t.reset=function(){clearTimeout(this._timer)},t.emit=function(n){this.state===Wi&&(n&&n.eventType&ee?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=lv(),this.manager.emit(this.options.event,this._input)))},r}($l),lw={domEvents:!1,touchAction:G0,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},uw=[[ow,{enable:!1}],[aw,{enable:!1},["rotate"]],[nw,{direction:si}],[gv,{direction:si},["swipe"]],[mv],[mv,{event:"doubletap",taps:2},["tap"]],[sw]],fN=1,hw=2;function fw(e,r){var t=e.element;if(!!t.style){var i;ji(e.options.cssProps,function(n,a){i=qh(t.style,a),r?(e.oldCssProps[i]=t.style[i],t.style[i]=n):t.style[i]=e.oldCssProps[i]||""}),r||(e.oldCssProps={})}}function cN(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var cw=function(){function e(t,i){var n=this;this.options=Ca({},lw,i||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=lN(this),this.touchAction=new B0(this,this.options.touchAction),fw(this,!0),ji(this.options.recognizers,function(a){var o=n.add(new a[0](a[1]));a[2]&&o.recognizeWith(a[2]),a[3]&&o.requireFailure(a[3])},this)}var r=e.prototype;return r.set=function(i){return Ca(this.options,i),i.touchAction&&this.touchAction.update(),i.inputTarget&&(this.input.destroy(),this.input.target=i.inputTarget,this.input.init()),this},r.stop=function(i){this.session.stopped=i?hw:fN},r.recognize=function(i){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(i);var a,o=this.recognizers,s=n.curRecognizer;(!s||s&&s.state&Wi)&&(n.curRecognizer=null,s=null);for(var l=0;l<o.length;)a=o[l],n.stopped!==hw&&(!s||a===s||a.canRecognizeWith(s))?a.recognize(i):a.reset(),!s&&a.state&(br|Wo|On)&&(n.curRecognizer=a,s=a),l++}},r.get=function(i){if(i instanceof $l)return i;for(var n=this.recognizers,a=0;a<n.length;a++)if(n[a].options.event===i)return n[a];return null},r.add=function(i){if(jo(i,"add",this))return this;var n=this.get(i.options.event);return n&&this.remove(n),this.recognizers.push(i),i.manager=this,this.touchAction.update(),i},r.remove=function(i){if(jo(i,"remove",this))return this;var n=this.get(i);if(i){var a=this.recognizers,o=Ra(a,n);o!==-1&&(a.splice(o,1),this.touchAction.update())}return this},r.on=function(i,n){if(i===void 0||n===void 0)return this;var a=this.handlers;return ji(Al(i),function(o){a[o]=a[o]||[],a[o].push(n)}),this},r.off=function(i,n){if(i===void 0)return this;var a=this.handlers;return ji(Al(i),function(o){n?a[o]&&a[o].splice(Ra(a[o],n),1):delete a[o]}),this},r.emit=function(i,n){this.options.domEvents&&cN(i,n);var a=this.handlers[i]&&this.handlers[i].slice();if(!(!a||!a.length)){n.type=i,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](n),o++}},r.destroy=function(){this.element&&fw(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),dN={touchstart:De,touchmove:Pa,touchend:ee,touchcancel:Be},vN="touchstart",pN="touchstart touchmove touchend touchcancel",mN=function(e){wr(r,e);function r(){var i,n=r.prototype;return n.evTarget=vN,n.evWin=pN,i=e.apply(this,arguments)||this,i.started=!1,i}var t=r.prototype;return t.handler=function(n){var a=dN[n.type];if(a===De&&(this.started=!0),!!this.started){var o=gN.call(this,n,a);a&(ee|Be)&&o[0].length-o[1].length==0&&(this.started=!1),this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:Pl,srcEvent:n})}},r}(Yo);function gN(e,r){var t=Fl(e.touches),i=Fl(e.changedTouches);return r&(ee|Be)&&(t=dv(t.concat(i),"identifier",!0)),[t,i]}function dw(e,r,t){var i="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var n=new Error("get-stack-trace"),a=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,i,a),e.apply(this,arguments)}}var vw=dw(function(e,r,t){for(var i=Object.keys(r),n=0;n<i.length;)(!t||t&&e[i[n]]===void 0)&&(e[i[n]]=r[i[n]]),n++;return e},"extend","Use `assign`."),yN=dw(function(e,r){return vw(e,r,!0)},"merge","Use `assign`.");function _N(e,r,t){var i=r.prototype,n;n=e.prototype=Object.create(i),n.constructor=e,n._super=i,t&&Ca(n,t)}function pw(e,r){return function(){return e.apply(r,arguments)}}var wN=function(){var e=function(t,i){return i===void 0&&(i={}),new cw(t,Wr({recognizers:uw.concat()},i))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=W0,e.DIRECTION_DOWN=Go,e.DIRECTION_LEFT=kl,e.DIRECTION_RIGHT=Dl,e.DIRECTION_UP=Rl,e.DIRECTION_HORIZONTAL=si,e.DIRECTION_VERTICAL=ka,e.DIRECTION_NONE=Jh,e.DIRECTION_DOWN=Go,e.INPUT_START=De,e.INPUT_MOVE=Pa,e.INPUT_END=ee,e.INPUT_CANCEL=Be,e.STATE_POSSIBLE=nf,e.STATE_BEGAN=br,e.STATE_CHANGED=Wo,e.STATE_ENDED=On,e.STATE_RECOGNIZED=Wi,e.STATE_CANCELLED=Nl,e.STATE_FAILED=li,e.Manager=cw,e.Input=Yo,e.TouchAction=B0,e.TouchInput=vv,e.MouseInput=pv,e.PointerEventInput=Q0,e.TouchMouseInput=ew,e.SingleTouchInput=mN,e.Recognizer=$l,e.AttrRecognizer=Ho,e.Tap=mv,e.Pan=gv,e.Swipe=nw,e.Pinch=aw,e.Rotate=ow,e.Press=sw,e.on=Ml,e.off=Ll,e.each=ji,e.merge=yN,e.extend=vw,e.bindFn=pw,e.assign=Ca,e.inherit=_N,e.bindFn=pw,e.prefixed=qh,e.toArray=Fl,e.inArray=Ra,e.uniqueArray=dv,e.splitStr=Al,e.boolOrFn=ef,e.hasParent=fv,e.addEventListeners=Ml,e.removeEventListeners=Ll,e.defaults=Ca({},lw,{preset:uw}),e}();function mw(e,r){var t;if(typeof Cl=="undefined"||Bh(e)==null){if(Pe(e)||(t=bN(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=xn(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function bN(e,r){var t;if(!!e){if(typeof e=="string")return gw(e,r);var i=xl(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Uh(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return gw(e,r)}}function gw(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var yw=Cl("DELETE");function TN(e){for(var r,t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return _w.apply(void 0,Kh(r=[{},e]).call(r,i))}function _w(){var e=of.apply(void 0,arguments);return bw(e),e}function of(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<2)return r[0];if(r.length>2){var i;return of.apply(void 0,Kh(i=[_w(r[0],r[1])]).call(i,ke(xl(r).call(r,2))))}var n=r[0],a=r[1],o=mw(M0(a)),s;try{for(o.s();!(s=o.n()).done;){var l=s.value;Object.prototype.propertyIsEnumerable.call(a,l)&&(a[l]===yw?delete n[l]:n[l]!==null&&a[l]!==null&&_r(n[l])==="object"&&_r(a[l])==="object"&&!Pe(n[l])&&!Pe(a[l])?n[l]=of(n[l],a[l]):n[l]=ww(a[l]))}}catch(u){o.e(u)}finally{o.f()}return n}function ww(e){return Pe(e)?tr(e).call(e,function(r){return ww(r)}):_r(e)==="object"&&e!==null?of({},e):e}function bw(e){for(var r=0,t=ov(e);r<t.length;r++){var i=t[r];e[i]===yw?delete e[i]:_r(e[i])==="object"&&e[i]!==null&&bw(e[i])}}function EN(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var SN=typeof window!="undefined"?window.Hammer||wN:function(){return EN()};function Hi(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var i=SN(this._dom.overlay);i.on("tap",ba(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){i.destroy()});var n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Cn(n).call(n,function(a){i.on(a,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(a){xN(a.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(a){("key"in a?a.key==="Escape":a.keyCode===27)&&r.deactivate()}}MF(Hi.prototype);Hi.current=null;Hi.prototype.destroy=function(){var e,r;this.deactivate();var t=mw(AL(e=g0(r=this._cleanupQueue).call(r,0)).call(e)),i;try{for(t.s();!(i=t.n()).done;){var n=i.value;n()}}catch(a){t.e(a)}finally{t.f()}};Hi.prototype.activate=function(){Hi.current&&Hi.current.deactivate(),Hi.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Hi.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Hi.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function xN(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var yv=wa("Reflect","construct"),Tw=Gt(function(){function e(){}return!(yv(function(){},[],e)instanceof e)}),Ew=!Gt(function(){yv(function(){})}),Sw=Tw||Ew;Q({target:"Reflect",stat:!0,forced:Sw,sham:Sw},{construct:function(r,t){pa(r),Ge(t);var i=arguments.length<3?r:pa(arguments[2]);if(Ew&&!Tw)return yv(r,t,i);if(r==i){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(u_.apply(r,n))}var a=i.prototype,o=Ni(ae(a)?a:Object.prototype),s=Function.apply.call(r,o,t);return ae(s)?s:o}});var CN=dt.Reflect.construct,ON=CN,In=ON,IN=te("Array").entries,PN=IN,xw=Array.prototype,kN={DOMTokenList:!0,NodeList:!0},DN=function(e){var r=e.entries;return e===xw||e instanceof Array&&r===xw.entries||kN.hasOwnProperty(En(e))?PN:r},RN=DN,AN=ni(function(e){var r=function(t){var i=Object.prototype,n=i.hasOwnProperty,a,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function h(k,O,M){return Object.defineProperty(k,O,{value:M,enumerable:!0,configurable:!0,writable:!0}),k[O]}try{h({},"")}catch(k){h=function(O,M,$){return O[M]=$}}function f(k,O,M,$){var C=O&&O.prototype instanceof _?O:_,ut=Object.create(C.prototype),V=new W($||[]);return ut._invoke=P(k,M,V),ut}t.wrap=f;function c(k,O,M){try{return{type:"normal",arg:k.call(O,M)}}catch($){return{type:"throw",arg:$}}}var d="suspendedStart",v="suspendedYield",m="executing",p="completed",g={};function _(){}function y(){}function w(){}var T={};T[s]=function(){return this};var S=Object.getPrototypeOf,x=S&&S(S(U([])));x&&x!==i&&n.call(x,s)&&(T=x);var E=w.prototype=_.prototype=Object.create(T);y.prototype=E.constructor=w,w.constructor=y,y.displayName=h(w,u,"GeneratorFunction");function I(k){["next","throw","return"].forEach(function(O){h(k,O,function(M){return this._invoke(O,M)})})}t.isGeneratorFunction=function(k){var O=typeof k=="function"&&k.constructor;return O?O===y||(O.displayName||O.name)==="GeneratorFunction":!1},t.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,w):(k.__proto__=w,h(k,u,"GeneratorFunction")),k.prototype=Object.create(E),k},t.awrap=function(k){return{__await:k}};function A(k,O){function M(ut,V,vt,At){var St=c(k[ut],k,V);if(St.type==="throw")At(St.arg);else{var fe=St.arg,ie=fe.value;return ie&&typeof ie=="object"&&n.call(ie,"__await")?O.resolve(ie.__await).then(function(Fe){M("next",Fe,vt,At)},function(Fe){M("throw",Fe,vt,At)}):O.resolve(ie).then(function(Fe){fe.value=Fe,vt(fe)},function(Fe){return M("throw",Fe,vt,At)})}}var $;function C(ut,V){function vt(){return new O(function(At,St){M(ut,V,At,St)})}return $=$?$.then(vt,vt):vt()}this._invoke=C}I(A.prototype),A.prototype[l]=function(){return this},t.AsyncIterator=A,t.async=function(k,O,M,$,C){C===void 0&&(C=Promise);var ut=new A(f(k,O,M,$),C);return t.isGeneratorFunction(O)?ut:ut.next().then(function(V){return V.done?V.value:ut.next()})};function P(k,O,M){var $=d;return function(ut,V){if($===m)throw new Error("Generator is already running");if($===p){if(ut==="throw")throw V;return H()}for(M.method=ut,M.arg=V;;){var vt=M.delegate;if(vt){var At=R(vt,M);if(At){if(At===g)continue;return At}}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if($===d)throw $=p,M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);$=m;var St=c(k,O,M);if(St.type==="normal"){if($=M.done?p:v,St.arg===g)continue;return{value:St.arg,done:M.done}}else St.type==="throw"&&($=p,M.method="throw",M.arg=St.arg)}}}function R(k,O){var M=k.iterator[O.method];if(M===a){if(O.delegate=null,O.method==="throw"){if(k.iterator.return&&(O.method="return",O.arg=a,R(k,O),O.method==="throw"))return g;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var $=c(M,k.iterator,O.arg);if($.type==="throw")return O.method="throw",O.arg=$.arg,O.delegate=null,g;var C=$.arg;if(!C)return O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,g;if(C.done)O[k.resultName]=C.value,O.next=k.nextLoc,O.method!=="return"&&(O.method="next",O.arg=a);else return C;return O.delegate=null,g}I(E),h(E,u,"Generator"),E[s]=function(){return this},E.toString=function(){return"[object Generator]"};function N(k){var O={tryLoc:k[0]};1 in k&&(O.catchLoc=k[1]),2 in k&&(O.finallyLoc=k[2],O.afterLoc=k[3]),this.tryEntries.push(O)}function j(k){var O=k.completion||{};O.type="normal",delete O.arg,k.completion=O}function W(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(N,this),this.reset(!0)}t.keys=function(k){var O=[];for(var M in k)O.push(M);return O.reverse(),function $(){for(;O.length;){var C=O.pop();if(C in k)return $.value=C,$.done=!1,$}return $.done=!0,$}};function U(k){if(k){var O=k[s];if(O)return O.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var M=-1,$=function C(){for(;++M<k.length;)if(n.call(k,M))return C.value=k[M],C.done=!1,C;return C.value=a,C.done=!0,C};return $.next=$}}return{next:H}}t.values=U;function H(){return{value:a,done:!0}}return W.prototype={constructor:W,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(j),!k)for(var O in this)O.charAt(0)==="t"&&n.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=a)},stop:function(){this.done=!0;var k=this.tryEntries[0],O=k.completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var O=this;function M(At,St){return ut.type="throw",ut.arg=k,O.next=At,St&&(O.method="next",O.arg=a),!!St}for(var $=this.tryEntries.length-1;$>=0;--$){var C=this.tryEntries[$],ut=C.completion;if(C.tryLoc==="root")return M("end");if(C.tryLoc<=this.prev){var V=n.call(C,"catchLoc"),vt=n.call(C,"finallyLoc");if(V&&vt){if(this.prev<C.catchLoc)return M(C.catchLoc,!0);if(this.prev<C.finallyLoc)return M(C.finallyLoc)}else if(V){if(this.prev<C.catchLoc)return M(C.catchLoc,!0)}else if(vt){if(this.prev<C.finallyLoc)return M(C.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(k,O){for(var M=this.tryEntries.length-1;M>=0;--M){var $=this.tryEntries[M];if($.tryLoc<=this.prev&&n.call($,"finallyLoc")&&this.prev<$.finallyLoc){var C=$;break}}C&&(k==="break"||k==="continue")&&C.tryLoc<=O&&O<=C.finallyLoc&&(C=null);var ut=C?C.completion:{};return ut.type=k,ut.arg=O,C?(this.method="next",this.next=C.finallyLoc,g):this.complete(ut)},complete:function(k,O){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&O&&(this.next=O),g},finish:function(k){for(var O=this.tryEntries.length-1;O>=0;--O){var M=this.tryEntries[O];if(M.finallyLoc===k)return this.complete(M.completion,M.afterLoc),j(M),g}},catch:function(k){for(var O=this.tryEntries.length-1;O>=0;--O){var M=this.tryEntries[O];if(M.tryLoc===k){var $=M.completion;if($.type==="throw"){var C=$.arg;j(M)}return C}}throw new Error("illegal catch attempt")},delegateYield:function(k,O,M){return this.delegate={iterator:U(k),resultName:O,nextLoc:M},this.method==="next"&&(this.arg=a),g}},t}(e.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}}),Ue=AN,MN=A0,Aa=MN,LN=te("Array").values,FN=LN,Cw=Array.prototype,NN={DOMTokenList:!0,NodeList:!0},$N=function(e){var r=e.values;return e===Cw||e instanceof Array&&r===Cw.values||NN.hasOwnProperty(En(e))?FN:r},Ow=$N,_v=[],Iw=_v.sort,GN=Gt(function(){_v.sort(void 0)}),YN=Gt(function(){_v.sort(null)}),jN=ml("sort"),WN=GN||!YN||!jN;Q({target:"Array",proto:!0,forced:WN},{sort:function(r){return r===void 0?Iw.call(Ye(this)):Iw.call(Ye(this),pa(r))}});var HN=te("Array").sort,Pw=Array.prototype,BN=function(e){var r=e.sort;return e===Pw||e instanceof Array&&r===Pw.sort?HN:r},UN=BN,wv=UN,zN=te("Array").keys,VN=zN,kw=Array.prototype,XN={DOMTokenList:!0,NodeList:!0},KN=function(e){var r=e.keys;return e===kw||e instanceof Array&&r===kw.keys||XN.hasOwnProperty(En(e))?VN:r},Ma=KN,ZN=Ro.some,qN=ml("some"),QN=Li("some");Q({target:"Array",proto:!0,forced:!qN||!QN},{some:function(r){return ZN(this,r,arguments.length>1?arguments[1]:void 0)}});var JN=te("Array").some,Dw=Array.prototype,t$=function(e){var r=e.some;return e===Dw||e instanceof Array&&r===Dw.some?JN:r},e$=t$,r$=e$,i$=!Gt(function(){return Object.isExtensible(Object.preventExtensions({}))}),Rw=ni(function(e){var r=yr.f,t=dl("meta"),i=0,n=Object.isExtensible||function(){return!0},a=function(h){r(h,t,{value:{objectID:"O"+ ++i,weakData:{}}})},o=function(h,f){if(!ae(h))return typeof h=="symbol"?h:(typeof h=="string"?"S":"P")+h;if(!nt(h,t)){if(!n(h))return"F";if(!f)return"E";a(h)}return h[t].objectID},s=function(h,f){if(!nt(h,t)){if(!n(h))return!0;if(!f)return!1;a(h)}return h[t].weakData},l=function(h){return i$&&u.REQUIRED&&n(h)&&!nt(h,t)&&a(h),h},u=e.exports={REQUIRED:!1,fastKey:o,getWeakData:s,onFreeze:l};Mo[t]=!0}),Gl=function(e,r){this.stopped=e,this.result=r},Aw=function(e,r,t){var i=t&&t.that,n=!!(t&&t.AS_ENTRIES),a=!!(t&&t.IS_ITERATOR),o=!!(t&&t.INTERRUPTED),s=ma(r,i,1+n+o),l,u,h,f,c,d,v,m=function(g){return l&&iv(l),new Gl(!0,g)},p=function(g){return n?(Ge(g),o?s(g[0],g[1],m):s(g[0],g[1])):o?s(g,m):s(g)};if(a)l=e;else{if(u=Hh(e),typeof u!="function")throw TypeError("Target is not iterable");if(Q_(u)){for(h=0,f=Yr(e.length);f>h;h++)if(c=p(e[h]),c&&c instanceof Gl)return c;return new Gl(!1)}l=u.call(e)}for(d=l.next;!(v=d.call(l)).done;){try{c=p(v.value)}catch(g){throw iv(l),g}if(typeof c=="object"&&c&&c instanceof Gl)return c}return new Gl(!1)},Mw=function(e,r,t){if(!(e instanceof r))throw TypeError("Incorrect "+(t?t+" ":"")+"invocation");return e},n$=yr.f,a$=Ro.forEach,o$=ai.set,s$=ai.getterFor,Lw=function(e,r,t){var i=e.indexOf("Map")!==-1,n=e.indexOf("Weak")!==-1,a=i?"set":"add",o=Ht[e],s=o&&o.prototype,l={},u;if(!Tt||typeof o!="function"||!(n||s.forEach&&!Gt(function(){new o().entries().next()})))u=t.getConstructor(r,e,i,a),Rw.REQUIRED=!0;else{u=r(function(f,c){o$(Mw(f,u,e),{type:e,collection:new o}),c!=null&&Aw(c,f[a],{that:f,AS_ENTRIES:i})});var h=s$(e);a$(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(f){var c=f=="add"||f=="set";f in s&&!(n&&f=="clear")&&Gr(u.prototype,f,function(d,v){var m=h(this).collection;if(!c&&n&&!ae(d))return f=="get"?void 0:!1;var p=m[f](d===0?0:d,v);return c?this:p})}),n||n$(u.prototype,"size",{configurable:!0,get:function(){return h(this).collection.size}})}return yl(u,e,!1,!0),l[e]=u,Q({global:!0,forced:!0},l),n||t.setStrong(u,e,i),u},Fw=function(e,r,t){for(var i in r)t&&t.unsafe&&e[i]?e[i]=r[i]:Mh(e,i,r[i],t);return e},Nw=Jt("species"),l$=function(e){var r=wa(e),t=yr.f;Tt&&r&&!r[Nw]&&t(r,Nw,{configurable:!0,get:function(){return this}})},u$=yr.f,$w=Rw.fastKey,Gw=ai.set,bv=ai.getterFor,Yw={getConstructor:function(e,r,t,i){var n=e(function(l,u){Mw(l,n,r),Gw(l,{type:r,index:Ni(null),first:void 0,last:void 0,size:0}),Tt||(l.size=0),u!=null&&Aw(u,l[i],{that:l,AS_ENTRIES:t})}),a=bv(r),o=function(l,u,h){var f=a(l),c=s(l,u),d,v;return c?c.value=h:(f.last=c={index:v=$w(u,!0),key:u,value:h,previous:d=f.last,next:void 0,removed:!1},f.first||(f.first=c),d&&(d.next=c),Tt?f.size++:l.size++,v!=="F"&&(f.index[v]=c)),l},s=function(l,u){var h=a(l),f=$w(u),c;if(f!=="F")return h.index[f];for(c=h.first;c;c=c.next)if(c.key==u)return c};return Fw(n.prototype,{clear:function(){for(var u=this,h=a(u),f=h.index,c=h.first;c;)c.removed=!0,c.previous&&(c.previous=c.previous.next=void 0),delete f[c.index],c=c.next;h.first=h.last=void 0,Tt?h.size=0:u.size=0},delete:function(l){var u=this,h=a(u),f=s(u,l);if(f){var c=f.next,d=f.previous;delete h.index[f.index],f.removed=!0,d&&(d.next=c),c&&(c.previous=d),h.first==f&&(h.first=c),h.last==f&&(h.last=d),Tt?h.size--:u.size--}return!!f},forEach:function(u){for(var h=a(this),f=ma(u,arguments.length>1?arguments[1]:void 0,3),c;c=c?c.next:h.first;)for(f(c.value,c.key,this);c&&c.removed;)c=c.previous},has:function(u){return!!s(this,u)}}),Fw(n.prototype,t?{get:function(u){var h=s(this,u);return h&&h.value},set:function(u,h){return o(this,u===0?0:u,h)}}:{add:function(u){return o(this,u=u===0?0:u,u)}}),Tt&&u$(n.prototype,"size",{get:function(){return a(this).size}}),n},setStrong:function(e,r,t){var i=r+" Iterator",n=bv(r),a=bv(i);tv(e,r,function(o,s){Gw(this,{type:i,target:o,state:n(o),kind:s,last:void 0})},function(){for(var o=a(this),s=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,{value:void 0,done:!0}):s=="keys"?{value:l.key,done:!1}:s=="values"?{value:l.value,done:!1}:{value:[l.key,l.value],done:!1}},t?"entries":"values",!t,!0),l$(r)}};Lw("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Yw);var h$=dt.Map,f$=h$,jw=f$,c$=o0,d$=c$;Q({target:"Object",stat:!0},{setPrototypeOf:dM});var v$=dt.Object.setPrototypeOf,p$=v$,Ww=p$,m$=ni(function(e){function r(t,i){return e.exports=r=Ww||function(a,o){return a.__proto__=o,a},r(t,i)}e.exports=r});function g$(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=d$(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&m$(e,r)}var Hw=g$;function y$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Bw=y$;function _$(e,r){return r&&(_r(r)==="object"||typeof r=="function")?r:Bw(e)}var Uw=_$,w$=hL,zw=w$,sf=ni(function(e){function r(t){return e.exports=r=Ww?zw:function(n){return n.__proto__||zw(n)},r(t)}e.exports=r}),lf,b$=new Uint8Array(16);function T$(){if(!lf&&(lf=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!lf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lf(b$)}var E$=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function S$(e){return typeof e=="string"&&E$.test(e)}var ge=[];for(var Tv=0;Tv<256;++Tv)ge.push((Tv+256).toString(16).substr(1));function x$(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(ge[e[r+0]]+ge[e[r+1]]+ge[e[r+2]]+ge[e[r+3]]+"-"+ge[e[r+4]]+ge[e[r+5]]+"-"+ge[e[r+6]]+ge[e[r+7]]+"-"+ge[e[r+8]]+ge[e[r+9]]+"-"+ge[e[r+10]]+ge[e[r+11]]+ge[e[r+12]]+ge[e[r+13]]+ge[e[r+14]]+ge[e[r+15]]).toLowerCase();if(!S$(t))throw TypeError("Stringified UUID is invalid");return t}function C$(e,r,t){e=e||{};var i=e.random||(e.rng||T$)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,r){t=t||0;for(var n=0;n<16;++n)r[t+n]=i[n];return r}return x$(i)}function Ev(e){return typeof e=="string"||typeof e=="number"}var O$=function(){function e(r){Ta(this,e),this._queue=[],this._timeout=null,this._extended=null,this.delay=null,this.max=1/0,this.setOptions(r)}return Ea(e,[{key:"setOptions",value:function(t){t&&typeof t.delay!="undefined"&&(this.delay=t.delay),t&&typeof t.max!="undefined"&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,i=this._extended.methods,n=0;n<i.length;n++){var a=i[n];a.original?t[a.name]=a.original:delete t[a.name]}this._extended=null}}},{key:"replace",value:function(t,i){var n=this,a=t[i];if(!a)throw new Error("Method "+i+" undefined");t[i]=function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];n.queue({args:s,fn:a,context:this})}}},{key:"queue",value:function(t){typeof t=="function"?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=GM(function(){t.flush()},this.delay))}},{key:"flush",value:function(){var t,i;Cn(t=g0(i=this._queue).call(i,0)).call(t,function(n){n.fn.apply(n.context||n.fn,n.args||[])})}}],[{key:"extend",value:function(t,i){var n=new e(i);if(t.flush!==void 0)throw new Error("Target object already has a property flush");t.flush=function(){n.flush()};var a=[{name:"flush",original:void 0}];if(i&&i.replace)for(var o=0;o<i.replace.length;o++){var s=i.replace[o];a.push({name:s,original:t[s]}),n.replace(t,s)}return n._extended={object:t,methods:a},n}}]),e}(),Vw=function(){function e(){Ta(this,e),this._subscribers={"*":[],add:[],remove:[],update:[]},this.subscribe=e.prototype.on,this.unsubscribe=e.prototype.off}return Ea(e,[{key:"_trigger",value:function(t,i,n){var a,o;if(t==="*")throw new Error("Cannot trigger event *");Cn(a=Kh(o=[]).call(o,ke(this._subscribers[t]),ke(this._subscribers["*"]))).call(a,function(s){s(t,i,n!=null?n:null)})}},{key:"on",value:function(t,i){typeof i=="function"&&this._subscribers[t].push(i)}},{key:"off",value:function(t,i){var n;this._subscribers[t]=de(n=this._subscribers[t]).call(n,function(a){return a!==i})}}]),e}();Lw("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Yw);var I$=dt.Set,P$=I$,uf=P$;function ui(e,r){var t;if(typeof Cl=="undefined"||Bh(e)==null){if(Pe(e)||(t=k$(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=xn(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function k$(e,r){var t;if(!!e){if(typeof e=="string")return Xw(e,r);var i=xl(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Uh(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Xw(e,r)}}function Xw(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var Kw=function(){function e(r){Ta(this,e),this._pairs=r}return Ea(e,[{key:Aa,value:Ue.mark(function r(){var t,i,n,a,o;return Ue.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=ui(this._pairs),l.prev=1,t.s();case 3:if((i=t.n()).done){l.next=9;break}return n=He(i.value,2),a=n[0],o=n[1],l.next=7,[a,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"entries",value:Ue.mark(function r(){var t,i,n,a,o;return Ue.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=ui(this._pairs),l.prev=1,t.s();case 3:if((i=t.n()).done){l.next=9;break}return n=He(i.value,2),a=n[0],o=n[1],l.next=7,[a,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"keys",value:Ue.mark(function r(){var t,i,n,a;return Ue.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t=ui(this._pairs),s.prev=1,t.s();case 3:if((i=t.n()).done){s.next=9;break}return n=He(i.value,1),a=n[0],s.next=7,a;case 7:s.next=3;break;case 9:s.next=14;break;case 11:s.prev=11,s.t0=s.catch(1),t.e(s.t0);case 14:return s.prev=14,t.f(),s.finish(14);case 17:case"end":return s.stop()}},r,this,[[1,11,14,17]])})},{key:"values",value:Ue.mark(function r(){var t,i,n,a;return Ue.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t=ui(this._pairs),s.prev=1,t.s();case 3:if((i=t.n()).done){s.next=9;break}return n=He(i.value,2),a=n[1],s.next=7,a;case 7:s.next=3;break;case 9:s.next=14;break;case 11:s.prev=11,s.t0=s.catch(1),t.e(s.t0);case 14:return s.prev=14,t.f(),s.finish(14);case 17:case"end":return s.stop()}},r,this,[[1,11,14,17]])})},{key:"toIdArray",value:function(){var t;return tr(t=ke(this._pairs)).call(t,function(i){return i[0]})}},{key:"toItemArray",value:function(){var t;return tr(t=ke(this._pairs)).call(t,function(i){return i[1]})}},{key:"toEntryArray",value:function(){return ke(this._pairs)}},{key:"toObjectMap",value:function(){var t=XM(null),i=ui(this._pairs),n;try{for(i.s();!(n=i.n()).done;){var a=He(n.value,2),o=a[0],s=a[1];t[o]=s}}catch(l){i.e(l)}finally{i.f()}return t}},{key:"toMap",value:function(){return new jw(this._pairs)}},{key:"toIdSet",value:function(){return new uf(this.toIdArray())}},{key:"toItemSet",value:function(){return new uf(this.toItemArray())}},{key:"cache",value:function(){return new e(ke(this._pairs))}},{key:"distinct",value:function(t){var i=new uf,n=ui(this._pairs),a;try{for(n.s();!(a=n.n()).done;){var o=He(a.value,2),s=o[0],l=o[1];i.add(t(l,s))}}catch(u){n.e(u)}finally{n.f()}return i}},{key:"filter",value:function(t){var i=this._pairs;return new e(xa({},Aa,Ue.mark(function n(){var a,o,s,l,u;return Ue.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=ui(i),f.prev=1,a.s();case 3:if((o=a.n()).done){f.next=10;break}if(s=He(o.value,2),l=s[0],u=s[1],!t(u,l)){f.next=8;break}return f.next=8,[l,u];case 8:f.next=3;break;case 10:f.next=15;break;case 12:f.prev=12,f.t0=f.catch(1),a.e(f.t0);case 15:return f.prev=15,a.f(),f.finish(15);case 18:case"end":return f.stop()}},n,null,[[1,12,15,18]])})))}},{key:"forEach",value:function(t){var i=ui(this._pairs),n;try{for(i.s();!(n=i.n()).done;){var a=He(n.value,2),o=a[0],s=a[1];t(s,o)}}catch(l){i.e(l)}finally{i.f()}}},{key:"map",value:function(t){var i=this._pairs;return new e(xa({},Aa,Ue.mark(function n(){var a,o,s,l,u;return Ue.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=ui(i),f.prev=1,a.s();case 3:if((o=a.n()).done){f.next=9;break}return s=He(o.value,2),l=s[0],u=s[1],f.next=7,[l,t(u,l)];case 7:f.next=3;break;case 9:f.next=14;break;case 11:f.prev=11,f.t0=f.catch(1),a.e(f.t0);case 14:return f.prev=14,a.f(),f.finish(14);case 17:case"end":return f.stop()}},n,null,[[1,11,14,17]])})))}},{key:"max",value:function(t){var i=xn(this._pairs),n=i.next();if(n.done)return null;for(var a=n.value[1],o=t(n.value[1],n.value[0]);!(n=i.next()).done;){var s=He(n.value,2),l=s[0],u=s[1],h=t(u,l);h>o&&(o=h,a=u)}return a}},{key:"min",value:function(t){var i=xn(this._pairs),n=i.next();if(n.done)return null;for(var a=n.value[1],o=t(n.value[1],n.value[0]);!(n=i.next()).done;){var s=He(n.value,2),l=s[0],u=s[1],h=t(u,l);h<o&&(o=h,a=u)}return a}},{key:"reduce",value:function(t,i){var n=ui(this._pairs),a;try{for(n.s();!(a=n.n()).done;){var o=He(a.value,2),s=o[0],l=o[1];i=t(i,l,s)}}catch(u){n.e(u)}finally{n.f()}return i}},{key:"sort",value:function(t){var i=this;return new e(xa({},Aa,function(){var n;return xn(wv(n=ke(i._pairs)).call(n,function(a,o){var s=He(a,2),l=s[0],u=s[1],h=He(o,2),f=h[0],c=h[1];return t(u,c,l,f)}))}))}}]),e}();function Zw(e,r){var t=ov(e);if(j_){var i=j_(e);r&&(i=de(i).call(i,function(n){return b_(e,n).enumerable})),t.push.apply(t,i)}return t}function qw(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){var i;Cn(i=Zw(Object(t),!0)).call(i,function(a){xa(e,a,t[a])})}else if(__)TA(e,__(t));else{var n;Cn(n=Zw(Object(t))).call(n,function(a){v_(e,a,b_(t,a))})}}return e}function Sv(e,r){var t;if(typeof Cl=="undefined"||Bh(e)==null){if(Pe(e)||(t=D$(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=xn(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function D$(e,r){var t;if(!!e){if(typeof e=="string")return Qw(e,r);var i=xl(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Uh(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Qw(e,r)}}function Qw(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function R$(e){var r=A$();return function(){var i=sf(e),n;if(r){var a=sf(this).constructor;n=In(i,arguments,a)}else n=i.apply(this,arguments);return Uw(this,n)}}function A$(){if(typeof Reflect=="undefined"||!In||In.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(In(Date,[],function(){})),!0}catch(e){return!1}}function M$(e,r){return e[r]==null&&(e[r]=C$()),e}var Bo=function(e){Hw(t,e);var r=R$(t);function t(i,n){var a;return Ta(this,t),a=r.call(this),a._queue=null,i&&!Pe(i)&&(n=i,i=[]),a._options=n||{},a._data=new jw,a.length=0,a._idProp=a._options.fieldId||"id",i&&i.length&&a.add(i),a.setOptions(n),a}return Ea(t,[{key:"setOptions",value:function(n){n&&n.queue!==void 0&&(n.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=O$.extend(this,{replace:["add","update","remove"]})),n.queue&&_r(n.queue)==="object"&&this._queue.setOptions(n.queue)))}},{key:"add",value:function(n,a){var o=this,s=[],l;if(Pe(n)){var u=tr(n).call(n,function(c){return c[o._idProp]});if(r$(u).call(u,function(c){return o._data.has(c)}))throw new Error("A duplicate id was found in the parameter array.");for(var h=0,f=n.length;h<f;h++)l=this._addItem(n[h]),s.push(l)}else if(n&&_r(n)==="object")l=this._addItem(n),s.push(l);else throw new Error("Unknown dataType");return s.length&&this._trigger("add",{items:s},a),s}},{key:"update",value:function(n,a){var o=this,s=[],l=[],u=[],h=[],f=this._idProp,c=function(g){var _=g[f];if(_!=null&&o._data.has(_)){var y=g,w=p0({},o._data.get(_)),T=o._updateItem(y);l.push(T),h.push(y),u.push(w)}else{var S=o._addItem(g);s.push(S)}};if(Pe(n))for(var d=0,v=n.length;d<v;d++)n[d]&&_r(n[d])==="object"?c(n[d]):console.warn("Ignoring input item, which is not an object at index "+d);else if(n&&_r(n)==="object")c(n);else throw new Error("Unknown dataType");if(s.length&&this._trigger("add",{items:s},a),l.length){var m={items:l,oldData:u,data:h};this._trigger("update",m,a)}return Kh(s).call(s,l)}},{key:"updateOnly",value:function(n,a){var o,s=this;Pe(n)||(n=[n]);var l=tr(o=tr(n).call(n,function(h){var f=s._data.get(h[s._idProp]);if(f==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:f,update:h}})).call(o,function(h){var f=h.oldData,c=h.update,d=f[s._idProp],v=TN(f,c);return s._data.set(d,v),{id:d,oldData:f,updatedData:v}});if(l.length){var u={items:tr(l).call(l,function(h){return h.id}),oldData:tr(l).call(l,function(h){return h.oldData}),data:tr(l).call(l,function(h){return h.updatedData})};return this._trigger("update",u,a),u.items}else return[]}},{key:"get",value:function(n,a){var o=void 0,s=void 0,l=void 0;Ev(n)?(o=n,l=a):Pe(n)?(s=n,l=a):l=n;var u=l&&l.returnType==="Object"?"Object":"Array",h=l&&de(l),f=[],c=void 0,d=void 0,v=void 0;if(o!=null)c=this._data.get(o),c&&h&&!h(c)&&(c=void 0);else if(s!=null)for(var m=0,p=s.length;m<p;m++)c=this._data.get(s[m]),c!=null&&(!h||h(c))&&f.push(c);else{var g;d=ke(Ma(g=this._data).call(g));for(var _=0,y=d.length;_<y;_++)v=d[_],c=this._data.get(v),c!=null&&(!h||h(c))&&f.push(c)}if(l&&l.order&&o==null&&this._sort(f,l.order),l&&l.fields){var w=l.fields;if(o!=null&&c!=null)c=this._filterFields(c,w);else for(var T=0,S=f.length;T<S;T++)f[T]=this._filterFields(f[T],w)}if(u=="Object"){for(var x={},E=0,I=f.length;E<I;E++){var A=f[E],P=A[this._idProp];x[P]=A}return x}else if(o!=null){var R;return(R=c)!==null&&R!==void 0?R:null}else return f}},{key:"getIds",value:function(n){var a=this._data,o=n&&de(n),s=n&&n.order,l=ke(Ma(a).call(a)),u=[];if(o)if(s){for(var h=[],f=0,c=l.length;f<c;f++){var d=l[f],v=this._data.get(d);v!=null&&o(v)&&h.push(v)}this._sort(h,s);for(var m=0,p=h.length;m<p;m++)u.push(h[m][this._idProp])}else for(var g=0,_=l.length;g<_;g++){var y=l[g],w=this._data.get(y);w!=null&&o(w)&&u.push(w[this._idProp])}else if(s){for(var T=[],S=0,x=l.length;S<x;S++){var E=l[S];T.push(a.get(E))}this._sort(T,s);for(var I=0,A=T.length;I<A;I++)u.push(T[I][this._idProp])}else for(var P=0,R=l.length;P<R;P++){var N=l[P],j=a.get(N);j!=null&&u.push(j[this._idProp])}return u}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(n,a){var o=a&&de(a),s=this._data,l=ke(Ma(s).call(s));if(a&&a.order)for(var u=this.get(a),h=0,f=u.length;h<f;h++){var c=u[h],d=c[this._idProp];n(c,d)}else for(var v=0,m=l.length;v<m;v++){var p=l[v],g=this._data.get(p);g!=null&&(!o||o(g))&&n(g,p)}}},{key:"map",value:function(n,a){for(var o=a&&de(a),s=[],l=this._data,u=ke(Ma(l).call(l)),h=0,f=u.length;h<f;h++){var c=u[h],d=this._data.get(c);d!=null&&(!o||o(d))&&s.push(n(d,c))}return a&&a.order&&this._sort(s,a.order),s}},{key:"_filterFields",value:function(n,a){var o;return n&&s_(o=Pe(a)?a:ov(a)).call(o,function(s,l){return s[l]=n[l],s},{})}},{key:"_sort",value:function(n,a){if(typeof a=="string"){var o=a;wv(n).call(n,function(s,l){var u=s[o],h=l[o];return u>h?1:u<h?-1:0})}else if(typeof a=="function")wv(n).call(n,a);else throw new TypeError("Order must be a function or a string")}},{key:"remove",value:function(n,a){for(var o=[],s=[],l=Pe(n)?n:[n],u=0,h=l.length;u<h;u++){var f=this._remove(l[u]);if(f){var c=f[this._idProp];c!=null&&(o.push(c),s.push(f))}}return o.length&&this._trigger("remove",{items:o,oldData:s},a),o}},{key:"_remove",value:function(n){var a;if(Ev(n)?a=n:n&&_r(n)==="object"&&(a=n[this._idProp]),a!=null&&this._data.has(a)){var o=this._data.get(a)||null;return this._data.delete(a),--this.length,o}return null}},{key:"clear",value:function(n){for(var a,o=ke(Ma(a=this._data).call(a)),s=[],l=0,u=o.length;l<u;l++)s.push(this._data.get(o[l]));return this._data.clear(),this.length=0,this._trigger("remove",{items:o,oldData:s},n),o}},{key:"max",value:function(n){var a,o=null,s=null,l=Sv(Ow(a=this._data).call(a)),u;try{for(l.s();!(u=l.n()).done;){var h=u.value,f=h[n];typeof f=="number"&&(s==null||f>s)&&(o=h,s=f)}}catch(c){l.e(c)}finally{l.f()}return o||null}},{key:"min",value:function(n){var a,o=null,s=null,l=Sv(Ow(a=this._data).call(a)),u;try{for(l.s();!(u=l.n()).done;){var h=u.value,f=h[n];typeof f=="number"&&(s==null||f<s)&&(o=h,s=f)}}catch(c){l.e(c)}finally{l.f()}return o||null}},{key:"distinct",value:function(n){for(var a=this._data,o=ke(Ma(a).call(a)),s=[],l=0,u=0,h=o.length;u<h;u++){for(var f=o[u],c=a.get(f),d=c[n],v=!1,m=0;m<l;m++)if(s[m]==d){v=!0;break}!v&&d!==void 0&&(s[l]=d,l++)}return s}},{key:"_addItem",value:function(n){var a=M$(n,this._idProp),o=a[this._idProp];if(this._data.has(o))throw new Error("Cannot add item: item with id "+o+" already exists");return this._data.set(o,a),++this.length,o}},{key:"_updateItem",value:function(n){var a=n[this._idProp];if(a==null)throw new Error("Cannot update item: item has no id (item: "+UM(n)+")");var o=this._data.get(a);if(!o)throw new Error("Cannot update item: no item with id "+a+" found");return this._data.set(a,qw(qw({},o),n)),a}},{key:"stream",value:function(n){if(n){var a=this._data;return new Kw(xa({},Aa,Ue.mark(function s(){var l,u,h,f;return Ue.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:l=Sv(n),d.prev=1,l.s();case 3:if((u=l.n()).done){d.next=11;break}if(h=u.value,f=a.get(h),f==null){d.next=9;break}return d.next=9,[h,f];case 9:d.next=3;break;case 11:d.next=16;break;case 13:d.prev=13,d.t0=d.catch(1),l.e(d.t0);case 16:return d.prev=16,l.f(),d.finish(16);case 19:case"end":return d.stop()}},s,null,[[1,13,16,19]])})))}else{var o;return new Kw(xa({},Aa,ba(o=RN(this._data)).call(o,this._data)))}}},{key:"idProp",get:function(){return this._idProp}}]),t}(Vw);function L$(e,r){var t;if(typeof Cl=="undefined"||Bh(e)==null){if(Pe(e)||(t=F$(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=xn(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function F$(e,r){var t;if(!!e){if(typeof e=="string")return Jw(e,r);var i=xl(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Uh(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Jw(e,r)}}function Jw(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function N$(e){var r=$$();return function(){var i=sf(e),n;if(r){var a=sf(this).constructor;n=In(i,arguments,a)}else n=i.apply(this,arguments);return Uw(this,n)}}function $$(){if(typeof Reflect=="undefined"||!In||In.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(In(Date,[],function(){})),!0}catch(e){return!1}}var G$=function(e){Hw(t,e);var r=N$(t);function t(i,n){var a,o;return Ta(this,t),o=r.call(this),o.length=0,o._ids=new uf,o._options=n||{},o._listener=ba(a=o._onEvent).call(a,Bw(o)),o.setData(i),o}return Ea(t,[{key:"setData",value:function(n){if(this._data){this._data.off&&this._data.off("*",this._listener);var a=this._data.getIds({filter:de(this._options)}),o=this._data.get(a);this._ids.clear(),this.length=0,this._trigger("remove",{items:a,oldData:o})}if(n!=null){this._data=n;for(var s=this._data.getIds({filter:de(this._options)}),l=0,u=s.length;l<u;l++){var h=s[l];this._ids.add(h)}this.length=s.length,this._trigger("add",{items:s})}else this._data=new Bo;this._data.on&&this._data.on("*",this._listener)}},{key:"refresh",value:function(){for(var n=this._data.getIds({filter:de(this._options)}),a=ke(this._ids),o={},s=[],l=[],u=[],h=0,f=n.length;h<f;h++){var c=n[h];o[c]=!0,this._ids.has(c)||(s.push(c),this._ids.add(c))}for(var d=0,v=a.length;d<v;d++){var m=a[d],p=this._data.get(m);p==null?console.error("If you see this, report it please."):o[m]||(l.push(m),u.push(p),this._ids.delete(m))}this.length+=s.length-l.length,s.length&&this._trigger("add",{items:s}),l.length&&this._trigger("remove",{items:l,oldData:u})}},{key:"get",value:function(n,a){if(this._data==null)return null;var o=null,s;Ev(n)||Pe(n)?(o=n,s=a):s=n;var l=p0({},this._options,s),u=de(this._options),h=s&&de(s);return u&&h&&(l.filter=function(f){return u(f)&&h(f)}),o==null?this._data.get(l):this._data.get(o,l)}},{key:"getIds",value:function(n){if(this._data.length){var a=de(this._options),o=n!=null?de(n):null,s;return o?a?s=function(u){return a(u)&&o(u)}:s=o:s=a,this._data.getIds({filter:s,order:n&&n.order})}else return[]}},{key:"forEach",value:function(n,a){if(this._data){var o,s=de(this._options),l=a&&de(a),u;l?s?u=function(f){return s(f)&&l(f)}:u=l:u=s,Cn(o=this._data).call(o,n,{filter:u,order:a&&a.order})}}},{key:"map",value:function(n,a){if(this._data){var o,s=de(this._options),l=a&&de(a),u;return l?s?u=function(f){return s(f)&&l(f)}:u=l:u=s,tr(o=this._data).call(o,n,{filter:u,order:a&&a.order})}else return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"stream",value:function(n){var a;return this._data.stream(n||xa({},Aa,ba(a=Ma(this._ids)).call(a,this._ids)))}},{key:"dispose",value:function(){var n;(n=this._data)!==null&&n!==void 0&&n.off&&this._data.off("*",this._listener);var a="This data view has already been disposed of.",o={get:function(){throw new Error(a)},set:function(){throw new Error(a)},configurable:!1},s=L$(M0(t.prototype)),l;try{for(s.s();!(l=s.n()).done;){var u=l.value;v_(this,u,o)}}catch(h){s.e(h)}finally{s.f()}}},{key:"_onEvent",value:function(n,a,o){if(!(!a||!a.items||!this._data)){var s=a.items,l=[],u=[],h=[],f=[],c=[],d=[];switch(n){case"add":for(var v=0,m=s.length;v<m;v++){var p=s[v],g=this.get(p);g&&(this._ids.add(p),l.push(p))}break;case"update":for(var _=0,y=s.length;_<y;_++){var w=s[_],T=this.get(w);T?this._ids.has(w)?(u.push(w),c.push(a.data[_]),f.push(a.oldData[_])):(this._ids.add(w),l.push(w)):this._ids.has(w)&&(this._ids.delete(w),h.push(w),d.push(a.oldData[_]))}break;case"remove":for(var S=0,x=s.length;S<x;S++){var E=s[S];this._ids.has(E)&&(this._ids.delete(E),h.push(E),d.push(a.oldData[S]))}break}this.length+=l.length-h.length,l.length&&this._trigger("add",{items:l},o),u.length&&this._trigger("update",{items:u,oldData:f,data:c},o),h.length&&this._trigger("remove",{items:h,oldData:d},o)}}},{key:"idProp",get:function(){return this.getDataSet().idProp}}]),t}(Vw);function Y$(e,r){return _r(r)==="object"&&r!==null&&e===r.idProp&&typeof r.add=="function"&&typeof r.clear=="function"&&typeof r.distinct=="function"&&typeof Cn(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof tr(r)=="function"&&typeof r.max=="function"&&typeof r.min=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.remove=="function"&&typeof r.setOptions=="function"&&typeof r.stream=="function"&&typeof r.update=="function"&&typeof r.updateOnly=="function"}function Bi(e,r){return _r(r)==="object"&&r!==null&&e===r.idProp&&typeof Cn(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof tr(r)=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.stream=="function"&&Y$(e,r.getDataSet())}//! moment.js
//! version : 2.29.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var t1;function F(){return t1.apply(null,arguments)}function j$(e){t1=e}function Hr(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function La(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function yt(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function xv(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var r;for(r in e)if(yt(e,r))return!1;return!0}function ze(e){return e===void 0}function Ui(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Yl(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function e1(e,r){var t=[],i;for(i=0;i<e.length;++i)t.push(r(e[i],i));return t}function Pn(e,r){for(var t in r)yt(r,t)&&(e[t]=r[t]);return yt(r,"toString")&&(e.toString=r.toString),yt(r,"valueOf")&&(e.valueOf=r.valueOf),e}function hi(e,r,t,i){return O1(e,r,t,i,!0).utc()}function W$(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function it(e){return e._pf==null&&(e._pf=W$()),e._pf}var Cv;Array.prototype.some?Cv=Array.prototype.some:Cv=function(e){var r=Object(this),t=r.length>>>0,i;for(i=0;i<t;i++)if(i in r&&e.call(this,r[i],i,r))return!0;return!1};function Ov(e){if(e._isValid==null){var r=it(e),t=Cv.call(r.parsedDateParts,function(n){return n!=null}),i=!isNaN(e._d.getTime())&&r.overflow<0&&!r.empty&&!r.invalidEra&&!r.invalidMonth&&!r.invalidWeekday&&!r.weekdayMismatch&&!r.nullInput&&!r.invalidFormat&&!r.userInvalidated&&(!r.meridiem||r.meridiem&&t);if(e._strict&&(i=i&&r.charsLeftOver===0&&r.unusedTokens.length===0&&r.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=i;else return i}return e._isValid}function hf(e){var r=hi(NaN);return e!=null?Pn(it(r),e):it(r).userInvalidated=!0,r}var Iv=F.momentProperties=[],Pv=!1;function kv(e,r){var t,i,n;if(ze(r._isAMomentObject)||(e._isAMomentObject=r._isAMomentObject),ze(r._i)||(e._i=r._i),ze(r._f)||(e._f=r._f),ze(r._l)||(e._l=r._l),ze(r._strict)||(e._strict=r._strict),ze(r._tzm)||(e._tzm=r._tzm),ze(r._isUTC)||(e._isUTC=r._isUTC),ze(r._offset)||(e._offset=r._offset),ze(r._pf)||(e._pf=it(r)),ze(r._locale)||(e._locale=r._locale),Iv.length>0)for(t=0;t<Iv.length;t++)i=Iv[t],n=r[i],ze(n)||(e[i]=n);return e}function jl(e){kv(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Pv===!1&&(Pv=!0,F.updateOffset(this),Pv=!1)}function Br(e){return e instanceof jl||e!=null&&e._isAMomentObject!=null}function r1(e){F.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function Tr(e,r){var t=!0;return Pn(function(){if(F.deprecationHandler!=null&&F.deprecationHandler(null,e),t){var i=[],n,a,o;for(a=0;a<arguments.length;a++){if(n="",typeof arguments[a]=="object"){n+=`
[`+a+"] ";for(o in arguments[0])yt(arguments[0],o)&&(n+=o+": "+arguments[0][o]+", ");n=n.slice(0,-2)}else n=arguments[a];i.push(n)}r1(e+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),t=!1}return r.apply(this,arguments)},r)}var i1={};function n1(e,r){F.deprecationHandler!=null&&F.deprecationHandler(e,r),i1[e]||(r1(r),i1[e]=!0)}F.suppressDeprecationWarnings=!1;F.deprecationHandler=null;function fi(e){return typeof Function!="undefined"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function H$(e){var r,t;for(t in e)yt(e,t)&&(r=e[t],fi(r)?this[t]=r:this["_"+t]=r);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Dv(e,r){var t=Pn({},e),i;for(i in r)yt(r,i)&&(La(e[i])&&La(r[i])?(t[i]={},Pn(t[i],e[i]),Pn(t[i],r[i])):r[i]!=null?t[i]=r[i]:delete t[i]);for(i in e)yt(e,i)&&!yt(r,i)&&La(e[i])&&(t[i]=Pn({},t[i]));return t}function Rv(e){e!=null&&this.set(e)}var Av;Object.keys?Av=Object.keys:Av=function(e){var r,t=[];for(r in e)yt(e,r)&&t.push(r);return t};var B$={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function U$(e,r,t){var i=this._calendar[e]||this._calendar.sameElse;return fi(i)?i.call(r,t):i}function ci(e,r,t){var i=""+Math.abs(e),n=r-i.length,a=e>=0;return(a?t?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+i}var Mv=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ff=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Lv={},Uo={};function B(e,r,t,i){var n=i;typeof i=="string"&&(n=function(){return this[i]()}),e&&(Uo[e]=n),r&&(Uo[r[0]]=function(){return ci(n.apply(this,arguments),r[1],r[2])}),t&&(Uo[t]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function z$(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V$(e){var r=e.match(Mv),t,i;for(t=0,i=r.length;t<i;t++)Uo[r[t]]?r[t]=Uo[r[t]]:r[t]=z$(r[t]);return function(n){var a="",o;for(o=0;o<i;o++)a+=fi(r[o])?r[o].call(n,e):r[o];return a}}function cf(e,r){return e.isValid()?(r=a1(r,e.localeData()),Lv[r]=Lv[r]||V$(r),Lv[r](e)):e.localeData().invalidDate()}function a1(e,r){var t=5;function i(n){return r.longDateFormat(n)||n}for(ff.lastIndex=0;t>=0&&ff.test(e);)e=e.replace(ff,i),ff.lastIndex=0,t-=1;return e}var X$={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function K$(e){var r=this._longDateFormat[e],t=this._longDateFormat[e.toUpperCase()];return r||!t?r:(this._longDateFormat[e]=t.match(Mv).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[e])}var Z$="Invalid date";function q$(){return this._invalidDate}var Q$="%d",J$=/\d{1,2}/;function t2(e){return this._ordinal.replace("%d",e)}var e2={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function r2(e,r,t,i){var n=this._relativeTime[t];return fi(n)?n(e,r,t,i):n.replace(/%d/i,e)}function i2(e,r){var t=this._relativeTime[e>0?"future":"past"];return fi(t)?t(r):t.replace(/%s/i,r)}var Wl={};function Ee(e,r){var t=e.toLowerCase();Wl[t]=Wl[t+"s"]=Wl[r]=e}function Er(e){return typeof e=="string"?Wl[e]||Wl[e.toLowerCase()]:void 0}function Fv(e){var r={},t,i;for(i in e)yt(e,i)&&(t=Er(i),t&&(r[t]=e[i]));return r}var o1={};function Se(e,r){o1[e]=r}function n2(e){var r=[],t;for(t in e)yt(e,t)&&r.push({unit:t,priority:o1[t]});return r.sort(function(i,n){return i.priority-n.priority}),r}function df(e){return e%4==0&&e%100!=0||e%400==0}function Sr(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ot(e){var r=+e,t=0;return r!==0&&isFinite(r)&&(t=Sr(r)),t}function zo(e,r){return function(t){return t!=null?(s1(this,e,t),F.updateOffset(this,r),this):vf(this,e)}}function vf(e,r){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+r]():NaN}function s1(e,r,t){e.isValid()&&!isNaN(t)&&(r==="FullYear"&&df(e.year())&&e.month()===1&&e.date()===29?(t=ot(t),e._d["set"+(e._isUTC?"UTC":"")+r](t,e.month(),bf(t,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+r](t))}function a2(e){return e=Er(e),fi(this[e])?this[e]():this}function o2(e,r){if(typeof e=="object"){e=Fv(e);var t=n2(e),i;for(i=0;i<t.length;i++)this[t[i].unit](e[t[i].unit])}else if(e=Er(e),fi(this[e]))return this[e](r);return this}var l1=/\d/,er=/\d\d/,u1=/\d{3}/,Nv=/\d{4}/,pf=/[+-]?\d{6}/,Yt=/\d\d?/,h1=/\d\d\d\d?/,f1=/\d\d\d\d\d\d?/,mf=/\d{1,3}/,$v=/\d{1,4}/,gf=/[+-]?\d{1,6}/,Vo=/\d+/,yf=/[+-]?\d+/,s2=/Z|[+-]\d\d:?\d\d/gi,_f=/Z|[+-]\d\d(?::?\d\d)?/gi,l2=/[+-]?\d+(\.\d{1,3})?/,Hl=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,wf;wf={};function Y(e,r,t){wf[e]=fi(r)?r:function(i,n){return i&&t?t:r}}function u2(e,r){return yt(wf,e)?wf[e](r._strict,r._locale):new RegExp(h2(e))}function h2(e){return rr(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(r,t,i,n,a){return t||i||n||a}))}function rr(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Gv={};function xt(e,r){var t,i=r;for(typeof e=="string"&&(e=[e]),Ui(r)&&(i=function(n,a){a[r]=ot(n)}),t=0;t<e.length;t++)Gv[e[t]]=i}function Bl(e,r){xt(e,function(t,i,n,a){n._w=n._w||{},r(t,n._w,n,a)})}function f2(e,r,t){r!=null&&yt(Gv,e)&&Gv[e](r,t._a,t,e)}var xe=0,zi=1,di=2,se=3,Ur=4,Vi=5,Fa=6,c2=7,d2=8;function v2(e,r){return(e%r+r)%r}var Kt;Array.prototype.indexOf?Kt=Array.prototype.indexOf:Kt=function(e){var r;for(r=0;r<this.length;++r)if(this[r]===e)return r;return-1};function bf(e,r){if(isNaN(e)||isNaN(r))return NaN;var t=v2(r,12);return e+=(r-t)/12,t===1?df(e)?29:28:31-t%7%2}B("M",["MM",2],"Mo",function(){return this.month()+1});B("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});B("MMMM",0,0,function(e){return this.localeData().months(this,e)});Ee("month","M");Se("month",8);Y("M",Yt);Y("MM",Yt,er);Y("MMM",function(e,r){return r.monthsShortRegex(e)});Y("MMMM",function(e,r){return r.monthsRegex(e)});xt(["M","MM"],function(e,r){r[zi]=ot(e)-1});xt(["MMM","MMMM"],function(e,r,t,i){var n=t._locale.monthsParse(e,i,t._strict);n!=null?r[zi]=n:it(t).invalidMonth=e});var p2="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),c1="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),d1=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,m2=Hl,g2=Hl;function y2(e,r){return e?Hr(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||d1).test(r)?"format":"standalone"][e.month()]:Hr(this._months)?this._months:this._months.standalone}function _2(e,r){return e?Hr(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[d1.test(r)?"format":"standalone"][e.month()]:Hr(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function w2(e,r,t){var i,n,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=hi([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return t?r==="MMM"?(n=Kt.call(this._shortMonthsParse,o),n!==-1?n:null):(n=Kt.call(this._longMonthsParse,o),n!==-1?n:null):r==="MMM"?(n=Kt.call(this._shortMonthsParse,o),n!==-1?n:(n=Kt.call(this._longMonthsParse,o),n!==-1?n:null)):(n=Kt.call(this._longMonthsParse,o),n!==-1?n:(n=Kt.call(this._shortMonthsParse,o),n!==-1?n:null))}function b2(e,r,t){var i,n,a;if(this._monthsParseExact)return w2.call(this,e,r,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(n=hi([2e3,i]),t&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!t&&!this._monthsParse[i]&&(a="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),t&&r==="MMMM"&&this._longMonthsParse[i].test(e))return i;if(t&&r==="MMM"&&this._shortMonthsParse[i].test(e))return i;if(!t&&this._monthsParse[i].test(e))return i}}function v1(e,r){var t;if(!e.isValid())return e;if(typeof r=="string"){if(/^\d+$/.test(r))r=ot(r);else if(r=e.localeData().monthsParse(r),!Ui(r))return e}return t=Math.min(e.date(),bf(e.year(),r)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](r,t),e}function p1(e){return e!=null?(v1(this,e),F.updateOffset(this,!0),this):vf(this,"Month")}function T2(){return bf(this.year(),this.month())}function E2(e){return this._monthsParseExact?(yt(this,"_monthsRegex")||m1.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(yt(this,"_monthsShortRegex")||(this._monthsShortRegex=m2),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function S2(e){return this._monthsParseExact?(yt(this,"_monthsRegex")||m1.call(this),e?this._monthsStrictRegex:this._monthsRegex):(yt(this,"_monthsRegex")||(this._monthsRegex=g2),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function m1(){function e(o,s){return s.length-o.length}var r=[],t=[],i=[],n,a;for(n=0;n<12;n++)a=hi([2e3,n]),r.push(this.monthsShort(a,"")),t.push(this.months(a,"")),i.push(this.months(a,"")),i.push(this.monthsShort(a,""));for(r.sort(e),t.sort(e),i.sort(e),n=0;n<12;n++)r[n]=rr(r[n]),t[n]=rr(t[n]);for(n=0;n<24;n++)i[n]=rr(i[n]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}B("Y",0,0,function(){var e=this.year();return e<=9999?ci(e,4):"+"+e});B(0,["YY",2],0,function(){return this.year()%100});B(0,["YYYY",4],0,"year");B(0,["YYYYY",5],0,"year");B(0,["YYYYYY",6,!0],0,"year");Ee("year","y");Se("year",1);Y("Y",yf);Y("YY",Yt,er);Y("YYYY",$v,Nv);Y("YYYYY",gf,pf);Y("YYYYYY",gf,pf);xt(["YYYYY","YYYYYY"],xe);xt("YYYY",function(e,r){r[xe]=e.length===2?F.parseTwoDigitYear(e):ot(e)});xt("YY",function(e,r){r[xe]=F.parseTwoDigitYear(e)});xt("Y",function(e,r){r[xe]=parseInt(e,10)});function Ul(e){return df(e)?366:365}F.parseTwoDigitYear=function(e){return ot(e)+(ot(e)>68?1900:2e3)};var g1=zo("FullYear",!0);function x2(){return df(this.year())}function C2(e,r,t,i,n,a,o){var s;return e<100&&e>=0?(s=new Date(e+400,r,t,i,n,a,o),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,r,t,i,n,a,o),s}function zl(e){var r,t;return e<100&&e>=0?(t=Array.prototype.slice.call(arguments),t[0]=e+400,r=new Date(Date.UTC.apply(null,t)),isFinite(r.getUTCFullYear())&&r.setUTCFullYear(e)):r=new Date(Date.UTC.apply(null,arguments)),r}function Tf(e,r,t){var i=7+r-t,n=(7+zl(e,0,i).getUTCDay()-r)%7;return-n+i-1}function y1(e,r,t,i,n){var a=(7+t-i)%7,o=Tf(e,i,n),s=1+7*(r-1)+a+o,l,u;return s<=0?(l=e-1,u=Ul(l)+s):s>Ul(e)?(l=e+1,u=s-Ul(e)):(l=e,u=s),{year:l,dayOfYear:u}}function Vl(e,r,t){var i=Tf(e.year(),r,t),n=Math.floor((e.dayOfYear()-i-1)/7)+1,a,o;return n<1?(o=e.year()-1,a=n+Xi(o,r,t)):n>Xi(e.year(),r,t)?(a=n-Xi(e.year(),r,t),o=e.year()+1):(o=e.year(),a=n),{week:a,year:o}}function Xi(e,r,t){var i=Tf(e,r,t),n=Tf(e+1,r,t);return(Ul(e)-i+n)/7}B("w",["ww",2],"wo","week");B("W",["WW",2],"Wo","isoWeek");Ee("week","w");Ee("isoWeek","W");Se("week",5);Se("isoWeek",5);Y("w",Yt);Y("ww",Yt,er);Y("W",Yt);Y("WW",Yt,er);Bl(["w","ww","W","WW"],function(e,r,t,i){r[i.substr(0,1)]=ot(e)});function O2(e){return Vl(e,this._week.dow,this._week.doy).week}var I2={dow:0,doy:6};function P2(){return this._week.dow}function k2(){return this._week.doy}function D2(e){var r=this.localeData().week(this);return e==null?r:this.add((e-r)*7,"d")}function R2(e){var r=Vl(this,1,4).week;return e==null?r:this.add((e-r)*7,"d")}B("d",0,"do","day");B("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});B("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});B("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});B("e",0,0,"weekday");B("E",0,0,"isoWeekday");Ee("day","d");Ee("weekday","e");Ee("isoWeekday","E");Se("day",11);Se("weekday",11);Se("isoWeekday",11);Y("d",Yt);Y("e",Yt);Y("E",Yt);Y("dd",function(e,r){return r.weekdaysMinRegex(e)});Y("ddd",function(e,r){return r.weekdaysShortRegex(e)});Y("dddd",function(e,r){return r.weekdaysRegex(e)});Bl(["dd","ddd","dddd"],function(e,r,t,i){var n=t._locale.weekdaysParse(e,i,t._strict);n!=null?r.d=n:it(t).invalidWeekday=e});Bl(["d","e","E"],function(e,r,t,i){r[i]=ot(e)});function A2(e,r){return typeof e!="string"?e:isNaN(e)?(e=r.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function M2(e,r){return typeof e=="string"?r.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Yv(e,r){return e.slice(r,7).concat(e.slice(0,r))}var L2="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),_1="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),F2="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),N2=Hl,$2=Hl,G2=Hl;function Y2(e,r){var t=Hr(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(r)?"format":"standalone"];return e===!0?Yv(t,this._week.dow):e?t[e.day()]:t}function j2(e){return e===!0?Yv(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function W2(e){return e===!0?Yv(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function H2(e,r,t){var i,n,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=hi([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return t?r==="dddd"?(n=Kt.call(this._weekdaysParse,o),n!==-1?n:null):r==="ddd"?(n=Kt.call(this._shortWeekdaysParse,o),n!==-1?n:null):(n=Kt.call(this._minWeekdaysParse,o),n!==-1?n:null):r==="dddd"?(n=Kt.call(this._weekdaysParse,o),n!==-1||(n=Kt.call(this._shortWeekdaysParse,o),n!==-1)?n:(n=Kt.call(this._minWeekdaysParse,o),n!==-1?n:null)):r==="ddd"?(n=Kt.call(this._shortWeekdaysParse,o),n!==-1||(n=Kt.call(this._weekdaysParse,o),n!==-1)?n:(n=Kt.call(this._minWeekdaysParse,o),n!==-1?n:null)):(n=Kt.call(this._minWeekdaysParse,o),n!==-1||(n=Kt.call(this._weekdaysParse,o),n!==-1)?n:(n=Kt.call(this._shortWeekdaysParse,o),n!==-1?n:null))}function B2(e,r,t){var i,n,a;if(this._weekdaysParseExact)return H2.call(this,e,r,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(n=hi([2e3,1]).day(i),t&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),t&&r==="dddd"&&this._fullWeekdaysParse[i].test(e))return i;if(t&&r==="ddd"&&this._shortWeekdaysParse[i].test(e))return i;if(t&&r==="dd"&&this._minWeekdaysParse[i].test(e))return i;if(!t&&this._weekdaysParse[i].test(e))return i}}function U2(e){if(!this.isValid())return e!=null?this:NaN;var r=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=A2(e,this.localeData()),this.add(e-r,"d")):r}function z2(e){if(!this.isValid())return e!=null?this:NaN;var r=(this.day()+7-this.localeData()._week.dow)%7;return e==null?r:this.add(e-r,"d")}function V2(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var r=M2(e,this.localeData());return this.day(this.day()%7?r:r-7)}else return this.day()||7}function X2(e){return this._weekdaysParseExact?(yt(this,"_weekdaysRegex")||jv.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(yt(this,"_weekdaysRegex")||(this._weekdaysRegex=N2),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function K2(e){return this._weekdaysParseExact?(yt(this,"_weekdaysRegex")||jv.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(yt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=$2),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Z2(e){return this._weekdaysParseExact?(yt(this,"_weekdaysRegex")||jv.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(yt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=G2),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function jv(){function e(h,f){return f.length-h.length}var r=[],t=[],i=[],n=[],a,o,s,l,u;for(a=0;a<7;a++)o=hi([2e3,1]).day(a),s=rr(this.weekdaysMin(o,"")),l=rr(this.weekdaysShort(o,"")),u=rr(this.weekdays(o,"")),r.push(s),t.push(l),i.push(u),n.push(s),n.push(l),n.push(u);r.sort(e),t.sort(e),i.sort(e),n.sort(e),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Wv(){return this.hours()%12||12}function q2(){return this.hours()||24}B("H",["HH",2],0,"hour");B("h",["hh",2],0,Wv);B("k",["kk",2],0,q2);B("hmm",0,0,function(){return""+Wv.apply(this)+ci(this.minutes(),2)});B("hmmss",0,0,function(){return""+Wv.apply(this)+ci(this.minutes(),2)+ci(this.seconds(),2)});B("Hmm",0,0,function(){return""+this.hours()+ci(this.minutes(),2)});B("Hmmss",0,0,function(){return""+this.hours()+ci(this.minutes(),2)+ci(this.seconds(),2)});function w1(e,r){B(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),r)})}w1("a",!0);w1("A",!1);Ee("hour","h");Se("hour",13);function b1(e,r){return r._meridiemParse}Y("a",b1);Y("A",b1);Y("H",Yt);Y("h",Yt);Y("k",Yt);Y("HH",Yt,er);Y("hh",Yt,er);Y("kk",Yt,er);Y("hmm",h1);Y("hmmss",f1);Y("Hmm",h1);Y("Hmmss",f1);xt(["H","HH"],se);xt(["k","kk"],function(e,r,t){var i=ot(e);r[se]=i===24?0:i});xt(["a","A"],function(e,r,t){t._isPm=t._locale.isPM(e),t._meridiem=e});xt(["h","hh"],function(e,r,t){r[se]=ot(e),it(t).bigHour=!0});xt("hmm",function(e,r,t){var i=e.length-2;r[se]=ot(e.substr(0,i)),r[Ur]=ot(e.substr(i)),it(t).bigHour=!0});xt("hmmss",function(e,r,t){var i=e.length-4,n=e.length-2;r[se]=ot(e.substr(0,i)),r[Ur]=ot(e.substr(i,2)),r[Vi]=ot(e.substr(n)),it(t).bigHour=!0});xt("Hmm",function(e,r,t){var i=e.length-2;r[se]=ot(e.substr(0,i)),r[Ur]=ot(e.substr(i))});xt("Hmmss",function(e,r,t){var i=e.length-4,n=e.length-2;r[se]=ot(e.substr(0,i)),r[Ur]=ot(e.substr(i,2)),r[Vi]=ot(e.substr(n))});function Q2(e){return(e+"").toLowerCase().charAt(0)==="p"}var J2=/[ap]\.?m?\.?/i,tG=zo("Hours",!0);function eG(e,r,t){return e>11?t?"pm":"PM":t?"am":"AM"}var T1={calendar:B$,longDateFormat:X$,invalidDate:Z$,ordinal:Q$,dayOfMonthOrdinalParse:J$,relativeTime:e2,months:p2,monthsShort:c1,week:I2,weekdays:L2,weekdaysMin:F2,weekdaysShort:_1,meridiemParse:J2},Bt={},Xl={},Kl;function rG(e,r){var t,i=Math.min(e.length,r.length);for(t=0;t<i;t+=1)if(e[t]!==r[t])return t;return i}function E1(e){return e&&e.toLowerCase().replace("_","-")}function iG(e){for(var r=0,t,i,n,a;r<e.length;){for(a=E1(e[r]).split("-"),t=a.length,i=E1(e[r+1]),i=i?i.split("-"):null;t>0;){if(n=Ef(a.slice(0,t).join("-")),n)return n;if(i&&i.length>=t&&rG(a,i)>=t-1)break;t--}r++}return Kl}function Ef(e){var r=null,t;if(Bt[e]===void 0&&typeof module!="undefined"&&module&&module.exports)try{r=Kl._abbr,t=require,t("./locale/"+e),kn(r)}catch(i){Bt[e]=null}return Bt[e]}function kn(e,r){var t;return e&&(ze(r)?t=Ki(e):t=Hv(e,r),t?Kl=t:typeof console!="undefined"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Kl._abbr}function Hv(e,r){if(r!==null){var t,i=T1;if(r.abbr=e,Bt[e]!=null)n1("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Bt[e]._config;else if(r.parentLocale!=null)if(Bt[r.parentLocale]!=null)i=Bt[r.parentLocale]._config;else if(t=Ef(r.parentLocale),t!=null)i=t._config;else return Xl[r.parentLocale]||(Xl[r.parentLocale]=[]),Xl[r.parentLocale].push({name:e,config:r}),null;return Bt[e]=new Rv(Dv(i,r)),Xl[e]&&Xl[e].forEach(function(n){Hv(n.name,n.config)}),kn(e),Bt[e]}else return delete Bt[e],null}function nG(e,r){if(r!=null){var t,i,n=T1;Bt[e]!=null&&Bt[e].parentLocale!=null?Bt[e].set(Dv(Bt[e]._config,r)):(i=Ef(e),i!=null&&(n=i._config),r=Dv(n,r),i==null&&(r.abbr=e),t=new Rv(r),t.parentLocale=Bt[e],Bt[e]=t),kn(e)}else Bt[e]!=null&&(Bt[e].parentLocale!=null?(Bt[e]=Bt[e].parentLocale,e===kn()&&kn(e)):Bt[e]!=null&&delete Bt[e]);return Bt[e]}function Ki(e){var r;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Kl;if(!Hr(e)){if(r=Ef(e),r)return r;e=[e]}return iG(e)}function aG(){return Av(Bt)}function Bv(e){var r,t=e._a;return t&&it(e).overflow===-2&&(r=t[zi]<0||t[zi]>11?zi:t[di]<1||t[di]>bf(t[xe],t[zi])?di:t[se]<0||t[se]>24||t[se]===24&&(t[Ur]!==0||t[Vi]!==0||t[Fa]!==0)?se:t[Ur]<0||t[Ur]>59?Ur:t[Vi]<0||t[Vi]>59?Vi:t[Fa]<0||t[Fa]>999?Fa:-1,it(e)._overflowDayOfYear&&(r<xe||r>di)&&(r=di),it(e)._overflowWeeks&&r===-1&&(r=c2),it(e)._overflowWeekday&&r===-1&&(r=d2),it(e).overflow=r),e}var oG=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sG=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,lG=/Z|[+-]\d\d(?::?\d\d)?/,Sf=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Uv=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],uG=/^\/?Date\((-?\d+)/i,hG=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,fG={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function S1(e){var r,t,i=e._i,n=oG.exec(i)||sG.exec(i),a,o,s,l;if(n){for(it(e).iso=!0,r=0,t=Sf.length;r<t;r++)if(Sf[r][1].exec(n[1])){o=Sf[r][0],a=Sf[r][2]!==!1;break}if(o==null){e._isValid=!1;return}if(n[3]){for(r=0,t=Uv.length;r<t;r++)if(Uv[r][1].exec(n[3])){s=(n[2]||" ")+Uv[r][0];break}if(s==null){e._isValid=!1;return}}if(!a&&s!=null){e._isValid=!1;return}if(n[4])if(lG.exec(n[4]))l="Z";else{e._isValid=!1;return}e._f=o+(s||"")+(l||""),Vv(e)}else e._isValid=!1}function cG(e,r,t,i,n,a){var o=[dG(e),c1.indexOf(r),parseInt(t,10),parseInt(i,10),parseInt(n,10)];return a&&o.push(parseInt(a,10)),o}function dG(e){var r=parseInt(e,10);return r<=49?2e3+r:r<=999?1900+r:r}function vG(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function pG(e,r,t){if(e){var i=_1.indexOf(e),n=new Date(r[0],r[1],r[2]).getDay();if(i!==n)return it(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function mG(e,r,t){if(e)return fG[e];if(r)return 0;var i=parseInt(t,10),n=i%100,a=(i-n)/100;return a*60+n}function x1(e){var r=hG.exec(vG(e._i)),t;if(r){if(t=cG(r[4],r[3],r[2],r[5],r[6],r[7]),!pG(r[1],t,e))return;e._a=t,e._tzm=mG(r[8],r[9],r[10]),e._d=zl.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),it(e).rfc2822=!0}else e._isValid=!1}function gG(e){var r=uG.exec(e._i);if(r!==null){e._d=new Date(+r[1]);return}if(S1(e),e._isValid===!1)delete e._isValid;else return;if(x1(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:F.createFromInputFallback(e)}F.createFromInputFallback=Tr("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Xo(e,r,t){return e!=null?e:r!=null?r:t}function yG(e){var r=new Date(F.now());return e._useUTC?[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()]:[r.getFullYear(),r.getMonth(),r.getDate()]}function zv(e){var r,t,i=[],n,a,o;if(!e._d){for(n=yG(e),e._w&&e._a[di]==null&&e._a[zi]==null&&_G(e),e._dayOfYear!=null&&(o=Xo(e._a[xe],n[xe]),(e._dayOfYear>Ul(o)||e._dayOfYear===0)&&(it(e)._overflowDayOfYear=!0),t=zl(o,0,e._dayOfYear),e._a[zi]=t.getUTCMonth(),e._a[di]=t.getUTCDate()),r=0;r<3&&e._a[r]==null;++r)e._a[r]=i[r]=n[r];for(;r<7;r++)e._a[r]=i[r]=e._a[r]==null?r===2?1:0:e._a[r];e._a[se]===24&&e._a[Ur]===0&&e._a[Vi]===0&&e._a[Fa]===0&&(e._nextDay=!0,e._a[se]=0),e._d=(e._useUTC?zl:C2).apply(null,i),a=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[se]=24),e._w&&typeof e._w.d!="undefined"&&e._w.d!==a&&(it(e).weekdayMismatch=!0)}}function _G(e){var r,t,i,n,a,o,s,l,u;r=e._w,r.GG!=null||r.W!=null||r.E!=null?(a=1,o=4,t=Xo(r.GG,e._a[xe],Vl(jt(),1,4).year),i=Xo(r.W,1),n=Xo(r.E,1),(n<1||n>7)&&(l=!0)):(a=e._locale._week.dow,o=e._locale._week.doy,u=Vl(jt(),a,o),t=Xo(r.gg,e._a[xe],u.year),i=Xo(r.w,u.week),r.d!=null?(n=r.d,(n<0||n>6)&&(l=!0)):r.e!=null?(n=r.e+a,(r.e<0||r.e>6)&&(l=!0)):n=a),i<1||i>Xi(t,a,o)?it(e)._overflowWeeks=!0:l!=null?it(e)._overflowWeekday=!0:(s=y1(t,i,n,a,o),e._a[xe]=s.year,e._dayOfYear=s.dayOfYear)}F.ISO_8601=function(){};F.RFC_2822=function(){};function Vv(e){if(e._f===F.ISO_8601){S1(e);return}if(e._f===F.RFC_2822){x1(e);return}e._a=[],it(e).empty=!0;var r=""+e._i,t,i,n,a,o,s=r.length,l=0,u;for(n=a1(e._f,e._locale).match(Mv)||[],t=0;t<n.length;t++)a=n[t],i=(r.match(u2(a,e))||[])[0],i&&(o=r.substr(0,r.indexOf(i)),o.length>0&&it(e).unusedInput.push(o),r=r.slice(r.indexOf(i)+i.length),l+=i.length),Uo[a]?(i?it(e).empty=!1:it(e).unusedTokens.push(a),f2(a,i,e)):e._strict&&!i&&it(e).unusedTokens.push(a);it(e).charsLeftOver=s-l,r.length>0&&it(e).unusedInput.push(r),e._a[se]<=12&&it(e).bigHour===!0&&e._a[se]>0&&(it(e).bigHour=void 0),it(e).parsedDateParts=e._a.slice(0),it(e).meridiem=e._meridiem,e._a[se]=wG(e._locale,e._a[se],e._meridiem),u=it(e).era,u!==null&&(e._a[xe]=e._locale.erasConvertYear(u,e._a[xe])),zv(e),Bv(e)}function wG(e,r,t){var i;return t==null?r:e.meridiemHour!=null?e.meridiemHour(r,t):(e.isPM!=null&&(i=e.isPM(t),i&&r<12&&(r+=12),!i&&r===12&&(r=0)),r)}function bG(e){var r,t,i,n,a,o,s=!1;if(e._f.length===0){it(e).invalidFormat=!0,e._d=new Date(NaN);return}for(n=0;n<e._f.length;n++)a=0,o=!1,r=kv({},e),e._useUTC!=null&&(r._useUTC=e._useUTC),r._f=e._f[n],Vv(r),Ov(r)&&(o=!0),a+=it(r).charsLeftOver,a+=it(r).unusedTokens.length*10,it(r).score=a,s?a<i&&(i=a,t=r):(i==null||a<i||o)&&(i=a,t=r,o&&(s=!0));Pn(e,t||r)}function TG(e){if(!e._d){var r=Fv(e._i),t=r.day===void 0?r.date:r.day;e._a=e1([r.year,r.month,t,r.hour,r.minute,r.second,r.millisecond],function(i){return i&&parseInt(i,10)}),zv(e)}}function EG(e){var r=new jl(Bv(C1(e)));return r._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function C1(e){var r=e._i,t=e._f;return e._locale=e._locale||Ki(e._l),r===null||t===void 0&&r===""?hf({nullInput:!0}):(typeof r=="string"&&(e._i=r=e._locale.preparse(r)),Br(r)?new jl(Bv(r)):(Yl(r)?e._d=r:Hr(t)?bG(e):t?Vv(e):SG(e),Ov(e)||(e._d=null),e))}function SG(e){var r=e._i;ze(r)?e._d=new Date(F.now()):Yl(r)?e._d=new Date(r.valueOf()):typeof r=="string"?gG(e):Hr(r)?(e._a=e1(r.slice(0),function(t){return parseInt(t,10)}),zv(e)):La(r)?TG(e):Ui(r)?e._d=new Date(r):F.createFromInputFallback(e)}function O1(e,r,t,i,n){var a={};return(r===!0||r===!1)&&(i=r,r=void 0),(t===!0||t===!1)&&(i=t,t=void 0),(La(e)&&xv(e)||Hr(e)&&e.length===0)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=n,a._l=t,a._i=e,a._f=r,a._strict=i,EG(a)}function jt(e,r,t,i){return O1(e,r,t,i,!1)}var xG=Tr("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=jt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:hf()}),CG=Tr("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=jt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:hf()});function I1(e,r){var t,i;if(r.length===1&&Hr(r[0])&&(r=r[0]),!r.length)return jt();for(t=r[0],i=1;i<r.length;++i)(!r[i].isValid()||r[i][e](t))&&(t=r[i]);return t}function OG(){var e=[].slice.call(arguments,0);return I1("isBefore",e)}function IG(){var e=[].slice.call(arguments,0);return I1("isAfter",e)}var PG=function(){return Date.now?Date.now():+new Date},Zl=["year","quarter","month","week","day","hour","minute","second","millisecond"];function kG(e){var r,t=!1,i;for(r in e)if(yt(e,r)&&!(Kt.call(Zl,r)!==-1&&(e[r]==null||!isNaN(e[r]))))return!1;for(i=0;i<Zl.length;++i)if(e[Zl[i]]){if(t)return!1;parseFloat(e[Zl[i]])!==ot(e[Zl[i]])&&(t=!0)}return!0}function DG(){return this._isValid}function RG(){return zr(NaN)}function xf(e){var r=Fv(e),t=r.year||0,i=r.quarter||0,n=r.month||0,a=r.week||r.isoWeek||0,o=r.day||0,s=r.hour||0,l=r.minute||0,u=r.second||0,h=r.millisecond||0;this._isValid=kG(r),this._milliseconds=+h+u*1e3+l*6e4+s*1e3*60*60,this._days=+o+a*7,this._months=+n+i*3+t*12,this._data={},this._locale=Ki(),this._bubble()}function Cf(e){return e instanceof xf}function Xv(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function AG(e,r,t){var i=Math.min(e.length,r.length),n=Math.abs(e.length-r.length),a=0,o;for(o=0;o<i;o++)(t&&e[o]!==r[o]||!t&&ot(e[o])!==ot(r[o]))&&a++;return a+n}function P1(e,r){B(e,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+ci(~~(t/60),2)+r+ci(~~t%60,2)})}P1("Z",":");P1("ZZ","");Y("Z",_f);Y("ZZ",_f);xt(["Z","ZZ"],function(e,r,t){t._useUTC=!0,t._tzm=Kv(_f,e)});var MG=/([\+\-]|\d\d)/gi;function Kv(e,r){var t=(r||"").match(e),i,n,a;return t===null?null:(i=t[t.length-1]||[],n=(i+"").match(MG)||["-",0,0],a=+(n[1]*60)+ot(n[2]),a===0?0:n[0]==="+"?a:-a)}function Zv(e,r){var t,i;return r._isUTC?(t=r.clone(),i=(Br(e)||Yl(e)?e.valueOf():jt(e).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+i),F.updateOffset(t,!1),t):jt(e).local()}function qv(e){return-Math.round(e._d.getTimezoneOffset())}F.updateOffset=function(){};function LG(e,r,t){var i=this._offset||0,n;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Kv(_f,e),e===null)return this}else Math.abs(e)<16&&!t&&(e=e*60);return!this._isUTC&&r&&(n=qv(this)),this._offset=e,this._isUTC=!0,n!=null&&this.add(n,"m"),i!==e&&(!r||this._changeInProgress?A1(this,zr(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,F.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:qv(this)}function FG(e,r){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,r),this):-this.utcOffset()}function NG(e){return this.utcOffset(0,e)}function $G(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(qv(this),"m")),this}function GG(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Kv(s2,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function YG(e){return this.isValid()?(e=e?jt(e).utcOffset():0,(this.utcOffset()-e)%60==0):!1}function jG(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function WG(){if(!ze(this._isDSTShifted))return this._isDSTShifted;var e={},r;return kv(e,this),e=C1(e),e._a?(r=e._isUTC?hi(e._a):jt(e._a),this._isDSTShifted=this.isValid()&&AG(e._a,r.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function HG(){return this.isValid()?!this._isUTC:!1}function BG(){return this.isValid()?this._isUTC:!1}function k1(){return this.isValid()?this._isUTC&&this._offset===0:!1}var UG=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,zG=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function zr(e,r){var t=e,i=null,n,a,o;return Cf(e)?t={ms:e._milliseconds,d:e._days,M:e._months}:Ui(e)||!isNaN(+e)?(t={},r?t[r]=+e:t.milliseconds=+e):(i=UG.exec(e))?(n=i[1]==="-"?-1:1,t={y:0,d:ot(i[di])*n,h:ot(i[se])*n,m:ot(i[Ur])*n,s:ot(i[Vi])*n,ms:ot(Xv(i[Fa]*1e3))*n}):(i=zG.exec(e))?(n=i[1]==="-"?-1:1,t={y:Na(i[2],n),M:Na(i[3],n),w:Na(i[4],n),d:Na(i[5],n),h:Na(i[6],n),m:Na(i[7],n),s:Na(i[8],n)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=VG(jt(t.from),jt(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),a=new xf(t),Cf(e)&&yt(e,"_locale")&&(a._locale=e._locale),Cf(e)&&yt(e,"_isValid")&&(a._isValid=e._isValid),a}zr.fn=xf.prototype;zr.invalid=RG;function Na(e,r){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*r}function D1(e,r){var t={};return t.months=r.month()-e.month()+(r.year()-e.year())*12,e.clone().add(t.months,"M").isAfter(r)&&--t.months,t.milliseconds=+r-+e.clone().add(t.months,"M"),t}function VG(e,r){var t;return e.isValid()&&r.isValid()?(r=Zv(r,e),e.isBefore(r)?t=D1(e,r):(t=D1(r,e),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function R1(e,r){return function(t,i){var n,a;return i!==null&&!isNaN(+i)&&(n1(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=t,t=i,i=a),n=zr(t,i),A1(this,n,e),this}}function A1(e,r,t,i){var n=r._milliseconds,a=Xv(r._days),o=Xv(r._months);!e.isValid()||(i=i==null?!0:i,o&&v1(e,vf(e,"Month")+o*t),a&&s1(e,"Date",vf(e,"Date")+a*t),n&&e._d.setTime(e._d.valueOf()+n*t),i&&F.updateOffset(e,a||o))}var XG=R1(1,"add"),KG=R1(-1,"subtract");function M1(e){return typeof e=="string"||e instanceof String}function ZG(e){return Br(e)||Yl(e)||M1(e)||Ui(e)||QG(e)||qG(e)||e===null||e===void 0}function qG(e){var r=La(e)&&!xv(e),t=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,a;for(n=0;n<i.length;n+=1)a=i[n],t=t||yt(e,a);return r&&t}function QG(e){var r=Hr(e),t=!1;return r&&(t=e.filter(function(i){return!Ui(i)&&M1(e)}).length===0),r&&t}function JG(e){var r=La(e)&&!xv(e),t=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,a;for(n=0;n<i.length;n+=1)a=i[n],t=t||yt(e,a);return r&&t}function tY(e,r){var t=e.diff(r,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function eY(e,r){arguments.length===1&&(arguments[0]?ZG(arguments[0])?(e=arguments[0],r=void 0):JG(arguments[0])&&(r=arguments[0],e=void 0):(e=void 0,r=void 0));var t=e||jt(),i=Zv(t,this).startOf("day"),n=F.calendarFormat(this,i)||"sameElse",a=r&&(fi(r[n])?r[n].call(this,t):r[n]);return this.format(a||this.localeData().calendar(n,this,jt(t)))}function rY(){return new jl(this)}function iY(e,r){var t=Br(e)?e:jt(e);return this.isValid()&&t.isValid()?(r=Er(r)||"millisecond",r==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(r).valueOf()):!1}function nY(e,r){var t=Br(e)?e:jt(e);return this.isValid()&&t.isValid()?(r=Er(r)||"millisecond",r==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(r).valueOf()<t.valueOf()):!1}function aY(e,r,t,i){var n=Br(e)?e:jt(e),a=Br(r)?r:jt(r);return this.isValid()&&n.isValid()&&a.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(n,t):!this.isBefore(n,t))&&(i[1]===")"?this.isBefore(a,t):!this.isAfter(a,t))):!1}function oY(e,r){var t=Br(e)?e:jt(e),i;return this.isValid()&&t.isValid()?(r=Er(r)||"millisecond",r==="millisecond"?this.valueOf()===t.valueOf():(i=t.valueOf(),this.clone().startOf(r).valueOf()<=i&&i<=this.clone().endOf(r).valueOf())):!1}function sY(e,r){return this.isSame(e,r)||this.isAfter(e,r)}function lY(e,r){return this.isSame(e,r)||this.isBefore(e,r)}function uY(e,r,t){var i,n,a;if(!this.isValid())return NaN;if(i=Zv(e,this),!i.isValid())return NaN;switch(n=(i.utcOffset()-this.utcOffset())*6e4,r=Er(r),r){case"year":a=Of(this,i)/12;break;case"month":a=Of(this,i);break;case"quarter":a=Of(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-n)/864e5;break;case"week":a=(this-i-n)/6048e5;break;default:a=this-i}return t?a:Sr(a)}function Of(e,r){if(e.date()<r.date())return-Of(r,e);var t=(r.year()-e.year())*12+(r.month()-e.month()),i=e.clone().add(t,"months"),n,a;return r-i<0?(n=e.clone().add(t-1,"months"),a=(r-i)/(i-n)):(n=e.clone().add(t+1,"months"),a=(r-i)/(n-i)),-(t+a)||0}F.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";F.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function hY(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fY(e){if(!this.isValid())return null;var r=e!==!0,t=r?this.clone().utc():this;return t.year()<0||t.year()>9999?cf(t,r?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):fi(Date.prototype.toISOString)?r?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",cf(t,"Z")):cf(t,r?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function cY(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",r="",t,i,n,a;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",r="Z"),t="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",a=r+'[")]',this.format(t+i+n+a)}function dY(e){e||(e=this.isUtc()?F.defaultFormatUtc:F.defaultFormat);var r=cf(this,e);return this.localeData().postformat(r)}function vY(e,r){return this.isValid()&&(Br(e)&&e.isValid()||jt(e).isValid())?zr({to:this,from:e}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function pY(e){return this.from(jt(),e)}function mY(e,r){return this.isValid()&&(Br(e)&&e.isValid()||jt(e).isValid())?zr({from:this,to:e}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function gY(e){return this.to(jt(),e)}function L1(e){var r;return e===void 0?this._locale._abbr:(r=Ki(e),r!=null&&(this._locale=r),this)}var F1=Tr("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function N1(){return this._locale}var If=1e3,Ko=60*If,Pf=60*Ko,$1=(365*400+97)*24*Pf;function Zo(e,r){return(e%r+r)%r}function G1(e,r,t){return e<100&&e>=0?new Date(e+400,r,t)-$1:new Date(e,r,t).valueOf()}function Y1(e,r,t){return e<100&&e>=0?Date.UTC(e+400,r,t)-$1:Date.UTC(e,r,t)}function yY(e){var r,t;if(e=Er(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?Y1:G1,e){case"year":r=t(this.year(),0,1);break;case"quarter":r=t(this.year(),this.month()-this.month()%3,1);break;case"month":r=t(this.year(),this.month(),1);break;case"week":r=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":r=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":r=t(this.year(),this.month(),this.date());break;case"hour":r=this._d.valueOf(),r-=Zo(r+(this._isUTC?0:this.utcOffset()*Ko),Pf);break;case"minute":r=this._d.valueOf(),r-=Zo(r,Ko);break;case"second":r=this._d.valueOf(),r-=Zo(r,If);break}return this._d.setTime(r),F.updateOffset(this,!0),this}function _Y(e){var r,t;if(e=Er(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?Y1:G1,e){case"year":r=t(this.year()+1,0,1)-1;break;case"quarter":r=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":r=t(this.year(),this.month()+1,1)-1;break;case"week":r=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":r=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":r=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":r=this._d.valueOf(),r+=Pf-Zo(r+(this._isUTC?0:this.utcOffset()*Ko),Pf)-1;break;case"minute":r=this._d.valueOf(),r+=Ko-Zo(r,Ko)-1;break;case"second":r=this._d.valueOf(),r+=If-Zo(r,If)-1;break}return this._d.setTime(r),F.updateOffset(this,!0),this}function wY(){return this._d.valueOf()-(this._offset||0)*6e4}function bY(){return Math.floor(this.valueOf()/1e3)}function TY(){return new Date(this.valueOf())}function EY(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function SY(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function xY(){return this.isValid()?this.toISOString():null}function CY(){return Ov(this)}function OY(){return Pn({},it(this))}function IY(){return it(this).overflow}function PY(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}B("N",0,0,"eraAbbr");B("NN",0,0,"eraAbbr");B("NNN",0,0,"eraAbbr");B("NNNN",0,0,"eraName");B("NNNNN",0,0,"eraNarrow");B("y",["y",1],"yo","eraYear");B("y",["yy",2],0,"eraYear");B("y",["yyy",3],0,"eraYear");B("y",["yyyy",4],0,"eraYear");Y("N",Qv);Y("NN",Qv);Y("NNN",Qv);Y("NNNN",YY);Y("NNNNN",jY);xt(["N","NN","NNN","NNNN","NNNNN"],function(e,r,t,i){var n=t._locale.erasParse(e,i,t._strict);n?it(t).era=n:it(t).invalidEra=e});Y("y",Vo);Y("yy",Vo);Y("yyy",Vo);Y("yyyy",Vo);Y("yo",WY);xt(["y","yy","yyy","yyyy"],xe);xt(["yo"],function(e,r,t,i){var n;t._locale._eraYearOrdinalRegex&&(n=e.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?r[xe]=t._locale.eraYearOrdinalParse(e,n):r[xe]=parseInt(e,10)});function kY(e,r){var t,i,n,a=this._eras||Ki("en")._eras;for(t=0,i=a.length;t<i;++t){switch(typeof a[t].since){case"string":n=F(a[t].since).startOf("day"),a[t].since=n.valueOf();break}switch(typeof a[t].until){case"undefined":a[t].until=1/0;break;case"string":n=F(a[t].until).startOf("day").valueOf(),a[t].until=n.valueOf();break}}return a}function DY(e,r,t){var i,n,a=this.eras(),o,s,l;for(e=e.toUpperCase(),i=0,n=a.length;i<n;++i)if(o=a[i].name.toUpperCase(),s=a[i].abbr.toUpperCase(),l=a[i].narrow.toUpperCase(),t)switch(r){case"N":case"NN":case"NNN":if(s===e)return a[i];break;case"NNNN":if(o===e)return a[i];break;case"NNNNN":if(l===e)return a[i];break}else if([o,s,l].indexOf(e)>=0)return a[i]}function RY(e,r){var t=e.since<=e.until?1:-1;return r===void 0?F(e.since).year():F(e.since).year()+(r-e.offset)*t}function AY(){var e,r,t,i=this.localeData().eras();for(e=0,r=i.length;e<r;++e)if(t=this.clone().startOf("day").valueOf(),i[e].since<=t&&t<=i[e].until||i[e].until<=t&&t<=i[e].since)return i[e].name;return""}function MY(){var e,r,t,i=this.localeData().eras();for(e=0,r=i.length;e<r;++e)if(t=this.clone().startOf("day").valueOf(),i[e].since<=t&&t<=i[e].until||i[e].until<=t&&t<=i[e].since)return i[e].narrow;return""}function LY(){var e,r,t,i=this.localeData().eras();for(e=0,r=i.length;e<r;++e)if(t=this.clone().startOf("day").valueOf(),i[e].since<=t&&t<=i[e].until||i[e].until<=t&&t<=i[e].since)return i[e].abbr;return""}function FY(){var e,r,t,i,n=this.localeData().eras();for(e=0,r=n.length;e<r;++e)if(t=n[e].since<=n[e].until?1:-1,i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until||n[e].until<=i&&i<=n[e].since)return(this.year()-F(n[e].since).year())*t+n[e].offset;return this.year()}function NY(e){return yt(this,"_erasNameRegex")||Jv.call(this),e?this._erasNameRegex:this._erasRegex}function $Y(e){return yt(this,"_erasAbbrRegex")||Jv.call(this),e?this._erasAbbrRegex:this._erasRegex}function GY(e){return yt(this,"_erasNarrowRegex")||Jv.call(this),e?this._erasNarrowRegex:this._erasRegex}function Qv(e,r){return r.erasAbbrRegex(e)}function YY(e,r){return r.erasNameRegex(e)}function jY(e,r){return r.erasNarrowRegex(e)}function WY(e,r){return r._eraYearOrdinalRegex||Vo}function Jv(){var e=[],r=[],t=[],i=[],n,a,o=this.eras();for(n=0,a=o.length;n<a;++n)r.push(rr(o[n].name)),e.push(rr(o[n].abbr)),t.push(rr(o[n].narrow)),i.push(rr(o[n].name)),i.push(rr(o[n].abbr)),i.push(rr(o[n].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}B(0,["gg",2],0,function(){return this.weekYear()%100});B(0,["GG",2],0,function(){return this.isoWeekYear()%100});function kf(e,r){B(0,[e,e.length],0,r)}kf("gggg","weekYear");kf("ggggg","weekYear");kf("GGGG","isoWeekYear");kf("GGGGG","isoWeekYear");Ee("weekYear","gg");Ee("isoWeekYear","GG");Se("weekYear",1);Se("isoWeekYear",1);Y("G",yf);Y("g",yf);Y("GG",Yt,er);Y("gg",Yt,er);Y("GGGG",$v,Nv);Y("gggg",$v,Nv);Y("GGGGG",gf,pf);Y("ggggg",gf,pf);Bl(["gggg","ggggg","GGGG","GGGGG"],function(e,r,t,i){r[i.substr(0,2)]=ot(e)});Bl(["gg","GG"],function(e,r,t,i){r[i]=F.parseTwoDigitYear(e)});function HY(e){return j1.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function BY(e){return j1.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function UY(){return Xi(this.year(),1,4)}function zY(){return Xi(this.isoWeekYear(),1,4)}function VY(){var e=this.localeData()._week;return Xi(this.year(),e.dow,e.doy)}function XY(){var e=this.localeData()._week;return Xi(this.weekYear(),e.dow,e.doy)}function j1(e,r,t,i,n){var a;return e==null?Vl(this,i,n).year:(a=Xi(e,i,n),r>a&&(r=a),KY.call(this,e,r,t,i,n))}function KY(e,r,t,i,n){var a=y1(e,r,t,i,n),o=zl(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}B("Q",0,"Qo","quarter");Ee("quarter","Q");Se("quarter",7);Y("Q",l1);xt("Q",function(e,r){r[zi]=(ot(e)-1)*3});function ZY(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}B("D",["DD",2],"Do","date");Ee("date","D");Se("date",9);Y("D",Yt);Y("DD",Yt,er);Y("Do",function(e,r){return e?r._dayOfMonthOrdinalParse||r._ordinalParse:r._dayOfMonthOrdinalParseLenient});xt(["D","DD"],di);xt("Do",function(e,r){r[di]=ot(e.match(Yt)[0])});var W1=zo("Date",!0);B("DDD",["DDDD",3],"DDDo","dayOfYear");Ee("dayOfYear","DDD");Se("dayOfYear",4);Y("DDD",mf);Y("DDDD",u1);xt(["DDD","DDDD"],function(e,r,t){t._dayOfYear=ot(e)});function qY(e){var r=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?r:this.add(e-r,"d")}B("m",["mm",2],0,"minute");Ee("minute","m");Se("minute",14);Y("m",Yt);Y("mm",Yt,er);xt(["m","mm"],Ur);var QY=zo("Minutes",!1);B("s",["ss",2],0,"second");Ee("second","s");Se("second",15);Y("s",Yt);Y("ss",Yt,er);xt(["s","ss"],Vi);var JY=zo("Seconds",!1);B("S",0,0,function(){return~~(this.millisecond()/100)});B(0,["SS",2],0,function(){return~~(this.millisecond()/10)});B(0,["SSS",3],0,"millisecond");B(0,["SSSS",4],0,function(){return this.millisecond()*10});B(0,["SSSSS",5],0,function(){return this.millisecond()*100});B(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});B(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});B(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});B(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Ee("millisecond","ms");Se("millisecond",16);Y("S",mf,l1);Y("SS",mf,er);Y("SSS",mf,u1);var Dn,H1;for(Dn="SSSS";Dn.length<=9;Dn+="S")Y(Dn,Vo);function tj(e,r){r[Fa]=ot(("0."+e)*1e3)}for(Dn="S";Dn.length<=9;Dn+="S")xt(Dn,tj);H1=zo("Milliseconds",!1);B("z",0,0,"zoneAbbr");B("zz",0,0,"zoneName");function ej(){return this._isUTC?"UTC":""}function rj(){return this._isUTC?"Coordinated Universal Time":""}var L=jl.prototype;L.add=XG;L.calendar=eY;L.clone=rY;L.diff=uY;L.endOf=_Y;L.format=dY;L.from=vY;L.fromNow=pY;L.to=mY;L.toNow=gY;L.get=a2;L.invalidAt=IY;L.isAfter=iY;L.isBefore=nY;L.isBetween=aY;L.isSame=oY;L.isSameOrAfter=sY;L.isSameOrBefore=lY;L.isValid=CY;L.lang=F1;L.locale=L1;L.localeData=N1;L.max=CG;L.min=xG;L.parsingFlags=OY;L.set=o2;L.startOf=yY;L.subtract=KG;L.toArray=EY;L.toObject=SY;L.toDate=TY;L.toISOString=fY;L.inspect=cY;typeof Symbol!="undefined"&&Symbol.for!=null&&(L[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});L.toJSON=xY;L.toString=hY;L.unix=bY;L.valueOf=wY;L.creationData=PY;L.eraName=AY;L.eraNarrow=MY;L.eraAbbr=LY;L.eraYear=FY;L.year=g1;L.isLeapYear=x2;L.weekYear=HY;L.isoWeekYear=BY;L.quarter=L.quarters=ZY;L.month=p1;L.daysInMonth=T2;L.week=L.weeks=D2;L.isoWeek=L.isoWeeks=R2;L.weeksInYear=VY;L.weeksInWeekYear=XY;L.isoWeeksInYear=UY;L.isoWeeksInISOWeekYear=zY;L.date=W1;L.day=L.days=U2;L.weekday=z2;L.isoWeekday=V2;L.dayOfYear=qY;L.hour=L.hours=tG;L.minute=L.minutes=QY;L.second=L.seconds=JY;L.millisecond=L.milliseconds=H1;L.utcOffset=LG;L.utc=NG;L.local=$G;L.parseZone=GG;L.hasAlignedHourOffset=YG;L.isDST=jG;L.isLocal=HG;L.isUtcOffset=BG;L.isUtc=k1;L.isUTC=k1;L.zoneAbbr=ej;L.zoneName=rj;L.dates=Tr("dates accessor is deprecated. Use date instead.",W1);L.months=Tr("months accessor is deprecated. Use month instead",p1);L.years=Tr("years accessor is deprecated. Use year instead",g1);L.zone=Tr("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",FG);L.isDSTShifted=Tr("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",WG);function ij(e){return jt(e*1e3)}function nj(){return jt.apply(null,arguments).parseZone()}function B1(e){return e}var _t=Rv.prototype;_t.calendar=U$;_t.longDateFormat=K$;_t.invalidDate=q$;_t.ordinal=t2;_t.preparse=B1;_t.postformat=B1;_t.relativeTime=r2;_t.pastFuture=i2;_t.set=H$;_t.eras=kY;_t.erasParse=DY;_t.erasConvertYear=RY;_t.erasAbbrRegex=$Y;_t.erasNameRegex=NY;_t.erasNarrowRegex=GY;_t.months=y2;_t.monthsShort=_2;_t.monthsParse=b2;_t.monthsRegex=S2;_t.monthsShortRegex=E2;_t.week=O2;_t.firstDayOfYear=k2;_t.firstDayOfWeek=P2;_t.weekdays=Y2;_t.weekdaysMin=W2;_t.weekdaysShort=j2;_t.weekdaysParse=B2;_t.weekdaysRegex=X2;_t.weekdaysShortRegex=K2;_t.weekdaysMinRegex=Z2;_t.isPM=Q2;_t.meridiem=eG;function Df(e,r,t,i){var n=Ki(),a=hi().set(i,r);return n[t](a,e)}function U1(e,r,t){if(Ui(e)&&(r=e,e=void 0),e=e||"",r!=null)return Df(e,r,t,"month");var i,n=[];for(i=0;i<12;i++)n[i]=Df(e,i,t,"month");return n}function tp(e,r,t,i){typeof e=="boolean"?(Ui(r)&&(t=r,r=void 0),r=r||""):(r=e,t=r,e=!1,Ui(r)&&(t=r,r=void 0),r=r||"");var n=Ki(),a=e?n._week.dow:0,o,s=[];if(t!=null)return Df(r,(t+a)%7,i,"day");for(o=0;o<7;o++)s[o]=Df(r,(o+a)%7,i,"day");return s}function aj(e,r){return U1(e,r,"months")}function oj(e,r){return U1(e,r,"monthsShort")}function sj(e,r,t){return tp(e,r,t,"weekdays")}function lj(e,r,t){return tp(e,r,t,"weekdaysShort")}function uj(e,r,t){return tp(e,r,t,"weekdaysMin")}kn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var r=e%10,t=ot(e%100/10)===1?"th":r===1?"st":r===2?"nd":r===3?"rd":"th";return e+t}});F.lang=Tr("moment.lang is deprecated. Use moment.locale instead.",kn);F.langData=Tr("moment.langData is deprecated. Use moment.localeData instead.",Ki);var Zi=Math.abs;function hj(){var e=this._data;return this._milliseconds=Zi(this._milliseconds),this._days=Zi(this._days),this._months=Zi(this._months),e.milliseconds=Zi(e.milliseconds),e.seconds=Zi(e.seconds),e.minutes=Zi(e.minutes),e.hours=Zi(e.hours),e.months=Zi(e.months),e.years=Zi(e.years),this}function z1(e,r,t,i){var n=zr(r,t);return e._milliseconds+=i*n._milliseconds,e._days+=i*n._days,e._months+=i*n._months,e._bubble()}function fj(e,r){return z1(this,e,r,1)}function cj(e,r){return z1(this,e,r,-1)}function V1(e){return e<0?Math.floor(e):Math.ceil(e)}function dj(){var e=this._milliseconds,r=this._days,t=this._months,i=this._data,n,a,o,s,l;return e>=0&&r>=0&&t>=0||e<=0&&r<=0&&t<=0||(e+=V1(ep(t)+r)*864e5,r=0,t=0),i.milliseconds=e%1e3,n=Sr(e/1e3),i.seconds=n%60,a=Sr(n/60),i.minutes=a%60,o=Sr(a/60),i.hours=o%24,r+=Sr(o/24),l=Sr(X1(r)),t+=l,r-=V1(ep(l)),s=Sr(t/12),t%=12,i.days=r,i.months=t,i.years=s,this}function X1(e){return e*4800/146097}function ep(e){return e*146097/4800}function vj(e){if(!this.isValid())return NaN;var r,t,i=this._milliseconds;if(e=Er(e),e==="month"||e==="quarter"||e==="year")switch(r=this._days+i/864e5,t=this._months+X1(r),e){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(r=this._days+Math.round(ep(this._months)),e){case"week":return r/7+i/6048e5;case"day":return r+i/864e5;case"hour":return r*24+i/36e5;case"minute":return r*1440+i/6e4;case"second":return r*86400+i/1e3;case"millisecond":return Math.floor(r*864e5)+i;default:throw new Error("Unknown unit "+e)}}function pj(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+ot(this._months/12)*31536e6:NaN}function qi(e){return function(){return this.as(e)}}var mj=qi("ms"),gj=qi("s"),yj=qi("m"),_j=qi("h"),wj=qi("d"),bj=qi("w"),Tj=qi("M"),Ej=qi("Q"),Sj=qi("y");function xj(){return zr(this)}function Cj(e){return e=Er(e),this.isValid()?this[e+"s"]():NaN}function $a(e){return function(){return this.isValid()?this._data[e]:NaN}}var Oj=$a("milliseconds"),Ij=$a("seconds"),Pj=$a("minutes"),kj=$a("hours"),Dj=$a("days"),Rj=$a("months"),Aj=$a("years");function Mj(){return Sr(this.days()/7)}var Qi=Math.round,qo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Lj(e,r,t,i,n){return n.relativeTime(r||1,!!t,e,i)}function Fj(e,r,t,i){var n=zr(e).abs(),a=Qi(n.as("s")),o=Qi(n.as("m")),s=Qi(n.as("h")),l=Qi(n.as("d")),u=Qi(n.as("M")),h=Qi(n.as("w")),f=Qi(n.as("y")),c=a<=t.ss&&["s",a]||a<t.s&&["ss",a]||o<=1&&["m"]||o<t.m&&["mm",o]||s<=1&&["h"]||s<t.h&&["hh",s]||l<=1&&["d"]||l<t.d&&["dd",l];return t.w!=null&&(c=c||h<=1&&["w"]||h<t.w&&["ww",h]),c=c||u<=1&&["M"]||u<t.M&&["MM",u]||f<=1&&["y"]||["yy",f],c[2]=r,c[3]=+e>0,c[4]=i,Lj.apply(null,c)}function Nj(e){return e===void 0?Qi:typeof e=="function"?(Qi=e,!0):!1}function $j(e,r){return qo[e]===void 0?!1:r===void 0?qo[e]:(qo[e]=r,e==="s"&&(qo.ss=r-1),!0)}function Gj(e,r){if(!this.isValid())return this.localeData().invalidDate();var t=!1,i=qo,n,a;return typeof e=="object"&&(r=e,e=!1),typeof e=="boolean"&&(t=e),typeof r=="object"&&(i=Object.assign({},qo,r),r.s!=null&&r.ss==null&&(i.ss=r.s-1)),n=this.localeData(),a=Fj(this,!t,i,n),t&&(a=n.pastFuture(+this,a)),n.postformat(a)}var rp=Math.abs;function Qo(e){return(e>0)-(e<0)||+e}function Rf(){if(!this.isValid())return this.localeData().invalidDate();var e=rp(this._milliseconds)/1e3,r=rp(this._days),t=rp(this._months),i,n,a,o,s=this.asSeconds(),l,u,h,f;return s?(i=Sr(e/60),n=Sr(i/60),e%=60,i%=60,a=Sr(t/12),t%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",l=s<0?"-":"",u=Qo(this._months)!==Qo(s)?"-":"",h=Qo(this._days)!==Qo(s)?"-":"",f=Qo(this._milliseconds)!==Qo(s)?"-":"",l+"P"+(a?u+a+"Y":"")+(t?u+t+"M":"")+(r?h+r+"D":"")+(n||i||e?"T":"")+(n?f+n+"H":"")+(i?f+i+"M":"")+(e?f+o+"S":"")):"P0D"}var pt=xf.prototype;pt.isValid=DG;pt.abs=hj;pt.add=fj;pt.subtract=cj;pt.as=vj;pt.asMilliseconds=mj;pt.asSeconds=gj;pt.asMinutes=yj;pt.asHours=_j;pt.asDays=wj;pt.asWeeks=bj;pt.asMonths=Tj;pt.asQuarters=Ej;pt.asYears=Sj;pt.valueOf=pj;pt._bubble=dj;pt.clone=xj;pt.get=Cj;pt.milliseconds=Oj;pt.seconds=Ij;pt.minutes=Pj;pt.hours=kj;pt.days=Dj;pt.weeks=Mj;pt.months=Rj;pt.years=Aj;pt.humanize=Gj;pt.toISOString=Rf;pt.toString=Rf;pt.toJSON=Rf;pt.locale=L1;pt.localeData=N1;pt.toIsoString=Tr("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Rf);pt.lang=F1;B("X",0,0,"unix");B("x",0,0,"valueOf");Y("x",yf);Y("X",l2);xt("X",function(e,r,t){t._d=new Date(parseFloat(e)*1e3)});xt("x",function(e,r,t){t._d=new Date(ot(e))});//! moment.js
F.version="2.29.1";j$(jt);F.fn=L;F.min=OG;F.max=IG;F.now=PG;F.utc=hi;F.unix=ij;F.months=aj;F.isDate=Yl;F.locale=kn;F.invalid=hf;F.duration=zr;F.isMoment=Br;F.weekdays=sj;F.parseZone=nj;F.localeData=Ki;F.isDuration=Cf;F.monthsShort=oj;F.weekdaysMin=uj;F.defineLocale=Hv;F.updateLocale=nG;F.locales=aG;F.weekdaysShort=lj;F.normalizeUnits=Er;F.relativeTimeRounding=Nj;F.relativeTimeThreshold=$j;F.calendarFormat=tY;F.prototype=L;F.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};/**
 * vis-timeline and vis-graph2d
 * https://visjs.github.io/vis-timeline/
 *
 * Create a fully customizable, interactive timeline with items and ranges.
 *
 * @version 7.4.9
 * @date    2021-06-05T17:20:46.148Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var K1=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Rn(e){var r={exports:{}};return e(r,r.exports),r.exports}var Af=function(e){return e&&e.Math==Math&&e},Wt=Af(typeof globalThis=="object"&&globalThis)||Af(typeof window=="object"&&window)||Af(typeof self=="object"&&self)||Af(typeof K1=="object"&&K1)||function(){return this}()||Function("return this")(),Lt=function(e){try{return!!e()}catch(r){return!0}},Et=!Lt(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Z1={}.propertyIsEnumerable,q1=Object.getOwnPropertyDescriptor,Yj=q1&&!Z1.call({1:2},1),jj=Yj?function(r){var t=q1(this,r);return!!t&&t.enumerable}:Z1,ql={f:jj},Ga=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},Wj={}.toString,An=function(e){return Wj.call(e).slice(8,-1)},Hj="".split,Mf=Lt(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return An(e)=="String"?Hj.call(e,""):Object(e)}:Object,Jo=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e},ir=function(e){return Mf(Jo(e))},le=function(e){return typeof e=="object"?e!==null:typeof e=="function"},ts=function(e,r){if(!le(e))return e;var t,i;if(r&&typeof(t=e.toString)=="function"&&!le(i=t.call(e))||typeof(t=e.valueOf)=="function"&&!le(i=t.call(e))||!r&&typeof(t=e.toString)=="function"&&!le(i=t.call(e)))return i;throw TypeError("Can't convert object to primitive value")},nr=function(e){return Object(Jo(e))},Bj={}.hasOwnProperty,st=Object.hasOwn||function(r,t){return Bj.call(nr(r),t)},ip=Wt.document,Uj=le(ip)&&le(ip.createElement),Q1=function(e){return Uj?ip.createElement(e):{}},J1=!Et&&!Lt(function(){return Object.defineProperty(Q1("div"),"a",{get:function(){return 7}}).a!=7}),tb=Object.getOwnPropertyDescriptor,zj=Et?tb:function(r,t){if(r=ir(r),t=ts(t,!0),J1)try{return tb(r,t)}catch(i){}if(st(r,t))return Ga(!ql.f.call(r,t),r[t])},Ql={f:zj},Vj=/#|\.prototype\./,Jl=function(e,r){var t=Kj[Xj(e)];return t==qj?!0:t==Zj?!1:typeof r=="function"?Lt(r):!!r},Xj=Jl.normalize=function(e){return String(e).replace(Vj,".").toLowerCase()},Kj=Jl.data={},Zj=Jl.NATIVE="N",qj=Jl.POLYFILL="P",Qj=Jl,lt={},es=function(e){if(typeof e!="function")throw TypeError(String(e)+" is not a function");return e},rs=function(e,r,t){if(es(e),r===void 0)return e;switch(t){case 0:return function(){return e.call(r)};case 1:return function(i){return e.call(r,i)};case 2:return function(i,n){return e.call(r,i,n)};case 3:return function(i,n,a){return e.call(r,i,n,a)}}return function(){return e.apply(r,arguments)}},ar=function(e){if(!le(e))throw TypeError(String(e)+" is not an object");return e},eb=Object.defineProperty,Jj=Et?eb:function(r,t,i){if(ar(r),t=ts(t,!0),ar(i),J1)try{return eb(r,t,i)}catch(n){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(r[t]=i.value),r},xr={f:Jj},Cr=Et?function(e,r,t){return xr.f(e,r,Ga(1,t))}:function(e,r,t){return e[r]=t,e},tW=Ql.f,eW=function(e){var r=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return r.prototype=e.prototype,r},Z=function(e,r){var t=e.target,i=e.global,n=e.stat,a=e.proto,o=i?Wt:n?Wt[t]:(Wt[t]||{}).prototype,s=i?lt:lt[t]||(lt[t]={}),l=s.prototype,u,h,f,c,d,v,m,p,g;for(c in r)u=Qj(i?c:t+(n?".":"#")+c,e.forced),h=!u&&o&&st(o,c),v=s[c],h&&(e.noTargetGet?(g=tW(o,c),m=g&&g.value):m=o[c]),d=h&&m?m:r[c],!(h&&typeof v==typeof d)&&(e.bind&&h?p=rs(d,Wt):e.wrap&&h?p=eW(d):a&&typeof d=="function"?p=rs(Function.call,d):p=d,(e.sham||d&&d.sham||v&&v.sham)&&Cr(p,"sham",!0),s[c]=p,a&&(f=t+"Prototype",st(lt,f)||Cr(lt,f,{}),lt[f][c]=d,e.real&&l&&!l[c]&&Cr(l,c,d)))},rb=function(e){return typeof e=="function"?e:void 0},Ya=function(e,r){return arguments.length<2?rb(lt[e])||rb(Wt[e]):lt[e]&&lt[e][r]||Wt[e]&&Wt[e][r]},rW=Math.ceil,iW=Math.floor,tu=function(e){return isNaN(e=+e)?0:(e>0?iW:rW)(e)},nW=Math.min,vi=function(e){return e>0?nW(tu(e),9007199254740991):0},aW=Math.max,oW=Math.min,is=function(e,r){var t=tu(e);return t<0?aW(t+r,0):oW(t,r)},ib=function(e){return function(r,t,i){var n=ir(r),a=vi(n.length),o=is(i,a),s;if(e&&t!=t){for(;a>o;)if(s=n[o++],s!=s)return!0}else for(;a>o;o++)if((e||o in n)&&n[o]===t)return e||o||0;return!e&&-1}},np={includes:ib(!0),indexOf:ib(!1)},ns={},sW=np.indexOf,nb=function(e,r){var t=ir(e),i=0,n=[],a;for(a in t)!st(ns,a)&&st(t,a)&&n.push(a);for(;r.length>i;)st(t,a=r[i++])&&(~sW(n,a)||n.push(a));return n},Lf=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ji=Object.keys||function(r){return nb(r,Lf)},ab=Et?Object.defineProperties:function(r,t){ar(r);for(var i=Ji(t),n=i.length,a=0,o;n>a;)xr.f(r,o=i[a++],t[o]);return r},lW=Ya("document","documentElement"),uW=function(e,r){try{Cr(Wt,e,r)}catch(t){Wt[e]=r}return r},ob="__core-js_shared__",hW=Wt[ob]||uW(ob,{}),Mn=hW,ja=Rn(function(e){(e.exports=function(r,t){return Mn[r]||(Mn[r]=t!==void 0?t:{})})("versions",[]).push({version:"3.14.0",mode:"pure",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})}),fW=0,cW=Math.random(),eu=function(e){return"Symbol("+String(e===void 0?"":e)+")_"+(++fW+cW).toString(36)},sb=ja("keys"),Ff=function(e){return sb[e]||(sb[e]=eu(e))},lb=">",ub="<",ap="prototype",op="script",hb=Ff("IE_PROTO"),sp=function(){},fb=function(e){return ub+op+lb+e+ub+"/"+op+lb},dW=function(e){e.write(fb("")),e.close();var r=e.parentWindow.Object;return e=null,r},vW=function(){var e=Q1("iframe"),r="java"+op+":",t;return e.style.display="none",lW.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(fb("document.F=Object")),t.close(),t.F},lp,Nf=function(){try{lp=document.domain&&new ActiveXObject("htmlfile")}catch(r){}Nf=lp?dW(lp):vW();for(var e=Lf.length;e--;)delete Nf[ap][Lf[e]];return Nf()};ns[hb]=!0;var tn=Object.create||function(r,t){var i;return r!==null?(sp[ap]=ar(r),i=new sp,sp[ap]=null,i[hb]=r):i=Nf(),t===void 0?i:ab(i,t)},cb=[].slice,up={},pW=function(e,r,t){if(!(r in up)){for(var i=[],n=0;n<r;n++)i[n]="a["+n+"]";up[r]=Function("C,a","return new C("+i.join(",")+")")}return up[r](e,t)},db=Function.bind||function(r){var t=es(this),i=cb.call(arguments,1),n=function(){var o=i.concat(cb.call(arguments));return this instanceof n?pW(t,o.length,o):t.apply(r,o)};return le(t.prototype)&&(n.prototype=t.prototype),n},hp=Ya("Reflect","construct"),vb=Lt(function(){function e(){}return!(hp(function(){},[],e)instanceof e)}),pb=!Lt(function(){hp(function(){})}),mb=vb||pb;Z({target:"Reflect",stat:!0,forced:mb,sham:mb},{construct:function(r,t){es(r),ar(t);var i=arguments.length<3?r:es(arguments[2]);if(pb&&!vb)return hp(r,t,i);if(r==i){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(db.apply(r,n))}var a=i.prototype,o=tn(le(a)?a:Object.prototype),s=Function.apply.call(r,o,t);return le(s)?s:o}});var mW=lt.Reflect.construct,gW=mW,z=gW;function Ct(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Z({target:"Object",stat:!0,forced:!Et,sham:!Et},{defineProperty:xr.f});var gb=Rn(function(e){var r=lt.Object,t=e.exports=function(n,a,o){return r.defineProperty(n,a,o)};r.defineProperty.sham&&(t.sham=!0)}),yW=gb,yb=yW;function _b(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),yb(e,i.key,i)}}function Ot(e,r,t){return r&&_b(e.prototype,r),t&&_b(e,t),e}function Ce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Z({target:"Object",stat:!0,sham:!Et},{create:tn});var _W=lt.Object,wb=function(r,t){return _W.create(r,t)},wW=wb,bW=wW,TW=function(e){if(!le(e)&&e!==null)throw TypeError("Can't set "+String(e)+" as a prototype");return e},EW=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(r,[]),e=r instanceof Array}catch(i){}return function(n,a){return ar(n),TW(a),e?t.call(n,a):n.__proto__=a,n}}():void 0);Z({target:"Object",stat:!0},{setPrototypeOf:EW});var SW=lt.Object.setPrototypeOf,xW=SW,bb=xW;function fp(e,r){return fp=bb||function(i,n){return i.__proto__=n,i},fp(e,r)}function or(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=bW(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&fp(e,r)}var Ln=Array.isArray||function(r){return An(r)=="Array"},Wa=function(e,r,t){var i=ts(r);i in e?xr.f(e,i,Ga(0,t)):e[i]=t},Ha=Ya("navigator","userAgent")||"",Tb=Wt.process,Eb=Tb&&Tb.versions,Sb=Eb&&Eb.v8,pi,$f;Sb?(pi=Sb.split("."),$f=pi[0]<4?1:pi[0]+pi[1]):Ha&&(pi=Ha.match(/Edge\/(\d+)/),(!pi||pi[1]>=74)&&(pi=Ha.match(/Chrome\/(\d+)/),pi&&($f=pi[1])));var Fn=$f&&+$f,mi=!!Object.getOwnPropertySymbols&&!Lt(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Fn&&Fn<41}),xb=mi&&!Symbol.sham&&typeof Symbol.iterator=="symbol",ru=ja("wks"),iu=Wt.Symbol,CW=xb?iu:iu&&iu.withoutSetter||eu,ue=function(e){return(!st(ru,e)||!(mi||typeof ru[e]=="string"))&&(mi&&st(iu,e)?ru[e]=iu[e]:ru[e]=CW("Symbol."+e)),ru[e]},OW=ue("species"),cp=function(e,r){var t;return Ln(e)&&(t=e.constructor,typeof t=="function"&&(t===Array||Ln(t.prototype))?t=void 0:le(t)&&(t=t[OW],t===null&&(t=void 0))),new(t===void 0?Array:t)(r===0?0:r)},IW=ue("species"),nu=function(e){return Fn>=51||!Lt(function(){var r=[],t=r.constructor={};return t[IW]=function(){return{foo:1}},r[e](Boolean).foo!==1})},Cb=ue("isConcatSpreadable"),Ob=9007199254740991,Ib="Maximum allowed index exceeded",PW=Fn>=51||!Lt(function(){var e=[];return e[Cb]=!1,e.concat()[0]!==e}),kW=nu("concat"),DW=function(e){if(!le(e))return!1;var r=e[Cb];return r!==void 0?!!r:Ln(e)},RW=!PW||!kW;Z({target:"Array",proto:!0,forced:RW},{concat:function(r){var t=nr(this),i=cp(t,0),n=0,a,o,s,l,u;for(a=-1,s=arguments.length;a<s;a++)if(u=a===-1?t:arguments[a],DW(u)){if(l=vi(u.length),n+l>Ob)throw TypeError(Ib);for(o=0;o<l;o++,n++)o in u&&Wa(i,n,u[o])}else{if(n>=Ob)throw TypeError(Ib);Wa(i,n++,u)}return i.length=n,i}});var AW=Lf.concat("length","prototype"),MW=Object.getOwnPropertyNames||function(r){return nb(r,AW)},dp={f:MW},Pb=dp.f,LW={}.toString,kb=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],FW=function(e){try{return Pb(e)}catch(r){return kb.slice()}},NW=function(r){return kb&&LW.call(r)=="[object Window]"?FW(r):Pb(ir(r))},Db={f:NW},$W=Object.getOwnPropertySymbols,au={f:$W},Gf=function(e,r,t,i){i&&i.enumerable?e[r]=t:Cr(e,r,t)},GW=ue,vp={f:GW},YW=xr.f,Zt=function(e){var r=lt.Symbol||(lt.Symbol={});st(r,e)||YW(r,e,{value:vp.f(e)})},jW=ue("toStringTag"),Rb={};Rb[jW]="z";var pp=String(Rb)==="[object z]",WW=ue("toStringTag"),HW=An(function(){return arguments}())=="Arguments",BW=function(e,r){try{return e[r]}catch(t){}},Yf=pp?An:function(e){var r,t,i;return e===void 0?"Undefined":e===null?"Null":typeof(t=BW(r=Object(e),WW))=="string"?t:HW?An(r):(i=An(r))=="Object"&&typeof r.callee=="function"?"Arguments":i},UW=pp?{}.toString:function(){return"[object "+Yf(this)+"]"},zW=xr.f,Ab=ue("toStringTag"),ou=function(e,r,t,i){if(e){var n=t?e:e.prototype;st(n,Ab)||zW(n,Ab,{configurable:!0,value:r}),i&&!pp&&Cr(n,"toString",UW)}},VW=Function.toString;typeof Mn.inspectSource!="function"&&(Mn.inspectSource=function(e){return VW.call(e)});var XW=Mn.inspectSource,Mb=Wt.WeakMap,KW=typeof Mb=="function"&&/native code/.test(XW(Mb)),Lb="Object already initialized",ZW=Wt.WeakMap,jf,su,Wf,qW=function(e){return Wf(e)?su(e):jf(e,{})},QW=function(e){return function(r){var t;if(!le(r)||(t=su(r)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return t}};if(KW||Mn.state){var Ba=Mn.state||(Mn.state=new ZW),JW=Ba.get,Fb=Ba.has,tH=Ba.set;jf=function(e,r){if(Fb.call(Ba,e))throw new TypeError(Lb);return r.facade=e,tH.call(Ba,e,r),r},su=function(e){return JW.call(Ba,e)||{}},Wf=function(e){return Fb.call(Ba,e)}}else{var as=Ff("state");ns[as]=!0,jf=function(e,r){if(st(e,as))throw new TypeError(Lb);return r.facade=e,Cr(e,as,r),r},su=function(e){return st(e,as)?e[as]:{}},Wf=function(e){return st(e,as)}}var gi={set:jf,get:su,has:Wf,enforce:qW,getterFor:QW},Nb=[].push,Nn=function(e){var r=e==1,t=e==2,i=e==3,n=e==4,a=e==6,o=e==7,s=e==5||a;return function(l,u,h,f){for(var c=nr(l),d=Mf(c),v=rs(u,h,3),m=vi(d.length),p=0,g=f||cp,_=r?g(l,m):t||o?g(l,0):void 0,y,w;m>p;p++)if((s||p in d)&&(y=d[p],w=v(y,p,c),e))if(r)_[p]=w;else if(w)switch(e){case 3:return!0;case 5:return y;case 6:return p;case 2:Nb.call(_,y)}else switch(e){case 4:return!1;case 7:Nb.call(_,y)}return a?-1:i||n?n:_}},$n={forEach:Nn(0),map:Nn(1),filter:Nn(2),some:Nn(3),every:Nn(4),find:Nn(5),findIndex:Nn(6),filterOut:Nn(7)},Hf=$n.forEach,Ve=Ff("hidden"),Bf="Symbol",en="prototype",$b=ue("toPrimitive"),eH=gi.set,Gb=gi.getterFor(Bf),Vr=Object[en],Xe=Wt.Symbol,lu=Ya("JSON","stringify"),Yb=Ql.f,Gn=xr.f,jb=Db.f,rH=ql.f,rn=ja("symbols"),uu=ja("op-symbols"),mp=ja("string-to-symbol-registry"),gp=ja("symbol-to-string-registry"),iH=ja("wks"),yp=Wt.QObject,_p=!yp||!yp[en]||!yp[en].findChild,wp=Et&&Lt(function(){return tn(Gn({},"a",{get:function(){return Gn(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var i=Yb(Vr,r);i&&delete Vr[r],Gn(e,r,t),i&&e!==Vr&&Gn(Vr,r,i)}:Gn,bp=function(e,r){var t=rn[e]=tn(Xe[en]);return eH(t,{type:Bf,tag:e,description:r}),Et||(t.description=r),t},Tp=xb?function(e){return typeof e=="symbol"}:function(e){return Object(e)instanceof Xe},Uf=function(r,t,i){r===Vr&&Uf(uu,t,i),ar(r);var n=ts(t,!0);return ar(i),st(rn,n)?(i.enumerable?(st(r,Ve)&&r[Ve][n]&&(r[Ve][n]=!1),i=tn(i,{enumerable:Ga(0,!1)})):(st(r,Ve)||Gn(r,Ve,Ga(1,{})),r[Ve][n]=!0),wp(r,n,i)):Gn(r,n,i)},Wb=function(r,t){ar(r);var i=ir(t),n=Ji(i).concat(Ep(i));return Hf(n,function(a){(!Et||Hb.call(i,a))&&Uf(r,a,i[a])}),r},nH=function(r,t){return t===void 0?tn(r):Wb(tn(r),t)},Hb=function(r){var t=ts(r,!0),i=rH.call(this,t);return this===Vr&&st(rn,t)&&!st(uu,t)?!1:i||!st(this,t)||!st(rn,t)||st(this,Ve)&&this[Ve][t]?i:!0},Bb=function(r,t){var i=ir(r),n=ts(t,!0);if(!(i===Vr&&st(rn,n)&&!st(uu,n))){var a=Yb(i,n);return a&&st(rn,n)&&!(st(i,Ve)&&i[Ve][n])&&(a.enumerable=!0),a}},Ub=function(r){var t=jb(ir(r)),i=[];return Hf(t,function(n){!st(rn,n)&&!st(ns,n)&&i.push(n)}),i},Ep=function(r){var t=r===Vr,i=jb(t?uu:ir(r)),n=[];return Hf(i,function(a){st(rn,a)&&(!t||st(Vr,a))&&n.push(rn[a])}),n};mi||(Xe=function(){if(this instanceof Xe)throw TypeError("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),t=eu(r),i=function(n){this===Vr&&i.call(uu,n),st(this,Ve)&&st(this[Ve],t)&&(this[Ve][t]=!1),wp(this,t,Ga(1,n))};return Et&&_p&&wp(Vr,t,{configurable:!0,set:i}),bp(t,r)},Gf(Xe[en],"toString",function(){return Gb(this).tag}),Gf(Xe,"withoutSetter",function(e){return bp(eu(e),e)}),ql.f=Hb,xr.f=Uf,Ql.f=Bb,dp.f=Db.f=Ub,au.f=Ep,vp.f=function(e){return bp(ue(e),e)},Et&&Gn(Xe[en],"description",{configurable:!0,get:function(){return Gb(this).description}}));Z({global:!0,wrap:!0,forced:!mi,sham:!mi},{Symbol:Xe});Hf(Ji(iH),function(e){Zt(e)});Z({target:Bf,stat:!0,forced:!mi},{for:function(e){var r=String(e);if(st(mp,r))return mp[r];var t=Xe(r);return mp[r]=t,gp[t]=r,t},keyFor:function(r){if(!Tp(r))throw TypeError(r+" is not a symbol");if(st(gp,r))return gp[r]},useSetter:function(){_p=!0},useSimple:function(){_p=!1}});Z({target:"Object",stat:!0,forced:!mi,sham:!Et},{create:nH,defineProperty:Uf,defineProperties:Wb,getOwnPropertyDescriptor:Bb});Z({target:"Object",stat:!0,forced:!mi},{getOwnPropertyNames:Ub,getOwnPropertySymbols:Ep});Z({target:"Object",stat:!0,forced:Lt(function(){au.f(1)})},{getOwnPropertySymbols:function(r){return au.f(nr(r))}});if(lu){var aH=!mi||Lt(function(){var e=Xe();return lu([e])!="[null]"||lu({a:e})!="{}"||lu(Object(e))!="{}"});Z({target:"JSON",stat:!0,forced:aH},{stringify:function(r,t,i){for(var n=[r],a=1,o;arguments.length>a;)n.push(arguments[a++]);if(o=t,!(!le(t)&&r===void 0||Tp(r)))return Ln(t)||(t=function(s,l){if(typeof o=="function"&&(l=o.call(this,s,l)),!Tp(l))return l}),n[1]=t,lu.apply(null,n)}})}Xe[en][$b]||Cr(Xe[en],$b,Xe[en].valueOf);ou(Xe,Bf);ns[Ve]=!0;Zt("asyncIterator");Zt("hasInstance");Zt("isConcatSpreadable");Zt("iterator");Zt("match");Zt("matchAll");Zt("replace");Zt("search");Zt("species");Zt("split");Zt("toPrimitive");Zt("toStringTag");Zt("unscopables");ou(Wt.JSON,"JSON",!0);var zb=lt.Symbol;Zt("asyncDispose");Zt("dispose");Zt("matcher");Zt("metadata");Zt("observable");Zt("patternMatch");Zt("replaceAll");var oH=zb,os=oH,Vb=function(e){return function(r,t){var i=String(Jo(r)),n=tu(t),a=i.length,o,s;return n<0||n>=a?e?"":void 0:(o=i.charCodeAt(n),o<55296||o>56319||n+1===a||(s=i.charCodeAt(n+1))<56320||s>57343?e?i.charAt(n):o:e?i.slice(n,n+2):(o-55296<<10)+(s-56320)+65536)}},sH={codeAt:Vb(!1),charAt:Vb(!0)},Xb=!Lt(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Kb=Ff("IE_PROTO"),lH=Object.prototype,hu=Xb?Object.getPrototypeOf:function(e){return e=nr(e),st(e,Kb)?e[Kb]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?lH:null},Sp=ue("iterator"),Zb=!1,uH=function(){return this},Ua,xp,Cp;[].keys&&(Cp=[].keys(),"next"in Cp?(xp=hu(hu(Cp)),xp!==Object.prototype&&(Ua=xp)):Zb=!0);var qb=Ua==null||Lt(function(){var e={};return Ua[Sp].call(e)!==e});qb&&(Ua={});qb&&!st(Ua,Sp)&&Cr(Ua,Sp,uH);var Op={IteratorPrototype:Ua,BUGGY_SAFARI_ITERATORS:Zb},nn={},hH=Op.IteratorPrototype,fH=function(){return this},cH=function(e,r,t){var i=r+" Iterator";return e.prototype=tn(hH,{next:Ga(1,t)}),ou(e,i,!1,!0),nn[i]=fH,e},dH=Op.IteratorPrototype,zf=Op.BUGGY_SAFARI_ITERATORS,Ip=ue("iterator"),Qb="keys",Vf="values",Jb="entries",vH=function(){return this},Pp=function(e,r,t,i,n,a,o){cH(t,r,i);var s=function(g){if(g===n&&c)return c;if(!zf&&g in h)return h[g];switch(g){case Qb:return function(){return new t(this,g)};case Vf:return function(){return new t(this,g)};case Jb:return function(){return new t(this,g)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,h=e.prototype,f=h[Ip]||h["@@iterator"]||n&&h[n],c=!zf&&f||s(n),d=r=="Array"&&h.entries||f,v,m,p;if(d&&(v=hu(d.call(new e)),dH!==Object.prototype&&v.next&&(ou(v,l,!0,!0),nn[l]=vH)),n==Vf&&f&&f.name!==Vf&&(u=!0,c=function(){return f.call(this)}),o&&h[Ip]!==c&&Cr(h,Ip,c),nn[r]=c,n)if(m={values:s(Vf),keys:a?c:s(Qb),entries:s(Jb)},o)for(p in m)(zf||u||!(p in h))&&Gf(h,p,m[p]);else Z({target:r,proto:!0,forced:zf||u},m);return m},pH=sH.charAt,tT="String Iterator",mH=gi.set,gH=gi.getterFor(tT);Pp(String,"String",function(e){mH(this,{type:tT,string:String(e),index:0})},function(){var r=gH(this),t=r.string,i=r.index,n;return i>=t.length?{value:void 0,done:!0}:(n=pH(t,i),r.index+=n.length,{value:n,done:!1})});var eT="Array Iterator",yH=gi.set,_H=gi.getterFor(eT);Pp(Array,"Array",function(e,r){yH(this,{type:eT,target:ir(e),index:0,kind:r})},function(){var e=_H(this),r=e.target,t=e.kind,i=e.index++;return!r||i>=r.length?(e.target=void 0,{value:void 0,done:!0}):t=="keys"?{value:i,done:!1}:t=="values"?{value:r[i],done:!1}:{value:[i,r[i]],done:!1}},"values");nn.Arguments=nn.Array;var wH={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},rT=ue("toStringTag");for(var kp in wH){var iT=Wt[kp],Dp=iT&&iT.prototype;Dp&&Yf(Dp)!==rT&&Cr(Dp,rT,kp),nn[kp]=nn.Array}var bH=vp.f("iterator"),TH=bH,EH=TH;function at(e){return typeof os=="function"&&typeof EH=="symbol"?at=function(t){return typeof t}:at=function(t){return t&&typeof os=="function"&&t.constructor===os&&t!==os.prototype?"symbol":typeof t},at(e)}function sr(e,r){return r&&(at(r)==="object"||typeof r=="function")?r:Ce(e)}var SH=Lt(function(){hu(1)});Z({target:"Object",stat:!0,forced:SH,sham:!Xb},{getPrototypeOf:function(r){return hu(nr(r))}});var nT=lt.Object.getPrototypeOf,xH=nT,aT=xH;function It(e){return It=bb?aT:function(t){return t.__proto__||aT(t)},It(e)}Z({target:"Array",stat:!0},{isArray:Ln});var oT=lt.Array.isArray,CH=oT,ct=CH;Z({target:"Function",proto:!0},{bind:db});var he=function(e){return lt[e+"Prototype"]},OH=he("Function").bind,sT=Function.prototype,IH=function(e){var r=e.bind;return e===sT||e instanceof Function&&r===sT.bind?OH:r},PH=IH,D=PH,kH=[].slice,DH=/MSIE .\./.test(Ha),lT=function(e){return function(r,t){var i=arguments.length>2,n=i?kH.call(arguments,2):void 0;return e(i?function(){(typeof r=="function"?r:Function(r)).apply(this,n)}:r,t)}};Z({global:!0,bind:!0,forced:DH},{setTimeout:lT(Wt.setTimeout),setInterval:lT(Wt.setInterval)});var RH=lt.setTimeout,Re=RH,ss=function(e,r){var t=[][e];return!!t&&Lt(function(){t.call(null,r||function(){throw 1},1)})},AH=$n.forEach,MH=ss("forEach"),uT=MH?[].forEach:function(r){return AH(this,r,arguments.length>1?arguments[1]:void 0)};Z({target:"Array",proto:!0,forced:[].forEach!=uT},{forEach:uT});var LH=he("Array").forEach,FH=LH,hT=Array.prototype,NH={DOMTokenList:!0,NodeList:!0},$H=function(e){var r=e.forEach;return e===hT||e instanceof Array&&r===hT.forEach||NH.hasOwnProperty(Yf(e))?FH:r},G=$H,Ke=typeof window!="undefined"&&window.moment||F,GH=lt.Object.getOwnPropertySymbols,YH=GH,Xf=YH,jH=$n.filter,WH=nu("filter");Z({target:"Array",proto:!0,forced:!WH},{filter:function(r){return jH(this,r,arguments.length>1?arguments[1]:void 0)}});var HH=he("Array").filter,fT=Array.prototype,BH=function(e){var r=e.filter;return e===fT||e instanceof Array&&r===fT.filter?HH:r},UH=BH,mt=UH,cT=Ql.f,zH=Lt(function(){cT(1)}),VH=!Et||zH;Z({target:"Object",stat:!0,forced:VH,sham:!Et},{getOwnPropertyDescriptor:function(r,t){return cT(ir(r),t)}});var XH=Rn(function(e){var r=lt.Object,t=e.exports=function(n,a){return r.getOwnPropertyDescriptor(n,a)};r.getOwnPropertyDescriptor.sham&&(t.sham=!0)}),KH=XH,Kf=KH,dT=Ya("Reflect","ownKeys")||function(r){var t=dp.f(ar(r)),i=au.f;return i?t.concat(i(r)):t};Z({target:"Object",stat:!0,sham:!Et},{getOwnPropertyDescriptors:function(r){for(var t=ir(r),i=Ql.f,n=dT(t),a={},o=0,s,l;n.length>o;)l=i(t,s=n[o++]),l!==void 0&&Wa(a,s,l);return a}});var ZH=lt.Object.getOwnPropertyDescriptors,qH=ZH,Zf=qH;Z({target:"Object",stat:!0,forced:!Et,sham:!Et},{defineProperties:ab});var QH=Rn(function(e){var r=lt.Object,t=e.exports=function(n,a){return r.defineProperties(n,a)};r.defineProperties.sham&&(t.sham=!0)}),JH=QH,vT=JH;function pT(e,r,t){return r in e?yb(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var tB=$n.map,eB=nu("map");Z({target:"Array",proto:!0,forced:!eB},{map:function(r){return tB(this,r,arguments.length>1?arguments[1]:void 0)}});var rB=he("Array").map,mT=Array.prototype,iB=function(e){var r=e.map;return e===mT||e instanceof Array&&r===mT.map?rB:r},nB=iB,ve=nB,gT=function(e){return function(r,t,i,n){es(t);var a=nr(r),o=Mf(a),s=vi(a.length),l=e?s-1:0,u=e?-1:1;if(i<2)for(;;){if(l in o){n=o[l],l+=u;break}if(l+=u,e?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=u)l in o&&(n=t(n,o[l],l,a));return n}},aB={left:gT(!1),right:gT(!0)},oB=An(Wt.process)=="process",sB=aB.left,lB=ss("reduce"),uB=!oB&&Fn>79&&Fn<83;Z({target:"Array",proto:!0,forced:!lB||uB},{reduce:function(r){return sB(this,r,arguments.length,arguments.length>1?arguments[1]:void 0)}});var hB=he("Array").reduce,yT=Array.prototype,fB=function(e){var r=e.reduce;return e===yT||e instanceof Array&&r===yT.reduce?hB:r},cB=fB,_T=cB,dB=Lt(function(){Ji(1)});Z({target:"Object",stat:!0,forced:dB},{keys:function(r){return Ji(nr(r))}});var vB=lt.Object.keys,pB=vB,pe=pB,mB=gb,Rp=mB,Ap=function(e){var r=e.return;if(r!==void 0)return ar(r.call(e)).value},gB=function(e,r,t,i){try{return i?r(ar(t)[0],t[1]):r(t)}catch(n){throw Ap(e),n}},yB=ue("iterator"),_B=Array.prototype,wT=function(e){return e!==void 0&&(nn.Array===e||_B[yB]===e)},wB=ue("iterator"),Mp=function(e){if(e!=null)return e[wB]||e["@@iterator"]||nn[Yf(e)]},bB=function(r){var t=nr(r),i=typeof this=="function"?this:Array,n=arguments.length,a=n>1?arguments[1]:void 0,o=a!==void 0,s=Mp(t),l=0,u,h,f,c,d,v;if(o&&(a=rs(a,n>2?arguments[2]:void 0,2)),s!=null&&!(i==Array&&wT(s)))for(c=s.call(t),d=c.next,h=new i;!(f=d.call(c)).done;l++)v=o?gB(c,a,[f.value,l],!0):f.value,Wa(h,l,v);else for(u=vi(t.length),h=new i(u);u>l;l++)v=o?a(t[l],l):t[l],Wa(h,l,v);return h.length=l,h},bT=ue("iterator"),TT=!1;try{var TB=0,ET={next:function(){return{done:!!TB++}},return:function(){TT=!0}};ET[bT]=function(){return this},Array.from(ET,function(){throw 2})}catch(e){}var EB=function(e,r){if(!r&&!TT)return!1;var t=!1;try{var i={};i[bT]=function(){return{next:function(){return{done:t=!0}}}},e(i)}catch(n){}return t},SB=!EB(function(e){Array.from(e)});Z({target:"Array",stat:!0,forced:SB},{from:bB});var ST=lt.Array.from,xB=ST,ls=xB,CB=Mp,Yn=CB,OB=oT,xT=OB;function IB(e){if(xT(e))return e}function PB(e,r){var t=e&&(typeof os!="undefined"&&Yn(e)||e["@@iterator"]);if(t!=null){var i=[],n=!0,a=!1,o,s;try{for(t=t.call(e);!(n=(o=t.next()).done)&&(i.push(o.value),!(r&&i.length===r));n=!0);}catch(l){a=!0,s=l}finally{try{!n&&t.return!=null&&t.return()}finally{if(a)throw s}}return i}}var kB=nu("slice"),DB=ue("species"),RB=[].slice,AB=Math.max;Z({target:"Array",proto:!0,forced:!kB},{slice:function(r,t){var i=ir(this),n=vi(i.length),a=is(r,n),o=is(t===void 0?n:t,n),s,l,u;if(Ln(i)&&(s=i.constructor,typeof s=="function"&&(s===Array||Ln(s.prototype))?s=void 0:le(s)&&(s=s[DB],s===null&&(s=void 0)),s===Array||s===void 0))return RB.call(i,a,o);for(l=new(s===void 0?Array:s)(AB(o-a,0)),u=0;a<o;a++,u++)a in i&&Wa(l,u,i[a]);return l.length=u,l}});var MB=he("Array").slice,CT=Array.prototype,OT=function(e){var r=e.slice;return e===CT||e instanceof Array&&r===CT.slice?MB:r},LB=OT,FB=LB,NB=ST,IT=NB;function Lp(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function PT(e,r){var t;if(!!e){if(typeof e=="string")return Lp(e,r);var i=FB(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return IT(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Lp(e,r)}}function $B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GB(e,r){return IB(e)||PB(e,r)||PT(e,r)||$B()}function YB(e){if(xT(e))return Lp(e)}function jB(e){if(typeof os!="undefined"&&Yn(e)!=null||e["@@iterator"]!=null)return IT(e)}function WB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yi(e){return YB(e)||jB(e)||PT(e)||WB()}var HB=zb,za=HB,BB=he("Array").concat,kT=Array.prototype,UB=function(e){var r=e.concat;return e===kT||e instanceof Array&&r===kT.concat?BB:r},zB=UB,Ut=zB,VB=OT,Or=VB;Z({target:"Reflect",stat:!0},{ownKeys:dT});var XB=lt.Reflect.ownKeys,KB=XB,ZB=KB;Z({target:"Date",stat:!0},{now:function(){return new Date().getTime()}});var qB=lt.Date.now,QB=qB,lr=QB,JB=[].reverse,DT=[1,2];Z({target:"Array",proto:!0,forced:String(DT)===String(DT.reverse())},{reverse:function(){return Ln(this)&&(this.length=this.length),JB.call(this)}});var tU=he("Array").reverse,RT=Array.prototype,eU=function(e){var r=e.reverse;return e===RT||e instanceof Array&&r===RT.reverse?tU:r},rU=eU,iU=rU,nU=nu("splice"),aU=Math.max,oU=Math.min,sU=9007199254740991,lU="Maximum allowed length exceeded";Z({target:"Array",proto:!0,forced:!nU},{splice:function(r,t){var i=nr(this),n=vi(i.length),a=is(r,n),o=arguments.length,s,l,u,h,f,c;if(o===0?s=l=0:o===1?(s=0,l=n-a):(s=o-2,l=oU(aU(tu(t),0),n-a)),n+s-l>sU)throw TypeError(lU);for(u=cp(i,l),h=0;h<l;h++)f=a+h,f in i&&Wa(u,h,i[f]);if(u.length=l,s<l){for(h=a;h<n-l;h++)f=h+l,c=h+s,f in i?i[c]=i[f]:delete i[c];for(h=n;h>n-l+s;h--)delete i[h-1]}else if(s>l)for(h=n-l;h>a;h--)f=h+l-1,c=h+s-1,f in i?i[c]=i[f]:delete i[c];for(h=0;h<s;h++)i[h+a]=arguments[h+2];return i.length=n-l+s,u}});var uU=he("Array").splice,AT=Array.prototype,hU=function(e){var r=e.splice;return e===AT||e instanceof Array&&r===AT.splice?uU:r},fU=hU,Ir=fU,us=Object.assign,MT=Object.defineProperty,LT=!us||Lt(function(){if(Et&&us({b:1},us(MT({},"a",{enumerable:!0,get:function(){MT(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),i="abcdefghijklmnopqrst";return e[t]=7,i.split("").forEach(function(n){r[n]=n}),us({},e)[t]!=7||Ji(us({},r)).join("")!=i})?function(r,t){for(var i=nr(r),n=arguments.length,a=1,o=au.f,s=ql.f;n>a;)for(var l=Mf(arguments[a++]),u=o?Ji(l).concat(o(l)):Ji(l),h=u.length,f=0,c;h>f;)c=u[f++],(!Et||s.call(l,c))&&(i[c]=l[c]);return i}:us;Z({target:"Object",stat:!0,forced:Object.assign!==LT},{assign:LT});var cU=lt.Object.assign,dU=cU,Va=dU,vU=np.includes;Z({target:"Array",proto:!0},{includes:function(r){return vU(this,r,arguments.length>1?arguments[1]:void 0)}});var pU=he("Array").includes,mU=ue("match"),gU=function(e){var r;return le(e)&&((r=e[mU])!==void 0?!!r:An(e)=="RegExp")},yU=function(e){if(gU(e))throw TypeError("The method doesn't accept regular expressions");return e},_U=ue("match"),wU=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[_U]=!1,"/./"[e](r)}catch(i){}}return!1};Z({target:"String",proto:!0,forced:!wU("includes")},{includes:function(r){return!!~String(Jo(this)).indexOf(yU(r),arguments.length>1?arguments[1]:void 0)}});var bU=he("String").includes,FT=Array.prototype,NT=String.prototype,TU=function(e){var r=e.includes;return e===FT||e instanceof Array&&r===FT.includes?pU:typeof e=="string"||e===NT||e instanceof String&&r===NT.includes?bU:r},EU=TU,jn=EU,SU=nT,$T=SU,xU=ql.f,GT=function(e){return function(r){for(var t=ir(r),i=Ji(t),n=i.length,a=0,o=[],s;n>a;)s=i[a++],(!Et||xU.call(t,s))&&o.push(e?[s,t[s]]:t[s]);return o}},CU={entries:GT(!0),values:GT(!1)},OU=CU.values;Z({target:"Object",stat:!0},{values:function(r){return OU(r)}});var IU=lt.Object.values,PU=IU,YT=PU,hs=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,qf="["+hs+"]",kU=RegExp("^"+qf+qf+"*"),DU=RegExp(qf+qf+"*$"),Fp=function(e){return function(r){var t=String(Jo(r));return e&1&&(t=t.replace(kU,"")),e&2&&(t=t.replace(DU,"")),t}},Np={start:Fp(1),end:Fp(2),trim:Fp(3)},RU=Np.trim,Qf=Wt.parseInt,AU=/^[+-]?0[Xx]/,MU=Qf(hs+"08")!==8||Qf(hs+"0x16")!==22,jT=MU?function(r,t){var i=RU(String(r));return Qf(i,t>>>0||(AU.test(i)?16:10))}:Qf;Z({global:!0,forced:parseInt!=jT},{parseInt:jT});var LU=lt.parseInt,FU=LU,ur=FU,NU=np.indexOf,WT=[].indexOf,HT=!!WT&&1/[1].indexOf(1,-0)<0,$U=ss("indexOf");Z({target:"Array",proto:!0,forced:HT||!$U},{indexOf:function(r){return HT?WT.apply(this,arguments)||0:NU(this,r,arguments.length>1?arguments[1]:void 0)}});var GU=he("Array").indexOf,BT=Array.prototype,YU=function(e){var r=e.indexOf;return e===BT||e instanceof Array&&r===BT.indexOf?GU:r},jU=YU,Pt=jU,UT="\u200B\x85\u180E",WU=function(e){return Lt(function(){return!!hs[e]()||UT[e]()!=UT||hs[e].name!==e})},HU=Np.trim;Z({target:"String",proto:!0,forced:WU("trim")},{trim:function(){return HU(this)}});var BU=he("String").trim,zT=String.prototype,UU=function(e){var r=e.trim;return typeof e=="string"||e===zT||e instanceof String&&r===zT.trim?BU:r},zU=UU,$p=zU,VU=wb,Jf=VU,tc=Ya("JSON","stringify"),XU=/[\uD800-\uDFFF]/g,VT=/^[\uD800-\uDBFF]$/,XT=/^[\uDC00-\uDFFF]$/,KU=function(e,r,t){var i=t.charAt(r-1),n=t.charAt(r+1);return VT.test(e)&&!XT.test(n)||XT.test(e)&&!VT.test(i)?"\\u"+e.charCodeAt(0).toString(16):e},ZU=Lt(function(){return tc("\uDF06\uD834")!=='"\\udf06\\ud834"'||tc("\uDEAD")!=='"\\udead"'});tc&&Z({target:"JSON",stat:!0,forced:ZU},{stringify:function(r,t,i){var n=tc.apply(null,arguments);return typeof n=="string"?n.replace(XU,KU):n}});lt.JSON||(lt.JSON={stringify:JSON.stringify});var qU=function(r,t,i){return lt.JSON.stringify.apply(null,arguments)},QU=qU,hr=QU,JU=function(r){for(var t=nr(this),i=vi(t.length),n=arguments.length,a=is(n>1?arguments[1]:void 0,i),o=n>2?arguments[2]:void 0,s=o===void 0?i:is(o,i);s>a;)t[a++]=r;return t};Z({target:"Array",proto:!0},{fill:JU});var tz=he("Array").fill,KT=Array.prototype,ez=function(e){var r=e.fill;return e===KT||e instanceof Array&&r===KT.fill?tz:r},rz=ez,ZT=rz,Gp=Rn(function(e){e.exports=r;function r(i){if(i)return t(i)}function t(i){for(var n in r.prototype)i[n]=r.prototype[n];return i}r.prototype.on=r.prototype.addEventListener=function(i,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(n),this},r.prototype.once=function(i,n){function a(){this.off(i,a),n.apply(this,arguments)}return a.fn=n,this.on(i,a),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(i,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+i];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var o,s=0;s<a.length;s++)if(o=a[s],o===n||o.fn===n){a.splice(s,1);break}return a.length===0&&delete this._callbacks["$"+i],this},r.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),a=this._callbacks["$"+i],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(a){a=a.slice(0);for(var o=0,s=a.length;o<s;++o)a[o].apply(this,n)}return this},r.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},r.prototype.hasListeners=function(i){return!!this.listeners(i).length}});/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Xr(){return Xr=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Xr.apply(this,arguments)}function Pr(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function ec(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Yp;typeof Object.assign!="function"?Yp=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),i=1;i<arguments.length;i++){var n=arguments[i];if(n!=null)for(var a in n)n.hasOwnProperty(a)&&(t[a]=n[a])}return t}:Yp=Object.assign;var Xa=Yp,qT=["","webkit","Moz","MS","ms","o"],iz=typeof document=="undefined"?{style:{}}:document.createElement("div"),nz="function",fs=Math.round,Ka=Math.abs,jp=Date.now;function rc(e,r){for(var t,i,n=r[0].toUpperCase()+r.slice(1),a=0;a<qT.length;){if(t=qT[a],i=t?t+n:r,i in e)return i;a++}}var an;typeof window=="undefined"?an={}:an=window;var QT=rc(iz.style,"touchAction"),JT=QT!==void 0;function az(){if(!JT)return!1;var e={},r=an.CSS&&an.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?an.CSS.supports("touch-action",t):!0}),e}var tE="compute",eE="auto",Wp="manipulation",Za="none",fu="pan-x",cu="pan-y",ic=az(),oz=/mobile|tablet|ip(ad|hone|od)|android/i,rE="ontouchstart"in an,sz=rc(an,"PointerEvent")!==void 0,lz=rE&&oz.test(navigator.userAgent),du="touch",uz="pen",Hp="mouse",hz="kinect",fz=25,Ae=1,qa=2,re=4,Ze=8,nc=1,vu=2,pu=4,mu=8,cs=16,_i=vu|pu,Qa=mu|cs,iE=_i|Qa,nE=["x","y"],ac=["clientX","clientY"];function on(e,r,t){var i;if(!!e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(i=0;i<e.length;)r.call(t,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&r.call(t,e[i],i,e)}function oc(e,r){return typeof e===nz?e.apply(r&&r[0]||void 0,r):e}function Ja(e,r){return e.indexOf(r)>-1}function cz(e){if(Ja(e,Za))return Za;var r=Ja(e,fu),t=Ja(e,cu);return r&&t?Za:r||t?r?fu:cu:Ja(e,Wp)?Wp:eE}var aE=function(){function e(t,i){this.manager=t,this.set(i)}var r=e.prototype;return r.set=function(i){i===tE&&(i=this.compute()),JT&&this.manager.element.style&&ic[i]&&(this.manager.element.style[QT]=i),this.actions=i.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var i=[];return on(this.manager.recognizers,function(n){oc(n.options.enable,[n])&&(i=i.concat(n.getTouchAction()))}),cz(i.join(" "))},r.preventDefaults=function(i){var n=i.srcEvent,a=i.offsetDirection;if(this.manager.session.prevented){n.preventDefault();return}var o=this.actions,s=Ja(o,Za)&&!ic[Za],l=Ja(o,cu)&&!ic[cu],u=Ja(o,fu)&&!ic[fu];if(s){var h=i.pointers.length===1,f=i.distance<2,c=i.deltaTime<250;if(h&&f&&c)return}if(!(u&&l)&&(s||l&&a&_i||u&&a&Qa))return this.preventSrc(n)},r.preventSrc=function(i){this.manager.session.prevented=!0,i.preventDefault()},e}();function Bp(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function oE(e){var r=e.length;if(r===1)return{x:fs(e[0].clientX),y:fs(e[0].clientY)};for(var t=0,i=0,n=0;n<r;)t+=e[n].clientX,i+=e[n].clientY,n++;return{x:fs(t/r),y:fs(i/r)}}function sE(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:fs(e.pointers[t].clientX),clientY:fs(e.pointers[t].clientY)},t++;return{timeStamp:jp(),pointers:r,center:oE(r),deltaX:e.deltaX,deltaY:e.deltaY}}function sc(e,r,t){t||(t=nE);var i=r[t[0]]-e[t[0]],n=r[t[1]]-e[t[1]];return Math.sqrt(i*i+n*n)}function Up(e,r,t){t||(t=nE);var i=r[t[0]]-e[t[0]],n=r[t[1]]-e[t[1]];return Math.atan2(n,i)*180/Math.PI}function lE(e,r){return e===r?nc:Ka(e)>=Ka(r)?e<0?vu:pu:r<0?mu:cs}function dz(e,r){var t=r.center,i=e.offsetDelta||{},n=e.prevDelta||{},a=e.prevInput||{};(r.eventType===Ae||a.eventType===re)&&(n=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=n.x+(t.x-i.x),r.deltaY=n.y+(t.y-i.y)}function uE(e,r,t){return{x:r/e||0,y:t/e||0}}function vz(e,r){return sc(r[0],r[1],ac)/sc(e[0],e[1],ac)}function pz(e,r){return Up(r[1],r[0],ac)+Up(e[1],e[0],ac)}function mz(e,r){var t=e.lastInterval||r,i=r.timeStamp-t.timeStamp,n,a,o,s;if(r.eventType!==Ze&&(i>fz||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,h=uE(i,l,u);a=h.x,o=h.y,n=Ka(h.x)>Ka(h.y)?h.x:h.y,s=lE(l,u),e.lastInterval=r}else n=t.velocity,a=t.velocityX,o=t.velocityY,s=t.direction;r.velocity=n,r.velocityX=a,r.velocityY=o,r.direction=s}function gz(e,r){var t=e.session,i=r.pointers,n=i.length;t.firstInput||(t.firstInput=sE(r)),n>1&&!t.firstMultiple?t.firstMultiple=sE(r):n===1&&(t.firstMultiple=!1);var a=t.firstInput,o=t.firstMultiple,s=o?o.center:a.center,l=r.center=oE(i);r.timeStamp=jp(),r.deltaTime=r.timeStamp-a.timeStamp,r.angle=Up(s,l),r.distance=sc(s,l),dz(t,r),r.offsetDirection=lE(r.deltaX,r.deltaY);var u=uE(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=Ka(u.x)>Ka(u.y)?u.x:u.y,r.scale=o?vz(o.pointers,i):1,r.rotation=o?pz(o.pointers,i):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,mz(t,r);var h=e.element,f=r.srcEvent,c;f.composedPath?c=f.composedPath()[0]:f.path?c=f.path[0]:c=f.target,Bp(c,h)&&(h=c),r.target=h}function yz(e,r,t){var i=t.pointers.length,n=t.changedPointers.length,a=r&Ae&&i-n==0,o=r&(re|Ze)&&i-n==0;t.isFirst=!!a,t.isFinal=!!o,a&&(e.session={}),t.eventType=r,gz(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function gu(e){return e.trim().split(/\s+/g)}function yu(e,r,t){on(gu(r),function(i){e.addEventListener(i,t,!1)})}function _u(e,r,t){on(gu(r),function(i){e.removeEventListener(i,t,!1)})}function hE(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var ds=function(){function e(t,i){var n=this;this.manager=t,this.callback=i,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(a){oc(t.options.enable,[t])&&n.handler(a)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&yu(this.element,this.evEl,this.domHandler),this.evTarget&&yu(this.target,this.evTarget,this.domHandler),this.evWin&&yu(hE(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&_u(this.element,this.evEl,this.domHandler),this.evTarget&&_u(this.target,this.evTarget,this.domHandler),this.evWin&&_u(hE(this.element),this.evWin,this.domHandler)},e}();function to(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var i=0;i<e.length;){if(t&&e[i][t]==r||!t&&e[i]===r)return i;i++}return-1}var _z={pointerdown:Ae,pointermove:qa,pointerup:re,pointercancel:Ze,pointerout:Ze},wz={2:du,3:uz,4:Hp,5:hz},fE="pointerdown",cE="pointermove pointerup pointercancel";an.MSPointerEvent&&!an.PointerEvent&&(fE="MSPointerDown",cE="MSPointerMove MSPointerUp MSPointerCancel");var dE=function(e){Pr(r,e);function r(){var i,n=r.prototype;return n.evEl=fE,n.evWin=cE,i=e.apply(this,arguments)||this,i.store=i.manager.session.pointerEvents=[],i}var t=r.prototype;return t.handler=function(n){var a=this.store,o=!1,s=n.type.toLowerCase().replace("ms",""),l=_z[s],u=wz[n.pointerType]||n.pointerType,h=u===du,f=to(a,n.pointerId,"pointerId");l&Ae&&(n.button===0||h)?f<0&&(a.push(n),f=a.length-1):l&(re|Ze)&&(o=!0),!(f<0)&&(a[f]=n,this.callback(this.manager,l,{pointers:a,changedPointers:[n],pointerType:u,srcEvent:n}),o&&a.splice(f,1))},r}(ds);function wu(e){return Array.prototype.slice.call(e,0)}function zp(e,r,t){for(var i=[],n=[],a=0;a<e.length;){var o=r?e[a][r]:e[a];to(n,o)<0&&i.push(e[a]),n[a]=o,a++}return t&&(r?i=i.sort(function(s,l){return s[r]>l[r]}):i=i.sort()),i}var bz={touchstart:Ae,touchmove:qa,touchend:re,touchcancel:Ze},Tz="touchstart touchmove touchend touchcancel",Vp=function(e){Pr(r,e);function r(){var i;return r.prototype.evTarget=Tz,i=e.apply(this,arguments)||this,i.targetIds={},i}var t=r.prototype;return t.handler=function(n){var a=bz[n.type],o=Ez.call(this,n,a);!o||this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:du,srcEvent:n})},r}(ds);function Ez(e,r){var t=wu(e.touches),i=this.targetIds;if(r&(Ae|qa)&&t.length===1)return i[t[0].identifier]=!0,[t,t];var n,a,o=wu(e.changedTouches),s=[],l=this.target;if(a=t.filter(function(u){return Bp(u.target,l)}),r===Ae)for(n=0;n<a.length;)i[a[n].identifier]=!0,n++;for(n=0;n<o.length;)i[o[n].identifier]&&s.push(o[n]),r&(re|Ze)&&delete i[o[n].identifier],n++;if(!!s.length)return[zp(a.concat(s),"identifier",!0),s]}var Sz={mousedown:Ae,mousemove:qa,mouseup:re},xz="mousedown",Cz="mousemove mouseup",Xp=function(e){Pr(r,e);function r(){var i,n=r.prototype;return n.evEl=xz,n.evWin=Cz,i=e.apply(this,arguments)||this,i.pressed=!1,i}var t=r.prototype;return t.handler=function(n){var a=Sz[n.type];a&Ae&&n.button===0&&(this.pressed=!0),a&qa&&n.which!==1&&(a=re),!!this.pressed&&(a&re&&(this.pressed=!1),this.callback(this.manager,a,{pointers:[n],changedPointers:[n],pointerType:Hp,srcEvent:n}))},r}(ds),Oz=2500,vE=25;function pE(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY},n=this.lastTouches;this.lastTouches.push(i);var a=function(){var s=n.indexOf(i);s>-1&&n.splice(s,1)};setTimeout(a,Oz)}}function Iz(e,r){e&Ae?(this.primaryTouch=r.changedPointers[0].identifier,pE.call(this,r)):e&(re|Ze)&&pE.call(this,r)}function Pz(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var n=this.lastTouches[i],a=Math.abs(r-n.x),o=Math.abs(t-n.y);if(a<=vE&&o<=vE)return!0}return!1}var mE=function(){var e=function(r){Pr(t,r);function t(n,a){var o;return o=r.call(this,n,a)||this,o.handler=function(s,l,u){var h=u.pointerType===du,f=u.pointerType===Hp;if(!(f&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(h)Iz.call(ec(ec(o)),l,u);else if(f&&Pz.call(ec(ec(o)),u))return;o.callback(s,l,u)}},o.touch=new Vp(o.manager,o.handler),o.mouse=new Xp(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var i=t.prototype;return i.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(ds);return e}();function kz(e){var r,t=e.options.inputClass;return t?r=t:sz?r=dE:lz?r=Vp:rE?r=mE:r=Xp,new r(e,yz)}function vs(e,r,t){return Array.isArray(e)?(on(e,t[r],t),!0):!1}var lc=1,kr=2,ps=4,Wn=8,sn=Wn,bu=16,wi=32,Dz=1;function Rz(){return Dz++}function uc(e,r){var t=r.manager;return t?t.get(e):e}function gE(e){return e&bu?"cancel":e&Wn?"end":e&ps?"move":e&kr?"start":""}var Tu=function(){function e(t){t===void 0&&(t={}),this.options=Xr({enable:!0},t),this.id=Rz(),this.manager=null,this.state=lc,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(i){return Xa(this.options,i),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(i){if(vs(i,"recognizeWith",this))return this;var n=this.simultaneous;return i=uc(i,this),n[i.id]||(n[i.id]=i,i.recognizeWith(this)),this},r.dropRecognizeWith=function(i){return vs(i,"dropRecognizeWith",this)?this:(i=uc(i,this),delete this.simultaneous[i.id],this)},r.requireFailure=function(i){if(vs(i,"requireFailure",this))return this;var n=this.requireFail;return i=uc(i,this),to(n,i)===-1&&(n.push(i),i.requireFailure(this)),this},r.dropRequireFailure=function(i){if(vs(i,"dropRequireFailure",this))return this;i=uc(i,this);var n=to(this.requireFail,i);return n>-1&&this.requireFail.splice(n,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(i){return!!this.simultaneous[i.id]},r.emit=function(i){var n=this,a=this.state;function o(s){n.manager.emit(s,i)}a<Wn&&o(n.options.event+gE(a)),o(n.options.event),i.additionalEvent&&o(i.additionalEvent),a>=Wn&&o(n.options.event+gE(a))},r.tryEmit=function(i){if(this.canEmit())return this.emit(i);this.state=wi},r.canEmit=function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(wi|lc)))return!1;i++}return!0},r.recognize=function(i){var n=Xa({},i);if(!oc(this.options.enable,[this,n])){this.reset(),this.state=wi;return}this.state&(sn|bu|wi)&&(this.state=lc),this.state=this.process(n),this.state&(kr|ps|Wn|bu)&&this.tryEmit(n)},r.process=function(i){},r.getTouchAction=function(){},r.reset=function(){},e}(),Kp=function(e){Pr(r,e);function r(i){var n;return i===void 0&&(i={}),n=e.call(this,Xr({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},i))||this,n.pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}var t=r.prototype;return t.getTouchAction=function(){return[Wp]},t.process=function(n){var a=this,o=this.options,s=n.pointers.length===o.pointers,l=n.distance<o.threshold,u=n.deltaTime<o.time;if(this.reset(),n.eventType&Ae&&this.count===0)return this.failTimeout();if(l&&u&&s){if(n.eventType!==re)return this.failTimeout();var h=this.pTime?n.timeStamp-this.pTime<o.interval:!0,f=!this.pCenter||sc(this.pCenter,n.center)<o.posThreshold;this.pTime=n.timeStamp,this.pCenter=n.center,!f||!h?this.count=1:this.count+=1,this._input=n;var c=this.count%o.taps;if(c===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){a.state=sn,a.tryEmit()},o.interval),kr):sn}return wi},t.failTimeout=function(){var n=this;return this._timer=setTimeout(function(){n.state=wi},this.options.interval),wi},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===sn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(Tu),ms=function(e){Pr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Xr({pointers:1},i))||this}var t=r.prototype;return t.attrTest=function(n){var a=this.options.pointers;return a===0||n.pointers.length===a},t.process=function(n){var a=this.state,o=n.eventType,s=a&(kr|ps),l=this.attrTest(n);return s&&(o&Ze||!l)?a|bu:s||l?o&re?a|Wn:a&kr?a|ps:kr:wi},r}(Tu);function yE(e){return e===cs?"down":e===mu?"up":e===vu?"left":e===pu?"right":""}var Zp=function(e){Pr(r,e);function r(i){var n;return i===void 0&&(i={}),n=e.call(this,Xr({event:"pan",threshold:10,pointers:1,direction:iE},i))||this,n.pX=null,n.pY=null,n}var t=r.prototype;return t.getTouchAction=function(){var n=this.options.direction,a=[];return n&_i&&a.push(cu),n&Qa&&a.push(fu),a},t.directionTest=function(n){var a=this.options,o=!0,s=n.distance,l=n.direction,u=n.deltaX,h=n.deltaY;return l&a.direction||(a.direction&_i?(l=u===0?nc:u<0?vu:pu,o=u!==this.pX,s=Math.abs(n.deltaX)):(l=h===0?nc:h<0?mu:cs,o=h!==this.pY,s=Math.abs(n.deltaY))),n.direction=l,o&&s>a.threshold&&l&a.direction},t.attrTest=function(n){return ms.prototype.attrTest.call(this,n)&&(this.state&kr||!(this.state&kr)&&this.directionTest(n))},t.emit=function(n){this.pX=n.deltaX,this.pY=n.deltaY;var a=yE(n.direction);a&&(n.additionalEvent=this.options.event+a),e.prototype.emit.call(this,n)},r}(ms),_E=function(e){Pr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Xr({event:"swipe",threshold:10,velocity:.3,direction:_i|Qa,pointers:1},i))||this}var t=r.prototype;return t.getTouchAction=function(){return Zp.prototype.getTouchAction.call(this)},t.attrTest=function(n){var a=this.options.direction,o;return a&(_i|Qa)?o=n.overallVelocity:a&_i?o=n.overallVelocityX:a&Qa&&(o=n.overallVelocityY),e.prototype.attrTest.call(this,n)&&a&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers===this.options.pointers&&Ka(o)>this.options.velocity&&n.eventType&re},t.emit=function(n){var a=yE(n.offsetDirection);a&&this.manager.emit(this.options.event+a,n),this.manager.emit(this.options.event,n)},r}(ms),wE=function(e){Pr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Xr({event:"pinch",threshold:0,pointers:2},i))||this}var t=r.prototype;return t.getTouchAction=function(){return[Za]},t.attrTest=function(n){return e.prototype.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&kr)},t.emit=function(n){if(n.scale!==1){var a=n.scale<1?"in":"out";n.additionalEvent=this.options.event+a}e.prototype.emit.call(this,n)},r}(ms),bE=function(e){Pr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Xr({event:"rotate",threshold:0,pointers:2},i))||this}var t=r.prototype;return t.getTouchAction=function(){return[Za]},t.attrTest=function(n){return e.prototype.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&kr)},r}(ms),TE=function(e){Pr(r,e);function r(i){var n;return i===void 0&&(i={}),n=e.call(this,Xr({event:"press",pointers:1,time:251,threshold:9},i))||this,n._timer=null,n._input=null,n}var t=r.prototype;return t.getTouchAction=function(){return[eE]},t.process=function(n){var a=this,o=this.options,s=n.pointers.length===o.pointers,l=n.distance<o.threshold,u=n.deltaTime>o.time;if(this._input=n,!l||!s||n.eventType&(re|Ze)&&!u)this.reset();else if(n.eventType&Ae)this.reset(),this._timer=setTimeout(function(){a.state=sn,a.tryEmit()},o.time);else if(n.eventType&re)return sn;return wi},t.reset=function(){clearTimeout(this._timer)},t.emit=function(n){this.state===sn&&(n&&n.eventType&re?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=jp(),this.manager.emit(this.options.event,this._input)))},r}(Tu),EE={domEvents:!1,touchAction:tE,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},SE=[[bE,{enable:!1}],[wE,{enable:!1},["rotate"]],[_E,{direction:_i}],[Zp,{direction:_i},["swipe"]],[Kp],[Kp,{event:"doubletap",taps:2},["tap"]],[TE]],Az=1,xE=2;function CE(e,r){var t=e.element;if(!!t.style){var i;on(e.options.cssProps,function(n,a){i=rc(t.style,a),r?(e.oldCssProps[i]=t.style[i],t.style[i]=n):t.style[i]=e.oldCssProps[i]||""}),r||(e.oldCssProps={})}}function Mz(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var OE=function(){function e(t,i){var n=this;this.options=Xa({},EE,i||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=kz(this),this.touchAction=new aE(this,this.options.touchAction),CE(this,!0),on(this.options.recognizers,function(a){var o=n.add(new a[0](a[1]));a[2]&&o.recognizeWith(a[2]),a[3]&&o.requireFailure(a[3])},this)}var r=e.prototype;return r.set=function(i){return Xa(this.options,i),i.touchAction&&this.touchAction.update(),i.inputTarget&&(this.input.destroy(),this.input.target=i.inputTarget,this.input.init()),this},r.stop=function(i){this.session.stopped=i?xE:Az},r.recognize=function(i){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(i);var a,o=this.recognizers,s=n.curRecognizer;(!s||s&&s.state&sn)&&(n.curRecognizer=null,s=null);for(var l=0;l<o.length;)a=o[l],n.stopped!==xE&&(!s||a===s||a.canRecognizeWith(s))?a.recognize(i):a.reset(),!s&&a.state&(kr|ps|Wn)&&(n.curRecognizer=a,s=a),l++}},r.get=function(i){if(i instanceof Tu)return i;for(var n=this.recognizers,a=0;a<n.length;a++)if(n[a].options.event===i)return n[a];return null},r.add=function(i){if(vs(i,"add",this))return this;var n=this.get(i.options.event);return n&&this.remove(n),this.recognizers.push(i),i.manager=this,this.touchAction.update(),i},r.remove=function(i){if(vs(i,"remove",this))return this;var n=this.get(i);if(i){var a=this.recognizers,o=to(a,n);o!==-1&&(a.splice(o,1),this.touchAction.update())}return this},r.on=function(i,n){if(i===void 0||n===void 0)return this;var a=this.handlers;return on(gu(i),function(o){a[o]=a[o]||[],a[o].push(n)}),this},r.off=function(i,n){if(i===void 0)return this;var a=this.handlers;return on(gu(i),function(o){n?a[o]&&a[o].splice(to(a[o],n),1):delete a[o]}),this},r.emit=function(i,n){this.options.domEvents&&Mz(i,n);var a=this.handlers[i]&&this.handlers[i].slice();if(!(!a||!a.length)){n.type=i,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](n),o++}},r.destroy=function(){this.element&&CE(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),Lz={touchstart:Ae,touchmove:qa,touchend:re,touchcancel:Ze},Fz="touchstart",Nz="touchstart touchmove touchend touchcancel",$z=function(e){Pr(r,e);function r(){var i,n=r.prototype;return n.evTarget=Fz,n.evWin=Nz,i=e.apply(this,arguments)||this,i.started=!1,i}var t=r.prototype;return t.handler=function(n){var a=Lz[n.type];if(a===Ae&&(this.started=!0),!!this.started){var o=Gz.call(this,n,a);a&(re|Ze)&&o[0].length-o[1].length==0&&(this.started=!1),this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:du,srcEvent:n})}},r}(ds);function Gz(e,r){var t=wu(e.touches),i=wu(e.changedTouches);return r&(re|Ze)&&(t=zp(t.concat(i),"identifier",!0)),[t,i]}function IE(e,r,t){var i="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var n=new Error("get-stack-trace"),a=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,i,a),e.apply(this,arguments)}}var PE=IE(function(e,r,t){for(var i=Object.keys(r),n=0;n<i.length;)(!t||t&&e[i[n]]===void 0)&&(e[i[n]]=r[i[n]]),n++;return e},"extend","Use `assign`."),Yz=IE(function(e,r){return PE(e,r,!0)},"merge","Use `assign`.");function jz(e,r,t){var i=r.prototype,n;n=e.prototype=Object.create(i),n.constructor=e,n._super=i,t&&Xa(n,t)}function kE(e,r){return function(){return e.apply(r,arguments)}}var DE=function(){var e=function(t,i){return i===void 0&&(i={}),new OE(t,Xr({recognizers:SE.concat()},i))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=iE,e.DIRECTION_DOWN=cs,e.DIRECTION_LEFT=vu,e.DIRECTION_RIGHT=pu,e.DIRECTION_UP=mu,e.DIRECTION_HORIZONTAL=_i,e.DIRECTION_VERTICAL=Qa,e.DIRECTION_NONE=nc,e.DIRECTION_DOWN=cs,e.INPUT_START=Ae,e.INPUT_MOVE=qa,e.INPUT_END=re,e.INPUT_CANCEL=Ze,e.STATE_POSSIBLE=lc,e.STATE_BEGAN=kr,e.STATE_CHANGED=ps,e.STATE_ENDED=Wn,e.STATE_RECOGNIZED=sn,e.STATE_CANCELLED=bu,e.STATE_FAILED=wi,e.Manager=OE,e.Input=ds,e.TouchAction=aE,e.TouchInput=Vp,e.MouseInput=Xp,e.PointerEventInput=dE,e.TouchMouseInput=mE,e.SingleTouchInput=$z,e.Recognizer=Tu,e.AttrRecognizer=ms,e.Tap=Kp,e.Pan=Zp,e.Swipe=_E,e.Pinch=wE,e.Rotate=bE,e.Press=TE,e.on=yu,e.off=_u,e.each=on,e.merge=Yz,e.extend=PE,e.bindFn=kE,e.assign=Xa,e.inherit=jz,e.bindFn=kE,e.prefixed=rc,e.toArray=wu,e.inArray=to,e.uniqueArray=zp,e.splitStr=gu,e.boolOrFn=oc,e.hasParent=Bp,e.addEventListeners=yu,e.removeEventListeners=_u,e.defaults=Xa({},EE,{preset:SE}),e}();function RE(e,r){var t=pe(e);if(Xf){var i=Xf(e);r&&(i=mt(i).call(i,function(n){return Kf(e,n).enumerable})),t.push.apply(t,i)}return t}function AE(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){var i;G(i=RE(Object(t),!0)).call(i,function(a){pT(e,a,t[a])})}else if(Zf)vT(e,Zf(t));else{var n;G(n=RE(Object(t))).call(n,function(a){Rp(e,a,Kf(t,a))})}}return e}function qp(e,r){var t=typeof za!="undefined"&&Yn(e)||e["@@iterator"];if(!t){if(ct(e)||(t=Wz(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function Wz(e,r){var t;if(!!e){if(typeof e=="string")return ME(e,r);var i=Or(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return ls(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ME(e,r)}}function ME(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var Qp=za("DELETE");function Hz(e){for(var r,t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Jp.apply(void 0,Ut(r=[{},e]).call(r,i))}function Jp(){var e=hc.apply(void 0,arguments);return FE(e),e}function hc(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<2)return r[0];if(r.length>2){var i;return hc.apply(void 0,Ut(i=[Jp(r[0],r[1])]).call(i,yi(Or(r).call(r,2))))}var n=r[0],a=r[1],o=qp(ZB(a)),s;try{for(o.s();!(s=o.n()).done;){var l=s.value;Object.prototype.propertyIsEnumerable.call(a,l)&&(a[l]===Qp?delete n[l]:n[l]!==null&&a[l]!==null&&at(n[l])==="object"&&at(a[l])==="object"&&!ct(n[l])&&!ct(a[l])?n[l]=hc(n[l],a[l]):n[l]=LE(a[l]))}}catch(u){o.e(u)}finally{o.f()}return n}function LE(e){return ct(e)?ve(e).call(e,function(r){return LE(r)}):at(e)==="object"&&e!==null?hc({},e):e}function FE(e){for(var r=0,t=pe(e);r<t.length;r++){var i=t[r];e[i]===Qp?delete e[i]:at(e[i])==="object"&&e[i]!==null&&FE(e[i])}}function Bz(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return Uz(r.length?r:[lr()])}function Uz(e){var r=zz(e),t=GB(r,3),i=t[0],n=t[1],a=t[2],o=1,s=function(){var u=2091639*i+o*23283064365386963e-26;return i=n,n=a,a=u-(o=u|0)};return s.uint32=function(){return s()*4294967296},s.fract53=function(){return s()+(s()*2097152|0)*11102230246251565e-32},s.algorithm="Alea",s.seed=e,s.version="0.9",s}function zz(){for(var e=Vz(),r=e(" "),t=e(" "),i=e(" "),n=0;n<arguments.length;n++)r-=e(n<0||arguments.length<=n?void 0:arguments[n]),r<0&&(r+=1),t-=e(n<0||arguments.length<=n?void 0:arguments[n]),t<0&&(t+=1),i-=e(n<0||arguments.length<=n?void 0:arguments[n]),i<0&&(i+=1);return[r,t,i]}function Vz(){var e=4022871197;return function(r){for(var t=r.toString(),i=0;i<t.length;i++){e+=t.charCodeAt(i);var n=.02519603282416938*e;e=n>>>0,n-=e,n*=e,e=n>>>0,n-=e,e+=n*4294967296}return(e>>>0)*23283064365386963e-26}}function Xz(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var tm=typeof window!="undefined"?window.Hammer||DE:function(){return Xz()};function bi(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var i=tm(this._dom.overlay);i.on("tap",D(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){i.destroy()});var n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];G(n).call(n,function(a){i.on(a,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(a){Kz(a.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(a){("key"in a?a.key==="Escape":a.keyCode===27)&&r.deactivate()}}Gp(bi.prototype);bi.current=null;bi.prototype.destroy=function(){var e,r;this.deactivate();var t=qp(iU(e=Ir(r=this._cleanupQueue).call(r,0)).call(e)),i;try{for(t.s();!(i=t.n()).done;){var n=i.value;n()}}catch(a){t.e(a)}finally{t.f()}};bi.prototype.activate=function(){bi.current&&bi.current.deactivate(),bi.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};bi.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};bi.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function Kz(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var Zz=/^\/?Date\((-?\d+)/i,qz=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Qz=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Jz=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,tV=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Eu(e){return e instanceof Number||typeof e=="number"}function NE(e){if(e)for(;e.hasChildNodes()===!0;){var r=e.firstChild;r&&(NE(r),e.removeChild(r))}}function fr(e){return e instanceof String||typeof e=="string"}function em(e){return at(e)==="object"&&e!==null}function eV(e){if(e instanceof Date)return!0;if(fr(e)){var r=Zz.exec(e);if(r)return!0;if(!isNaN(Date.parse(e)))return!0}return!1}function eo(e,r,t,i){var n=!1;i===!0&&(n=r[t]===null&&e[t]!==void 0),n?delete e[t]:e[t]=r[t]}function $E(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(var i in e)if(r[i]!==void 0)if(r[i]===null||at(r[i])!=="object")eo(e,r,i,t);else{var n=e[i],a=r[i];em(n)&&em(a)&&$E(n,a,t)}}var rV=Va;function iV(e,r){if(!ct(e))throw new Error("Array with property names expected as first argument");for(var t=arguments.length,i=new Array(t>2?t-2:0),n=2;n<t;n++)i[n-2]=arguments[n];for(var a=0,o=i;a<o.length;a++)for(var s=o[a],l=0;l<e.length;l++){var u=e[l];s&&Object.prototype.hasOwnProperty.call(s,u)&&(r[u]=s[u])}return r}function nV(e,r,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(ct(t))throw new TypeError("Arrays are not supported by deepExtend");for(var n=0;n<e.length;n++){var a=e[n];if(Object.prototype.hasOwnProperty.call(t,a))if(t[a]&&t[a].constructor===Object)r[a]===void 0&&(r[a]={}),r[a].constructor===Object?Su(r[a],t[a],!1,i):eo(r,t,a,i);else{if(ct(t[a]))throw new TypeError("Arrays are not supported by deepExtend");eo(r,t,a,i)}}return r}function aV(e,r,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(ct(t))throw new TypeError("Arrays are not supported by deepExtend");for(var n in t)if(!!Object.prototype.hasOwnProperty.call(t,n)&&!jn(e).call(e,n))if(t[n]&&t[n].constructor===Object)r[n]===void 0&&(r[n]={}),r[n].constructor===Object?Su(r[n],t[n]):eo(r,t,n,i);else if(ct(t[n])){r[n]=[];for(var a=0;a<t[n].length;a++)r[n].push(t[n][a])}else eo(r,t,n,i);return r}function Su(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)||t===!0)if(at(r[n])==="object"&&r[n]!==null&&$T(r[n])===Object.prototype)e[n]===void 0?e[n]=Su({},r[n],t):at(e[n])==="object"&&e[n]!==null&&$T(e[n])===Object.prototype?Su(e[n],r[n],t):eo(e,r,n,i);else if(ct(r[n])){var a;e[n]=Or(a=r[n]).call(a)}else eo(e,r,n,i);return e}function oV(e,r){if(e.length!==r.length)return!1;for(var t=0,i=e.length;t<i;t++)if(e[t]!=r[t])return!1;return!0}function xu(e){var r=at(e);return r==="object"?e===null?"null":e instanceof Boolean?"Boolean":e instanceof Number?"Number":e instanceof String?"String":ct(e)?"Array":e instanceof Date?"Date":"Object":r==="number"?"Number":r==="boolean"?"Boolean":r==="string"?"String":r===void 0?"undefined":r}function Cu(e,r){var t;return Ut(t=[]).call(t,yi(e),[r])}function GE(e){return Or(e).call(e)}function sV(e){return e.getBoundingClientRect().left}function lV(e){return e.getBoundingClientRect().right}function uV(e){return e.getBoundingClientRect().top}function hV(e,r){var t=e.className.split(" "),i=r.split(" ");t=Ut(t).call(t,mt(i).call(i,function(n){return!jn(t).call(t,n)})),e.className=t.join(" ")}function fV(e,r){var t=e.className.split(" "),i=r.split(" ");t=mt(t).call(t,function(n){return!jn(i).call(i,n)}),e.className=t.join(" ")}function cV(e,r){if(ct(e))for(var t=e.length,i=0;i<t;i++)r(e[i],i,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r(e[n],n,e)}var dV=YT;function vV(e,r,t){return e[r]!==t?(e[r]=t,!0):!1}function pV(e){var r=!1;return function(){r||(r=!0,requestAnimationFrame(function(){r=!1,e()}))}}function mV(e,r,t,i){if(e.addEventListener){var n;i===void 0&&(i=!1),r==="mousewheel"&&jn(n=navigator.userAgent).call(n,"Firefox")&&(r="DOMMouseScroll"),e.addEventListener(r,t,i)}else e.attachEvent("on"+r,t)}function gV(e,r,t,i){if(e.removeEventListener){var n;i===void 0&&(i=!1),r==="mousewheel"&&jn(n=navigator.userAgent).call(n,"Firefox")&&(r="DOMMouseScroll"),e.removeEventListener(r,t,i)}else e.detachEvent("on"+r,t)}function yV(e){e||(e=window.event),e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}function _V(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event,r=null;return e&&(e.target?r=e.target:e.srcElement&&(r=e.srcElement)),!(r instanceof Element)||r.nodeType!=null&&r.nodeType==3&&(r=r.parentNode,!(r instanceof Element))?null:r}function wV(e,r){for(var t=e;t;){if(t===r)return!0;if(t.parentNode)t=t.parentNode;else return!1}return!1}var bV={asBoolean:function(r,t){return typeof r=="function"&&(r=r()),r!=null?r!=!1:t||null},asNumber:function(r,t){return typeof r=="function"&&(r=r()),r!=null?Number(r)||t||null:t||null},asString:function(r,t){return typeof r=="function"&&(r=r()),r!=null?String(r):t||null},asSize:function(r,t){return typeof r=="function"&&(r=r()),fr(r)?r:Eu(r)?r+"px":t||null},asElement:function(r,t){return typeof r=="function"&&(r=r()),r||t||null}};function fc(e){var r;switch(e.length){case 3:case 4:return r=Qz.exec(e),r?{r:ur(r[1]+r[1],16),g:ur(r[2]+r[2],16),b:ur(r[3]+r[3],16)}:null;case 6:case 7:return r=qz.exec(e),r?{r:ur(r[1],16),g:ur(r[2],16),b:ur(r[3],16)}:null;default:return null}}function TV(e,r){if(jn(e).call(e,"rgba"))return e;if(jn(e).call(e,"rgb")){var t=e.substr(Pt(e).call(e,"(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+r+")"}else{var i=fc(e);return i==null?e:"rgba("+i.r+","+i.g+","+i.b+","+r+")"}}function rm(e,r,t){var i;return"#"+Or(i=((1<<24)+(e<<16)+(r<<8)+t).toString(16)).call(i,1)}function EV(e,r){if(fr(e)){var t=e;if(am(t)){var i,n=ve(i=t.substr(4).substr(0,t.length-5).split(",")).call(i,function(c){return ur(c)});t=rm(n[0],n[1],n[2])}if(nm(t)===!0){var a=YE(t),o={h:a.h,s:a.s*.8,v:Math.min(1,a.v*1.02)},s={h:a.h,s:Math.min(1,a.s*1.25),v:a.v*.8},l=im(s.h,s.s,s.v),u=im(o.h,o.s,o.v);return{background:t,border:l,highlight:{background:u,border:l},hover:{background:u,border:l}}}else return{background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else if(r){var h={background:e.background||r.background,border:e.border||r.border,highlight:fr(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||r.highlight.background,border:e.highlight&&e.highlight.border||r.highlight.border},hover:fr(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||r.hover.border,background:e.hover&&e.hover.background||r.hover.background}};return h}else{var f={background:e.background||void 0,border:e.border||void 0,highlight:fr(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||void 0,border:e.highlight&&e.highlight.border||void 0},hover:fr(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||void 0,background:e.hover&&e.hover.background||void 0}};return f}}function gs(e,r,t){e=e/255,r=r/255,t=t/255;var i=Math.min(e,Math.min(r,t)),n=Math.max(e,Math.max(r,t));if(i===n)return{h:0,s:0,v:i};var a=e===i?r-t:t===i?e-r:t-e,o=e===i?3:t===i?1:5,s=60*(o-a/(n-i))/360,l=(n-i)/n,u=n;return{h:s,s:l,v:u}}var ys={split:function(r){var t,i={};return G(t=r.split(";")).call(t,function(n){if($p(n).call(n)!=""){var a,o,s=n.split(":"),l=$p(a=s[0]).call(a),u=$p(o=s[1]).call(o);i[l]=u}}),i},join:function(r){var t;return ve(t=pe(r)).call(t,function(i){return i+": "+r[i]}).join("; ")}};function SV(e,r){var t=ys.split(e.style.cssText),i=ys.split(r),n=AE(AE({},t),i);e.style.cssText=ys.join(n)}function xV(e,r){var t=ys.split(e.style.cssText),i=ys.split(r);for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&delete t[n];e.style.cssText=ys.join(t)}function Ou(e,r,t){var i,n,a,o=Math.floor(e*6),s=e*6-o,l=t*(1-r),u=t*(1-s*r),h=t*(1-(1-s)*r);switch(o%6){case 0:i=t,n=h,a=l;break;case 1:i=u,n=t,a=l;break;case 2:i=l,n=t,a=h;break;case 3:i=l,n=u,a=t;break;case 4:i=h,n=l,a=t;break;case 5:i=t,n=l,a=u;break}return{r:Math.floor(i*255),g:Math.floor(n*255),b:Math.floor(a*255)}}function im(e,r,t){var i=Ou(e,r,t);return rm(i.r,i.g,i.b)}function YE(e){var r=fc(e);if(!r)throw new TypeError("'".concat(e,"' is not a valid color."));return gs(r.r,r.g,r.b)}function nm(e){var r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);return r}function am(e){return Jz.test(e)}function jE(e){return tV.test(e)}function CV(e,r){if(r!==null&&at(r)==="object"){for(var t=Jf(r),i=0;i<e.length;i++)Object.prototype.hasOwnProperty.call(r,e[i])&&at(r[e[i]])=="object"&&(t[e[i]]=om(r[e[i]]));return t}else return null}function om(e){if(e===null||at(e)!=="object")return null;if(e instanceof Element)return e;var r=Jf(e);for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&at(e[t])=="object"&&(r[t]=om(e[t]));return r}function OV(e,r){for(var t=0;t<e.length;t++){var i=e[t],n=void 0;for(n=t;n>0&&r(i,e[n-1])<0;n--)e[n]=e[n-1];e[n]=i}return e}function IV(e,r,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=function(v){return v!=null},a=function(v){return v!==null&&at(v)==="object"},o=function(v){for(var m in v)if(Object.prototype.hasOwnProperty.call(v,m))return!1;return!0};if(!a(e))throw new Error("Parameter mergeTarget must be an object");if(!a(r))throw new Error("Parameter options must be an object");if(!n(t))throw new Error("Parameter option must have a value");if(!a(i))throw new Error("Parameter globalOptions must be an object");var s=function(v,m,p){a(v[p])||(v[p]={});var g=m[p],_=v[p];for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(_[y]=g[y])},l=r[t],u=a(i)&&!o(i),h=u?i[t]:void 0,f=h?h.enabled:void 0;if(l!==void 0){if(typeof l=="boolean"){a(e[t])||(e[t]={}),e[t].enabled=l;return}if(l===null&&!a(e[t]))if(n(h))e[t]=Jf(h);else return;if(!!a(l)){var c=!0;l.enabled!==void 0?c=l.enabled:f!==void 0&&(c=h.enabled),s(e,r,t),e[t].enabled=c}}}function PV(e,r,t,i){for(var n=1e4,a=0,o=0,s=e.length-1;o<=s&&a<n;){var l=Math.floor((o+s)/2),u=e[l],h=i===void 0?u[t]:u[t][i],f=r(h);if(f==0)return l;f==-1?o=l+1:s=l-1,a++}return-1}function kV(e,r,t,i,n){var a=1e4,o=0,s=0,l=e.length-1,u,h,f,c;for(n=n!=null?n:function(d,v){return d==v?0:d<v?-1:1};s<=l&&o<a;){if(c=Math.floor(.5*(l+s)),u=e[Math.max(0,c-1)][t],h=e[c][t],f=e[Math.min(e.length-1,c+1)][t],n(h,r)==0)return c;if(n(u,r)<0&&n(h,r)>0)return i=="before"?Math.max(0,c-1):c;if(n(h,r)<0&&n(f,r)>0)return i=="before"?c:Math.min(e.length-1,c+1);n(h,r)<0?s=c+1:l=c-1,o++}return-1}var DV={linear:function(r){return r},easeInQuad:function(r){return r*r},easeOutQuad:function(r){return r*(2-r)},easeInOutQuad:function(r){return r<.5?2*r*r:-1+(4-2*r)*r},easeInCubic:function(r){return r*r*r},easeOutCubic:function(r){return--r*r*r+1},easeInOutCubic:function(r){return r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1},easeInQuart:function(r){return r*r*r*r},easeOutQuart:function(r){return 1- --r*r*r*r},easeInOutQuart:function(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r},easeInQuint:function(r){return r*r*r*r*r},easeOutQuint:function(r){return 1+--r*r*r*r*r},easeInOutQuint:function(r){return r<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r}};function RV(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var r=document.createElement("div");r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.visibility="hidden",r.style.width="200px",r.style.height="150px",r.style.overflow="hidden",r.appendChild(e),document.body.appendChild(r);var t=e.offsetWidth;r.style.overflow="scroll";var i=e.offsetWidth;return t==i&&(i=r.clientWidth),document.body.removeChild(r),t-i}function AV(e,r){var t;ct(r)||(r=[r]);var i=qp(e),n;try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a){t=a[r[0]];for(var o=1;o<r.length;o++)t&&(t=t[r[o]]);if(typeof t!="undefined")break}}}catch(s){i.e(s)}finally{i.f()}return t}var MV={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},WE=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;Ct(this,e),this.pixelRatio=r,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return Ot(e,[{key:"insertTo",value:function(t){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if(typeof t=="function")this.updateCallback=t;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(t){if(typeof t=="function")this.closeCallback=t;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(t){if(typeof t=="string")return MV[t]}},{key:"setColor",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t!=="none"){var n,a=this._isColorString(t);if(a!==void 0&&(t=a),fr(t)===!0){if(am(t)===!0){var o=t.substr(4).substr(0,t.length-5).split(",");n={r:o[0],g:o[1],b:o[2],a:1}}else if(jE(t)===!0){var s=t.substr(5).substr(0,t.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(nm(t)===!0){var l=fc(t);n={r:l.r,g:l.g,b:l.b,a:1}}}else if(t instanceof Object&&t.r!==void 0&&t.g!==void 0&&t.b!==void 0){var u=t.a!==void 0?t.a:"1.0";n={r:t.r,g:t.g,b:t.b,a:u}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+hr(t));this._setColor(n,i)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i===!0&&(this.previousColor=Va({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Re(function(){t.closeCallback!==void 0&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i===!0&&(this.initialColor=Va({},t)),this.color=t;var n=gs(t.r,t.g,t.b),a=2*Math.PI,o=this.r*n.s,s=this.centerCoordinates.x+o*Math.sin(a*n.h),l=this.centerCoordinates.y+o*Math.cos(a*n.h);this.colorPickerSelector.style.left=s-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var i=gs(this.color.r,this.color.g,this.color.b);i.v=t/100;var n=Ou(i.h,i.s,i.v);n.a=this.color.a,this.color=n,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,i=gs(t.r,t.g,t.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var a=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,a,o),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-i.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),ZT(n).call(n),this.brightnessRange.value=100*i.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,i,n,a;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var s=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(u){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(u){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var l=this;this.opacityRange.onchange=function(){l._setOpacity(this.value)},this.opacityRange.oninput=function(){l._setOpacity(this.value)},this.brightnessRange.onchange=function(){l._setBrightness(this.value)},this.brightnessRange.oninput=function(){l._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=D(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=D(i=this._apply).call(i,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=D(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=D(a=this._loadLast).call(a,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new tm(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",function(i){i.isFirst&&t._moveSelector(i)}),this.hammer.on("tap",function(i){t._moveSelector(i)}),this.hammer.on("panstart",function(i){t._moveSelector(i)}),this.hammer.on("panmove",function(i){t._moveSelector(i)}),this.hammer.on("panend",function(i){t._moveSelector(i)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,i,n);var a,o,s,l;this.centerCoordinates={x:i*.5,y:n*.5},this.r=.49*i;var u=2*Math.PI/360,h=1/360,f=1/this.r,c;for(s=0;s<360;s++)for(l=0;l<this.r;l++)a=this.centerCoordinates.x+l*Math.sin(u*s),o=this.centerCoordinates.y+l*Math.cos(u*s),c=Ou(s*h,l*f,1),t.fillStyle="rgb("+c.r+","+c.g+","+c.b+")",t.fillRect(a-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,i,n)}this.generated=!0}},{key:"_moveSelector",value:function(t){var i=this.colorPickerDiv.getBoundingClientRect(),n=t.center.x-i.left,a=t.center.y-i.top,o=.5*this.colorPickerDiv.clientHeight,s=.5*this.colorPickerDiv.clientWidth,l=n-s,u=a-o,h=Math.atan2(l,u),f=.98*Math.min(Math.sqrt(l*l+u*u),s),c=Math.cos(h)*f+o,d=Math.sin(h)*f+s;this.colorPickerSelector.style.top=c-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=d-.5*this.colorPickerSelector.clientWidth+"px";var v=h/(2*Math.PI);v=v<0?v+1:v;var m=f/this.r,p=gs(this.color.r,this.color.g,this.color.b);p.h=v,p.s=m;var g=Ou(p.h,p.s,p.v);g.a=this.color.a,this.color=g,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}();function sm(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<1)throw new TypeError("Invalid arguments.");if(r.length===1)return document.createTextNode(r[0]);var i=document.createElement(r[0]);return i.appendChild(sm.apply(void 0,yi(Or(r).call(r,1)))),i}var LV=function(){function e(r,t,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return!1};Ct(this,e),this.parent=r,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=a,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Va(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new WE(n),this.wrapper=void 0}return Ot(e,[{key:"setOptions",value:function(t){if(t!==void 0){this.popupHistory={},this._removePopup();var i=!0;if(typeof t=="string")this.options.filter=t;else if(ct(t))this.options.filter=t.join();else if(at(t)==="object"){if(t==null)throw new TypeError("options cannot be null");t.container!==void 0&&(this.options.container=t.container),mt(t)!==void 0&&(this.options.filter=mt(t)),t.showButton!==void 0&&(this.options.showButton=t.showButton),t.enabled!==void 0&&(i=t.enabled)}else typeof t=="boolean"?(this.options.filter=!0,i=t):typeof t=="function"&&(this.options.filter=t,i=!0);mt(this.options)===!1&&(i=!1),this.options.enabled=i}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=mt(this.options),i=0,n=!1;for(var a in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,a)&&(this.allowCreation=!1,n=!1,typeof t=="function"?(n=t(a,[]),n=n||this._handleObject(this.configureOptions[a],[a],!0)):(t===!0||Pt(t).call(t,a)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,i>0&&this._makeItem([]),this._makeHeader(a),this._handleObject(this.configureOptions[a],[a])),i++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var i=this.moduleOptions,n=0;n<t.length;n++)if(i[t[n]]!==void 0)i=i[t[n]];else{i=void 0;break}return i}},{key:"_makeItem",value:function(t){if(this.allowCreation===!0){var i=document.createElement("div");i.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return G(a).call(a,function(s){i.appendChild(s)}),this.domElements.push(i),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var i=document.createElement("div");i.className="vis-configuration vis-config-header",i.innerText=t,this._makeItem([],i)}},{key:"_makeLabel",value:function(t,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=document.createElement("div");if(a.className="vis-configuration vis-config-label vis-config-s"+i.length,n===!0){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(sm("i","b",t))}else a.innerText=t+":";return a}},{key:"_makeDropdown",value:function(t,i,n){var a=document.createElement("select");a.className="vis-configuration vis-config-select";var o=0;i!==void 0&&Pt(t).call(t,i)!==-1&&(o=Pt(t).call(t,i));for(var s=0;s<t.length;s++){var l=document.createElement("option");l.value=t[s],s===o&&(l.selected="selected"),l.innerText=t[s],a.appendChild(l)}var u=this;a.onchange=function(){u._update(this.value,n)};var h=this._makeLabel(n[n.length-1],n);this._makeItem(n,h,a)}},{key:"_makeRange",value:function(t,i,n){var a=t[0],o=t[1],s=t[2],l=t[3],u=document.createElement("input");u.className="vis-configuration vis-config-range";try{u.type="range",u.min=o,u.max=s}catch(g){}u.step=l;var h="",f=0;if(i!==void 0){var c=1.2;i<0&&i*c<o?(u.min=Math.ceil(i*c),f=u.min,h="range increased"):i/c<o&&(u.min=Math.ceil(i/c),f=u.min,h="range increased"),i*c>s&&s!==1&&(u.max=Math.ceil(i*c),f=u.max,h="range increased"),u.value=i}else u.value=a;var d=document.createElement("input");d.className="vis-configuration vis-config-rangeinput",d.value=u.value;var v=this;u.onchange=function(){d.value=this.value,v._update(Number(this.value),n)},u.oninput=function(){d.value=this.value};var m=this._makeLabel(n[n.length-1],n),p=this._makeItem(n,m,u,d);h!==""&&this.popupHistory[p]!==f&&(this.popupHistory[p]=f,this._setupPopup(h,p))}},{key:"_makeButton",value:function(){var t=this;if(this.options.showButton===!0){var i=document.createElement("div");i.className="vis-configuration vis-config-button",i.innerText="generate options",i.onclick=function(){t._printOptions()},i.onmouseover=function(){i.className="vis-configuration vis-config-button hover"},i.onmouseout=function(){i.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(i)}}},{key:"_setupPopup",value:function(t,i){var n=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var a=document.createElement("div");a.id="vis-configuration-popup",a.className="vis-configuration-popup",a.innerText=t,a.onclick=function(){n._removePopup()},this.popupCounter+=1,this.popupDiv={html:a,index:i}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(this.popupDiv.html!==void 0){var i=this.domElements[this.popupDiv.index],n=i.getBoundingClientRect();this.popupDiv.html.style.left=n.left+"px",this.popupDiv.html.style.top=n.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Re(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Re(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,i,n){var a=document.createElement("input");a.type="checkbox",a.className="vis-configuration vis-config-checkbox",a.checked=t,i!==void 0&&(a.checked=i,i!==t&&(at(t)==="object"?i!==t.enabled&&this.changedOptions.push({path:n,value:i}):this.changedOptions.push({path:n,value:i})));var o=this;a.onchange=function(){o._update(this.checked,n)};var s=this._makeLabel(n[n.length-1],n);this._makeItem(n,s,a)}},{key:"_makeTextInput",value:function(t,i,n){var a=document.createElement("input");a.type="text",a.className="vis-configuration vis-config-text",a.value=i,i!==t&&this.changedOptions.push({path:n,value:i});var o=this;a.onchange=function(){o._update(this.value,n)};var s=this._makeLabel(n[n.length-1],n);this._makeItem(n,s,a)}},{key:"_makeColorField",value:function(t,i,n){var a=this,o=t[1],s=document.createElement("div");i=i===void 0?o:i,i!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=i):s.className="vis-configuration vis-config-colorBlock none",i=i===void 0?o:i,s.onclick=function(){a._showColorPicker(i,s,n)};var l=this._makeLabel(n[n.length-1],n);this._makeItem(n,l,s)}},{key:"_showColorPicker",value:function(t,i,n){var a=this;i.onclick=function(){},this.colorPicker.insertTo(i),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(o){var s="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";i.style.backgroundColor=s,a._update(s,n)}),this.colorPicker.setCloseCallback(function(){i.onclick=function(){a._showColorPicker(t,i,n)}})}},{key:"_handleObject",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=!1,o=mt(this.options),s=!1;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){a=!0;var u=t[l],h=Cu(i,l);if(typeof o=="function"&&(a=o(l,i),a===!1&&!ct(u)&&typeof u!="string"&&typeof u!="boolean"&&u instanceof Object&&(this.allowCreation=!1,a=this._handleObject(u,h,!0),this.allowCreation=n===!1)),a!==!1){s=!0;var f=this._getValue(h);if(ct(u))this._handleArray(u,f,h);else if(typeof u=="string")this._makeTextInput(u,f,h);else if(typeof u=="boolean")this._makeCheckbox(u,f,h);else if(u instanceof Object){if(!this.hideOption(i,l,this.moduleOptions))if(u.enabled!==void 0){var c=Cu(h,"enabled"),d=this._getValue(c);if(d===!0){var v=this._makeLabel(l,h,!0);this._makeItem(h,v),s=this._handleObject(u,h)||s}else this._makeCheckbox(u,d,h)}else{var m=this._makeLabel(l,h,!0);this._makeItem(h,m),s=this._handleObject(u,h)||s}}else console.error("dont know how to handle",u,l,h)}}return s}},{key:"_handleArray",value:function(t,i,n){typeof t[0]=="string"&&t[0]==="color"?(this._makeColorField(t,i,n),t[1]!==i&&this.changedOptions.push({path:n,value:i})):typeof t[0]=="string"?(this._makeDropdown(t,i,n),t[0]!==i&&this.changedOptions.push({path:n,value:i})):typeof t[0]=="number"&&(this._makeRange(t,i,n),t[0]!==i&&this.changedOptions.push({path:n,value:Number(i)}))}},{key:"_update",value:function(t,i){var n=this._constructOptions(t,i);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}},{key:"_constructOptions",value:function(t,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n;t=t==="true"?!0:t,t=t==="false"?!1:t;for(var o=0;o<i.length;o++)i[o]!=="global"&&(a[i[o]]===void 0&&(a[i[o]]={}),o!==i.length-1?a=a[i[o]]:a[i[o]]=t);return n}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(sm("pre","const options = "+hr(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},i=0;i<this.changedOptions.length;i++)this._constructOptions(this.changedOptions[i].value,this.changedOptions[i].path,t);return t}}]),e}(),FV=function(){function e(r,t){Ct(this,e),this.container=r,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return Ot(e,[{key:"setPosition",value:function(t,i){this.x=ur(t),this.y=ur(i)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(t===void 0&&(t=!0),t===!0){var i=this.frame.clientHeight,n=this.frame.clientWidth,a=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,s=0,l=0;if(this.overflowMethod=="flip"){var u=!1,h=!0;this.y-i<this.padding&&(h=!1),this.x+n>o-this.padding&&(u=!0),u?s=this.x-n:s=this.x,h?l=this.y-i:l=this.y}else l=this.y-i,l+i+this.padding>a&&(l=a-i-this.padding),l<this.padding&&(l=this.padding),s=this.x,s+n+this.padding>o&&(s=o-n-this.padding),s<this.padding&&(s=this.padding);this.frame.style.left=s+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),Iu=!1,HE,lm="background: #FFeeee; color: #dd0000",NV=function(){function e(){Ct(this,e)}return Ot(e,null,[{key:"validate",value:function(t,i,n){Iu=!1,HE=i;var a=i;return n!==void 0&&(a=i[n]),e.parse(t,a,[]),Iu}},{key:"parse",value:function(t,i,n){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.check(a,t,i,n)}},{key:"check",value:function(t,i,n,a){if(n[t]===void 0&&n.__any__===void 0){e.getSuggestion(t,n,a);return}var o=t,s=!0;n[t]===void 0&&n.__any__!==void 0&&(o="__any__",s=e.getType(i[t])==="object");var l=n[o];s&&l.__type__!==void 0&&(l=l.__type__),e.checkFields(t,i,n,o,l,a)}},{key:"checkFields",value:function(t,i,n,a,o,s){var l=function(c){console.error("%c"+c+e.printLocation(s,t),lm)},u=e.getType(i[t]),h=o[u];h!==void 0?e.getType(h)==="array"&&Pt(h).call(h,i[t])===-1?(l('Invalid option detected in "'+t+'". Allowed values are:'+e.print(h)+' not "'+i[t]+'". '),Iu=!0):u==="object"&&a!=="__any__"&&(s=Cu(s,t),e.parse(i[t],n[a],s)):o.any===void 0&&(l('Invalid type received for "'+t+'". Expected: '+e.print(pe(o))+". Received ["+u+'] "'+i[t]+'"'),Iu=!0)}},{key:"getType",value:function(t){var i=at(t);return i==="object"?t===null?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":ct(t)?"array":t instanceof Date?"date":t.nodeType!==void 0?"dom":t._isAMomentObject===!0?"moment":"object":i==="number"?"number":i==="boolean"?"boolean":i==="string"?"string":i===void 0?"undefined":i}},{key:"getSuggestion",value:function(t,i,n){var a=e.findInOptions(t,i,n,!1),o=e.findInOptions(t,HE,[],!0),s=8,l=4,u;a.indexMatch!==void 0?u=" in "+e.printLocation(a.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+a.indexMatch+`"?

`:o.distance<=l&&a.distance>o.distance?u=" in "+e.printLocation(a.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""):a.distance<=s?u='. Did you mean "'+a.closestMatch+'"?'+e.printLocation(a.path,t):u=". Did you mean one of these: "+e.print(pe(i))+e.printLocation(n,t),console.error('%cUnknown option detected: "'+t+'"'+u,lm),Iu=!0}},{key:"findInOptions",value:function(t,i,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,s="",l=[],u=t.toLowerCase(),h=void 0;for(var f in i){var c=void 0;if(i[f].__type__!==void 0&&a===!0){var d=e.findInOptions(t,i[f],Cu(n,f));o>d.distance&&(s=d.closestMatch,l=d.path,o=d.distance,h=d.indexMatch)}else{var v;Pt(v=f.toLowerCase()).call(v,u)!==-1&&(h=f),c=e.levenshteinDistance(t,f),o>c&&(s=f,l=GE(n),o=c)}}return{closestMatch:s,path:l,distance:o,indexMatch:h}}},{key:"printLocation",value:function(t,i){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,a=`

`+n+`options = {
`,o=0;o<t.length;o++){for(var s=0;s<o+1;s++)a+="  ";a+=t[o]+`: {
`}for(var l=0;l<t.length+1;l++)a+="  ";a+=i+`
`;for(var u=0;u<t.length+1;u++){for(var h=0;h<t.length-u;h++)a+="  ";a+=`}
`}return a+`

`}},{key:"print",value:function(t){return hr(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,i){if(t.length===0)return i.length;if(i.length===0)return t.length;var n=[],a;for(a=0;a<=i.length;a++)n[a]=[a];var o;for(o=0;o<=t.length;o++)n[0][o]=o;for(a=1;a<=i.length;a++)for(o=1;o<=t.length;o++)i.charAt(a-1)==t.charAt(o-1)?n[a][o]=n[a-1][o-1]:n[a][o]=Math.min(n[a-1][o-1]+1,Math.min(n[a][o-1]+1,n[a-1][o]+1));return n[i.length][t.length]}}]),e}(),$V=bi,GV=WE,YV=LV,jV=tm,WV=FV,HV=lm,BV=NV,UV=Object.freeze({__proto__:null,Activator:$V,Alea:Bz,ColorPicker:GV,Configurator:YV,DELETE:Qp,HSVToHex:im,HSVToRGB:Ou,Hammer:jV,Popup:WV,RGBToHSV:gs,RGBToHex:rm,VALIDATOR_PRINT_STYLE:HV,Validator:BV,addClassName:hV,addCssText:SV,addEventListener:mV,binarySearchCustom:PV,binarySearchValue:kV,bridgeObject:om,copyAndExtendArray:Cu,copyArray:GE,deepExtend:Su,deepObjectAssign:Jp,easingFunctions:DV,equalArray:oV,extend:rV,fillIfDefined:$E,forEach:cV,getAbsoluteLeft:sV,getAbsoluteRight:lV,getAbsoluteTop:uV,getScrollBarWidth:RV,getTarget:_V,getType:xu,hasParent:wV,hexToHSV:YE,hexToRGB:fc,insertSort:OV,isDate:eV,isNumber:Eu,isObject:em,isString:fr,isValidHex:nm,isValidRGB:am,isValidRGBA:jE,mergeOptions:IV,option:bV,overrideOpacity:TV,parseColor:EV,preventDefault:yV,pureDeepObjectAssign:Hz,recursiveDOMDelete:NE,removeClassName:fV,removeCssText:xV,removeEventListener:gV,selectiveBridgeObject:CV,selectiveDeepExtend:nV,selectiveExtend:iV,selectiveNotDeepExtend:aV,throttle:pV,toArray:dV,topMost:AV,updateProperty:vV});function BE(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function zV(e,r,t){}function VV(e,r,t){}var XV=/javascript\s*\:/img;function KV(e,r){return XV.test(r)?"":r}var ZV=BE(),qV=BE,QV=zV,JV=VV,t3=KV,_s={whiteList:ZV,getDefaultWhiteList:qV,onAttr:QV,onIgnoreAttr:JV,safeAttrValue:t3},Pu={indexOf:function(e,r){var t,i;if(Array.prototype.indexOf)return e.indexOf(r);for(t=0,i=e.length;t<i;t++)if(e[t]===r)return t;return-1},forEach:function(e,r,t){var i,n;if(Array.prototype.forEach)return e.forEach(r,t);for(i=0,n=e.length;i<n;i++)r.call(t,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}};function e3(e,r){e=Pu.trimRight(e),e[e.length-1]!==";"&&(e+=";");var t=e.length,i=!1,n=0,a=0,o="";function s(){if(!i){var h=Pu.trim(e.slice(n,a)),f=h.indexOf(":");if(f!==-1){var c=Pu.trim(h.slice(0,f)),d=Pu.trim(h.slice(f+1));if(c){var v=r(n,o.length,c,d,h);v&&(o+=v+"; ")}}}n=a+1}for(;a<t;a++){var l=e[a];if(l==="/"&&e[a+1]==="*"){var u=e.indexOf("*/",a+2);if(u===-1)break;a=u+1,n=a+1,i=!1}else l==="("?i=!0:l===")"?i=!1:l===";"?i||s():l===`
`&&s()}return Pu.trim(o)}var r3=e3;function UE(e){return e==null}function i3(e){var r={};for(var t in e)r[t]=e[t];return r}function zE(e){e=i3(e||{}),e.whiteList=e.whiteList||_s.whiteList,e.onAttr=e.onAttr||_s.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||_s.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||_s.safeAttrValue,this.options=e}zE.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var r=this,t=r.options,i=t.whiteList,n=t.onAttr,a=t.onIgnoreAttr,o=t.safeAttrValue,s=r3(e,function(l,u,h,f,c){var d=i[h],v=!1;if(d===!0?v=d:typeof d=="function"?v=d(f):d instanceof RegExp&&(v=d.test(f)),v!==!0&&(v=!1),f=o(h,f),!!f){var m={position:u,sourcePosition:l,source:c,isWhite:v};if(v){var p=n(h,f,m);return UE(p)?h+":"+f:p}else{var p=a(h,f,m);if(!UE(p))return p}}});return s};var VE=zE,um=Rn(function(e,r){function t(n,a){var o=new VE(a);return o.process(n)}r=e.exports=t,r.FilterCSS=VE;for(var i in _s)r[i]=_s[i];typeof window!="undefined"&&(window.filterCSS=e.exports)}),Oe={indexOf:function(e,r){var t,i;if(Array.prototype.indexOf)return e.indexOf(r);for(t=0,i=e.length;t<i;t++)if(e[t]===r)return t;return-1},forEach:function(e,r,t){var i,n;if(Array.prototype.forEach)return e.forEach(r,t);for(i=0,n=e.length;i<n;i++)r.call(t,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var r=/\s|\n|\t/,t=r.exec(e);return t?t.index:-1}},n3=um.FilterCSS,a3=um.getDefaultWhiteList;function XE(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var KE=new n3;function o3(e,r,t){}function s3(e,r,t){}function l3(e,r,t){}function u3(e,r,t){}function ZE(e){return e.replace(f3,"&lt;").replace(c3,"&gt;")}function h3(e,r,t,i){if(t=nS(t),r==="href"||r==="src"){if(t=Oe.trim(t),t==="#")return"#";if(!(t.substr(0,7)==="http://"||t.substr(0,8)==="https://"||t.substr(0,7)==="mailto:"||t.substr(0,4)==="tel:"||t.substr(0,11)==="data:image/"||t.substr(0,6)==="ftp://"||t.substr(0,2)==="./"||t.substr(0,3)==="../"||t[0]==="#"||t[0]==="/"))return""}else if(r==="background"){if(cc.lastIndex=0,cc.test(t))return""}else if(r==="style"){if(qE.lastIndex=0,qE.test(t)||(QE.lastIndex=0,QE.test(t)&&(cc.lastIndex=0,cc.test(t))))return"";i!==!1&&(i=i||KE,t=i.process(t))}return t=aS(t),t}var f3=/</g,c3=/>/g,d3=/"/g,v3=/&quot;/g,p3=/&#([a-zA-Z0-9]*);?/gim,m3=/&colon;?/gim,g3=/&newline;?/gim,cc=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,qE=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,QE=/u\s*r\s*l\s*\(.*/gi;function JE(e){return e.replace(d3,"&quot;")}function tS(e){return e.replace(v3,'"')}function eS(e){return e.replace(p3,function(t,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function rS(e){return e.replace(m3,":").replace(g3," ")}function iS(e){for(var r="",t=0,i=e.length;t<i;t++)r+=e.charCodeAt(t)<32?" ":e.charAt(t);return Oe.trim(r)}function nS(e){return e=tS(e),e=eS(e),e=rS(e),e=iS(e),e}function aS(e){return e=JE(e),e=ZE(e),e}function y3(){return""}function _3(e,r){typeof r!="function"&&(r=function(){});var t=!Array.isArray(e);function i(o){return t?!0:Oe.indexOf(e,o)!==-1}var n=[],a=!1;return{onIgnoreTag:function(o,s,l){if(i(o))if(l.isClosing){var u="[/removed]",h=l.position+u.length;return n.push([a!==!1?a:l.position,h]),a=!1,u}else return a||(a=l.position),"[removed]";else return r(o,s,l)},remove:function(o){var s="",l=0;return Oe.forEach(n,function(u){s+=o.slice(l,u[0]),l=u[1]}),s+=o.slice(l),s}}}function w3(e){return e.replace(b3,"")}var b3=/<!--[\s\S]*?-->/g;function T3(e){var r=e.split("");return r=r.filter(function(t){var i=t.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),r.join("")}var E3=XE(),S3=XE,x3=o3,C3=s3,O3=l3,I3=u3,P3=h3,k3=ZE,D3=JE,R3=tS,A3=eS,M3=rS,L3=iS,F3=nS,N3=aS,$3=y3,G3=_3,Y3=w3,j3=T3,W3=KE,H3=a3,cr={whiteList:E3,getDefaultWhiteList:S3,onTag:x3,onIgnoreTag:C3,onTagAttr:O3,onIgnoreTagAttr:I3,safeAttrValue:P3,escapeHtml:k3,escapeQuote:D3,unescapeQuote:R3,escapeHtmlEntities:A3,escapeDangerHtml5Entities:M3,clearNonPrintableCharacter:L3,friendlyAttrValue:F3,escapeAttrValue:N3,onIgnoreTagStripAll:$3,StripTagBody:G3,stripCommentTag:Y3,stripBlankChar:j3,cssFilter:W3,getDefaultCSSWhiteList:H3};function B3(e){var r=Oe.spaceIndex(e);if(r===-1)var t=e.slice(1,-1);else var t=e.slice(1,r+1);return t=Oe.trim(t).toLowerCase(),t.slice(0,1)==="/"&&(t=t.slice(1)),t.slice(-1)==="/"&&(t=t.slice(0,-1)),t}function U3(e){return e.slice(0,2)==="</"}function z3(e,r,t){var i="",n=0,a=!1,o=!1,s=0,l=e.length,u="",h="";t:for(s=0;s<l;s++){var f=e.charAt(s);if(a===!1){if(f==="<"){a=s;continue}}else if(o===!1){if(f==="<"){i+=t(e.slice(n,s)),a=s,n=s;continue}if(f===">"){i+=t(e.slice(n,a)),h=e.slice(a,s+1),u=B3(h),i+=r(a,i.length,u,h,U3(h)),n=s+1,a=!1;continue}if(f==='"'||f==="'")for(var c=1,d=e.charAt(s-c);d.trim()===""||d==="=";){if(d==="="){o=f;continue t}d=e.charAt(s-++c)}}else if(f===o){o=!1;continue}}return n<e.length&&(i+=t(e.substr(n))),i}var V3=/[^a-zA-Z0-9_:\.\-]/gim;function X3(e,r){var t=0,i=[],n=!1,a=e.length;function o(f,c){if(f=Oe.trim(f),f=f.replace(V3,"").toLowerCase(),!(f.length<1)){var d=r(f,c||"");d&&i.push(d)}}for(var s=0;s<a;s++){var l=e.charAt(s),u,h;if(n===!1&&l==="="){n=e.slice(t,s),t=s+1;continue}if(n!==!1&&s===t&&(l==='"'||l==="'")&&e.charAt(s-1)==="="){if(h=e.indexOf(l,s+1),h===-1)break;u=Oe.trim(e.slice(t+1,h)),o(n,u),n=!1,s=h,t=s+1;continue}if(/\s|\n|\t/.test(l))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(h=K3(e,s),h===-1){u=Oe.trim(e.slice(t,s)),o(u),n=!1,t=s+1;continue}else{s=h-1;continue}else if(h=Z3(e,s-1),h===-1){u=Oe.trim(e.slice(t,s)),u=oS(u),o(n,u),n=!1,t=s+1;continue}else continue}return t<e.length&&(n===!1?o(e.slice(t)):o(n,oS(Oe.trim(e.slice(t))))),Oe.trim(i.join(" "))}function K3(e,r){for(;r<e.length;r++){var t=e[r];if(t!==" ")return t==="="?r:-1}}function Z3(e,r){for(;r>0;r--){var t=e[r];if(t!==" ")return t==="="?r:-1}}function q3(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function oS(e){return q3(e)?e.substr(1,e.length-2):e}var Q3=z3,J3=X3,dc={parseTag:Q3,parseAttr:J3},t5=um.FilterCSS,e5=dc.parseTag,r5=dc.parseAttr;function vc(e){return e==null}function i5(e){var r=Oe.spaceIndex(e);if(r===-1)return{html:"",closing:e[e.length-2]==="/"};e=Oe.trim(e.slice(r+1,-1));var t=e[e.length-1]==="/";return t&&(e=Oe.trim(e.slice(0,-1))),{html:e,closing:t}}function n5(e){var r={};for(var t in e)r[t]=e[t];return r}function sS(e){e=n5(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=cr.onIgnoreTagStripAll),e.whiteList=e.whiteList||cr.whiteList,e.onTag=e.onTag||cr.onTag,e.onTagAttr=e.onTagAttr||cr.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||cr.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||cr.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||cr.safeAttrValue,e.escapeHtml=e.escapeHtml||cr.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new t5(e.css))}sS.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var r=this,t=r.options,i=t.whiteList,n=t.onTag,a=t.onIgnoreTag,o=t.onTagAttr,s=t.onIgnoreTagAttr,l=t.safeAttrValue,u=t.escapeHtml,h=r.cssFilter;t.stripBlankChar&&(e=cr.stripBlankChar(e)),t.allowCommentTag||(e=cr.stripCommentTag(e));var f=!1;if(t.stripIgnoreTagBody){var f=cr.StripTagBody(t.stripIgnoreTagBody,a);a=f.onIgnoreTag}var c=e5(e,function(d,v,m,p,g){var _={sourcePosition:d,position:v,isClosing:g,isWhite:i.hasOwnProperty(m)},y=n(m,p,_);if(!vc(y))return y;if(_.isWhite){if(_.isClosing)return"</"+m+">";var w=i5(p),T=i[m],S=r5(w.html,function(E,I){var A=Oe.indexOf(T,E)!==-1,P=o(m,E,I,A);if(!vc(P))return P;if(A)return I=l(m,E,I,h),I?E+'="'+I+'"':E;var P=s(m,E,I,A);return vc(P)?void 0:P}),p="<"+m;return S&&(p+=" "+S),w.closing&&(p+=" /"),p+=">",p}else{var y=a(m,p,_);return vc(y)?u(p):y}},u);return f&&(c=f.remove(c)),c};var lS=sS,a5=Rn(function(e,r){function t(a,o){var s=new lS(o);return s.process(a)}r=e.exports=t,r.filterXSS=t,r.FilterXSS=lS;for(var i in cr)r[i]=cr[i];for(var i in dc)r[i]=dc[i];typeof window!="undefined"&&(window.filterXSS=e.exports);function n(){return typeof self!="undefined"&&typeof DedicatedWorkerGlobalScope!="undefined"&&self instanceof DedicatedWorkerGlobalScope}n()&&(self.filterXSS=e.exports)}),uS=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),o5=new Uint8Array(16);function s5(){if(!uS)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uS(o5)}var hS=[];for(var pc=0;pc<256;++pc)hS[pc]=(pc+256).toString(16).substr(1);function l5(e,r){var t=r||0,i=hS;return[i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]]].join("")}function ws(e,r,t){var i=r&&t||0;typeof e=="string"&&(r=e==="binary"?new Array(16):null,e=null),e=e||{};var n=e.random||(e.rng||s5)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r)for(var a=0;a<16;++a)r[i+a]=n[a];return r||l5(n)}function fS(e,r){var t=pe(e);if(Xf){var i=Xf(e);r&&(i=mt(i).call(i,function(n){return Kf(e,n).enumerable})),t.push.apply(t,i)}return t}function cS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){var i;G(i=fS(Object(t),!0)).call(i,function(a){pT(e,a,t[a])})}else if(Zf)vT(e,Zf(t));else{var n;G(n=fS(Object(t))).call(n,function(a){Rp(e,a,Kf(t,a))})}}return e}var hm=/^\/?Date\((-?\d+)/i,u5=/^\d+$/;function fm(e,r){var t;if(e!==void 0){if(e===null)return null;if(!r)return e;if(typeof r!="string"&&!(r instanceof String))throw new Error("Type must be a string");switch(r){case"boolean":case"Boolean":return Boolean(e);case"number":case"Number":return fr(e)&&!isNaN(Date.parse(e))?F(e).valueOf():Number(e.valueOf());case"string":case"String":return String(e);case"Date":try{return fm(e,"Moment").toDate()}catch(n){throw n instanceof TypeError?new TypeError("Cannot convert object of type "+xu(e)+" to type "+r):n}case"Moment":if(Eu(e))return F(e);if(e instanceof Date)return F(e.valueOf());if(F.isMoment(e))return F(e);if(fr(e))return t=hm.exec(e),t?F(Number(t[1])):(t=u5.exec(e),F(t?Number(e):e));throw new TypeError("Cannot convert object of type "+xu(e)+" to type "+r);case"ISODate":if(Eu(e))return new Date(e);if(e instanceof Date)return e.toISOString();if(F.isMoment(e))return e.toDate().toISOString();if(fr(e))return t=hm.exec(e),t?new Date(Number(t[1])).toISOString():F(e).format();throw new Error("Cannot convert object of type "+xu(e)+" to type ISODate");case"ASPDate":if(Eu(e))return"/Date("+e+")/";if(e instanceof Date||F.isMoment(e))return"/Date("+e.valueOf()+")/";if(fr(e)){t=hm.exec(e);var i;return t?i=new Date(Number(t[1])).valueOf():i=new Date(e).valueOf(),"/Date("+i+")/"}else throw new Error("Cannot convert object of type "+xu(e)+" to type ASPDate");default:throw new Error("Unknown type ".concat(r))}}}function bs(e){var r,t,i,n,a,o,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{start:"Date",end:"Date"},l=e._idProp,u=new Bo({fieldId:l}),h=ve(r=dA(e)).call(r,function(f){var c;return _T(c=pe(f)).call(c,function(d,v){return d[v]=fm(f[v],s[v]),d},{})}).to(u);return h.all().start(),{add:function(){var c;return(c=e.getDataSet()).add.apply(c,arguments)},remove:function(){var c;return(c=e.getDataSet()).remove.apply(c,arguments)},update:function(){var c;return(c=e.getDataSet()).update.apply(c,arguments)},updateOnly:function(){var c;return(c=e.getDataSet()).updateOnly.apply(c,arguments)},clear:function(){var c;return(c=e.getDataSet()).clear.apply(c,arguments)},forEach:D(t=G(u)).call(t,u),get:D(i=u.get).call(i,u),getIds:D(n=u.getIds).call(n,u),off:D(a=u.off).call(a,u),on:D(o=u.on).call(o,u),get length(){return u.length},idProp:l,type:s,rawDS:e,coercedDS:u,dispose:function(){return h.stop()}}}var dS=function(r){var t=new a5.FilterXSS(r);return function(i){return t.process(i)}},h5=function(r){return r},cm=dS(),f5=function(r){!r||(r.disabled===!0?(cm=h5,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):r.filterOptions&&(cm=dS(r.filterOptions)))},b=cS(cS({},UV),{},{convert:fm,setupXSSProtection:f5});Rp(b,"xss",{get:function(){return cm}});var c5=Np.trim,dm=Wt.parseFloat,d5=1/dm(hs+"-0")!=-1/0,vS=d5?function(r){var t=c5(String(r)),i=dm(t);return i===0&&t.charAt(0)=="-"?-0:i}:dm;Z({global:!0,forced:parseFloat!=vS},{parseFloat:vS});var v5=lt.parseFloat,p5=v5,mc=p5,Hn=function(){function e(r,t){Ct(this,e),this.options=null,this.props=null}return Ot(e,[{key:"setOptions",value:function(t){t&&b.extend(this.options,t)}},{key:"redraw",value:function(){return!1}},{key:"destroy",value:function(){}},{key:"_isResized",value:function(){var t=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,t}}]),e}(),m5=function(r){var t=String(Jo(this)),i="",n=tu(r);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))n&1&&(i+=t);return i};Z({target:"String",proto:!0},{repeat:m5});var g5=he("String").repeat,pS=String.prototype,y5=function(e){var r=e.repeat;return typeof e=="string"||e===pS||e instanceof String&&r===pS.repeat?g5:r},_5=y5,Ts=_5,w5=Math.floor,vm=function(e,r){var t=e.length,i=w5(t/2);return t<8?b5(e,r):T5(vm(e.slice(0,i),r),vm(e.slice(i),r),r)},b5=function(e,r){for(var t=e.length,i=1,n,a;i<t;){for(a=i,n=e[i];a&&r(e[a-1],n)>0;)e[a]=e[--a];a!==i++&&(e[a]=n)}return e},T5=function(e,r,t){for(var i=e.length,n=r.length,a=0,o=0,s=[];a<i||o<n;)a<i&&o<n?s.push(t(e[a],r[o])<=0?e[a++]:r[o++]):s.push(a<i?e[a++]:r[o++]);return s},E5=vm,mS=Ha.match(/firefox\/(\d+)/i),gS=!!mS&&+mS[1],S5=/MSIE|Trident/.test(Ha),yS=Ha.match(/AppleWebKit\/(\d+)\./),_S=!!yS&&+yS[1],ro=[],wS=ro.sort,x5=Lt(function(){ro.sort(void 0)}),C5=Lt(function(){ro.sort(null)}),O5=ss("sort"),bS=!Lt(function(){if(Fn)return Fn<70;if(!(gS&&gS>3)){if(S5)return!0;if(_S)return _S<603;var e="",r,t,i,n;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(n=0;n<47;n++)ro.push({k:t+n,v:i})}for(ro.sort(function(a,o){return o.v-a.v}),n=0;n<ro.length;n++)t=ro[n].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),I5=x5||!C5||!O5||!bS,P5=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:String(r)>String(t)?1:-1}};Z({target:"Array",proto:!0,forced:I5},{sort:function(r){r!==void 0&&es(r);var t=nr(this);if(bS)return r===void 0?wS.call(t):wS.call(t,r);var i=[],n=vi(t.length),a,o;for(o=0;o<n;o++)o in t&&i.push(t[o]);for(i=E5(i,P5(r)),a=i.length,o=0;o<a;)t[o]=i[o++];for(;o<n;)delete t[o++];return t}});var k5=he("Array").sort,TS=Array.prototype,D5=function(e){var r=e.sort;return e===TS||e instanceof Array&&r===TS.sort?k5:r},R5=D5,Ie=R5;function pm(e,r,t){if(t&&!ct(t))return pm(e,r,[t]);if(r.hiddenDates=[],t&&ct(t)==!0){for(var i,n=0;n<t.length;n++)if(Ts(t[n])===void 0){var a={};a.start=e(t[n].start).toDate().valueOf(),a.end=e(t[n].end).toDate().valueOf(),r.hiddenDates.push(a)}Ie(i=r.hiddenDates).call(i,function(o,s){return o.start-s.start})}}function gc(e,r,t){if(t&&!ct(t))return gc(e,r,[t]);if(t&&r.domProps.centerContainer.width!==void 0){pm(e,r,t);for(var i=e(r.range.start),n=e(r.range.end),a=r.range.end-r.range.start,o=a/r.domProps.centerContainer.width,s=0;s<t.length;s++)if(Ts(t[s])!==void 0){var l=e(t[s].start),u=e(t[s].end);if(l._d=="Invalid Date")throw new Error("Supplied start date is not valid: ".concat(t[s].start));if(u._d=="Invalid Date")throw new Error("Supplied end date is not valid: ".concat(t[s].end));var h=u-l;if(h>=4*o){var f=0,c=n.clone();switch(Ts(t[s])){case"daily":l.day()!=u.day()&&(f=1),l.dayOfYear(i.dayOfYear()),l.year(i.year()),l.subtract(7,"days"),u.dayOfYear(i.dayOfYear()),u.year(i.year()),u.subtract(7-f,"days"),c.add(1,"weeks");break;case"weekly":{var d=u.diff(l,"days"),v=l.day();l.date(i.date()),l.month(i.month()),l.year(i.year()),u=l.clone(),l.day(v),u.day(v),u.add(d,"days"),l.subtract(1,"weeks"),u.subtract(1,"weeks"),c.add(1,"weeks");break}case"monthly":l.month()!=u.month()&&(f=1),l.month(i.month()),l.year(i.year()),l.subtract(1,"months"),u.month(i.month()),u.year(i.year()),u.subtract(1,"months"),u.add(f,"months"),c.add(1,"months");break;case"yearly":l.year()!=u.year()&&(f=1),l.year(i.year()),l.subtract(1,"years"),u.year(i.year()),u.subtract(1,"years"),u.add(f,"years"),c.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",Ts(t[s]));return}for(;l<c;)switch(r.hiddenDates.push({start:l.valueOf(),end:u.valueOf()}),Ts(t[s])){case"daily":l.add(1,"days"),u.add(1,"days");break;case"weekly":l.add(1,"weeks"),u.add(1,"weeks");break;case"monthly":l.add(1,"months"),u.add(1,"months");break;case"yearly":l.add(1,"y"),u.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",Ts(t[s]));return}r.hiddenDates.push({start:l.valueOf(),end:u.valueOf()})}}A5(r);var m=_c(r.range.start,r.hiddenDates),p=_c(r.range.end,r.hiddenDates),g=r.range.start,_=r.range.end;m.hidden==!0&&(g=r.range.startToFront==!0?m.startDate-1:m.endDate+1),p.hidden==!0&&(_=r.range.endToFront==!0?p.startDate-1:p.endDate+1),(m.hidden==!0||p.hidden==!0)&&r.range._applyRange(g,_)}}function A5(e){for(var r,t=e.hiddenDates,i=[],n=0;n<t.length;n++)for(var a=0;a<t.length;a++)n!=a&&t[a].remove!=!0&&t[n].remove!=!0&&(t[a].start>=t[n].start&&t[a].end<=t[n].end?t[a].remove=!0:t[a].start>=t[n].start&&t[a].start<=t[n].end?(t[n].end=t[a].end,t[a].remove=!0):t[a].end>=t[n].start&&t[a].end<=t[n].end&&(t[n].start=t[a].start,t[a].remove=!0));for(n=0;n<t.length;n++)t[n].remove!==!0&&i.push(t[n]);e.hiddenDates=i,Ie(r=e.hiddenDates).call(r,function(o,s){return o.start-s.start})}function M5(e,r,t){for(var i=!1,n=r.current.valueOf(),a=0;a<r.hiddenDates.length;a++){var o=r.hiddenDates[a].start,s=r.hiddenDates[a].end;if(n>=o&&n<s){i=!0;break}}if(i==!0&&n<r._end.valueOf()&&n!=t){var l=e(t),u=e(s);l.year()!=u.year()?r.switchedYear=!0:l.month()!=u.month()?r.switchedMonth=!0:l.dayOfYear()!=u.dayOfYear()&&(r.switchedDay=!0),r.current=u}}function ES(e,r,t){var i;if(e.body.hiddenDates.length==0)return i=e.range.conversion(t),(r.valueOf()-i.offset)*i.scale;var n=_c(r,e.body.hiddenDates);n.hidden==!0&&(r=n.startDate);var a=ku(e.body.hiddenDates,e.range.start,e.range.end);if(r<e.range.start){i=e.range.conversion(t,a);var o=L5(e.body.hiddenDates,r,i.offset);return r=e.options.moment(r).toDate().valueOf(),r=r+o,-(i.offset-r.valueOf())*i.scale}else if(r>e.range.end){var s={start:e.range.start,end:r};return r=xS(e.options.moment,e.body.hiddenDates,s,r),i=e.range.conversion(t,a),(r.valueOf()-i.offset)*i.scale}else return r=xS(e.options.moment,e.body.hiddenDates,e.range,r),i=e.range.conversion(t,a),(r.valueOf()-i.offset)*i.scale}function SS(e,r,t){if(e.body.hiddenDates.length==0){var i=e.range.conversion(t);return new Date(r/i.scale+i.offset)}else{var n=ku(e.body.hiddenDates,e.range.start,e.range.end),a=e.range.end-e.range.start-n,o=a*r/t,s=F5(e.body.hiddenDates,e.range,o);return new Date(s+o+e.range.start)}}function ku(e,r,t){for(var i=0,n=0;n<e.length;n++){var a=e[n].start,o=e[n].end;a>=r&&o<t&&(i+=o-a)}return i}function L5(e,r,t){for(var i=0,n=0;n<e.length;n++){var a=e[n].start,o=e[n].end;a>=r&&o<=t&&(i+=o-a)}return i}function xS(e,r,t,i){return i=e(i).toDate().valueOf(),i-=yc(e,r,t,i),i}function yc(e,r,t,i){var n=0;i=e(i).toDate().valueOf();for(var a=0;a<r.length;a++){var o=r[a].start,s=r[a].end;o>=t.start&&s<t.end&&i>=s&&(n+=s-o)}return n}function F5(e,r,t){for(var i=0,n=0,a=r.start,o=0;o<e.length;o++){var s=e[o].start,l=e[o].end;if(s>=r.start&&l<r.end){if(n+=s-a,a=l,n>=t)break;i+=l-s}}return i}function io(e,r,t,i){var n=_c(r,e);return n.hidden==!0?t<0?i==!0?n.startDate-(n.endDate-r)-1:n.startDate-1:i==!0?n.endDate+(r-n.startDate)+1:n.endDate+1:r}function _c(e,r){for(var t=0;t<r.length;t++){var i=r[t].start,n=r[t].end;if(e>=i&&e<n)return{hidden:!0,startDate:i,endDate:n}}return{hidden:!1,startDate:i,endDate:n}}function N5(e){var r=$5();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=z(i,arguments,a)}else n=i.apply(this,arguments);return sr(this,n)}}function $5(){if(typeof Reflect=="undefined"||!z||z.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z(Boolean,[],function(){})),!0}catch(e){return!1}}var CS=function(e){or(t,e);var r=N5(t);function t(i,n){var a,o,s,l,u,h,f,c;Ct(this,t),c=r.call(this);var d=Ke().hours(0).minutes(0).seconds(0).milliseconds(0),v=d.clone().add(-3,"days").valueOf(),m=d.clone().add(3,"days").valueOf();return c.millisecondsPerPixelCache=void 0,n===void 0?(c.start=v,c.end=m):(c.start=n.start||v,c.end=n.end||m),c.rolling=!1,c.body=i,c.deltaDifference=0,c.scaleOffset=0,c.startToFront=!1,c.endToFront=!0,c.defaultOptions={rtl:!1,start:null,end:null,moment:Ke,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4,rollingMode:{follow:!1,offset:.5}},c.options=b.extend({},c.defaultOptions),c.props={touch:{}},c.animationTimer=null,c.body.emitter.on("panstart",D(a=c._onDragStart).call(a,Ce(c))),c.body.emitter.on("panmove",D(o=c._onDrag).call(o,Ce(c))),c.body.emitter.on("panend",D(s=c._onDragEnd).call(s,Ce(c))),c.body.emitter.on("mousewheel",D(l=c._onMouseWheel).call(l,Ce(c))),c.body.emitter.on("touch",D(u=c._onTouch).call(u,Ce(c))),c.body.emitter.on("pinch",D(h=c._onPinch).call(h,Ce(c))),c.body.dom.rollingModeBtn.addEventListener("click",D(f=c.startRolling).call(f,Ce(c))),c.setOptions(n),c}return Ot(t,[{key:"setOptions",value:function(n){if(n){var a=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll"];b.selectiveExtend(a,this.options,n),n.rollingMode&&n.rollingMode.follow&&this.startRolling(),("start"in n||"end"in n)&&this.setRange(n.start,n.end)}}},{key:"startRolling",value:function(){var n=this;function a(){n.stopRolling(),n.rolling=!0;var o=n.end-n.start,s=b.convert(new Date,"Date").valueOf(),l=n.options.rollingMode&&n.options.rollingMode.offset||.5,u=s-o*l,h=s+o*(1-l),f={animation:!1};n.setRange(u,h,f);var c=n.conversion(n.body.domProps.center.width).scale;o=1/c/10,o<30&&(o=30),o>1e3&&(o=1e3),n.body.dom.rollingModeBtn.style.visibility="hidden",n.currentTimeTimer=Re(a,o)}a()}},{key:"stopRolling",value:function(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}},{key:"setRange",value:function(n,a,o,s,l){o||(o={}),o.byUser!==!0&&(o.byUser=!1);var u=this,h=n!=null?b.convert(n,"Date").valueOf():null,f=a!=null?b.convert(a,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,o.animation){var c=this.start,d=this.end,v=at(o.animation)==="object"&&"duration"in o.animation?o.animation.duration:500,m=at(o.animation)==="object"&&"easingFunction"in o.animation?o.animation.easingFunction:"easeInOutQuad",p=b.easingFunctions[m];if(!p){var g;throw new Error(Ut(g="Unknown easing function ".concat(hr(m),". Choose from: ")).call(g,pe(b.easingFunctions).join(", ")))}var _=lr(),y=!1,w=function x(){if(!u.props.touch.dragging){var E=lr(),I=E-_,A=p(I/v),P=I>v,R=P||h===null?h:c+(h-c)*A,N=P||f===null?f:d+(f-d)*A;T=u._applyRange(R,N),gc(u.options.moment,u.body,u.options.hiddenDates),y=y||T;var j={start:new Date(u.start),end:new Date(u.end),byUser:o.byUser,event:o.event};if(l&&l(A,T,P),T&&u.body.emitter.emit("rangechange",j),P){if(y&&(u.body.emitter.emit("rangechanged",j),s))return s()}else u.animationTimer=Re(x,20)}};return w()}else{var T=this._applyRange(h,f);if(gc(this.options.moment,this.body,this.options.hiddenDates),T){var S={start:new Date(this.start),end:new Date(this.end),byUser:o.byUser,event:o.event};if(this.body.emitter.emit("rangechange",S),clearTimeout(u.timeoutID),u.timeoutID=Re(function(){u.body.emitter.emit("rangechanged",S)},200),s)return s()}}}},{key:"getMillisecondsPerPixel",value:function(){return this.millisecondsPerPixelCache===void 0&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}},{key:"_cancelAnimation",value:function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}},{key:"_applyRange",value:function(n,a){var o=n!=null?b.convert(n,"Date").valueOf():this.start,s=a!=null?b.convert(a,"Date").valueOf():this.end,l=this.options.max!=null?b.convert(this.options.max,"Date").valueOf():null,u=this.options.min!=null?b.convert(this.options.min,"Date").valueOf():null,h;if(isNaN(o)||o===null)throw new Error('Invalid start "'.concat(n,'"'));if(isNaN(s)||s===null)throw new Error('Invalid end "'.concat(a,'"'));if(s<o&&(s=o),u!==null&&o<u&&(h=u-o,o+=h,s+=h,l!=null&&s>l&&(s=l)),l!==null&&s>l&&(h=s-l,o-=h,s-=h,u!=null&&o<u&&(o=u)),this.options.zoomMin!==null){var f=mc(this.options.zoomMin);if(f<0&&(f=0),s-o<f){var c=.5;this.end-this.start===f&&o>=this.start-c&&s<=this.end?(o=this.start,s=this.end):(h=f-(s-o),o-=h/2,s+=h/2)}}if(this.options.zoomMax!==null){var d=mc(this.options.zoomMax);d<0&&(d=0),s-o>d&&(this.end-this.start===d&&o<this.start&&s>this.end?(o=this.start,s=this.end):(h=s-o-d,o+=h/2,s-=h/2))}var v=this.start!=o||this.end!=s;return!(o>=this.start&&o<=this.end||s>=this.start&&s<=this.end)&&!(this.start>=o&&this.start<=s||this.end>=o&&this.end<=s)&&this.body.emitter.emit("checkRangedItems"),this.start=o,this.end=s,v}},{key:"getRange",value:function(){return{start:this.start,end:this.end}}},{key:"conversion",value:function(n,a){return t.conversion(this.start,this.end,n,a)}},{key:"_onDragStart",value:function(n){this.deltaDifference=0,this.previousDelta=0,!!this.options.moveable&&(!this._isInsideRange(n)||!this.props.touch.allowDragging||(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move")))}},{key:"_onDrag",value:function(n){if(!!n&&!!this.props.touch.dragging&&!!this.options.moveable&&!!this.props.touch.allowDragging){var a=this.options.direction;OS(a);var o=a=="horizontal"?n.deltaX:n.deltaY;o-=this.deltaDifference;var s=this.props.touch.end-this.props.touch.start,l=ku(this.body.hiddenDates,this.start,this.end);s-=l;var u=a=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height,h;this.options.rtl?h=o/u*s:h=-o/u*s;var f=this.props.touch.start+h,c=this.props.touch.end+h,d=io(this.body.hiddenDates,f,this.previousDelta-o,!0),v=io(this.body.hiddenDates,c,this.previousDelta-o,!0);if(d!=f||v!=c){this.deltaDifference+=o,this.props.touch.start=d,this.props.touch.end=v,this._onDrag(n);return}this.previousDelta=o,this._applyRange(f,c);var m=new Date(this.start),p=new Date(this.end);this.body.emitter.emit("rangechange",{start:m,end:p,byUser:!0,event:n}),this.body.emitter.emit("panmove")}}},{key:"_onDragEnd",value:function(n){!this.props.touch.dragging||!this.options.moveable||!this.props.touch.allowDragging||(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:n}))}},{key:"_onMouseWheel",value:function(n){var a=0;if(n.wheelDelta?a=n.wheelDelta/120:n.detail?a=-n.detail/3:n.deltaY&&(a=-n.deltaY/3),!(this.options.zoomKey&&!n[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&!!(this.options.zoomable&&this.options.moveable)&&!!this._isInsideRange(n)&&a){var o=this.options.zoomFriction||5,s;a<0?s=1-a/o:s=1/(1+a/o);var l;if(this.rolling){var u=this.options.rollingMode&&this.options.rollingMode.offset||.5;l=this.start+(this.end-this.start)*u}else{var h=this.getPointer({x:n.clientX,y:n.clientY},this.body.dom.center);l=this._pointerToDate(h)}this.zoom(s,l,a,n),n.preventDefault()}}},{key:"_onTouch",value:function(n){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,b.preventDefault(n)}},{key:"_onPinch",value:function(n){if(!!(this.options.zoomable&&this.options.moveable)){b.preventDefault(n),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(n.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();var a=1/(n.scale+this.scaleOffset),o=this.props.touch.centerDate,s=ku(this.body.hiddenDates,this.start,this.end),l=yc(this.options.moment,this.body.hiddenDates,this,o),u=s-l,h=o-l+(this.props.touch.start-(o-l))*a,f=o+u+(this.props.touch.end-(o+u))*a;this.startToFront=1-a<=0,this.endToFront=a-1<=0;var c=io(this.body.hiddenDates,h,1-a,!0),d=io(this.body.hiddenDates,f,a-1,!0);(c!=h||d!=f)&&(this.props.touch.start=c,this.props.touch.end=d,this.scaleOffset=1-n.scale,h=c,f=d);var v={animation:!1,byUser:!0,event:n};this.setRange(h,f,v),this.startToFront=!1,this.endToFront=!0}}},{key:"_isInsideRange",value:function(n){var a=n.center?n.center.x:n.clientX,o=this.body.dom.centerContainer.getBoundingClientRect(),s=this.options.rtl?a-o.left:o.right-a,l=this.body.util.toTime(s);return l>=this.start&&l<=this.end}},{key:"_pointerToDate",value:function(n){var a,o=this.options.direction;if(OS(o),o=="horizontal")return this.body.util.toTime(n.x).valueOf();var s=this.body.domProps.center.height;return a=this.conversion(s),n.y/a.scale+a.offset}},{key:"getPointer",value:function(n,a){var o=a.getBoundingClientRect();return this.options.rtl?{x:o.right-n.x,y:n.y-o.top}:{x:n.x-o.left,y:n.y-o.top}}},{key:"zoom",value:function(n,a,o,s){a==null&&(a=(this.start+this.end)/2);var l=ku(this.body.hiddenDates,this.start,this.end),u=yc(this.options.moment,this.body.hiddenDates,this,a),h=l-u,f=a-u+(this.start-(a-u))*n,c=a+h+(this.end-(a+h))*n;this.startToFront=!(o>0),this.endToFront=!(-o>0);var d=io(this.body.hiddenDates,f,o,!0),v=io(this.body.hiddenDates,c,-o,!0);(d!=f||v!=c)&&(f=d,c=v);var m={animation:!1,byUser:!0,event:s};this.setRange(f,c,m),this.startToFront=!1,this.endToFront=!0}},{key:"move",value:function(n){var a=this.end-this.start,o=this.start+a*n,s=this.end+a*n;this.start=o,this.end=s}},{key:"moveTo",value:function(n){var a=(this.start+this.end)/2,o=a-n,s=this.start-o,l=this.end-o,u={animation:!1,byUser:!0,event:null};this.setRange(s,l,u)}}],[{key:"conversion",value:function(n,a,o,s){return s===void 0&&(s=0),o!=0&&a-n!=0?{offset:n,scale:o/(a-n-s)}:{offset:0,scale:1}}}]),t}(Hn);function OS(e){if(e!="horizontal"&&e!="vertical")throw new TypeError('Unknown direction "'.concat(e,'". Choose "horizontal" or "vertical".'))}var G5=$n.some,Y5=ss("some");Z({target:"Array",proto:!0,forced:!Y5},{some:function(r){return G5(this,r,arguments.length>1?arguments[1]:void 0)}});var j5=he("Array").some,IS=Array.prototype,W5=function(e){var r=e.some;return e===IS||e instanceof Array&&r===IS.some?j5:r},H5=W5,PS=H5,B5=lt.setInterval,U5=B5,wc=null;function mm(e,r){var t=r||{preventDefault:!1};if(e.Manager){var i=e,n=function(u,h){var f=Object.create(t);return h&&i.assign(f,h),mm(new i(u,f),f)};return i.assign(n,i),n.Manager=function(u,h){var f=Object.create(t);return h&&i.assign(f,h),mm(new i.Manager(u,f),f)},n}var a=Object.create(e),o=e.element;o.hammer||(o.hammer=[]),o.hammer.push(a),e.on("hammer.input",function(u){(t.preventDefault===!0||t.preventDefault===u.pointerType)&&u.preventDefault(),u.isFirst&&(wc=u.target)}),a._handlers={},a.on=function(u,h){return s(u).forEach(function(f){var c=a._handlers[f];c||(a._handlers[f]=c=[],e.on(f,l)),c.push(h)}),a},a.off=function(u,h){return s(u).forEach(function(f){var c=a._handlers[f];c&&(c=h?c.filter(function(d){return d!==h}):[],c.length>0?a._handlers[f]=c:(e.off(f,l),delete a._handlers[f]))}),a},a.emit=function(u,h){wc=h.target,e.emit(u,h)},a.destroy=function(){var u=e.element.hammer,h=u.indexOf(a);h!==-1&&u.splice(h,1),u.length||delete e.element.hammer,a._handlers={},e.destroy()};function s(u){return u.match(/[^ ]+/g)}function l(u){if(u.type!=="hammer.input"){if(u.srcEvent._handled||(u.srcEvent._handled={}),u.srcEvent._handled[u.type])return;u.srcEvent._handled[u.type]=!0}var h=!1;u.stopPropagation=function(){h=!0};var f=u.srcEvent.stopPropagation.bind(u.srcEvent);typeof f=="function"&&(u.srcEvent.stopPropagation=function(){f(),u.stopPropagation()}),u.firstTarget=wc;for(var c=wc;c&&!h;){var d=c.hammer;if(d){for(var v,m=0;m<d.length;m++)if(v=d[m]._handlers[u.type],v)for(var p=0;p<v.length&&!h;p++)v[p](u)}c=c.parentNode}}return a}function z5(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(t){return{set:e}}}}var gm;if(typeof window!="undefined"){var V5=window.Hammer||DE;gm=mm(V5,{preventDefault:"mouse"})}else gm=function(){return z5()};var Me=gm;function kS(e,r){r.inputHandler=function(t){t.isFirst&&r(t)},e.on("hammer.input",r.inputHandler)}function X5(e,r){return r.inputHandler=function(t){t.isFinal&&r(t)},e.on("hammer.input",r.inputHandler)}function K5(e){var r="pan-y";return e.getTouchAction=function(){return[r]},e}var bc=function(){function e(r,t,i,n,a){Ct(this,e),this.moment=a&&a.moment||Ke,this.options=a||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(r,t,i),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,ct(n)?this.hiddenDates=n:n!=null?this.hiddenDates=[n]:this.hiddenDates=[],this.format=e.FORMAT}return Ot(e,[{key:"setMoment",value:function(t){this.moment=t,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}},{key:"setFormat",value:function(t){var i=b.deepExtend({},e.FORMAT);this.format=b.deepExtend(i,t)}},{key:"setRange",value:function(t,i,n){if(!(t instanceof Date)||!(i instanceof Date))throw"No legal start or end date in method setRange";this._start=t!=null?this.moment(t.valueOf()):lr(),this._end=i!=null?this.moment(i.valueOf()):lr(),this.autoScale&&this.setMinimumStep(n)}},{key:"start",value:function(){this.current=this._start.clone(),this.roundToMinor()}},{key:"roundToMinor",value:function(){switch(this.scale=="week"&&this.current.weekday(0),this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"week":case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(this.step!=1){var t=this.current.clone();switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year");break}t.isSame(this.current)||(this.current=this.moment(io(this.hiddenDates,this.current.valueOf(),-1,!0)))}}},{key:"hasNext",value:function(){return this.current.valueOf()<=this._end.valueOf()}},{key:"next",value:function(){var t=this.current.valueOf();switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.month()<6?this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!=0&&this.current.add(this.step-this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"week":if(this.current.weekday()!==0)this.current.weekday(0),this.current.add(this.step,"week");else if(this.options.showMajorLabels===!1)this.current.add(this.step,"week");else{var i=this.current.clone();i.add(1,"week"),i.isSame(this.current,"month")?this.current.add(this.step,"week"):(this.current.add(this.step,"week"),this.current.date(1))}break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year");break}if(this.step!=1)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"week":this.current.week()<this.step&&this.current.week(1);break;case"month":this.current.month()<this.step&&this.current.month(0);break}this.current.valueOf()==t&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,M5(this.moment,this,t)}},{key:"getCurrent",value:function(){return this.current.clone()}},{key:"setScale",value:function(t){t&&typeof t.scale=="string"&&(this.scale=t.scale,this.step=t.step>0?t.step:1,this.autoScale=!1)}},{key:"setAutoScale",value:function(t){this.autoScale=t}},{key:"setMinimumStep",value:function(t){if(t!=null){var i=1e3*60*60*24*30*12,n=1e3*60*60*24*30,a=1e3*60*60*24,o=1e3*60*60,s=1e3*60,l=1e3,u=1;i*1e3>t&&(this.scale="year",this.step=1e3),i*500>t&&(this.scale="year",this.step=500),i*100>t&&(this.scale="year",this.step=100),i*50>t&&(this.scale="year",this.step=50),i*10>t&&(this.scale="year",this.step=10),i*5>t&&(this.scale="year",this.step=5),i>t&&(this.scale="year",this.step=1),n*3>t&&(this.scale="month",this.step=3),n>t&&(this.scale="month",this.step=1),a*7>t&&this.options.showWeekScale&&(this.scale="week",this.step=1),a*2>t&&(this.scale="day",this.step=2),a>t&&(this.scale="day",this.step=1),a/2>t&&(this.scale="weekday",this.step=1),o*4>t&&(this.scale="hour",this.step=4),o>t&&(this.scale="hour",this.step=1),s*15>t&&(this.scale="minute",this.step=15),s*10>t&&(this.scale="minute",this.step=10),s*5>t&&(this.scale="minute",this.step=5),s>t&&(this.scale="minute",this.step=1),l*15>t&&(this.scale="second",this.step=15),l*10>t&&(this.scale="second",this.step=10),l*5>t&&(this.scale="second",this.step=5),l>t&&(this.scale="second",this.step=1),u*200>t&&(this.scale="millisecond",this.step=200),u*100>t&&(this.scale="millisecond",this.step=100),u*50>t&&(this.scale="millisecond",this.step=50),u*10>t&&(this.scale="millisecond",this.step=10),u*5>t&&(this.scale="millisecond",this.step=5),u>t&&(this.scale="millisecond",this.step=1)}}},{key:"isMajor",value:function(){if(this.switchedYear==!0)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedMonth==!0)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedDay==!0)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var t=this.moment(this.current);switch(this.scale){case"millisecond":return t.milliseconds()==0;case"second":return t.seconds()==0;case"minute":return t.hours()==0&&t.minutes()==0;case"hour":return t.hours()==0;case"weekday":case"day":return t.date()==1;case"week":return t.date()==1;case"month":return t.month()==0;case"year":return!1;default:return!1}}},{key:"getLabelMinor",value:function(t){if(t==null&&(t=this.current),t instanceof Date&&(t=this.moment(t)),typeof this.format.minorLabels=="function")return this.format.minorLabels(t,this.scale,this.step);var i=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(t.date()===1&&t.weekday()!==0)return"";default:return i&&i.length>0?this.moment(t).format(i):""}}},{key:"getLabelMajor",value:function(t){if(t==null&&(t=this.current),t instanceof Date&&(t=this.moment(t)),typeof this.format.majorLabels=="function")return this.format.majorLabels(t,this.scale,this.step);var i=this.format.majorLabels[this.scale];return i&&i.length>0?this.moment(t).format(i):""}},{key:"getClassName",value:function(){var t,i=this.moment,n=this.moment(this.current),a=n.locale?n.locale("en"):n.lang("en"),o=this.step,s=[];function l(d){return d/o%2==0?" vis-even":" vis-odd"}function u(d){return d.isSame(lr(),"day")?" vis-today":d.isSame(i().add(1,"day"),"day")?" vis-tomorrow":d.isSame(i().add(-1,"day"),"day")?" vis-yesterday":""}function h(d){return d.isSame(lr(),"week")?" vis-current-week":""}function f(d){return d.isSame(lr(),"month")?" vis-current-month":""}function c(d){return d.isSame(lr(),"year")?" vis-current-year":""}switch(this.scale){case"millisecond":s.push(u(a)),s.push(l(a.milliseconds()));break;case"second":s.push(u(a)),s.push(l(a.seconds()));break;case"minute":s.push(u(a)),s.push(l(a.minutes()));break;case"hour":s.push(Ut(t="vis-h".concat(a.hours())).call(t,this.step==4?"-h"+(a.hours()+4):"")),s.push(u(a)),s.push(l(a.hours()));break;case"weekday":s.push("vis-".concat(a.format("dddd").toLowerCase())),s.push(u(a)),s.push(h(a)),s.push(l(a.date()));break;case"day":s.push("vis-day".concat(a.date())),s.push("vis-".concat(a.format("MMMM").toLowerCase())),s.push(u(a)),s.push(f(a)),s.push(this.step<=2?u(a):""),s.push(this.step<=2?"vis-".concat(a.format("dddd").toLowerCase()):""),s.push(l(a.date()-1));break;case"week":s.push("vis-week".concat(a.format("w"))),s.push(h(a)),s.push(l(a.week()));break;case"month":s.push("vis-".concat(a.format("MMMM").toLowerCase())),s.push(f(a)),s.push(l(a.month()));break;case"year":s.push("vis-year".concat(a.year())),s.push(c(a)),s.push(l(a.year()));break}return mt(s).call(s,String).join(" ")}}],[{key:"snap",value:function(t,i,n){var a=Ke(t);if(i=="year"){var o=a.year()+Math.round(a.month()/12);a.year(Math.round(o/n)*n),a.month(0),a.date(0),a.hours(0),a.minutes(0),a.seconds(0),a.milliseconds(0)}else if(i=="month")a.date()>15?(a.date(1),a.add(1,"month")):a.date(1),a.hours(0),a.minutes(0),a.seconds(0),a.milliseconds(0);else if(i=="week")a.weekday()>2?(a.weekday(0),a.add(1,"week")):a.weekday(0),a.hours(0),a.minutes(0),a.seconds(0),a.milliseconds(0);else if(i=="day"){switch(n){case 5:case 2:a.hours(Math.round(a.hours()/24)*24);break;default:a.hours(Math.round(a.hours()/12)*12);break}a.minutes(0),a.seconds(0),a.milliseconds(0)}else if(i=="weekday"){switch(n){case 5:case 2:a.hours(Math.round(a.hours()/12)*12);break;default:a.hours(Math.round(a.hours()/6)*6);break}a.minutes(0),a.seconds(0),a.milliseconds(0)}else if(i=="hour"){switch(n){case 4:a.minutes(Math.round(a.minutes()/60)*60);break;default:a.minutes(Math.round(a.minutes()/30)*30);break}a.seconds(0),a.milliseconds(0)}else if(i=="minute"){switch(n){case 15:case 10:a.minutes(Math.round(a.minutes()/5)*5),a.seconds(0);break;case 5:a.seconds(Math.round(a.seconds()/60)*60);break;default:a.seconds(Math.round(a.seconds()/30)*30);break}a.milliseconds(0)}else if(i=="second")switch(n){case 15:case 10:a.seconds(Math.round(a.seconds()/5)*5),a.milliseconds(0);break;case 5:a.milliseconds(Math.round(a.milliseconds()/1e3)*1e3);break;default:a.milliseconds(Math.round(a.milliseconds()/500)*500);break}else if(i=="millisecond"){var s=n>5?n/2:1;a.milliseconds(Math.round(a.milliseconds()/s)*s)}return a}}]),e}();bc.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};function Z5(e){var r=q5();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=z(i,arguments,a)}else n=i.apply(this,arguments);return sr(this,n)}}function q5(){if(typeof Reflect=="undefined"||!z||z.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z(Boolean,[],function(){})),!0}catch(e){return!1}}var Tc=function(e){or(t,e);var r=Z5(t);function t(i,n){var a;return Ct(this,t),a=r.call(this),a.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},a.props={range:{start:0,end:0,minimumStep:0},lineTop:0},a.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:b.extend({},bc.FORMAT),moment:Ke,timeAxis:null},a.options=b.extend({},a.defaultOptions),a.body=i,a._create(),a.setOptions(n),a}return Ot(t,[{key:"setOptions",value:function(n){n&&(b.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,n),b.selectiveDeepExtend(["format"],this.options,n),"orientation"in n&&(typeof n.orientation=="string"?this.options.orientation.axis=n.orientation:at(n.orientation)==="object"&&"axis"in n.orientation&&(this.options.orientation.axis=n.orientation.axis)),"locale"in n&&(typeof Ke.locale=="function"?Ke.locale(n.locale):Ke.lang(n.locale)))}},{key:"_create",value:function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}},{key:"destroy",value:function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}},{key:"redraw",value:function(){var n=this.props,a=this.dom.foreground,o=this.dom.background,s=this.options.orientation.axis=="top"?this.body.dom.top:this.body.dom.bottom,l=a.parentNode!==s;this._calculateCharSize();var u=this.options.showMinorLabels&&this.options.orientation.axis!=="none",h=this.options.showMajorLabels&&this.options.orientation.axis!=="none";n.minorLabelHeight=u?n.minorCharHeight:0,n.majorLabelHeight=h?n.majorCharHeight:0,n.height=n.minorLabelHeight+n.majorLabelHeight,n.width=a.offsetWidth,n.minorLineHeight=this.body.domProps.root.height-n.majorLabelHeight-(this.options.orientation.axis=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),n.minorLineWidth=1,n.majorLineHeight=n.minorLineHeight+n.majorLabelHeight,n.majorLineWidth=1;var f=a.nextSibling,c=o.nextSibling;return a.parentNode&&a.parentNode.removeChild(a),o.parentNode&&o.parentNode.removeChild(o),a.style.height="".concat(this.props.height,"px"),this._repaintLabels(),f?s.insertBefore(a,f):s.appendChild(a),c?this.body.dom.backgroundVertical.insertBefore(o,c):this.body.dom.backgroundVertical.appendChild(o),this._isResized()||l}},{key:"_repaintLabels",value:function(){var n=this.options.orientation.axis,a=b.convert(this.body.range.start,"Number"),o=b.convert(this.body.range.end,"Number"),s=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),l=s-yc(this.options.moment,this.body.hiddenDates,this.body.range,s);l-=this.body.util.toTime(0).valueOf();var u=new bc(new Date(a),new Date(o),l,this.body.hiddenDates,this.options);u.setMoment(this.options.moment),this.options.format&&u.setFormat(this.options.format),this.options.timeAxis&&u.setScale(this.options.timeAxis),this.step=u;var h=this.dom;h.redundant.lines=h.lines,h.redundant.majorTexts=h.majorTexts,h.redundant.minorTexts=h.minorTexts,h.lines=[],h.majorTexts=[],h.minorTexts=[];var f,c,d,v,m,p,g=0,_,y,w=void 0,T=0,S=1e3,x;for(u.start(),c=u.getCurrent(),v=this.body.util.toScreen(c);u.hasNext()&&T<S;){switch(T++,m=u.isMajor(),x=u.getClassName(),f=c,d=v,u.next(),c=u.getCurrent(),v=this.body.util.toScreen(c),_=g,g=v-d,u.scale){case"week":p=!0;break;default:p=g>=_*.4;break}if(this.options.showMinorLabels&&p){var E=this._repaintMinorText(d,u.getLabelMinor(f),n,x);E.style.width="".concat(g,"px")}m&&this.options.showMajorLabels?(d>0&&(w==null&&(w=d),E=this._repaintMajorText(d,u.getLabelMajor(f),n,x)),y=this._repaintMajorLine(d,g,n,x)):p?y=this._repaintMinorLine(d,g,n,x):y&&(y.style.width="".concat(ur(y.style.width)+g,"px"))}if(T===S&&!DS&&(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to ".concat(S," lines.")),DS=!0),this.options.showMajorLabels){var I=this.body.util.toTime(0),A=u.getLabelMajor(I),P=A.length*(this.props.majorCharWidth||10)+10;(w==null||P<w)&&this._repaintMajorText(0,A,n,x)}G(b).call(b,this.dom.redundant,function(R){for(;R.length;){var N=R.pop();N&&N.parentNode&&N.parentNode.removeChild(N)}})}},{key:"_repaintMinorText",value:function(n,a,o,s){var l=this.dom.redundant.minorTexts.shift();if(!l){var u=document.createTextNode("");l=document.createElement("div"),l.appendChild(u),this.dom.foreground.appendChild(l)}this.dom.minorTexts.push(l),l.innerHTML=b.xss(a);var h=o=="top"?this.props.majorLabelHeight:0;return this._setXY(l,n,h),l.className="vis-text vis-minor ".concat(s),l}},{key:"_repaintMajorText",value:function(n,a,o,s){var l=this.dom.redundant.majorTexts.shift();if(!l){var u=document.createElement("div");l=document.createElement("div"),l.appendChild(u),this.dom.foreground.appendChild(l)}l.childNodes[0].innerHTML=b.xss(a),l.className="vis-text vis-major ".concat(s);var h=o=="top"?0:this.props.minorLabelHeight;return this._setXY(l,n,h),this.dom.majorTexts.push(l),l}},{key:"_setXY",value:function(n,a,o){var s,l=this.options.rtl?a*-1:a;n.style.transform=Ut(s="translate(".concat(l,"px, ")).call(s,o,"px)")}},{key:"_repaintMinorLine",value:function(n,a,o,s){var l,u=this.dom.redundant.lines.shift();u||(u=document.createElement("div"),this.dom.background.appendChild(u)),this.dom.lines.push(u);var h=this.props;u.style.width="".concat(a,"px"),u.style.height="".concat(h.minorLineHeight,"px");var f=o=="top"?h.majorLabelHeight:this.body.domProps.top.height,c=n-h.minorLineWidth/2;return this._setXY(u,c,f),u.className=Ut(l="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-minor ")).call(l,s),u}},{key:"_repaintMajorLine",value:function(n,a,o,s){var l,u=this.dom.redundant.lines.shift();u||(u=document.createElement("div"),this.dom.background.appendChild(u)),this.dom.lines.push(u);var h=this.props;u.style.width="".concat(a,"px"),u.style.height="".concat(h.majorLineHeight,"px");var f=o=="top"?0:this.body.domProps.top.height,c=n-h.majorLineWidth/2;return this._setXY(u,c,f),u.className=Ut(l="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-major ")).call(l,s),u}},{key:"_calculateCharSize",value:function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}]),t}(Hn),DS=!1;function Q5(e){var r=e&&e.preventDefault||!1,t=e&&e.container||window,i={},n={keydown:{},keyup:{}},a={},o;for(o=97;o<=122;o++)a[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)a[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)a[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)a["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)a["num"+o]={code:96+o,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a.delete={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var s=function(h){u(h,"keydown")},l=function(h){u(h,"keyup")},u=function(h,f){if(n[f][h.keyCode]!==void 0){for(var c=n[f][h.keyCode],d=0;d<c.length;d++)(c[d].shift===void 0||c[d].shift==!0&&h.shiftKey==!0||c[d].shift==!1&&h.shiftKey==!1)&&c[d].fn(h);r==!0&&h.preventDefault()}};return i.bind=function(h,f,c){if(c===void 0&&(c="keydown"),a[h]===void 0)throw new Error("unsupported key: "+h);n[c][a[h].code]===void 0&&(n[c][a[h].code]=[]),n[c][a[h].code].push({fn:f,shift:a[h].shift})},i.bindAll=function(h,f){f===void 0&&(f="keydown");for(var c in a)a.hasOwnProperty(c)&&i.bind(c,h,f)},i.getKey=function(h){for(var f in a)if(a.hasOwnProperty(f)){if(h.shiftKey==!0&&a[f].shift==!0&&h.keyCode==a[f].code)return f;if(h.shiftKey==!1&&a[f].shift==!1&&h.keyCode==a[f].code)return f;if(h.keyCode==a[f].code&&f=="shift")return f}return"unknown key, currently not supported"},i.unbind=function(h,f,c){if(c===void 0&&(c="keydown"),a[h]===void 0)throw new Error("unsupported key: "+h);if(f!==void 0){var d=[],v=n[c][a[h].code];if(v!==void 0)for(var m=0;m<v.length;m++)v[m].fn==f&&v[m].shift==a[h].shift||d.push(n[c][a[h].code][m]);n[c][a[h].code]=d}else n[c][a[h].code]=[]},i.reset=function(){n={keydown:{},keyup:{}}},i.destroy=function(){n={keydown:{},keyup:{}},t.removeEventListener("keydown",s,!0),t.removeEventListener("keyup",l,!0)},t.addEventListener("keydown",s,!0),t.addEventListener("keyup",l,!0),i}function Dr(e){var r,t;this.active=!1,this.dom={container:e},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=Me(this.dom.overlay),this.hammer.on("tap",D(r=this._onTapOverlay).call(r,this));var i=this,n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];G(n).call(n,function(a){i.hammer.on(a,function(o){o.stopPropagation()})}),document&&document.body&&(this.onClick=function(a){J5(a.target,e)||i.deactivate()},document.body.addEventListener("click",this.onClick)),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=Q5(),this.escListener=D(t=this.deactivate).call(t,this)}Gp(Dr.prototype);Dr.current=null;Dr.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null};Dr.prototype.activate=function(){var e;Dr.current&&Dr.current.deactivate(),Dr.current=this,this.active=!0,this.dom.overlay.style.display="none",b.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),D(e=this.keycharm).call(e,"esc",this.escListener)};Dr.prototype.deactivate=function(){Dr.current===this&&(Dr.current=null),this.active=!1,this.dom.overlay.style.display="",b.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")};Dr.prototype._onTapOverlay=function(e){this.activate(),e.stopPropagation()};function J5(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var ym={current:"current",time:"time",deleteSelected:"Delete selected"},tX=ym,eX=ym,_m={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},rX=_m,iX=_m,wm={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},nX=wm,aX=wm,RS={current:"Aktuelle",time:"Zeit",deleteSelected:"L\xF6sche Auswahl"},oX=RS,Ec={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},sX=Ec,lX=Ec,uX=Ec,AS={current:"corriente",time:"hora",deleteSelected:"Eliminar selecci\xF3n"},hX=AS,MS={current:"\u043F\u043E\u0442\u043E\u0447\u043D\u0438\u0439",time:"\u0447\u0430\u0441",deleteSelected:"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043E\u0431\u0440\u0430\u043D\u0435"},fX=MS,LS={current:"\u0442\u0435\u043A\u0443\u0449\u0435\u0435",time:"\u0432\u0440\u0435\u043C\u044F",deleteSelected:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0435"},cX=LS,FS={current:"aktualny",time:"czas",deleteSelected:"Usu\u0144 wybrane"},dX=FS,bm={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},vX=bm,pX=bm,NS={current:"\u73FE\u5728",time:"\u6642\u523B",deleteSelected:"\u9078\u629E\u3055\u308C\u305F\u3082\u306E\u3092\u524A\u9664"},mX=NS,$S={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},gX=$S,Sc={current:"n\xE5v\xE6rende",time:"tid",deleteSelected:"Slett valgte"},yX=Sc,_X=Sc,wX=Sc,Es={en:ym,en_EN:tX,en_US:eX,it:_m,it_IT:rX,it_CH:iX,nl:wm,nl_NL:nX,nl_BE:aX,de:RS,de_DE:oX,fr:Ec,fr_FR:sX,fr_CA:lX,fr_BE:uX,es:AS,es_ES:hX,uk:MS,uk_UA:fX,ru:LS,ru_RU:cX,pl:FS,pl_PL:dX,pt:bm,pt_BR:vX,pt_PT:pX,ja:NS,ja_JP:mX,sv:$S,sv_SE:gX,nb:Sc,nn:_X,nb_NO:yX,nn_NO:wX};function bX(e){var r=TX();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=z(i,arguments,a)}else n=i.apply(this,arguments);return sr(this,n)}}function TX(){if(typeof Reflect=="undefined"||!z||z.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z(Boolean,[],function(){})),!0}catch(e){return!1}}var Tm=function(e){or(t,e);var r=bX(t);function t(i,n){var a,o;Ct(this,t),o=r.call(this),o.body=i,o.defaultOptions={moment:Ke,locales:Es,locale:"en",id:void 0,title:void 0},o.options=b.extend({},o.defaultOptions),o.setOptions(n),o.options.locales=b.extend({},Es,o.options.locales);var s=o.defaultOptions.locales[o.defaultOptions.locale];return G(a=pe(o.options.locales)).call(a,function(l){o.options.locales[l]=b.extend({},s,o.options.locales[l])}),n&&n.time!=null?o.customTime=n.time:o.customTime=new Date,o.eventParams={},o._create(),o}return Ot(t,[{key:"setOptions",value:function(n){n&&b.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,n)}},{key:"_create",value:function(){var n,a,o,s=document.createElement("div");s["custom-time"]=this,s.className="vis-custom-time ".concat(this.options.id||""),s.style.position="absolute",s.style.top="0px",s.style.height="100%",this.bar=s;var l=document.createElement("div");l.style.position="relative",l.style.top="0px",this.options.rtl?l.style.right="-10px":l.style.left="-10px",l.style.height="100%",l.style.width="20px";function u(h){this.body.range._onMouseWheel(h)}l.addEventListener?(l.addEventListener("mousewheel",D(u).call(u,this),!1),l.addEventListener("DOMMouseScroll",D(u).call(u,this),!1)):l.attachEvent("onmousewheel",D(u).call(u,this)),s.appendChild(l),this.hammer=new Me(l),this.hammer.on("panstart",D(n=this._onDragStart).call(n,this)),this.hammer.on("panmove",D(a=this._onDrag).call(a,this)),this.hammer.on("panend",D(o=this._onDragEnd).call(o,this)),this.hammer.get("pan").set({threshold:5,direction:Me.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}},{key:"destroy",value:function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}},{key:"redraw",value:function(){var n=this.body.dom.backgroundVertical;this.bar.parentNode!=n&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),n.appendChild(this.bar));var a=this.body.util.toScreen(this.customTime),o=this.options.locales[this.options.locale];o||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),o=this.options.locales.en);var s=this.options.title;if(s===void 0){var l;s=Ut(l="".concat(o.time,": ")).call(l,this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")),s=s.charAt(0).toUpperCase()+s.substring(1)}else typeof s=="function"&&(s=s.call(this,this.customTime));return this.options.rtl?this.bar.style.right="".concat(a,"px"):this.bar.style.left="".concat(a,"px"),this.bar.title=s,!1}},{key:"hide",value:function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}},{key:"setCustomTime",value:function(n){this.customTime=b.convert(n,"Date"),this.redraw()}},{key:"getCustomTime",value:function(){return new Date(this.customTime.valueOf())}},{key:"setCustomMarker",value:function(n,a){var o=document.createElement("div");if(o.className="vis-custom-time-marker",o.innerHTML=b.xss(n),o.style.position="absolute",a){var s,l;o.setAttribute("contenteditable","true"),o.addEventListener("pointerdown",function(){o.focus()}),o.addEventListener("input",D(s=this._onMarkerChange).call(s,this)),o.title=n,o.addEventListener("blur",D(l=function(h){this.title!=h.target.innerHTML&&(this._onMarkerChanged(h),this.title=h.target.innerHTML)}).call(l,this))}this.bar.appendChild(o)}},{key:"setCustomTitle",value:function(n){this.options.title=n}},{key:"_onDragStart",value:function(n){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,n.stopPropagation()}},{key:"_onDrag",value:function(n){if(!!this.eventParams.dragging){var a=this.options.rtl?-1*n.deltaX:n.deltaX,o=this.body.util.toScreen(this.eventParams.customTime)+a,s=this.body.util.toTime(o),l=this.body.util.getScale(),u=this.body.util.getStep(),h=this.options.snap,f=h?h(s,l,u):s;this.setCustomTime(f),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:n}),n.stopPropagation()}}},{key:"_onDragEnd",value:function(n){!this.eventParams.dragging||(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:n}),n.stopPropagation())}},{key:"_onMarkerChange",value:function(n){this.body.emitter.emit("markerchange",{id:this.options.id,title:n.target.innerHTML,event:n}),n.stopPropagation()}},{key:"_onMarkerChanged",value:function(n){this.body.emitter.emit("markerchanged",{id:this.options.id,title:n.target.innerHTML,event:n}),n.stopPropagation()}}],[{key:"customTimeFromTarget",value:function(n){for(var a=n.target;a;){if(a.hasOwnProperty("custom-time"))return a["custom-time"];a=a.parentNode}return null}}]),t}(Hn),Ss=function(){function e(){Ct(this,e)}return Ot(e,[{key:"_create",value:function(t){var i=this,n,a,o;this.dom={},this.dom.container=t,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",function(){i.initialDrawDone===!0&&i._redraw()}),this.on("rangechanged",function(){i.initialRangeChangeDone||(i.initialRangeChangeDone=!0)}),this.on("touch",D(n=this._onTouch).call(n,this)),this.on("panmove",D(a=this._onDrag).call(a,this));var s=this;this._origRedraw=D(o=this._redraw).call(o,this),this._redraw=b.throttle(this._origRedraw),this.on("_change",function(p){s.itemSet&&s.itemSet.initialItemSetDrawn&&p&&p.queue==!0?s._redraw():s._origRedraw()}),this.hammer=new Me(this.dom.root);var l=this.hammer.get("pinch").set({enable:!0});l&&K5(l),this.hammer.get("pan").set({threshold:5,direction:Me.DIRECTION_ALL}),this.timelineListeners={};var u=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];G(u).call(u,function(p){var g=function(y){s.isActive()&&s.emit(p,y)};s.hammer.on(p,g),s.timelineListeners[p]=g}),kS(this.hammer,function(p){s.emit("touch",p)}),X5(this.hammer,function(p){s.emit("release",p)});function h(p){var g=40,_=800;this.isActive()&&this.emit("mousewheel",p);var y=0,w=0;if("detail"in p&&(w=p.detail*-1),"wheelDelta"in p&&(w=p.wheelDelta),"wheelDeltaY"in p&&(w=p.wheelDeltaY),"wheelDeltaX"in p&&(y=p.wheelDeltaX*-1),"axis"in p&&p.axis===p.HORIZONTAL_AXIS&&(y=w*-1,w=0),"deltaY"in p&&(w=p.deltaY*-1),"deltaX"in p&&(y=p.deltaX),p.deltaMode&&(p.deltaMode===1?(y*=g,w*=g):(y*=g,w*=_)),this.options.preferZoom){if(!this.options.zoomKey||p[this.options.zoomKey])return}else if(this.options.zoomKey&&p[this.options.zoomKey])return;if(!(!this.options.verticalScroll&&!this.options.horizontalScroll)){if(this.options.verticalScroll&&Math.abs(w)>=Math.abs(y)){var T=this.props.scrollTop,S=T+w;if(this.isActive()){var x=this._setScrollTop(S);x!==T&&(this._redraw(),this.emit("scroll",p),p.preventDefault())}}else if(this.options.horizontalScroll){var E=Math.abs(y)>=Math.abs(w)?y:w,I=E/120*(this.range.end-this.range.start)/20,A=this.range.start+I,P=this.range.end+I,R={animation:!1,byUser:!0,event:p};this.range.setRange(A,P,R),p.preventDefault()}}}var f="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.top.addEventListener,this.dom.bottom.addEventListener,this.dom.centerContainer.addEventListener(f,D(h).call(h,this),!1),this.dom.top.addEventListener(f,D(h).call(h,this),!1),this.dom.bottom.addEventListener(f,D(h).call(h,this),!1);function c(p){if(!!s.options.verticalScroll&&(p.preventDefault(),s.isActive())){var g=-p.target.scrollTop;s._setScrollTop(g),s._redraw(),s.emit("scrollSide",p)}}this.dom.left.parentNode.addEventListener("scroll",D(c).call(c,this)),this.dom.right.parentNode.addEventListener("scroll",D(c).call(c,this));var d=!1;function v(p){var g;if(p.preventDefault&&(s.emit("dragover",s.getEventProperties(p)),p.preventDefault()),Pt(g=p.target.className).call(g,"timeline")>-1&&!d)return p.dataTransfer.dropEffect="move",d=!0,!1}function m(p){p.preventDefault&&p.preventDefault(),p.stopPropagation&&p.stopPropagation();try{var g=JSON.parse(p.dataTransfer.getData("text"));if(!g||!g.content)return}catch(_){return!1}return d=!1,p.center={x:p.clientX,y:p.clientY},g.target!=="item"?s.itemSet._onAddItem(p):s.itemSet._onDropObjectOnItem(p),s.emit("drop",s.getEventProperties(p)),!1}if(this.dom.center.addEventListener("dragover",D(v).call(v,this),!1),this.dom.center.addEventListener("drop",D(m).call(m,this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!t)throw new Error("No container provided");t.appendChild(this.dom.root),t.appendChild(this.dom.loadingScreen)}},{key:"setOptions",value:function(t){var i;if(t){var n=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","verticalScroll","longSelectPressTime","snap"];if(b.selectiveExtend(n,this.options,t),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),at(this.options.orientation)!=="object"&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in t&&(typeof t.orientation=="string"?this.options.orientation={item:t.orientation,axis:t.orientation}:at(t.orientation)==="object"&&("item"in t.orientation&&(this.options.orientation.item=t.orientation.item),"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis))),this.options.orientation.axis==="both"){if(!this.timeAxis2){var a=this.timeAxis2=new Tc(this.body);a.setOptions=function(f){var c=f?b.extend({},f):{};c.orientation="top",Tc.prototype.setOptions.call(a,c)},this.components.push(a)}}else if(this.timeAxis2){var o,s=Pt(o=this.components).call(o,this.timeAxis2);if(s!==-1){var l;Ir(l=this.components).call(l,s,1)}this.timeAxis2.destroy(),this.timeAxis2=null}typeof t.drawPoints=="function"&&(t.drawPoints={onRender:t.drawPoints}),"hiddenDates"in this.options&&pm(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in t&&(t.clickToUse?this.activator||(this.activator=new Dr(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(G(i=this.components).call(i,function(f){return f.setOptions(t)}),"configure"in t){var u;this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(t.configure);var h=b.deepExtend({},this.options);G(u=this.components).call(u,function(f){b.deepExtend(h,f.options)}),this.configurator.setModuleOptions({global:h})}this._redraw()}},{key:"isActive",value:function(){return!this.activator||this.activator.active}},{key:"destroy",value:function(){var t;this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(var i in this.timelineListeners)this.timelineListeners.hasOwnProperty(i)&&delete this.timelineListeners[i];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,G(t=this.components).call(t,function(n){return n.destroy()}),this.body=null}},{key:"setCustomTime",value:function(t,i){var n,a=mt(n=this.customTimes).call(n,function(o){return i===o.options.id});if(a.length===0)throw new Error("No custom time bar found with id ".concat(hr(i)));a.length>0&&a[0].setCustomTime(t)}},{key:"getCustomTime",value:function(t){var i,n=mt(i=this.customTimes).call(i,function(a){return a.options.id===t});if(n.length===0)throw new Error("No custom time bar found with id ".concat(hr(t)));return n[0].getCustomTime()}},{key:"setCustomTimeMarker",value:function(t,i,n){var a,o=mt(a=this.customTimes).call(a,function(s){return s.options.id===i});if(o.length===0)throw new Error("No custom time bar found with id ".concat(hr(i)));o.length>0&&o[0].setCustomMarker(t,n)}},{key:"setCustomTimeTitle",value:function(t,i){var n,a=mt(n=this.customTimes).call(n,function(o){return o.options.id===i});if(a.length===0)throw new Error("No custom time bar found with id ".concat(hr(i)));if(a.length>0)return a[0].setCustomTitle(t)}},{key:"getEventProperties",value:function(t){return{event:t}}},{key:"addCustomTime",value:function(t,i){var n,a=t!==void 0?b.convert(t,"Date"):new Date,o=PS(n=this.customTimes).call(n,function(l){return l.options.id===i});if(o)throw new Error("A custom time with id ".concat(hr(i)," already exists"));var s=new Tm(this.body,b.extend({},this.options,{time:a,id:i,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(s),this.components.push(s),this._redraw(),i}},{key:"removeCustomTime",value:function(t){var i,n=this,a=mt(i=this.customTimes).call(i,function(o){return o.options.id===t});if(a.length===0)throw new Error("No custom time bar found with id ".concat(hr(t)));G(a).call(a,function(o){var s,l,u,h;Ir(s=n.customTimes).call(s,Pt(l=n.customTimes).call(l,o),1),Ir(u=n.components).call(u,Pt(h=n.components).call(h,o),1),o.destroy()})}},{key:"getVisibleItems",value:function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}},{key:"getItemsAtCurrentTime",value:function(t){return this.time=t,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}},{key:"getVisibleGroups",value:function(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}},{key:"fit",value:function(t,i){var n=this.getDataRange();if(!(n.min===null&&n.max===null)){var a=n.max-n.min,o=new Date(n.min.valueOf()-a*.01),s=new Date(n.max.valueOf()+a*.01),l=t&&t.animation!==void 0?t.animation:!0;this.range.setRange(o,s,{animation:l},i)}}},{key:"getDataRange",value:function(){throw new Error("Cannot invoke abstract method getDataRange")}},{key:"setWindow",value:function(t,i,n,a){typeof arguments[2]=="function"&&(a=arguments[2],n={});var o,s;arguments.length==1?(s=arguments[0],o=s.animation!==void 0?s.animation:!0,this.range.setRange(s.start,s.end,{animation:o})):arguments.length==2&&typeof arguments[1]=="function"?(s=arguments[0],a=arguments[1],o=s.animation!==void 0?s.animation:!0,this.range.setRange(s.start,s.end,{animation:o},a)):(o=n&&n.animation!==void 0?n.animation:!0,this.range.setRange(t,i,{animation:o},a))}},{key:"moveTo",value:function(t,i,n){typeof arguments[1]=="function"&&(n=arguments[1],i={});var a=this.range.end-this.range.start,o=b.convert(t,"Date").valueOf(),s=o-a/2,l=o+a/2,u=i&&i.animation!==void 0?i.animation:!0;this.range.setRange(s,l,{animation:u},n)}},{key:"getWindow",value:function(){var t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}}},{key:"zoomIn",value:function(t,i,n){if(!(!t||t<0||t>1)){typeof arguments[1]=="function"&&(n=arguments[1],i={});var a=this.getWindow(),o=a.start.valueOf(),s=a.end.valueOf(),l=s-o,u=l/(1+t),h=(l-u)/2,f=o+h,c=s-h;this.setWindow(f,c,i,n)}}},{key:"zoomOut",value:function(t,i,n){if(!(!t||t<0||t>1)){typeof arguments[1]=="function"&&(n=arguments[1],i={});var a=this.getWindow(),o=a.start.valueOf(),s=a.end.valueOf(),l=s-o,u=o-l*t/2,h=s+l*t/2;this.setWindow(u,h,i,n)}}},{key:"redraw",value:function(){this._redraw()}},{key:"_redraw",value:function(){var t;this.redrawCount++;var i=this.dom;if(!(!i||!i.container||i.root.offsetWidth==0)){var n=!1,a=this.options,o=this.props;gc(this.options.moment,this.body,this.options.hiddenDates),a.orientation=="top"?(b.addClassName(i.root,"vis-top"),b.removeClassName(i.root,"vis-bottom")):(b.removeClassName(i.root,"vis-top"),b.addClassName(i.root,"vis-bottom")),a.rtl?(b.addClassName(i.root,"vis-rtl"),b.removeClassName(i.root,"vis-ltr")):(b.addClassName(i.root,"vis-ltr"),b.removeClassName(i.root,"vis-rtl")),i.root.style.maxHeight=b.option.asSize(a.maxHeight,""),i.root.style.minHeight=b.option.asSize(a.minHeight,""),i.root.style.width=b.option.asSize(a.width,"");var s=i.root.offsetWidth;o.border.left=1,o.border.right=1,o.border.top=1,o.border.bottom=1,o.center.height=i.center.offsetHeight,o.left.height=i.left.offsetHeight,o.right.height=i.right.offsetHeight,o.top.height=i.top.clientHeight||-o.border.top,o.bottom.height=Math.round(i.bottom.getBoundingClientRect().height)||i.bottom.clientHeight||-o.border.bottom;var l=Math.max(o.left.height,o.center.height,o.right.height),u=o.top.height+l+o.bottom.height+o.border.top+o.border.bottom;i.root.style.height=b.option.asSize(a.height,"".concat(u,"px")),o.root.height=i.root.offsetHeight,o.background.height=o.root.height;var h=o.root.height-o.top.height-o.bottom.height;o.centerContainer.height=h,o.leftContainer.height=h,o.rightContainer.height=o.leftContainer.height,o.root.width=s,o.background.width=o.root.width,this.initialDrawDone||(o.scrollbarWidth=b.getScrollBarWidth());var f=i.leftContainer.clientWidth,c=i.rightContainer.clientWidth;a.verticalScroll?a.rtl?(o.left.width=f||-o.border.left,o.right.width=c+o.scrollbarWidth||-o.border.right):(o.left.width=f+o.scrollbarWidth||-o.border.left,o.right.width=c||-o.border.right):(o.left.width=f||-o.border.left,o.right.width=c||-o.border.right),this._setDOM();var d=this._updateScrollTop();a.orientation.item!="top"&&(d+=Math.max(o.centerContainer.height-o.center.height-o.border.top-o.border.bottom,0)),i.center.style.transform="translateY(".concat(d,"px)");var v=o.scrollTop==0?"hidden":"",m=o.scrollTop==o.scrollTopMin?"hidden":"";i.shadowTop.style.visibility=v,i.shadowBottom.style.visibility=m,i.shadowTopLeft.style.visibility=v,i.shadowBottomLeft.style.visibility=m,i.shadowTopRight.style.visibility=v,i.shadowBottomRight.style.visibility=m,a.verticalScroll&&(i.rightContainer.className="vis-panel vis-right vis-vertical-scroll",i.leftContainer.className="vis-panel vis-left vis-vertical-scroll",i.shadowTopRight.style.visibility="hidden",i.shadowBottomRight.style.visibility="hidden",i.shadowTopLeft.style.visibility="hidden",i.shadowBottomLeft.style.visibility="hidden",i.left.style.top="0px",i.right.style.top="0px"),(!a.verticalScroll||o.center.height<o.centerContainer.height)&&(i.left.style.top="".concat(d,"px"),i.right.style.top="".concat(d,"px"),i.rightContainer.className=i.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),i.leftContainer.className=i.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),o.left.width=f||-o.border.left,o.right.width=c||-o.border.right,this._setDOM());var p=o.center.height>o.centerContainer.height;this.hammer.get("pan").set({direction:p?Me.DIRECTION_ALL:Me.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),G(t=this.components).call(t,function(_){n=_.redraw()||n});var g=5;if(n)if(this.redrawCount<g){this.body.emitter.emit("_change");return}else console.log("WARNING: infinite loop in redraw?");else this.redrawCount=0;this.body.emitter.emit("changed")}}},{key:"_setDOM",value:function(){var t=this.props,i=this.dom;t.leftContainer.width=t.left.width,t.rightContainer.width=t.right.width;var n=t.root.width-t.left.width-t.right.width;t.center.width=n,t.centerContainer.width=n,t.top.width=n,t.bottom.width=n,i.background.style.height="".concat(t.background.height,"px"),i.backgroundVertical.style.height="".concat(t.background.height,"px"),i.backgroundHorizontal.style.height="".concat(t.centerContainer.height,"px"),i.centerContainer.style.height="".concat(t.centerContainer.height,"px"),i.leftContainer.style.height="".concat(t.leftContainer.height,"px"),i.rightContainer.style.height="".concat(t.rightContainer.height,"px"),i.background.style.width="".concat(t.background.width,"px"),i.backgroundVertical.style.width="".concat(t.centerContainer.width,"px"),i.backgroundHorizontal.style.width="".concat(t.background.width,"px"),i.centerContainer.style.width="".concat(t.center.width,"px"),i.top.style.width="".concat(t.top.width,"px"),i.bottom.style.width="".concat(t.bottom.width,"px"),i.background.style.left="0",i.background.style.top="0",i.backgroundVertical.style.left="".concat(t.left.width+t.border.left,"px"),i.backgroundVertical.style.top="0",i.backgroundHorizontal.style.left="0",i.backgroundHorizontal.style.top="".concat(t.top.height,"px"),i.centerContainer.style.left="".concat(t.left.width,"px"),i.centerContainer.style.top="".concat(t.top.height,"px"),i.leftContainer.style.left="0",i.leftContainer.style.top="".concat(t.top.height,"px"),i.rightContainer.style.left="".concat(t.left.width+t.center.width,"px"),i.rightContainer.style.top="".concat(t.top.height,"px"),i.top.style.left="".concat(t.left.width,"px"),i.top.style.top="0",i.bottom.style.left="".concat(t.left.width,"px"),i.bottom.style.top="".concat(t.top.height+t.centerContainer.height,"px"),i.center.style.left="0",i.left.style.left="0",i.right.style.left="0"}},{key:"setCurrentTime",value:function(t){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(t)}},{key:"getCurrentTime",value:function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}},{key:"_toTime",value:function(t){return SS(this,t,this.props.center.width)}},{key:"_toGlobalTime",value:function(t){return SS(this,t,this.props.root.width)}},{key:"_toScreen",value:function(t){return ES(this,t,this.props.center.width)}},{key:"_toGlobalScreen",value:function(t){return ES(this,t,this.props.root.width)}},{key:"_initAutoResize",value:function(){this.options.autoResize==!0?this._startAutoResize():this._stopAutoResize()}},{key:"_startAutoResize",value:function(){var t=this;this._stopAutoResize(),this._onResize=function(){if(t.options.autoResize!=!0){t._stopAutoResize();return}if(t.dom.root){var i=t.dom.root.offsetHeight,n=t.dom.root.offsetWidth;(n!=t.props.lastWidth||i!=t.props.lastHeight)&&(t.props.lastWidth=n,t.props.lastHeight=i,t.props.scrollbarWidth=b.getScrollBarWidth(),t.body.emitter.emit("_change"))}},b.addEventListener(window,"resize",this._onResize),t.dom.root&&(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight),this.watchTimer=U5(this._onResize,1e3)}},{key:"_stopAutoResize",value:function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(b.removeEventListener(window,"resize",this._onResize),this._onResize=null)}},{key:"_onTouch",value:function(t){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}},{key:"_onPinch",value:function(t){this.touch.allowDragging=!1}},{key:"_onDrag",value:function(t){if(!!t&&!!this.touch.allowDragging){var i=t.deltaY,n=this._getScrollTop(),a=this._setScrollTop(this.touch.initialScrollTop+i);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),a!=n&&this.emit("verticalDrag")}}},{key:"_setScrollTop",value:function(t){return this.props.scrollTop=t,this._updateScrollTop(),this.props.scrollTop}},{key:"_updateScrollTop",value:function(){var t=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return t!=this.props.scrollTopMin&&(this.options.orientation.item!="top"&&(this.props.scrollTop+=t-this.props.scrollTopMin),this.props.scrollTopMin=t),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<t&&(this.props.scrollTop=t),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}},{key:"_getScrollTop",value:function(){return this.props.scrollTop}},{key:"_createConfigurator",value:function(){throw new Error("Cannot invoke abstract method _createConfigurator")}}]),e}();Gp(Ss.prototype);function EX(e){var r=SX();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=z(i,arguments,a)}else n=i.apply(this,arguments);return sr(this,n)}}function SX(){if(typeof Reflect=="undefined"||!z||z.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z(Boolean,[],function(){})),!0}catch(e){return!1}}var GS=function(e){or(t,e);var r=EX(t);function t(i,n){var a,o;Ct(this,t),o=r.call(this),o.body=i,o.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:Ke,locales:Es,locale:"en"},o.options=b.extend({},o.defaultOptions),o.setOptions(n),o.options.locales=b.extend({},Es,o.options.locales);var s=o.defaultOptions.locales[o.defaultOptions.locale];return G(a=pe(o.options.locales)).call(a,function(l){o.options.locales[l]=b.extend({},s,o.options.locales[l])}),o.offset=0,o._create(),o}return Ot(t,[{key:"_create",value:function(){var n=document.createElement("div");n.className="vis-current-time",n.style.position="absolute",n.style.top="0px",n.style.height="100%",this.bar=n}},{key:"destroy",value:function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}},{key:"setOptions",value:function(n){n&&b.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,n)}},{key:"redraw",value:function(){if(this.options.showCurrentTime){var n,a,o=this.body.dom.backgroundVertical;this.bar.parentNode!=o&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),o.appendChild(this.bar),this.start());var s=this.options.moment(lr()+this.offset);this.options.alignCurrentTime&&(s=s.startOf(this.options.alignCurrentTime));var l=this.body.util.toScreen(s),u=this.options.locales[this.options.locale];u||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),u=this.options.locales.en);var h=Ut(n=Ut(a="".concat(u.current," ")).call(a,u.time,": ")).call(n,s.format("dddd, MMMM Do YYYY, H:mm:ss"));h=h.charAt(0).toUpperCase()+h.substring(1),this.options.rtl?this.bar.style.transform="translateX(".concat(l*-1,"px)"):this.bar.style.transform="translateX(".concat(l,"px)"),this.bar.title=h}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}},{key:"start",value:function(){var n=this;function a(){n.stop();var o=n.body.range.conversion(n.body.domProps.center.width).scale,s=1/o/10;s<30&&(s=30),s>1e3&&(s=1e3),n.redraw(),n.body.emitter.emit("currentTimeTick"),n.currentTimeTimer=Re(a,s)}a()}},{key:"stop",value:function(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}},{key:"setCurrentTime",value:function(n){var a=b.convert(n,"Date").valueOf(),o=lr();this.offset=a-o,this.redraw()}},{key:"getCurrentTime",value:function(){return new Date(lr()+this.offset)}}]),t}(Hn),xX=$n.find,YS="find",jS=!0;YS in[]&&Array(1)[YS](function(){jS=!1});Z({target:"Array",proto:!0,forced:jS},{find:function(r){return xX(this,r,arguments.length>1?arguments[1]:void 0)}});var CX=he("Array").find,WS=Array.prototype,OX=function(e){var r=e.find;return e===WS||e instanceof Array&&r===WS.find?CX:r},IX=OX,PX=IX,kX=!Lt(function(){return Object.isExtensible(Object.preventExtensions({}))}),HS=Rn(function(e){var r=xr.f,t=eu("meta"),i=0,n=Object.isExtensible||function(){return!0},a=function(h){r(h,t,{value:{objectID:"O"+ ++i,weakData:{}}})},o=function(h,f){if(!le(h))return typeof h=="symbol"?h:(typeof h=="string"?"S":"P")+h;if(!st(h,t)){if(!n(h))return"F";if(!f)return"E";a(h)}return h[t].objectID},s=function(h,f){if(!st(h,t)){if(!n(h))return!0;if(!f)return!1;a(h)}return h[t].weakData},l=function(h){return kX&&u.REQUIRED&&n(h)&&!st(h,t)&&a(h),h},u=e.exports={REQUIRED:!1,fastKey:o,getWeakData:s,onFreeze:l};ns[t]=!0}),Du=function(e,r){this.stopped=e,this.result=r},BS=function(e,r,t){var i=t&&t.that,n=!!(t&&t.AS_ENTRIES),a=!!(t&&t.IS_ITERATOR),o=!!(t&&t.INTERRUPTED),s=rs(r,i,1+n+o),l,u,h,f,c,d,v,m=function(g){return l&&Ap(l),new Du(!0,g)},p=function(g){return n?(ar(g),o?s(g[0],g[1],m):s(g[0],g[1])):o?s(g,m):s(g)};if(a)l=e;else{if(u=Mp(e),typeof u!="function")throw TypeError("Target is not iterable");if(wT(u)){for(h=0,f=vi(e.length);f>h;h++)if(c=p(e[h]),c&&c instanceof Du)return c;return new Du(!1)}l=u.call(e)}for(d=l.next;!(v=d.call(l)).done;){try{c=p(v.value)}catch(g){throw Ap(l),g}if(typeof c=="object"&&c&&c instanceof Du)return c}return new Du(!1)},US=function(e,r,t){if(!(e instanceof r))throw TypeError("Incorrect "+(t?t+" ":"")+"invocation");return e},DX=xr.f,RX=$n.forEach,AX=gi.set,MX=gi.getterFor,LX=function(e,r,t){var i=e.indexOf("Map")!==-1,n=e.indexOf("Weak")!==-1,a=i?"set":"add",o=Wt[e],s=o&&o.prototype,l={},u;if(!Et||typeof o!="function"||!(n||s.forEach&&!Lt(function(){new o().entries().next()})))u=t.getConstructor(r,e,i,a),HS.REQUIRED=!0;else{u=r(function(f,c){AX(US(f,u,e),{type:e,collection:new o}),c!=null&&BS(c,f[a],{that:f,AS_ENTRIES:i})});var h=MX(e);RX(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(f){var c=f=="add"||f=="set";f in s&&!(n&&f=="clear")&&Cr(u.prototype,f,function(d,v){var m=h(this).collection;if(!c&&n&&!le(d))return f=="get"?void 0:!1;var p=m[f](d===0?0:d,v);return c?this:p})}),n||DX(u.prototype,"size",{configurable:!0,get:function(){return h(this).collection.size}})}return ou(u,e,!1,!0),l[e]=u,Z({global:!0,forced:!0},l),n||t.setStrong(u,e,i),u},zS=function(e,r,t){for(var i in r)t&&t.unsafe&&e[i]?e[i]=r[i]:Gf(e,i,r[i],t);return e},VS=ue("species"),FX=function(e){var r=Ya(e),t=xr.f;Et&&r&&!r[VS]&&t(r,VS,{configurable:!0,get:function(){return this}})},NX=xr.f,XS=HS.fastKey,KS=gi.set,Em=gi.getterFor,$X={getConstructor:function(e,r,t,i){var n=e(function(l,u){US(l,n,r),KS(l,{type:r,index:tn(null),first:void 0,last:void 0,size:0}),Et||(l.size=0),u!=null&&BS(u,l[i],{that:l,AS_ENTRIES:t})}),a=Em(r),o=function(l,u,h){var f=a(l),c=s(l,u),d,v;return c?c.value=h:(f.last=c={index:v=XS(u,!0),key:u,value:h,previous:d=f.last,next:void 0,removed:!1},f.first||(f.first=c),d&&(d.next=c),Et?f.size++:l.size++,v!=="F"&&(f.index[v]=c)),l},s=function(l,u){var h=a(l),f=XS(u),c;if(f!=="F")return h.index[f];for(c=h.first;c;c=c.next)if(c.key==u)return c};return zS(n.prototype,{clear:function(){for(var u=this,h=a(u),f=h.index,c=h.first;c;)c.removed=!0,c.previous&&(c.previous=c.previous.next=void 0),delete f[c.index],c=c.next;h.first=h.last=void 0,Et?h.size=0:u.size=0},delete:function(l){var u=this,h=a(u),f=s(u,l);if(f){var c=f.next,d=f.previous;delete h.index[f.index],f.removed=!0,d&&(d.next=c),c&&(c.previous=d),h.first==f&&(h.first=c),h.last==f&&(h.last=d),Et?h.size--:u.size--}return!!f},forEach:function(u){for(var h=a(this),f=rs(u,arguments.length>1?arguments[1]:void 0,3),c;c=c?c.next:h.first;)for(f(c.value,c.key,this);c&&c.removed;)c=c.previous},has:function(u){return!!s(this,u)}}),zS(n.prototype,t?{get:function(u){var h=s(this,u);return h&&h.value},set:function(u,h){return o(this,u===0?0:u,h)}}:{add:function(u){return o(this,u=u===0?0:u,u)}}),Et&&NX(n.prototype,"size",{get:function(){return a(this).size}}),n},setStrong:function(e,r,t){var i=r+" Iterator",n=Em(r),a=Em(i);Pp(e,r,function(o,s){KS(this,{type:i,target:o,state:n(o),kind:s,last:void 0})},function(){for(var o=a(this),s=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,{value:void 0,done:!0}):s=="keys"?{value:l.key,done:!1}:s=="values"?{value:l.value,done:!1}:{value:[l.key,l.value],done:!1}},t?"entries":"values",!t,!0),FX(r)}};LX("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},$X);var GX=lt.Set,YX=GX,xc=YX,Bn=.001;function jX(e){Ie(e).call(e,function(r,t){return r.data.start-t.data.start})}function WX(e){Ie(e).call(e,function(r,t){var i="end"in r.data?r.data.end:r.data.start,n="end"in t.data?t.data.end:t.data.start;return i-n})}function ZS(e,r,t,i){if(t)for(var n=0;n<e.length;n++)e[n].top=null;for(var n=0;n<e.length;n++){var a=e[n];if(a.stack&&a.top===null){a.top=r.axis;var o=!1;do{for(var s=null,l=0,u=e.length;l<u;l++){var h=e[l];if(o=i()||!1,o)return!0;if(h.top!==null&&h!==a&&h.stack&&QS(a,h,r.item,h.options.rtl)){s=h;break}}s!=null&&(a.top=s.top+s.height+r.item.vertical)}while(s)}}return o}function HX(e,r,t){for(var i=0;i<e.length;i++)e[i].top=null;var n=t.height;for(i=0;i<e.length;i++){var a=e[i];if(a.stack&&a.top===null){a.top=a.baseTop;do{for(var o=null,s=0,l=e.length;s<l;s++){var u=e[s];if(u.top!==null&&u!==a&&QS(a,u,r.item,u.options.rtl)){o=u;break}}o!=null&&(a.top=o.top+o.height+r.item.vertical),a.top+a.height>n&&(n=a.top+a.height)}while(o)}}t.height=n-t.top+.5*r.item.vertical}function BX(e,r,t,i){for(var n=0;n<e.length;n++)if(e[n].data.subgroup==null)e[n].top=r.item.vertical;else if(e[n].data.subgroup!==void 0&&i){var a=0;for(var o in t)t.hasOwnProperty(o)&&t[o].visible==!0&&t[o].index<t[e[n].data.subgroup].index&&(a+=t[o].height,t[e[n].data.subgroup].top=a);e[n].top=a+.5*r.item.vertical}i||UX(e,r,t)}function UX(e,r,t){for(var i in t)if(t.hasOwnProperty(i)){t[i].top=0;do{var n=null;for(var a in t)if(t[a].top!==null&&a!==i&&t[i].index>t[a].index&&zX(t[i],t[a])){n=t[a];break}n!=null&&(t[i].top=n.top+n.height)}while(n)}for(var o=0;o<e.length;o++)e[o].data.subgroup!==void 0&&(e[o].top=t[e[o].data.subgroup].top+.5*r.item.vertical)}function qS(e,r,t){var i=!1,n=[];for(var a in t)t[a].hasOwnProperty("index")?n[t[a].index]=a:n.push(a);for(var o=0;o<n.length;o++)if(a=n[o],t.hasOwnProperty(a)){i=i||t[a].stack,t[a].top=0;for(var s in t)t[s].visible&&t[a].index>t[s].index&&(t[a].top+=t[s].height);for(var l=e[a],u=0;u<l.length;u++)l[u].data.subgroup!==void 0&&(l[u].top=t[l[u].data.subgroup].top+.5*r.item.vertical,t[a].stack&&(l[u].baseTop=l[u].top));i&&t[a].stack&&HX(e[a],r,t[a])}}function QS(e,r,t,i){return i?e.right-t.horizontal+Bn<r.right+r.width&&e.right+e.width+t.horizontal-Bn>r.right&&e.top-t.vertical+Bn<r.top+r.height&&e.top+e.height+t.vertical-Bn>r.top:e.left-t.horizontal+Bn<r.left+r.width&&e.left+e.width+t.horizontal-Bn>r.left&&e.top-t.vertical+Bn<r.top+r.height&&e.top+e.height+t.vertical-Bn>r.top}function zX(e,r){var t=e.start<r.end&&e.end>r.start,i=e.top<r.top+r.height&&e.top+e.height>r.top;return t&&i}var VX="__ungrouped__",XX="__background__",JS={UNGROUPED:VX,BACKGROUND:XX},Sm=function(){function e(r,t,i){var n=this;if(Ct(this,e),this.groupId=r,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=t&&t.subgroupOrder,this.itemSet=i,this.isVisible=null,this.stackDirty=!0,this._disposeCallbacks=[],t&&t.nestedGroups&&(this.nestedGroups=t.nestedGroups,t.showNested==!1?this.showNested=!1:this.showNested=!0),t&&t.subgroupStack)if(typeof t.subgroupStack=="boolean")this.doInnerStack=t.subgroupStack,this.subgroupStackAll=t.subgroupStack;else for(var a in t.subgroupStack)this.subgroupStack[a]=t.subgroupStack[a],this.doInnerStack=this.doInnerStack||t.subgroupStack[a];t&&t.heightMode?this.heightMode=t.heightMode:this.heightMode=i.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var o=function(){n.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",o),this._disposeCallbacks.push(function(){n.itemSet.body.emitter.off("checkRangedItems",o)}),this._create(),this.setData(t)}return Ot(e,[{key:"_create",value:function(){var t=document.createElement("div");this.itemSet.options.groupEditable.order?t.className="vis-label draggable":t.className="vis-label",this.dom.label=t;var i=document.createElement("div");i.className="vis-inner",t.appendChild(i),this.dom.inner=i;var n=document.createElement("div");n.className="vis-group",n["vis-group"]=this,this.dom.foreground=n,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}},{key:"setData",value:function(t){if(!this.itemSet.groupTouchParams.isDragging){var i,n;if(t&&t.subgroupVisibility)for(var a in t.subgroupVisibility)this.subgroupVisibility[a]=t.subgroupVisibility[a];if(this.itemSet.options&&this.itemSet.options.groupTemplate){var o;n=D(o=this.itemSet.options.groupTemplate).call(o,this),i=n(t,this.dom.inner)}else i=t&&t.content;if(i instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(i)}else i instanceof Object&&i.isReactComponent||(i instanceof Object?n(t,this.dom.inner):i!=null?this.dom.inner.innerHTML=b.xss(i):this.dom.inner.innerHTML=b.xss(this.groupId||""));this.dom.label.title=t&&t.title||"",this.dom.inner.firstChild?b.removeClassName(this.dom.inner,"vis-hidden"):b.addClassName(this.dom.inner,"vis-hidden"),t&&t.nestedGroups?((!this.nestedGroups||this.nestedGroups!=t.nestedGroups)&&(this.nestedGroups=t.nestedGroups),(t.showNested!==void 0||this.showNested===void 0)&&(t.showNested==!1?this.showNested=!1:this.showNested=!0),b.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(b.removeClassName(this.dom.label,"collapsed"),b.addClassName(this.dom.label,"expanded")):(b.removeClassName(this.dom.label,"expanded"),b.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,b.removeClassName(this.dom.label,"collapsed"),b.removeClassName(this.dom.label,"expanded"),b.removeClassName(this.dom.label,"vis-nesting-group")),t&&(t.treeLevel||t.nestedInGroup)?(b.addClassName(this.dom.label,"vis-nested-group"),t.treeLevel?b.addClassName(this.dom.label,"vis-group-level-"+t.treeLevel):b.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):b.addClassName(this.dom.label,"vis-group-level-0");var s=t&&t.className||null;s!=this.className&&(this.className&&(b.removeClassName(this.dom.label,this.className),b.removeClassName(this.dom.foreground,this.className),b.removeClassName(this.dom.background,this.className),b.removeClassName(this.dom.axis,this.className)),b.addClassName(this.dom.label,s),b.addClassName(this.dom.foreground,s),b.addClassName(this.dom.background,s),b.addClassName(this.dom.axis,s),this.className=s),this.style&&(b.removeCssText(this.dom.label,this.style),this.style=null),t&&t.style&&(b.addCssText(this.dom.label,t.style),this.style=t.style)}}},{key:"getLabelWidth",value:function(){return this.props.label.width}},{key:"_didMarkerHeightChange",value:function(){var t=this.dom.marker.clientHeight;if(t!=this.lastMarkerHeight){this.lastMarkerHeight=t;var i={},n=0;G(b).call(b,this.items,function(l,u){if(l.dirty=!0,l.displayed){var h=!0;i[u]=l.redraw(h),n=i[u].length}});var a=n>0;if(a)for(var o=function(u){G(b).call(b,i,function(h){h[u]()})},s=0;s<n;s++)o(s);return!0}else return!1}},{key:"_calculateGroupSizeAndPosition",value:function(){var t=this.dom.foreground,i=t.offsetTop,n=t.offsetLeft,a=t.offsetWidth;this.top=i,this.right=n,this.width=a}},{key:"_shouldBailItemsRedraw",value:function(){var t=this,i=this.itemSet.options.onTimeout,n={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:i&&i.timeoutMs,userBailFunction:i&&i.callback,shouldBailStackItems:this.shouldBailStackItems},a=null;if(!this.itemSet.initialDrawDone){if(n.shouldBailStackItems)return!0;Math.abs(lr()-new Date(n.relativeBailingTime))>n.bailTimeMs&&(n.userBailFunction&&this.itemSet.userContinueNotBail==null?n.userBailFunction(function(o){t.itemSet.userContinueNotBail=o,a=!o}):t.itemSet.userContinueNotBail==!1?a=!0:a=!1)}return a}},{key:"_redrawItems",value:function(t,i,n,a){var o=this,s=t||this.stackDirty||this.isVisible&&!i;if(s){var l,u,h,f,c,d,v={byEnd:mt(l=this.orderedItems.byEnd).call(l,function(R){return!R.isCluster}),byStart:mt(u=this.orderedItems.byStart).call(u,function(R){return!R.isCluster})},m={byEnd:yi(new xc(mt(h=ve(f=this.orderedItems.byEnd).call(f,function(R){return R.cluster})).call(h,function(R){return!!R}))),byStart:yi(new xc(mt(c=ve(d=this.orderedItems.byStart).call(d,function(R){return R.cluster})).call(c,function(R){return!!R})))},p=function(){var N,j,W,U=o._updateItemsInRange(v,mt(N=o.visibleItems).call(N,function(k){return!k.isCluster}),a),H=o._updateClustersInRange(m,mt(j=o.visibleItems).call(j,function(k){return k.isCluster}),a);return Ut(W=[]).call(W,yi(U),yi(H))},g=function(N){var j={},W=function(k){var O,M=mt(O=o.visibleItems).call(O,function($){return $.data.subgroup===k});j[k]=N?Ie(M).call(M,function($,C){return N($.data,C.data)}):M};for(var U in o.subgroups)W(U);return j};if(typeof this.itemSet.options.order=="function"){var _=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){var y=g(this.itemSet.options.order);qS(y,n,this.subgroups),this.visibleItems=p(),this._updateSubGroupHeights(n)}else{var w,T,S,x;this.visibleItems=p(),this._updateSubGroupHeights(n);var E=Ie(w=mt(T=Or(S=this.visibleItems).call(S)).call(T,function(R){return R.isCluster||!R.isCluster&&!R.cluster})).call(w,function(R,N){return _.itemSet.options.order(R.data,N.data)});this.shouldBailStackItems=ZS(E,n,!0,D(x=this._shouldBailItemsRedraw).call(x,this))}}else if(this.visibleItems=p(),this._updateSubGroupHeights(n),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){var I=g();qS(I,n,this.subgroups)}else{var A;this.shouldBailStackItems=ZS(this.visibleItems,n,!0,D(A=this._shouldBailItemsRedraw).call(A,this))}else BX(this.visibleItems,n,this.subgroups,this.itemSet.options.stackSubgroups);for(var P=0;P<this.visibleItems.length;P++)this.visibleItems[P].repositionX(),this.subgroupVisibility[this.visibleItems[P].data.subgroup]!==void 0&&(this.subgroupVisibility[this.visibleItems[P].data.subgroup]||this.visibleItems[P].hide());this.itemSet.options.cluster&&G(b).call(b,this.items,function(R){R.cluster&&R.displayed&&R.hide()}),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}},{key:"_didResize",value:function(t,i){t=b.updateProperty(this,"height",i)||t;var n=this.dom.inner.clientWidth,a=this.dom.inner.clientHeight;return t=b.updateProperty(this.props.label,"width",n)||t,t=b.updateProperty(this.props.label,"height",a)||t,t}},{key:"_applyGroupHeight",value:function(t){this.dom.background.style.height="".concat(t,"px"),this.dom.foreground.style.height="".concat(t,"px"),this.dom.label.style.height="".concat(t,"px")}},{key:"_updateItemsVerticalPosition",value:function(t){for(var i=0,n=this.visibleItems.length;i<n;i++){var a=this.visibleItems[i];a.repositionY(t),!this.isVisible&&this.groupId!=JS.BACKGROUND&&a.displayed&&a.hide()}}},{key:"redraw",value:function(t,i,n,a){var o=this,s,l,u,h,f,c=!1,d=this.isVisible,v,m=[function(){n=o._didMarkerHeightChange.call(o)||n},D(s=this._updateSubGroupHeights).call(s,this,i),D(l=this._calculateGroupSizeAndPosition).call(l,this),function(){var g;o.isVisible=D(g=o._isGroupVisible).call(g,o)(t,i)},function(){var g;D(g=o._redrawItems).call(g,o)(n,d,i,t)},D(u=this._updateSubgroupsSizes).call(u,this),function(){var g;v=D(g=o._calculateHeight).call(g,o)(i)},D(h=this._calculateGroupSizeAndPosition).call(h,this),function(){var g;c=D(g=o._didResize).call(g,o)(c,v)},function(){var g;D(g=o._applyGroupHeight).call(g,o)(v)},function(){var g;D(g=o._updateItemsVerticalPosition).call(g,o)(i)},D(f=function(){return!o.isVisible&&o.height&&(c=!1),c}).call(f,this)];if(a)return m;var p;return G(m).call(m,function(g){p=g()}),p}},{key:"_updateSubGroupHeights",value:function(t){var i=this;if(pe(this.subgroups).length>0){var n=this;this._resetSubgroups(),G(b).call(b,this.visibleItems,function(a){a.data.subgroup!==void 0&&(n.subgroups[a.data.subgroup].height=Math.max(n.subgroups[a.data.subgroup].height,a.height+t.item.vertical),n.subgroups[a.data.subgroup].visible=typeof i.subgroupVisibility[a.data.subgroup]=="undefined"?!0:Boolean(i.subgroupVisibility[a.data.subgroup]))})}}},{key:"_isGroupVisible",value:function(t,i){return this.top<=t.body.domProps.centerContainer.height-t.body.domProps.scrollTop+i.axis&&this.top+this.height+i.axis>=-t.body.domProps.scrollTop}},{key:"_calculateHeight",value:function(t){var i,n;if(this.heightMode==="fixed"?n=b.toArray(this.items):n=this.visibleItems,n.length>0){var a=n[0].top,o=n[0].top+n[0].height;if(G(b).call(b,n,function(l){a=Math.min(a,l.top),o=Math.max(o,l.top+l.height)}),a>t.axis){var s=a-t.axis;o-=s,G(b).call(b,n,function(l){l.top-=s})}i=Math.ceil(o+t.item.vertical/2),this.heightMode!=="fitItems"&&(i=Math.max(i,this.props.label.height))}else i=this.props.label.height;return i}},{key:"show",value:function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}},{key:"hide",value:function(){var t=this.dom.label;t.parentNode&&t.parentNode.removeChild(t);var i=this.dom.foreground;i.parentNode&&i.parentNode.removeChild(i);var n=this.dom.background;n.parentNode&&n.parentNode.removeChild(n);var a=this.dom.axis;a.parentNode&&a.parentNode.removeChild(a)}},{key:"add",value:function(t){var i;if(this.items[t.id]=t,t.setParent(this),this.stackDirty=!0,t.data.subgroup!==void 0&&(this._addToSubgroup(t),this.orderSubgroups()),!jn(i=this.visibleItems).call(i,t)){var n=this.itemSet.body.range;this._checkIfVisible(t,this.visibleItems,n)}}},{key:"_addToSubgroup",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.data.subgroup;i!=null&&this.subgroups[i]===void 0&&(this.subgroups[i]={height:0,top:0,start:t.data.start,end:t.data.end||t.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[i]||!1},this.subgroupIndex++),new Date(t.data.start)<new Date(this.subgroups[i].start)&&(this.subgroups[i].start=t.data.start);var n=t.data.end||t.data.start;new Date(n)>new Date(this.subgroups[i].end)&&(this.subgroups[i].end=n),this.subgroups[i].items.push(t)}},{key:"_updateSubgroupsSizes",value:function(){var t=this;if(t.subgroups){var i=function(o){var s,l=t.subgroups[o].items[0].data.end||t.subgroups[o].items[0].data.start,u=t.subgroups[o].items[0].data.start,h=l-1;G(s=t.subgroups[o].items).call(s,function(f){new Date(f.data.start)<new Date(u)&&(u=f.data.start);var c=f.data.end||f.data.start;new Date(c)>new Date(h)&&(h=c)}),t.subgroups[o].start=u,t.subgroups[o].end=new Date(h-1)};for(var n in t.subgroups)i(n)}}},{key:"orderSubgroups",value:function(){if(this.subgroupOrderer!==void 0){var t=[];if(typeof this.subgroupOrderer=="string"){for(var i in this.subgroups)t.push({subgroup:i,sortField:this.subgroups[i].items[0].data[this.subgroupOrderer]});Ie(t).call(t,function(o,s){return o.sortField-s.sortField})}else if(typeof this.subgroupOrderer=="function"){for(var n in this.subgroups)t.push(this.subgroups[n].items[0].data);Ie(t).call(t,this.subgroupOrderer)}if(t.length>0)for(var a=0;a<t.length;a++)this.subgroups[t[a].subgroup].index=a}}},{key:"_resetSubgroups",value:function(){for(var t in this.subgroups)this.subgroups.hasOwnProperty(t)&&(this.subgroups[t].visible=!1,this.subgroups[t].height=0)}},{key:"remove",value:function(t){var i,n;delete this.items[t.id],t.setParent(null),this.stackDirty=!0;var a=Pt(i=this.visibleItems).call(i,t);a!=-1&&Ir(n=this.visibleItems).call(n,a,1),t.data.subgroup!==void 0&&(this._removeFromSubgroup(t),this.orderSubgroups())}},{key:"_removeFromSubgroup",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.data.subgroup;if(i!=null){var n=this.subgroups[i];if(n){var a,o=Pt(a=n.items).call(a,t);if(o>=0){var s;Ir(s=n.items).call(s,o,1),n.items.length?this._updateSubgroupsSizes():delete this.subgroups[i]}}}}},{key:"removeFromDataSet",value:function(t){this.itemSet.removeItem(t.id)}},{key:"order",value:function(){for(var t=b.toArray(this.items),i=[],n=[],a=0;a<t.length;a++)t[a].data.end!==void 0&&n.push(t[a]),i.push(t[a]);this.orderedItems={byStart:i,byEnd:n},jX(this.orderedItems.byStart),WX(this.orderedItems.byEnd)}},{key:"_updateItemsInRange",value:function(t,i,n){var a=[],o={};if(!this.isVisible&&this.groupId!=JS.BACKGROUND){for(var s=0;s<i.length;s++){var l=i[s];l.displayed&&l.hide()}return a}var u=(n.end-n.start)/4,h=n.start-u,f=n.end+u,c=function(R){return R<h?-1:R<=f?0:1},d=function(R){var N=R.start,j=R.end;return j<h?-1:N<=f?0:1};if(i.length>0)for(var v=0;v<i.length;v++)this._checkIfVisibleWithReference(i[v],a,o,n);var m=b.binarySearchCustom(t.byStart,c,"data","start");if(this._traceVisible(m,t.byStart,a,o,function(P){return P.data.start<h||P.data.start>f}),this.checkRangedItems==!0){this.checkRangedItems=!1;for(var p=0;p<t.byEnd.length;p++)this._checkIfVisibleWithReference(t.byEnd[p],a,o,n)}else{var g=b.binarySearchCustom(t.byEnd,d,"data");this._traceVisible(g,t.byEnd,a,o,function(P){return P.data.end<h||P.data.start>f})}for(var _={},y=0,w=0;w<a.length;w++){var T=a[w];if(!T.displayed){var S=!0;_[w]=T.redraw(S),y=_[w].length}}var x=y>0;if(x)for(var E=function(R){G(b).call(b,_,function(N){N[R]()})},I=0;I<y;I++)E(I);for(var A=0;A<a.length;A++)a[A].repositionX();return a}},{key:"_traceVisible",value:function(t,i,n,a,o){if(t!=-1){for(var s=t;s>=0;s--){var l=i[s];if(o(l))break;!(l.isCluster&&!l.hasItems())&&!l.cluster&&a[l.id]===void 0&&(a[l.id]=!0,n.push(l))}for(var u=t+1;u<i.length;u++){var h=i[u];if(o(h))break;!(h.isCluster&&!h.hasItems())&&!h.cluster&&a[h.id]===void 0&&(a[h.id]=!0,n.push(h))}}}},{key:"_checkIfVisible",value:function(t,i,n){t.isVisible(n)?(t.displayed||t.show(),t.repositionX(),i.push(t)):t.displayed&&t.hide()}},{key:"_checkIfVisibleWithReference",value:function(t,i,n,a){t.isVisible(a)?n[t.id]===void 0&&(n[t.id]=!0,i.push(t)):t.displayed&&t.hide()}},{key:"_updateClustersInRange",value:function(t,i,n){var a=[],o={};if(i.length>0)for(var s=0;s<i.length;s++)this._checkIfVisibleWithReference(i[s],a,o,n);for(var l=0;l<t.byStart.length;l++)this._checkIfVisibleWithReference(t.byStart[l],a,o,n);for(var u=0;u<t.byEnd.length;u++)this._checkIfVisibleWithReference(t.byEnd[u],a,o,n);for(var h={},f=0,c=0;c<a.length;c++){var d=a[c];if(!d.displayed){var v=!0;h[c]=d.redraw(v),f=h[c].length}}var m=f>0;if(m)for(var p=0;p<f;p++)G(b).call(b,h,function(_){_[p]()});for(var g=0;g<a.length;g++)a[g].repositionX();return a}},{key:"changeSubgroup",value:function(t,i,n){this._removeFromSubgroup(t,i),this._addToSubgroup(t,n),this.orderSubgroups()}},{key:"dispose",value:function(){this.hide();for(var t;t=this._disposeCallbacks.pop();)t()}}]),e}();function KX(e){var r=ZX();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=z(i,arguments,a)}else n=i.apply(this,arguments);return sr(this,n)}}function ZX(){if(typeof Reflect=="undefined"||!z||z.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z(Boolean,[],function(){})),!0}catch(e){return!1}}var tx=function(e){or(t,e);var r=KX(t);function t(i,n,a){var o;return Ct(this,t),o=r.call(this,i,n,a),o.width=0,o.height=0,o.top=0,o.left=0,o}return Ot(t,[{key:"redraw",value:function(n,a,o){var s=!1;this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,n),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var l=0,u=this.visibleItems.length;l<u;l++){var h=this.visibleItems[l];h.repositionY(a)}return s}},{key:"show",value:function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}]),t}(Sm);function qX(e,r){var t=typeof za!="undefined"&&Yn(e)||e["@@iterator"];if(!t){if(ct(e)||(t=QX(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function QX(e,r){var t;if(!!e){if(typeof e=="string")return ex(e,r);var i=Or(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return ls(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ex(e,r)}}function ex(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var xs=function(){function e(r,t,i){var n,a=this;Ct(this,e),this.id=null,this.parent=null,this.data=r,this.dom=null,this.conversion=t||{},this.defaultOptions={locales:Es,locale:"en"},this.options=b.extend({},this.defaultOptions,i),this.options.locales=b.extend({},Es,this.options.locales);var o=this.defaultOptions.locales[this.defaultOptions.locale];G(n=pe(this.options.locales)).call(n,function(s){a.options.locales[s]=b.extend({},o,a.options.locales[s])}),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=i&&i.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(r),this.editable=null,this._updateEditStatus()}return Ot(e,[{key:"select",value:function(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}},{key:"unselect",value:function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}},{key:"setData",value:function(t){var i=t.group!=null&&this.data.group!=t.group;i&&this.parent!=null&&this.parent.itemSet._moveToGroup(this,t.group),this.setSelectability(t),this.parent&&(this.parent.stackDirty=!0);var n=t.subgroup!=null&&this.data.subgroup!=t.subgroup;n&&this.parent!=null&&this.parent.changeSubgroup(this,this.data.subgroup,t.subgroup),this.data=t,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}},{key:"setSelectability",value:function(t){t&&(this.selectable=typeof t.selectable=="undefined"?!0:Boolean(t.selectable))}},{key:"setParent",value:function(t){this.displayed?(this.hide(),this.parent=t,this.parent&&this.show()):this.parent=t}},{key:"isVisible",value:function(t){return!1}},{key:"show",value:function(){return!1}},{key:"hide",value:function(){return!1}},{key:"redraw",value:function(){}},{key:"repositionX",value:function(){}},{key:"repositionY",value:function(){}},{key:"_repaintDragCenter",value:function(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){var t,i,n=this,a=document.createElement("div");a.className="vis-drag-center",a.dragCenterItem=this,this.hammerDragCenter=new Me(a),this.hammerDragCenter.on("tap",function(o){n.parent.itemSet.body.emitter.emit("click",{event:o,item:n.id})}),this.hammerDragCenter.on("doubletap",function(o){o.stopPropagation(),n.parent.itemSet._onUpdateItem(n),n.parent.itemSet.body.emitter.emit("doubleClick",{event:o,item:n.id})}),this.hammerDragCenter.on("panstart",function(o){o.stopPropagation(),n.parent.itemSet._onDragStart(o)}),this.hammerDragCenter.on("panmove",D(t=n.parent.itemSet._onDrag).call(t,n.parent.itemSet)),this.hammerDragCenter.on("panend",D(i=n.parent.itemSet._onDragEnd).call(i,n.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(a,this.dom.dragLeft):this.dom.box.appendChild(a):this.dom.point&&this.dom.point.appendChild(a),this.dom.dragCenter=a}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}},{key:"_repaintDeleteButton",value:function(t){var i=(this.options.editable.overrideItems||this.editable==null)&&this.options.editable.remove||!this.options.editable.overrideItems&&this.editable!=null&&this.editable.remove;if(this.selected&&i&&!this.dom.deleteButton){var n=this,a=document.createElement("div");this.options.rtl?a.className="vis-delete-rtl":a.className="vis-delete";var o=this.options.locales[this.options.locale];o||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),o=this.options.locales.en),a.title=o.deleteSelected,this.hammerDeleteButton=new Me(a).on("tap",function(s){s.stopPropagation(),n.parent.removeFromDataSet(n)}),t.appendChild(a),this.dom.deleteButton=a}else(!this.selected||!i)&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}},{key:"_repaintOnItemUpdateTimeTooltip",value:function(t){if(!!this.options.tooltipOnItemUpdateTime){var i=(this.options.editable.updateTime||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&i&&!this.dom.onItemUpdateTimeTooltip){var n=document.createElement("div");n.className="vis-onUpdateTime-tooltip",t.appendChild(n),this.dom.onItemUpdateTimeTooltip=n}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";var a=50,o=this.parent.itemSet.body.domProps.scrollTop,s;this.options.orientation.item=="top"?s=this.top:s=this.parent.height-this.top-this.height;var l=s+this.parent.top-a<-o;l?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top="".concat(this.height+2,"px")):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom="".concat(this.height+2,"px"));var u,h;if(this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template){var f;h=D(f=this.options.tooltipOnItemUpdateTime.template).call(f,this),u=h(this.data)}else u="start: ".concat(Ke(this.data.start).format("MM/DD/YYYY hh:mm")),this.data.end&&(u+="<br> end: ".concat(Ke(this.data.end).format("MM/DD/YYYY hh:mm")));this.dom.onItemUpdateTimeTooltip.innerHTML=b.xss(u)}}}},{key:"_getItemData",value:function(){return this.parent.itemSet.itemsData.get(this.id)}},{key:"_updateContents",value:function(t){var i,n,a,o,s,l=this._getItemData(),u=this.dom.box||this.dom.point,h=u.getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate){var f;s=D(f=this.options.visibleFrameTemplate).call(f,this),o=b.xss(s(l,h))}else o="";if(h){if(o instanceof Object&&!(o instanceof Element))s(l,h);else if(n=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(o),n){if(o instanceof Element)h.innerHTML="",h.appendChild(o);else if(o!=null)h.innerHTML=b.xss(o);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.itemVisibleFrameContent=o}}if(this.options.template){var c;a=D(c=this.options.template).call(c,this),i=a(l,t,this.data)}else i=this.data.content;if(i instanceof Object&&!(i instanceof Element))a(l,t);else if(n=this._contentToString(this.content)!==this._contentToString(i),n){if(i instanceof Element)t.innerHTML="",t.appendChild(i);else if(i!=null)t.innerHTML=b.xss(i);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.content=i}}},{key:"_updateDataAttributes",value:function(t){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var i=[];if(ct(this.options.dataAttributes))i=this.options.dataAttributes;else if(this.options.dataAttributes=="all")i=pe(this.data);else return;var n=qX(i),a;try{for(n.s();!(a=n.n()).done;){var o=a.value,s=this.data[o];s!=null?t.setAttribute("data-".concat(o),s):t.removeAttribute("data-".concat(o))}}catch(l){n.e(l)}finally{n.f()}}}},{key:"_updateStyle",value:function(t){this.style&&(b.removeCssText(t,this.style),this.style=null),this.data.style&&(b.addCssText(t,this.data.style),this.style=this.data.style)}},{key:"_contentToString",value:function(t){return typeof t=="string"?t:t&&"outerHTML"in t?t.outerHTML:t}},{key:"_updateEditStatus",value:function(){this.options&&(typeof this.options.editable=="boolean"?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:at(this.options.editable)==="object"&&(this.editable={},b.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),(!this.options||!this.options.editable||this.options.editable.overrideItems!==!0)&&this.data&&(typeof this.data.editable=="boolean"?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:at(this.data.editable)==="object"&&(this.editable={},b.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}},{key:"getWidthLeft",value:function(){return 0}},{key:"getWidthRight",value:function(){return 0}},{key:"getTitle",value:function(){if(this.options.tooltip&&this.options.tooltip.template){var t,i=D(t=this.options.tooltip.template).call(t,this);return i(this._getItemData(),this.data)}return this.data.title}}]),e}();xs.prototype.stack=!0;function JX(e){var r=t4();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=z(i,arguments,a)}else n=i.apply(this,arguments);return sr(this,n)}}function t4(){if(typeof Reflect=="undefined"||!z||z.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z(Boolean,[],function(){})),!0}catch(e){return!1}}var e4=function(e){or(t,e);var r=JX(t);function t(i,n,a){var o;if(Ct(this,t),o=r.call(this,i,n,a),o.props={dot:{width:0,height:0},line:{width:0,height:0}},i&&i.start==null)throw new Error('Property "start" missing in item '.concat(i));return o}return Ot(t,[{key:"isVisible",value:function(n){if(this.cluster)return!1;var a,o=this.data.align||this.options.align,s=this.width*n.getMillisecondsPerPixel();return o=="right"?a=this.data.start.getTime()>n.start&&this.data.start.getTime()-s<n.end:o=="left"?a=this.data.start.getTime()+s>n.start&&this.data.start.getTime()<n.end:a=this.data.start.getTime()+s/2>n.start&&this.data.start.getTime()-s/2<n.end,a}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var a=this.parent.dom.background;if(!a)throw new Error("Cannot redraw item: parent has no background container element");a.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var o=this.parent.dom.axis;if(!a)throw new Error("Cannot redraw item: parent has no axis container element");o.appendChild(this.dom.dot)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var n=this.editable.updateTime||this.editable.updateGroup,a=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(n?" vis-editable":" vis-readonly");this.dom.box.className="vis-item vis-box".concat(a),this.dom.line.className="vis-item vis-line".concat(a),this.dom.dot.className="vis-item vis-dot".concat(a)}}},{key:"_getDomComponentsSizes",value:function(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(n){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=n.dot.height,this.props.dot.width=n.dot.width,this.props.line.width=n.line.width,this.width=n.box.width,this.height=n.box.height,this.options.rtl?this.dom.box.style.right=n.previous.right:this.dom.box.style.left=n.previous.left,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}},{key:"redraw",value:function(n){var a,o,s,l=this,u,h,f=[D(a=this._createDomElement).call(a,this),D(o=this._appendDomElement).call(o,this),D(s=this._updateDirtyDomComponents).call(s,this),function(){l.dirty&&(h=l._getDomComponentsSizes())},function(){if(l.dirty){var d;D(d=l._updateDomComponentsSizes).call(d,l)(h)}},D(u=this._repaintDomAdditionals).call(u,this)];if(n)return f;var c;return G(f).call(f,function(d){c=d()}),c}},{key:"show",value:function(n){if(!this.displayed)return this.redraw(n)}},{key:"hide",value:function(){if(this.displayed){var n=this.dom;n.box.remove?n.box.remove():n.box.parentNode&&n.box.parentNode.removeChild(n.box),n.line.remove?n.line.remove():n.line.parentNode&&n.line.parentNode.removeChild(n.line),n.dot.remove?n.dot.remove():n.dot.parentNode&&n.dot.parentNode.removeChild(n.dot),this.displayed=!1}}},{key:"repositionXY",value:function(){var n=this.options.rtl,a=function(s,l,u){var h,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!(l===void 0&&u===void 0)){var c=f?l*-1:l;if(u===void 0){s.style.transform="translateX(".concat(c,"px)");return}if(l===void 0){s.style.transform="translateY(".concat(u,"px)");return}s.style.transform=Ut(h="translate(".concat(c,"px, ")).call(h,u,"px)")}};a(this.dom.box,this.boxX,this.boxY,n),a(this.dom.dot,this.dotX,this.dotY,n),a(this.dom.line,this.lineX,this.lineY,n)}},{key:"repositionX",value:function(){var n=this.conversion.toScreen(this.data.start),a=this.data.align===void 0?this.options.align:this.data.align,o=this.props.line.width,s=this.props.dot.width;a=="right"?(this.boxX=n-this.width,this.lineX=n-o,this.dotX=n-o/2-s/2):a=="left"?(this.boxX=n,this.lineX=n,this.dotX=n+o/2-s/2):(this.boxX=n-this.width/2,this.lineX=this.options.rtl?n-o:n-o/2,this.dotX=n-s/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}},{key:"repositionY",value:function(){var n=this.options.orientation.item,a=this.dom.line.style;if(n=="top"){var o=this.parent.top+this.top+1;this.boxY=this.top||0,a.height="".concat(o,"px"),a.bottom="",a.top="0"}else{var s=this.parent.itemSet.props.height,l=s-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),a.height="".concat(l,"px"),a.top="",a.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}},{key:"getWidthLeft",value:function(){return this.width/2}},{key:"getWidthRight",value:function(){return this.width/2}}]),t}(xs);function r4(e){var r=i4();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=z(i,arguments,a)}else n=i.apply(this,arguments);return sr(this,n)}}function i4(){if(typeof Reflect=="undefined"||!z||z.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z(Boolean,[],function(){})),!0}catch(e){return!1}}var n4=function(e){or(t,e);var r=r4(t);function t(i,n,a){var o;if(Ct(this,t),o=r.call(this,i,n,a),o.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},i&&i.start==null)throw new Error('Property "start" missing in item '.concat(i));return o}return Ot(t,[{key:"isVisible",value:function(n){if(this.cluster)return!1;var a=this.width*n.getMillisecondsPerPixel();return this.data.start.getTime()+a>n.start&&this.data.start<n.end}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){var n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.point)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var n=this.editable.updateTime||this.editable.updateGroup,a=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(n?" vis-editable":" vis-readonly");this.dom.point.className="vis-item vis-point".concat(a),this.dom.dot.className="vis-item vis-dot".concat(a)}}},{key:"_getDomComponentsSizes",value:function(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(n){this.props.dot.width=n.dot.width,this.props.dot.height=n.dot.height,this.props.content.height=n.content.height,this.options.rtl?this.dom.content.style.marginRight="".concat(this.props.dot.width/2,"px"):this.dom.content.style.marginLeft="".concat(this.props.dot.width/2,"px"),this.width=n.point.width,this.height=n.point.height,this.dom.dot.style.top="".concat((this.height-this.props.dot.height)/2,"px");var a=this.props.dot.width,o=this.options.rtl?a/2:a/2*-1;this.dom.dot.style.transform="translateX(".concat(o,"px"),this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}},{key:"redraw",value:function(n){var a,o,s,l=this,u,h,f=[D(a=this._createDomElement).call(a,this),D(o=this._appendDomElement).call(o,this),D(s=this._updateDirtyDomComponents).call(s,this),function(){l.dirty&&(h=l._getDomComponentsSizes())},function(){if(l.dirty){var d;D(d=l._updateDomComponentsSizes).call(d,l)(h)}},D(u=this._repaintDomAdditionals).call(u,this)];if(n)return f;var c;return G(f).call(f,function(d){c=d()}),c}},{key:"repositionXY",value:function(){var n=this.options.rtl,a=function(s,l,u){var h,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!(l===void 0&&u===void 0)){var c=f?l*-1:l;if(u===void 0){s.style.transform="translateX(".concat(c,"px)");return}if(l===void 0){s.style.transform="translateY(".concat(u,"px)");return}s.style.transform=Ut(h="translate(".concat(c,"px, ")).call(h,u,"px)")}};a(this.dom.point,this.pointX,this.pointY,n)}},{key:"show",value:function(n){if(!this.displayed)return this.redraw(n)}},{key:"hide",value:function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}},{key:"repositionX",value:function(){var n=this.conversion.toScreen(this.data.start);this.pointX=n,this.options.rtl?this.right=n-this.props.dot.width:this.left=n-this.props.dot.width,this.repositionXY()}},{key:"repositionY",value:function(){var n=this.options.orientation.item;n=="top"?this.pointY=this.top:this.pointY=this.parent.height-this.top-this.height,this.repositionXY()}},{key:"getWidthLeft",value:function(){return this.props.dot.width}},{key:"getWidthRight",value:function(){return this.props.dot.width}}]),t}(xs);function a4(e){var r=o4();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=z(i,arguments,a)}else n=i.apply(this,arguments);return sr(this,n)}}function o4(){if(typeof Reflect=="undefined"||!z||z.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z(Boolean,[],function(){})),!0}catch(e){return!1}}var no=function(e){or(t,e);var r=a4(t);function t(i,n,a){var o;if(Ct(this,t),o=r.call(this,i,n,a),o.props={content:{width:0}},o.overflow=!1,i){if(i.start==null)throw new Error('Property "start" missing in item '.concat(i.id));if(i.end==null)throw new Error('Property "end" missing in item '.concat(i.id))}return o}return Ot(t,[{key:"isVisible",value:function(n){return this.cluster?!1:this.data.start<n.end&&this.data.end>n.start}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.box)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var n=this.editable.updateTime||this.editable.updateGroup,a=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(n?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+a,this.dom.content.style.maxWidth="none"}}},{key:"_getDomComponentsSizes",value:function(){return this.overflow=window.getComputedStyle(this.dom.frame).overflow!=="hidden",this.whiteSpace=window.getComputedStyle(this.dom.content).whiteSpace!=="nowrap",{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(n){this.props.content.width=n.content.width,this.height=n.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}},{key:"redraw",value:function(n){var a,o,s,l=this,u,h,f=[D(a=this._createDomElement).call(a,this),D(o=this._appendDomElement).call(o,this),D(s=this._updateDirtyDomComponents).call(s,this),function(){if(l.dirty){var d;h=D(d=l._getDomComponentsSizes).call(d,l)()}},function(){if(l.dirty){var d;D(d=l._updateDomComponentsSizes).call(d,l)(h)}},D(u=this._repaintDomAdditionals).call(u,this)];if(n)return f;var c;return G(f).call(f,function(d){c=d()}),c}},{key:"show",value:function(n){if(!this.displayed)return this.redraw(n)}},{key:"hide",value:function(){if(this.displayed){var n=this.dom.box;n.parentNode&&n.parentNode.removeChild(n),this.displayed=!1}}},{key:"repositionX",value:function(n){var a=this.parent.width,o=this.conversion.toScreen(this.data.start),s=this.conversion.toScreen(this.data.end),l=this.data.align===void 0?this.options.align:this.data.align,u,h;this.data.limitSize!==!1&&(n===void 0||n===!0)&&(o<-a&&(o=-a),s>2*a&&(s=2*a));var f=Math.max(Math.round((s-o)*1e3)/1e3,1);switch(this.overflow?(this.options.rtl?this.right=o:this.left=o,this.width=f+this.props.content.width,h=this.props.content.width):(this.options.rtl?this.right=o:this.left=o,this.width=f,h=Math.min(s-o,this.props.content.width)),this.options.rtl?this.dom.box.style.transform="translateX(".concat(this.right*-1,"px)"):this.dom.box.style.transform="translateX(".concat(this.left,"px)"),this.dom.box.style.width="".concat(f,"px"),this.whiteSpace&&(this.height=this.dom.box.offsetHeight),l){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){var c=Math.max(f-h,0)*-1;this.dom.content.style.transform="translateX(".concat(c,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max(f-h,0),"px)");break;case"center":if(this.options.rtl){var d=Math.max((f-h)/2,0)*-1;this.dom.content.style.transform="translateX(".concat(d,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max((f-h)/2,0),"px)");break;default:if(this.overflow?s>0?u=Math.max(-o,0):u=-h:o<0?u=-o:u=0,this.options.rtl){var v=u*-1;this.dom.content.style.transform="translateX(".concat(v,"px)")}else this.dom.content.style.transform="translateX(".concat(u,"px)")}}},{key:"repositionY",value:function(){var n=this.options.orientation.item,a=this.dom.box;n=="top"?a.style.top="".concat(this.top,"px"):a.style.top="".concat(this.parent.height-this.top-this.height,"px")}},{key:"_repaintDragLeft",value:function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){var n=document.createElement("div");n.className="vis-drag-left",n.dragLeftItem=this,this.dom.box.appendChild(n),this.dom.dragLeft=n}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}},{key:"_repaintDragRight",value:function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){var n=document.createElement("div");n.className="vis-drag-right",n.dragRightItem=this,this.dom.box.appendChild(n),this.dom.dragRight=n}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}]),t}(xs);no.prototype.baseClassName="vis-item vis-range";function s4(e){var r=l4();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=z(i,arguments,a)}else n=i.apply(this,arguments);return sr(this,n)}}function l4(){if(typeof Reflect=="undefined"||!z||z.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z(Boolean,[],function(){})),!0}catch(e){return!1}}var ao=function(e){or(t,e);var r=s4(t);function t(i,n,a){var o;if(Ct(this,t),o=r.call(this,i,n,a),o.props={content:{width:0}},o.overflow=!1,i){if(i.start==null)throw new Error('Property "start" missing in item '.concat(i.id));if(i.end==null)throw new Error('Property "end" missing in item '.concat(i.id))}return o}return Ot(t,[{key:"isVisible",value:function(n){return this.data.start<n.end&&this.data.end>n.start}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var n=this.parent.dom.background;if(!n)throw new Error("Cannot redraw item: parent has no background container element");n.appendChild(this.dom.box)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var n=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+n}}},{key:"_getDomComponentsSizes",value:function(){return this.overflow=window.getComputedStyle(this.dom.content).overflow!=="hidden",{content:{width:this.dom.content.offsetWidth}}}},{key:"_updateDomComponentsSizes",value:function(n){this.props.content.width=n.content.width,this.height=0,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){}},{key:"redraw",value:function(n){var a,o,s,l=this,u,h,f=[D(a=this._createDomElement).call(a,this),D(o=this._appendDomElement).call(o,this),D(s=this._updateDirtyDomComponents).call(s,this),function(){if(l.dirty){var d;h=D(d=l._getDomComponentsSizes).call(d,l)()}},function(){if(l.dirty){var d;D(d=l._updateDomComponentsSizes).call(d,l)(h)}},D(u=this._repaintDomAdditionals).call(u,this)];if(n)return f;var c;return G(f).call(f,function(d){c=d()}),c}},{key:"repositionY",value:function(n){var a,o=this.options.orientation.item;if(this.data.subgroup!==void 0){var s=this.data.subgroup;this.dom.box.style.height="".concat(this.parent.subgroups[s].height,"px"),o=="top"?this.dom.box.style.top="".concat(this.parent.top+this.parent.subgroups[s].top,"px"):this.dom.box.style.top="".concat(this.parent.top+this.parent.height-this.parent.subgroups[s].top-this.parent.subgroups[s].height,"px"),this.dom.box.style.bottom=""}else this.parent instanceof tx?(a=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom=o=="bottom"?"0":"",this.dom.box.style.top=o=="top"?"0":""):(a=this.parent.height,this.dom.box.style.top="".concat(this.parent.top,"px"),this.dom.box.style.bottom="");this.dom.box.style.height="".concat(a,"px")}}]),t}(xs);ao.prototype.baseClassName="vis-item vis-background";ao.prototype.stack=!1;ao.prototype.show=no.prototype.show;ao.prototype.hide=no.prototype.hide;ao.prototype.repositionX=no.prototype.repositionX;var u4=function(){function e(r,t){Ct(this,e),this.container=r,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return Ot(e,[{key:"setPosition",value:function(t,i){this.x=ur(t),this.y=ur(i)}},{key:"setText",value:function(t){t instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(t)):this.frame.innerHTML=b.xss(t)}},{key:"show",value:function(t){if(t===void 0&&(t=!0),t===!0){var i=this.frame.clientHeight,n=this.frame.clientWidth,a=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,s=0,l=0;if(this.overflowMethod=="flip"||this.overflowMethod=="none"){var u=!1,h=!0;this.overflowMethod=="flip"&&(this.y-i<this.padding&&(h=!1),this.x+n>o-this.padding&&(u=!0)),u?s=this.x-n:s=this.x,h?l=this.y-i:l=this.y}else l=this.y-i,l+i+this.padding>a&&(l=a-i-this.padding),l<this.padding&&(l=this.padding),s=this.x,s+n+this.padding>o&&(s=o-n-this.padding),s<this.padding&&(s=this.padding);this.frame.style.left=s+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),h4=$n.every,f4=ss("every");Z({target:"Array",proto:!0,forced:!f4},{every:function(r){return h4(this,r,arguments.length>1?arguments[1]:void 0)}});var c4=he("Array").every,rx=Array.prototype,d4=function(e){var r=e.every;return e===rx||e instanceof Array&&r===rx.every?c4:r},v4=d4,p4=v4;function ix(e,r){var t=typeof za!="undefined"&&Yn(e)||e["@@iterator"];if(!t){if(ct(e)||(t=m4(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function m4(e,r){var t;if(!!e){if(typeof e=="string")return nx(e,r);var i=Or(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return ls(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nx(e,r)}}function nx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function g4(e){var r=y4();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=z(i,arguments,a)}else n=i.apply(this,arguments);return sr(this,n)}}function y4(){if(typeof Reflect=="undefined"||!z||z.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z(Boolean,[],function(){})),!0}catch(e){return!1}}var ax=function(e){or(t,e);var r=g4(t);function t(i,n,a){var o;Ct(this,t);var s=Va({},{fitOnDoubleClick:!0},a,{editable:!1});if(o=r.call(this,i,n,s),o.props={content:{width:0,height:0}},!i||i.uiItems==null)throw new Error('Property "uiItems" missing in item '+i.id);return o.id=ws(),o.group=i.group,o._setupRange(),o.emitter=o.data.eventEmitter,o.range=o.data.range,o.attached=!1,o.isCluster=!0,o.data.isCluster=!0,o}return Ot(t,[{key:"hasItems",value:function(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}},{key:"setUiItems",value:function(n){this.detach(),this.data.uiItems=n,this._setupRange(),this.attach()}},{key:"isVisible",value:function(n){var a=this.data.end?this.data.end-this.data.start:0,o=this.width*n.getMillisecondsPerPixel(),s=Math.max(this.data.start.getTime()+a,this.data.start.getTime()+o);return this.data.start<n.end&&s>n.start&&this.hasItems()}},{key:"getData",value:function(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}},{key:"redraw",value:function(n){var a,o,s,l,u,h,f,c=[D(a=this._createDomElement).call(a,this),D(o=this._appendDomElement).call(o,this),D(s=this._updateDirtyDomComponents).call(s,this),D(l=function(){this.dirty&&(f=this._getDomComponentsSizes())}).call(l,this),D(u=function(){if(this.dirty){var m;D(m=this._updateDomComponentsSizes).call(m,this)(f)}}).call(u,this),D(h=this._repaintDomAdditionals).call(h,this)];if(n)return c;var d;return G(c).call(c,function(v){d=v()}),d}},{key:"show",value:function(){this.displayed||this.redraw()}},{key:"hide",value:function(){if(this.displayed){var n=this.dom;n.box.parentNode&&n.box.parentNode.removeChild(n.box),this.options.showStipes&&(n.line.parentNode&&n.line.parentNode.removeChild(n.line),n.dot.parentNode&&n.dot.parentNode.removeChild(n.dot)),this.displayed=!1}}},{key:"repositionX",value:function(){var n=this.conversion.toScreen(this.data.start),a=this.data.end?this.conversion.toScreen(this.data.end):0;if(a)this.repositionXWithRanges(n,a);else{var o=this.data.align===void 0?this.options.align:this.data.align;this.repositionXWithoutRanges(n,o)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(n,a))}},{key:"repositionStype",value:function(n,a){this.dom.line.style.display="block",this.dom.dot.style.display="block";var o=this.dom.line.offsetWidth,s=this.dom.dot.offsetWidth;if(a){var l=o+n+(a-n)/2,u=l-s/2,h=this.options.rtl?l*-1:l,f=this.options.rtl?u*-1:u;this.dom.line.style.transform="translateX(".concat(h,"px)"),this.dom.dot.style.transform="translateX(".concat(f,"px)")}else{var c=this.options.rtl?n*-1:n,d=this.options.rtl?(n-s/2)*-1:n-s/2;this.dom.line.style.transform="translateX(".concat(c,"px)"),this.dom.dot.style.transform="translateX(".concat(d,"px)")}}},{key:"repositionXWithoutRanges",value:function(n,a){a=="right"?this.options.rtl?(this.right=n-this.width,this.dom.box.style.right=this.right+"px"):(this.left=n-this.width,this.dom.box.style.left=this.left+"px"):a=="left"?this.options.rtl?(this.right=n,this.dom.box.style.right=this.right+"px"):(this.left=n,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=n-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=n-this.width/2,this.dom.box.style.left=this.left+"px")}},{key:"repositionXWithRanges",value:function(n,a){var o=Math.round(Math.max(a-n+.5,1));this.options.rtl?this.right=n:this.left=n,this.width=Math.max(o,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=o+"px"}},{key:"repositionY",value:function(){var n=this.options.orientation.item,a=this.dom.box;if(n=="top"?a.style.top=(this.top||0)+"px":a.style.top=(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if(n=="top")this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var o=this.parent.itemSet.props.height,s=o-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=o-s+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}},{key:"getWidthLeft",value:function(){return this.width/2}},{key:"getWidthRight",value:function(){return this.width/2}},{key:"move",value:function(){this.repositionX(),this.repositionY()}},{key:"attach",value:function(){var n,a=ix(this.data.uiItems),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;s.cluster=this}}catch(l){a.e(l)}finally{a.f()}this.data.items=ve(n=this.data.uiItems).call(n,function(l){return l.data}),this.attached=!0,this.dirty=!0}},{key:"detach",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!!this.hasItems()){var a=ix(this.data.uiItems),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;delete s.cluster}}catch(l){a.e(l)}finally{a.f()}this.attached=!1,n&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}},{key:"_onDoubleClick",value:function(){this._fit()}},{key:"_setupRange",value:function(){var n,a,o,s=ve(n=this.data.uiItems).call(n,function(h){return{start:h.data.start.valueOf(),end:h.data.end?h.data.end.valueOf():h.data.start.valueOf()}});this.data.min=Math.min.apply(Math,yi(ve(s).call(s,function(h){return Math.min(h.start,h.end||h.start)}))),this.data.max=Math.max.apply(Math,yi(ve(s).call(s,function(h){return Math.max(h.start,h.end||h.start)})));var l=ve(a=this.data.uiItems).call(a,function(h){return h.center}),u=_T(l).call(l,function(h,f){return h+f},0)/this.data.uiItems.length;PS(o=this.data.uiItems).call(o,function(h){return h.data.end})?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(u),this.data.end=null)}},{key:"_getUiItems",value:function(){var n=this;if(this.data.uiItems&&this.data.uiItems.length){var a;return mt(a=this.data.uiItems).call(a,function(o){return o.cluster===n})}return[]}},{key:"_createDomElement",value:function(){if(!this.dom){if(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick){var n;this.dom.box.ondblclick=D(n=t.prototype._onDoubleClick).call(n,this)}this.dom.box["vis-item"]=this,this.dirty=!0}}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.box)}var a=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!a)throw new Error("Cannot redraw item: parent has no background container element");a.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var o=this.parent.dom.axis;if(!a)throw new Error("Cannot redraw item: parent has no axis container element");o.appendChild(this.dom.dot)}}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var n=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+n,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}},{key:"_getDomComponentsSizes",value:function(){var n={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(n.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},n.line={width:this.dom.line.offsetWidth}),n}},{key:"_updateDomComponentsSizes",value:function(n){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=n.box.width:this.width=n.box.width,this.height=n.box.height,this.options.rtl?this.dom.box.style.right=n.previous.right:this.dom.box.style.left=n.previous.left,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}},{key:"_isStipeVisible",value:function(){return this.minWidth>=this.width||!this.data.end}},{key:"_getFitRange",value:function(){var n=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-n,fitEnd:this.data.max+n}}},{key:"_fit",value:function(){if(this.emitter){var n=this._getFitRange(),a=n.fitStart,o=n.fitEnd,s={start:new Date(a),end:new Date(o),animation:!0};this.emitter.emit("fit",s)}}},{key:"_getItemData",value:function(){return this.data}}]),t}(xs);ax.prototype.baseClassName="vis-item vis-range vis-cluster";function _4(e,r){var t=typeof za!="undefined"&&Yn(e)||e["@@iterator"];if(!t){if(ct(e)||(t=w4(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function w4(e,r){var t;if(!!e){if(typeof e=="string")return ox(e,r);var i=Or(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return ls(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ox(e,r)}}function ox(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var b4="__ungrouped__",T4="__background__",E4={UNGROUPED:b4,BACKGROUND:T4},S4=function(){function e(r){Ct(this,e),this.itemSet=r,this.groups={},this.cache={},this.cache[-1]=[]}return Ot(e,[{key:"createClusterItem",value:function(t,i,n){var a=new ax(t,i,n);return a}},{key:"setItems",value:function(t,i){this.items=t||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,i&&i.applyOnChangedLevel&&(this.applyOnChangedLevel=i.applyOnChangedLevel)}},{key:"updateData",value:function(){this.dataChanged=!0,this.applyOnChangedLevel=!1}},{key:"getClusters",value:function(t,i,n){var a=typeof n=="boolean"?{}:n,o=a.maxItems,s=a.clusterCriteria;s||(s=function(){return!0}),o=o||1;var l=-1,u=2,h=0;if(i>0){if(i>=1)return[];l=Math.abs(Math.round(Math.log(100/i)/Math.log(u))),h=Math.abs(Math.pow(u,l))}if(this.dataChanged){var f=l!=this.cacheLevel,c=this.applyOnChangedLevel?f:!0;c&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=l;var d=this.cache[l];if(!d){d=[];for(var v in this.groups)if(this.groups.hasOwnProperty(v))for(var m=this.groups[v],p=m.length,g=0;g<p;){for(var _=m[g],y=1,w=g-1;w>=0&&_.center-m[w].center<h/2;)!m[w].cluster&&s(_.data,m[w].data)&&y++,w--;for(var T=g+1;T<m.length&&m[T].center-_.center<h/2;)s(_.data,m[T].data)&&y++,T++;for(var S=d.length-1;S>=0&&_.center-d[S].center<h;)_.group==d[S].group&&s(_.data,d[S].data)&&y++,S--;if(y>o){for(var x=y-o+1,E=[],I=g;E.length<x&&I<m.length;)s(m[g].data,m[I].data)&&E.push(m[I]),I++;var A=this.itemSet.getGroupId(_.data),P=this.itemSet.groups[A]||this.itemSet.groups[E4.UNGROUPED],R=this._getClusterForItems(E,P,t,n);d.push(R),g+=x}else delete _.cluster,g+=1}this.cache[l]=d}return d}},{key:"_filterData",value:function(){var t={};this.groups=t;for(var i=0,n=YT(this.items);i<n.length;i++){var a=n[i],o=a.parent?a.parent.groupId:"",s=t[o];s||(s=[],t[o]=s),s.push(a),a.data.start&&(a.data.end?a.center=(a.data.start.valueOf()+a.data.end.valueOf())/2:a.center=a.data.start.valueOf())}for(var l in t)if(t.hasOwnProperty(l)){var u;Ie(u=t[l]).call(u,function(h,f){return h.center-f.center})}this.dataChanged=!1}},{key:"_getClusterForItems",value:function(t,i,n,a){var o,s=ve(o=n||[]).call(o,function(y){var w;return{cluster:y,itemsIds:new xc(ve(w=y.data.uiItems).call(w,function(T){return T.id}))}}),l;if(s.length){var u=_4(s),h;try{var f=function(){var w=h.value;if(w.itemsIds.size===t.length&&p4(t).call(t,function(T){return w.itemsIds.has(T.id)}))return l=w.cluster,"break"};for(u.s();!(h=u.n()).done;){var c=f();if(c==="break")break}}catch(y){u.e(y)}finally{u.f()}}if(l)return l.setUiItems(t),l.group!==i&&(l.group&&l.group.remove(l),i&&(i.add(l),l.group=i)),l;var d=a.titleTemplate||"",v={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},m=d.replace(/{count}/,t.length),p='<div title="'+m+'">'+t.length+"</div>",g=Va({},a,this.itemSet.options),_={content:p,title:m,group:i,uiItems:t,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return l=this.createClusterItem(_,v,g),i&&(i.add(l),l.group=i),l.attach(),l}},{key:"_dropLevelsCache",value:function(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}]),e}();function oo(e,r){var t=typeof za!="undefined"&&Yn(e)||e["@@iterator"];if(!t){if(ct(e)||(t=x4(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function x4(e,r){var t;if(!!e){if(typeof e=="string")return sx(e,r);var i=Or(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return ls(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return sx(e,r)}}function sx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function C4(e){var r=O4();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=z(i,arguments,a)}else n=i.apply(this,arguments);return sr(this,n)}}function O4(){if(typeof Reflect=="undefined"||!z||z.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z(Boolean,[],function(){})),!0}catch(e){return!1}}var Cs="__ungrouped__",Un="__background__",Cc=function(e){or(t,e);var r=C4(t);function t(i,n){var a;Ct(this,t),a=r.call(this),a.body=i,a.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap:function(l,u,h){var f=u.order;u.order=l.order,l.order=f},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:bc.snap,onDropObjectOnItem:function(l,u,h){h(u)},onAdd:function(l,u){u(l)},onUpdate:function(l,u){u(l)},onMove:function(l,u){u(l)},onRemove:function(l,u){u(l)},onMoving:function(l,u){u(l)},onAddGroup:function(l,u){u(l)},onMoveGroup:function(l,u){u(l)},onRemoveGroup:function(l,u){u(l)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},a.options=b.extend({},a.defaultOptions),a.options.rtl=n.rtl,a.options.onTimeout=n.onTimeout,a.conversion={toScreen:i.util.toScreen,toTime:i.util.toTime},a.dom={},a.props={},a.hammer=null;var o=Ce(a);return a.itemsData=null,a.groupsData=null,a.itemsSettingTime=null,a.initialItemSetDrawn=!1,a.userContinueNotBail=null,a.sequentialSelection=!1,a.itemListeners={add:function(l,u,h){o._onAdd(u.items),o.options.cluster&&o.clusterGenerator.setItems(o.items,{applyOnChangedLevel:!1}),o.redraw()},update:function(l,u,h){o._onUpdate(u.items),o.options.cluster&&o.clusterGenerator.setItems(o.items,{applyOnChangedLevel:!1}),o.redraw()},remove:function(l,u,h){o._onRemove(u.items),o.options.cluster&&o.clusterGenerator.setItems(o.items,{applyOnChangedLevel:!1}),o.redraw()}},a.groupListeners={add:function(l,u,h){if(o._onAddGroups(u.items),o.groupsData&&o.groupsData.length>0){var f,c=o.groupsData.getDataSet();G(f=c.get()).call(f,function(d){if(d.nestedGroups){var v;d.showNested!=!1&&(d.showNested=!0);var m=[];G(v=d.nestedGroups).call(v,function(p){var g=c.get(p);!g||(g.nestedInGroup=d.id,d.showNested==!1&&(g.visible=!1),m=Ut(m).call(m,g))}),c.update(m,h)}})}},update:function(l,u,h){o._onUpdateGroups(u.items)},remove:function(l,u,h){o._onRemoveGroups(u.items)}},a.items={},a.groups={},a.groupIds=[],a.selection=[],a.popup=null,a.popupTimer=null,a.touchParams={},a.groupTouchParams={group:null,isDragging:!1},a._create(),a.setOptions(n),a.clusters=[],a}return Ot(t,[{key:"_create",value:function(){var n=this,a,o,s,l,u,h,f,c,d,v,m,p,g,_,y,w=document.createElement("div");w.className="vis-itemset",w["vis-itemset"]=this,this.dom.frame=w;var T=document.createElement("div");T.className="vis-background",w.appendChild(T),this.dom.background=T;var S=document.createElement("div");S.className="vis-foreground",w.appendChild(S),this.dom.foreground=S;var x=document.createElement("div");x.className="vis-axis",this.dom.axis=x;var E=document.createElement("div");E.className="vis-labelset",this.dom.labelSet=E,this._updateUngrouped();var I=new tx(Un,null,this);I.show(),this.groups[Un]=I,this.hammer=new Me(this.body.dom.centerContainer),this.hammer.on("hammer.input",function(A){A.isFirst&&n._onTouch(A)}),this.hammer.on("panstart",D(a=this._onDragStart).call(a,this)),this.hammer.on("panmove",D(o=this._onDrag).call(o,this)),this.hammer.on("panend",D(s=this._onDragEnd).call(s,this)),this.hammer.get("pan").set({threshold:5,direction:Me.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",D(l=this._onSelectItem).call(l,this)),this.hammer.on("press",D(u=this._onMultiSelectItem).call(u,this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",D(h=this._onAddItem).call(h,this)),this.options.rtl?this.groupHammer=new Me(this.body.dom.rightContainer):this.groupHammer=new Me(this.body.dom.leftContainer),this.groupHammer.on("tap",D(f=this._onGroupClick).call(f,this)),this.groupHammer.on("panstart",D(c=this._onGroupDragStart).call(c,this)),this.groupHammer.on("panmove",D(d=this._onGroupDrag).call(d,this)),this.groupHammer.on("panend",D(v=this._onGroupDragEnd).call(v,this)),this.groupHammer.get("pan").set({threshold:5,direction:Me.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",D(m=this._onMouseOver).call(m,this)),this.body.dom.centerContainer.addEventListener("mouseout",D(p=this._onMouseOut).call(p,this)),this.body.dom.centerContainer.addEventListener("mousemove",D(g=this._onMouseMove).call(g,this)),this.body.dom.centerContainer.addEventListener("contextmenu",D(_=this._onDragEnd).call(_,this)),this.body.dom.centerContainer.addEventListener("mousewheel",D(y=this._onMouseWheel).call(y,this)),this.show()}},{key:"setOptions",value:function(n){var a=this;if(n){var o,s,l=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"];b.selectiveExtend(l,this.options,n),"itemsAlwaysDraggable"in n&&(typeof n.itemsAlwaysDraggable=="boolean"?(this.options.itemsAlwaysDraggable.item=n.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):at(n.itemsAlwaysDraggable)==="object"&&(b.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,n.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in n&&typeof n.sequentialSelection=="boolean"&&(this.options.sequentialSelection=n.sequentialSelection),"orientation"in n&&(typeof n.orientation=="string"?this.options.orientation.item=n.orientation==="top"?"top":"bottom":at(n.orientation)==="object"&&"item"in n.orientation&&(this.options.orientation.item=n.orientation.item)),"margin"in n&&(typeof n.margin=="number"?(this.options.margin.axis=n.margin,this.options.margin.item.horizontal=n.margin,this.options.margin.item.vertical=n.margin):at(n.margin)==="object"&&(b.selectiveExtend(["axis"],this.options.margin,n.margin),"item"in n.margin&&(typeof n.margin.item=="number"?(this.options.margin.item.horizontal=n.margin.item,this.options.margin.item.vertical=n.margin.item):at(n.margin.item)==="object"&&b.selectiveExtend(["horizontal","vertical"],this.options.margin.item,n.margin.item)))),G(o=["locale","locales"]).call(o,function(h){h in n&&(a.options[h]=n[h])}),"editable"in n&&(typeof n.editable=="boolean"?(this.options.editable.updateTime=n.editable,this.options.editable.updateGroup=n.editable,this.options.editable.add=n.editable,this.options.editable.remove=n.editable,this.options.editable.overrideItems=!1):at(n.editable)==="object"&&b.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,n.editable)),"groupEditable"in n&&(typeof n.groupEditable=="boolean"?(this.options.groupEditable.order=n.groupEditable,this.options.groupEditable.add=n.groupEditable,this.options.groupEditable.remove=n.groupEditable):at(n.groupEditable)==="object"&&b.selectiveExtend(["order","add","remove"],this.options.groupEditable,n.groupEditable));var u=function(f){var c=n[f];if(c){if(typeof c!="function"){var d;throw new Error(Ut(d="option ".concat(f," must be a function ")).call(d,f,"(item, callback)"))}a.options[f]=c}};G(s=["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"]).call(s,u),n.cluster?(Va(this.options,{cluster:n.cluster}),this.clusterGenerator||(this.clusterGenerator=new S4(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}},{key:"markDirty",value:function(n){this.groupIds=[],n&&(n.refreshItems&&G(b).call(b,this.items,function(a){a.dirty=!0,a.displayed&&a.redraw()}),n.restackGroups&&G(b).call(b,this.groups,function(a,o){o!==Un&&(a.stackDirty=!0)}))}},{key:"destroy",value:function(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}},{key:"hide",value:function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}},{key:"show",value:function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}},{key:"setPopupTimer",value:function(n){if(this.clearPopupTimer(),n){var a=this.options.tooltip.delay||typeof this.options.tooltip.delay=="number"?this.options.tooltip.delay:500;this.popupTimer=Re(function(){n.show()},a)}}},{key:"clearPopupTimer",value:function(){this.popupTimer!=null&&(clearTimeout(this.popupTimer),this.popupTimer=null)}},{key:"setSelection",value:function(n){var a;n==null&&(n=[]),ct(n)||(n=[n]);var o=mt(a=this.selection).call(a,function(m){return Pt(n).call(n,m)===-1}),s=oo(o),l;try{for(s.s();!(l=s.n()).done;){var u=l.value,h=this.getItemById(u);h&&h.unselect()}}catch(m){s.e(m)}finally{s.f()}this.selection=yi(n);var f=oo(n),c;try{for(f.s();!(c=f.n()).done;){var d=c.value,v=this.getItemById(d);v&&v.select()}}catch(m){f.e(m)}finally{f.f()}}},{key:"getSelection",value:function(){var n;return Ut(n=this.selection).call(n,[])}},{key:"getVisibleItems",value:function(){var n=this.body.range.getRange(),a,o;this.options.rtl?(a=this.body.util.toScreen(n.start),o=this.body.util.toScreen(n.end)):(o=this.body.util.toScreen(n.start),a=this.body.util.toScreen(n.end));var s=[];for(var l in this.groups)if(this.groups.hasOwnProperty(l)){var u=this.groups[l],h=u.isVisible?u.visibleItems:[],f=oo(h),c;try{for(f.s();!(c=f.n()).done;){var d=c.value;this.options.rtl?d.right<o&&d.right+d.width>a&&s.push(d.id):d.left<a&&d.left+d.width>o&&s.push(d.id)}}catch(v){f.e(v)}finally{f.f()}}return s}},{key:"getItemsAtCurrentTime",value:function(n){var a,o;this.options.rtl?(a=this.body.util.toScreen(n),o=this.body.util.toScreen(n)):(o=this.body.util.toScreen(n),a=this.body.util.toScreen(n));var s=[];for(var l in this.groups)if(this.groups.hasOwnProperty(l)){var u=this.groups[l],h=u.isVisible?u.visibleItems:[],f=oo(h),c;try{for(f.s();!(c=f.n()).done;){var d=c.value;this.options.rtl?d.right<o&&d.right+d.width>a&&s.push(d.id):d.left<a&&d.left+d.width>o&&s.push(d.id)}}catch(v){f.e(v)}finally{f.f()}}return s}},{key:"getVisibleGroups",value:function(){var n=[];for(var a in this.groups)if(this.groups.hasOwnProperty(a)){var o=this.groups[a];o.isVisible&&n.push(a)}return n}},{key:"getItemById",value:function(n){var a;return this.items[n]||PX(a=this.clusters).call(a,function(o){return o.id===n})}},{key:"_deselect",value:function(n){for(var a=this.selection,o=0,s=a.length;o<s;o++)if(a[o]==n){Ir(a).call(a,o,1);break}}},{key:"redraw",value:function(){var n=this,a=this.options.margin,o=this.body.range,s=b.option.asSize,l=this.options,u=l.orientation.item,h=!1,f=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,f.className="vis-itemset",this.options.cluster&&this._clusterItems(),h=this._orderGroups()||h;var c=o.end-o.start,d=c!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,v=o.start!=this.lastRangeStart,m=l.stack!=this.lastStack,p=l.stackSubgroups!=this.lastStackSubgroups,g=d||v||m||p;this.lastVisibleInterval=c,this.lastRangeStart=o.start,this.lastStack=l.stack,this.lastStackSubgroups=l.stackSubgroups,this.props.lastWidth=this.props.width;var _=this._firstGroup(),y={item:a.item,axis:a.axis},w={item:a.item,axis:a.item.vertical/2},T=0,S=a.axis+a.item.vertical;this.groups[Un].redraw(o,w,g);var x={},E=0;G(b).call(b,this.groups,function(A,P){if(P!==Un){var R=A==_?y:w,N=!0;x[P]=A.redraw(o,R,g,N),E=x[P].length}});var I=E>0;return I&&function(){for(var A={},P=function(j){G(b).call(b,x,function(W,U){A[U]=W[j]()})},R=0;R<E;R++)P(R);G(b).call(b,n.groups,function(N,j){if(j!==Un){var W=A[j];h=W||h,T+=N.height}}),T=Math.max(T,S)}(),T=Math.max(T,S),f.style.height=s(T),this.props.width=f.offsetWidth,this.props.height=T,this.dom.axis.style.top=s(u=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,h=this._isResized()||h,h}},{key:"_firstGroup",value:function(){var n=this.options.orientation.item=="top"?0:this.groupIds.length-1,a=this.groupIds[n],o=this.groups[a]||this.groups[Cs];return o||null}},{key:"_updateUngrouped",value:function(){var n=this.groups[Cs],a,o;if(this.groupsData){if(n){n.dispose(),delete this.groups[Cs];for(o in this.items)if(this.items.hasOwnProperty(o)){a=this.items[o],a.parent&&a.parent.remove(a);var s=this.getGroupId(a.data),l=this.groups[s];l&&l.add(a)||a.hide()}}}else if(!n){var u=null,h=null;n=new Sm(u,h,this),this.groups[Cs]=n;for(o in this.items)this.items.hasOwnProperty(o)&&(a=this.items[o],n.add(a));n.show()}}},{key:"getLabelSet",value:function(){return this.dom.labelSet}},{key:"setItems",value:function(n){this.itemsSettingTime=new Date;var a=this,o,s=this.itemsData;if(!n)this.itemsData=null;else if(Bi("id",n))this.itemsData=bs(n);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(s&&(G(b).call(b,this.itemListeners,function(u,h){s.off(h,u)}),s.dispose(),o=s.getIds(),this._onRemove(o)),this.itemsData){var l=this.id;G(b).call(b,this.itemListeners,function(u,h){a.itemsData.on(h,u,l)}),o=this.itemsData.getIds(),this._onAdd(o),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}},{key:"getItems",value:function(){return this.itemsData!=null?this.itemsData.rawDS:null}},{key:"setGroups",value:function(n){var a=this,o;if(this.groupsData&&(G(b).call(b,this.groupListeners,function(h,f){a.groupsData.off(f,h)}),o=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(o)),!n)this.groupsData=null;else if(Bi("id",n))this.groupsData=n;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var s,l=this.groupsData.getDataSet();G(s=l.get()).call(s,function(h){if(h.nestedGroups){var f;G(f=h.nestedGroups).call(f,function(c){var d=l.get(c);d.nestedInGroup=h.id,h.showNested==!1&&(d.visible=!1),l.update(d)})}});var u=this.id;G(b).call(b,this.groupListeners,function(h,f){a.groupsData.on(f,h,u)}),o=this.groupsData.getIds(),this._onAddGroups(o)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}},{key:"getGroups",value:function(){return this.groupsData}},{key:"removeItem",value:function(n){var a=this,o=this.itemsData.get(n);o&&this.options.onRemove(o,function(s){s&&a.itemsData.remove(n)})}},{key:"_getType",value:function(n){return n.type||this.options.type||(n.end?"range":"box")}},{key:"getGroupId",value:function(n){var a=this._getType(n);return a=="background"&&n.group==null?Un:this.groupsData?n.group:Cs}},{key:"_onUpdate",value:function(n){var a=this,o=this;G(n).call(n,function(s){var l=o.itemsData.get(s),u=o.items[s],h=l?o._getType(l):null,f=t.types[h],c;if(u&&(!f||!(u instanceof f)?(c=u.selected,o._removeItem(u),u=null):o._updateItem(u,l)),!u&&l)if(f)u=new f(l,o.conversion,o.options),u.id=s,o._addItem(u),c&&(a.selection.push(s),u.select());else throw new TypeError('Unknown item type "'.concat(h,'"'))}),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}},{key:"_onRemove",value:function(n){var a=0,o=this;G(n).call(n,function(s){var l=o.items[s];l&&(a++,o._removeItem(l))}),a&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}},{key:"_order",value:function(){G(b).call(b,this.groups,function(n){n.order()})}},{key:"_onUpdateGroups",value:function(n){this._onAddGroups(n)}},{key:"_onAddGroups",value:function(n){var a=this;G(n).call(n,function(o){var s=a.groupsData.get(o),l=a.groups[o];if(l)l.setData(s);else{if(o==Cs||o==Un)throw new Error("Illegal group id. ".concat(o," is a reserved id."));var u=Jf(a.options);b.extend(u,{height:null}),l=new Sm(o,s,a),a.groups[o]=l;for(var h in a.items)if(a.items.hasOwnProperty(h)){var f=a.items[h];f.data.group==o&&l.add(f)}l.order(),l.show()}}),this.body.emitter.emit("_change",{queue:!0})}},{key:"_onRemoveGroups",value:function(n){var a=this;G(n).call(n,function(o){var s=a.groups[o];s&&(s.dispose(),delete a.groups[o])}),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}},{key:"_orderGroups",value:function(){if(this.groupsData){var n=this.groupsData.getIds({order:this.options.groupOrder});n=this._orderNestedGroups(n);var a=!b.equalArray(n,this.groupIds);if(a){var o=this.groups;G(n).call(n,function(s){o[s].hide()}),G(n).call(n,function(s){o[s].show()}),this.groupIds=n}return a}else return!1}},{key:"_orderNestedGroups",value:function(n){var a=this;function o(l,u){var h=[];return G(u).call(u,function(f){h.push(f);var c=l.groupsData.get(f);if(c.nestedGroups){var d,v=ve(d=l.groupsData.get({filter:function(p){return p.nestedInGroup==f},order:l.options.groupOrder})).call(d,function(m){return m.id});h=Ut(h).call(h,o(l,v))}}),h}var s=mt(n).call(n,function(l){return!a.groupsData.get(l).nestedInGroup});return o(this,s)}},{key:"_addItem",value:function(n){this.items[n.id]=n;var a=this.getGroupId(n.data),o=this.groups[a];o?o&&o.data&&o.data.showNested&&(n.groupShowing=!0):n.groupShowing=!1,o&&o.add(n)}},{key:"_updateItem",value:function(n,a){n.setData(a);var o=this.getGroupId(n.data),s=this.groups[o];s?s&&s.data&&s.data.showNested&&(n.groupShowing=!0):n.groupShowing=!1}},{key:"_removeItem",value:function(n){var a,o;n.hide(),delete this.items[n.id];var s=Pt(a=this.selection).call(a,n.id);s!=-1&&Ir(o=this.selection).call(o,s,1),n.parent&&n.parent.remove(n),this.popup!=null&&this.popup.hide()}},{key:"_constructByEndArray",value:function(n){for(var a=[],o=0;o<n.length;o++)n[o]instanceof no&&a.push(n[o]);return a}},{key:"_onTouch",value:function(n){this.touchParams.item=this.itemFromTarget(n),this.touchParams.dragLeftItem=n.target.dragLeftItem||!1,this.touchParams.dragRightItem=n.target.dragRightItem||!1,this.touchParams.itemProps=null}},{key:"_getGroupIndex",value:function(n){for(var a=0;a<this.groupIds.length;a++)if(n==this.groupIds[a])return a}},{key:"_onDragStart",value:function(n){var a=this;if(!this.touchParams.itemIsDragging){var o=this.touchParams.item||null,s=this,l;if(o&&(o.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup||o.editable!=null&&!o.editable.updateTime&&!o.editable.updateGroup&&!this.options.editable.overrideItems)return;var u=this.touchParams.dragLeftItem,h=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=o,u)l={item:u,initialX:n.center.x,dragLeft:!0,data:this._cloneItemData(o.data)},this.touchParams.itemProps=[l];else if(h)l={item:h,initialX:n.center.x,dragRight:!0,data:this._cloneItemData(o.data)},this.touchParams.itemProps=[l];else if(this.options.editable.add&&(n.srcEvent.ctrlKey||n.srcEvent.metaKey))this._onDragStartAddItem(n);else{this.groupIds.length<1&&this.redraw();var f=this._getGroupIndex(o.data.group),c=this.options.itemsAlwaysDraggable.item&&!o.selected?[o.id]:this.getSelection();this.touchParams.itemProps=ve(c).call(c,function(d){var v=s.items[d],m=s._getGroupIndex(v.data.group);return{item:v,initialX:n.center.x,groupOffset:f-m,data:a._cloneItemData(v.data)}})}n.stopPropagation()}else this.options.editable.add&&(n.srcEvent.ctrlKey||n.srcEvent.metaKey)&&this._onDragStartAddItem(n)}}},{key:"_onDragStartAddItem",value:function(n){var a=this.options.snap||null,o=this.dom.frame.getBoundingClientRect(),s=this.options.rtl?o.right-n.center.x+10:n.center.x-o.left-10,l=this.body.util.toTime(s),u=this.body.util.getScale(),h=this.body.util.getStep(),f=a?a(l,u,h):l,c=f,d={type:"range",start:f,end:c,content:"new item"},v=ws();d[this.itemsData.idProp]=v;var m=this.groupFromTarget(n);m&&(d.group=m.groupId);var p=new no(d,this.conversion,this.options);p.id=v,p.data=this._cloneItemData(d),this._addItem(p),this.touchParams.selectedItem=p;var g={item:p,initialX:n.center.x,data:p.data};this.options.rtl?g.dragLeft=!0:g.dragRight=!0,this.touchParams.itemProps=[g],n.stopPropagation()}},{key:"_onDrag",value:function(n){var a=this;if(this.popup!=null&&this.options.showTooltips&&!this.popup.hidden){var o=this.body.dom.centerContainer,s=o.getBoundingClientRect();this.popup.setPosition(n.center.x-s.left+o.offsetLeft,n.center.y-s.top+o.offsetTop),this.popup.show()}if(this.touchParams.itemProps){var l;n.stopPropagation();var u=this,h=this.options.snap||null,f=this.body.dom.root.offsetLeft,c=this.options.rtl?f+this.body.domProps.right.width:f+this.body.domProps.left.width,d=this.body.util.getScale(),v=this.body.util.getStep(),m=this.touchParams.selectedItem,p=(this.options.editable.overrideItems||m.editable==null)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&m.editable!=null&&m.editable.updateGroup,g=null;if(p&&m&&m.data.group!=null){var _=u.groupFromTarget(n);_&&(g=this._getGroupIndex(_.groupId))}G(l=this.touchParams.itemProps).call(l,function(y){var w=u.body.util.toTime(n.center.x-c),T=u.body.util.toTime(y.initialX-c),S,x,E,I,A;a.options.rtl?S=-(w-T):S=w-T;var P=a._cloneItemData(y.item.data);if(!(y.item.editable!=null&&!y.item.editable.updateTime&&!y.item.editable.updateGroup&&!u.options.editable.overrideItems)){var R=(a.options.editable.overrideItems||m.editable==null)&&a.options.editable.updateTime||!a.options.editable.overrideItems&&m.editable!=null&&m.editable.updateTime;if(R){if(y.dragLeft)a.options.rtl?P.end!=null&&(E=b.convert(y.data.end,"Date"),A=new Date(E.valueOf()+S),P.end=h?h(A,d,v):A):P.start!=null&&(x=b.convert(y.data.start,"Date"),I=new Date(x.valueOf()+S),P.start=h?h(I,d,v):I);else if(y.dragRight)a.options.rtl?P.start!=null&&(x=b.convert(y.data.start,"Date"),I=new Date(x.valueOf()+S),P.start=h?h(I,d,v):I):P.end!=null&&(E=b.convert(y.data.end,"Date"),A=new Date(E.valueOf()+S),P.end=h?h(A,d,v):A);else if(P.start!=null)if(x=b.convert(y.data.start,"Date").valueOf(),I=new Date(x+S),P.end!=null){E=b.convert(y.data.end,"Date");var N=E.valueOf()-x.valueOf();P.start=h?h(I,d,v):I,P.end=new Date(P.start.valueOf()+N)}else P.start=h?h(I,d,v):I}if(p&&!y.dragLeft&&!y.dragRight&&g!=null&&P.group!=null){var j=g-y.groupOffset;j=Math.max(0,j),j=Math.min(u.groupIds.length-1,j),P.group=u.groupIds[j]}P=a._cloneItemData(P),u.options.onMoving(P,function(W){W&&y.item.setData(a._cloneItemData(W,"Date"))})}}),this.body.emitter.emit("_change")}}},{key:"_moveToGroup",value:function(n,a){var o=this.groups[a];if(o&&o.groupId!=n.data.group){var s=n.parent;s.remove(n),s.order(),n.data.group=o.groupId,o.add(n),o.order()}}},{key:"_onDragEnd",value:function(n){var a=this;if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){n.stopPropagation();var o=this,s=this.touchParams.itemProps;this.touchParams.itemProps=null,G(s).call(s,function(l){var u=l.item.id,h=o.itemsData.get(u)!=null;if(!h)o.options.onAdd(l.item.data,function(c){o._removeItem(l.item),c&&o.itemsData.add(c),o.body.emitter.emit("_change")});else{var f=a._cloneItemData(l.item.data);o.options.onMove(f,function(c){c?(c[a.itemsData.idProp]=u,a.itemsData.update(c)):(l.item.setData(l.data),o.body.emitter.emit("_change"))})}})}}},{key:"_onGroupClick",value:function(n){var a=this,o=this.groupFromTarget(n);Re(function(){a.toggleGroupShowNested(o)},1)}},{key:"toggleGroupShowNested",value:function(n){var a,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(!(!n||!n.nestedGroups)){var s=this.groupsData.getDataSet();o!=null?n.showNested=!!o:n.showNested=!n.showNested;var l=s.get(n.groupId);l.showNested=n.showNested;for(var u=n.nestedGroups,h=u;h.length>0;){var f=h;h=[];for(var c=0;c<f.length;c++){var d=s.get(f[c]);d.nestedGroups&&(h=Ut(h).call(h,d.nestedGroups))}h.length>0&&(u=Ut(u).call(u,h))}var v=ve(a=s.get(u)).call(a,function(m){return m.visible==null&&(m.visible=!0),m.visible=!!l.showNested,m});s.update(Ut(v).call(v,l)),l.showNested?(b.removeClassName(n.dom.label,"collapsed"),b.addClassName(n.dom.label,"expanded")):(b.removeClassName(n.dom.label,"expanded"),b.addClassName(n.dom.label,"collapsed"))}}},{key:"toggleGroupDragClassName",value:function(n){n.dom.label.classList.toggle("vis-group-is-dragging"),n.dom.foreground.classList.toggle("vis-group-is-dragging")}},{key:"_onGroupDragStart",value:function(n){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(n),this.groupTouchParams.group&&(n.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}},{key:"_onGroupDrag",value:function(n){if(this.options.groupEditable.order&&this.groupTouchParams.group){n.stopPropagation();var a=this.groupsData.getDataSet(),o=this.groupFromTarget(n);if(o&&o.height!=this.groupTouchParams.group.height){var s=o.top<this.groupTouchParams.group.top,l=n.center?n.center.y:n.clientY,u=o.dom.foreground.getBoundingClientRect(),h=this.groupTouchParams.group.height;if(s){if(u.top+h<l)return}else{var f=o.height;if(u.top+f-h>l)return}}if(o&&o!=this.groupTouchParams.group){var c=a.get(o.groupId),d=a.get(this.groupTouchParams.group.groupId);d&&c&&(this.options.groupOrderSwap(d,c,a),a.update(d),a.update(c));var v=a.getIds({order:this.options.groupOrder});if(!b.equalArray(v,this.groupTouchParams.originalOrder))for(var m=this.groupTouchParams.originalOrder,p=this.groupTouchParams.group.groupId,g=Math.min(m.length,v.length),_=0,y=0,w=0;_<g;){for(;_+y<g&&_+w<g&&v[_+y]==m[_+w];)_++;if(_+y>=g)break;if(v[_+y]==p)y=1;else if(m[_+w]==p)w=1;else{var T=Pt(v).call(v,m[_+w]),S=a.get(v[_+y]),x=a.get(m[_+w]);this.options.groupOrderSwap(S,x,a),a.update(S),a.update(x);var E=v[_+y];v[_+y]=m[_+w],v[T]=E,_++}}}}}},{key:"_onGroupDragEnd",value:function(n){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){n.stopPropagation();var a=this,o=a.groupTouchParams.group.groupId,s=a.groupsData.getDataSet(),l=b.extend({},s.get(o));a.options.onMoveGroup(l,function(u){if(u)u[s._idProp]=o,s.update(u);else{var h=s.getIds({order:a.options.groupOrder});if(!b.equalArray(h,a.groupTouchParams.originalOrder))for(var f=a.groupTouchParams.originalOrder,c=Math.min(f.length,h.length),d=0;d<c;){for(;d<c&&h[d]==f[d];)d++;if(d>=c)break;var v=Pt(h).call(h,f[d]),m=s.get(h[d]),p=s.get(f[d]);a.options.groupOrderSwap(m,p,s),s.update(m),s.update(p);var g=h[d];h[d]=f[d],h[v]=g,d++}}}),a.body.emitter.emit("groupDragged",{groupId:o}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}},{key:"_onSelectItem",value:function(n){if(!!this.options.selectable){var a=n.srcEvent&&(n.srcEvent.ctrlKey||n.srcEvent.metaKey),o=n.srcEvent&&n.srcEvent.shiftKey;if(a||o){this._onMultiSelectItem(n);return}var s=this.getSelection(),l=this.itemFromTarget(n),u=l&&l.selectable?[l.id]:[];this.setSelection(u);var h=this.getSelection();(h.length>0||s.length>0)&&this.body.emitter.emit("select",{items:h,event:n})}}},{key:"_onMouseOver",value:function(n){var a=this.itemFromTarget(n);if(!!a){var o=this.itemFromRelatedTarget(n);if(a!==o){var s=a.getTitle();if(this.options.showTooltips&&s){this.popup==null&&(this.popup=new u4(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(s);var l=this.body.dom.centerContainer,u=l.getBoundingClientRect();this.popup.setPosition(n.clientX-u.left+l.offsetLeft,n.clientY-u.top+l.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),this.popup!=null&&this.popup.hide();this.body.emitter.emit("itemover",{item:a.id,event:n})}}}},{key:"_onMouseOut",value:function(n){var a=this.itemFromTarget(n);if(!!a){var o=this.itemFromRelatedTarget(n);a!==o&&(this.clearPopupTimer(),this.popup!=null&&this.popup.hide(),this.body.emitter.emit("itemout",{item:a.id,event:n}))}}},{key:"_onMouseMove",value:function(n){var a=this.itemFromTarget(n);if(!!a&&(this.popupTimer!=null&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){var o=this.body.dom.centerContainer,s=o.getBoundingClientRect();this.popup.setPosition(n.clientX-s.left+o.offsetLeft,n.clientY-s.top+o.offsetTop),this.popup.show()}}},{key:"_onMouseWheel",value:function(n){this.touchParams.itemIsDragging&&this._onDragEnd(n)}},{key:"_onUpdateItem",value:function(n){if(!!this.options.selectable&&!(!this.options.editable.updateTime&&!this.options.editable.updateGroup)){var a=this;if(n){var o=a.itemsData.get(n.id);this.options.onUpdate(o,function(s){s&&a.itemsData.update(s)})}}}},{key:"_onDropObjectOnItem",value:function(n){var a=this.itemFromTarget(n),o=JSON.parse(n.dataTransfer.getData("text"));this.options.onDropObjectOnItem(o,a)}},{key:"_onAddItem",value:function(n){if(!!this.options.selectable&&!!this.options.editable.add){var a=this,o=this.options.snap||null,s=this.dom.frame.getBoundingClientRect(),l=this.options.rtl?s.right-n.center.x:n.center.x-s.left,u=this.body.util.toTime(l),h=this.body.util.getScale(),f=this.body.util.getStep(),c,d;n.type=="drop"?(d=JSON.parse(n.dataTransfer.getData("text")),d.content=d.content?d.content:"new item",d.start=d.start?d.start:o?o(u,h,f):u,d.type=d.type||"box",d[this.itemsData.idProp]=d.id||ws(),d.type=="range"&&!d.end&&(c=this.body.util.toTime(l+this.props.width/5),d.end=o?o(c,h,f):c)):(d={start:o?o(u,h,f):u,content:"new item"},d[this.itemsData.idProp]=ws(),this.options.type==="range"&&(c=this.body.util.toTime(l+this.props.width/5),d.end=o?o(c,h,f):c));var v=this.groupFromTarget(n);v&&(d.group=v.groupId),d=this._cloneItemData(d),this.options.onAdd(d,function(m){m&&(a.itemsData.add(m),n.type=="drop"&&a.setSelection([m.id]))})}}},{key:"_onMultiSelectItem",value:function(n){var a=this;if(!!this.options.selectable){var o=this.itemFromTarget(n);if(o){var s=this.options.multiselect?this.getSelection():[],l=n.srcEvent&&n.srcEvent.shiftKey||!1;if((l||this.options.sequentialSelection)&&this.options.multiselect){var u=this.itemsData.get(o.id).group,h=void 0;this.options.multiselectPerGroup&&s.length>0&&(h=this.itemsData.get(s[0]).group),(!this.options.multiselectPerGroup||h==null||h==u)&&s.push(o.id);var f=t._getItemRange(this.itemsData.get(s));if(!this.options.multiselectPerGroup||h==u){s=[];for(var c in this.items)if(this.items.hasOwnProperty(c)){var d=this.items[c],v=d.data.start,m=d.data.end!==void 0?d.data.end:v;v>=f.min&&m<=f.max&&(!this.options.multiselectPerGroup||h==this.itemsData.get(d.id).group)&&!(d instanceof ao)&&s.push(d.id)}}}else{var p=Pt(s).call(s,o.id);p==-1?s.push(o.id):Ir(s).call(s,p,1)}var g=mt(s).call(s,function(_){return a.getItemById(_).selectable});this.setSelection(g),this.body.emitter.emit("select",{items:this.getSelection(),event:n})}}}},{key:"itemFromElement",value:function(n){for(var a=n;a;){if(a.hasOwnProperty("vis-item"))return a["vis-item"];a=a.parentNode}return null}},{key:"itemFromTarget",value:function(n){return this.itemFromElement(n.target)}},{key:"itemFromRelatedTarget",value:function(n){return this.itemFromElement(n.relatedTarget)}},{key:"groupFromTarget",value:function(n){var a=n.center?n.center.y:n.clientY,o=this.groupIds;o.length<=0&&this.groupsData&&(o=this.groupsData.getIds({order:this.options.groupOrder}));for(var s=0;s<o.length;s++){var l=o[s],u=this.groups[l],h=u.dom.foreground,f=h.getBoundingClientRect();if(a>=f.top&&a<f.top+h.offsetHeight)return u;if(this.options.orientation.item==="top"){if(s===this.groupIds.length-1&&a>f.top)return u}else if(s===0&&a<f.top+h.offset)return u}return null}},{key:"_cloneItemData",value:function(n,a){var o=b.extend({},n);return a||(a=this.itemsData.type),o.start!=null&&(o.start=b.convert(o.start,a&&a.start||"Date")),o.end!=null&&(o.end=b.convert(o.end,a&&a.end||"Date")),o}},{key:"_clusterItems",value:function(){if(!!this.options.cluster){var n=this.body.range.conversion(this.body.domProps.center.width),a=n.scale,o=this.clusterGenerator.getClusters(this.clusters,a,this.options.cluster);if(this.clusters!=o){if(this._detachAllClusters(),o){var s=oo(o),l;try{for(s.s();!(l=s.n()).done;){var u=l.value;u.attach()}}catch(h){s.e(h)}finally{s.f()}this.clusters=o}this._updateClusters(o)}}}},{key:"_detachAllClusters",value:function(){if(this.options.cluster&&this.clusters&&this.clusters.length){var n=oo(this.clusters),a;try{for(n.s();!(a=n.n()).done;){var o=a.value;o.detach()}}catch(s){n.e(s)}finally{n.f()}}}},{key:"_updateClusters",value:function(n){if(this.clusters&&this.clusters.length){var a,o=new xc(ve(n).call(n,function(p){return p.id})),s=mt(a=this.clusters).call(a,function(p){return!o.has(p.id)}),l=!1,u=oo(s),h;try{for(u.s();!(h=u.n()).done;){var f,c=h.value,d=Pt(f=this.selection).call(f,c.id);if(d!==-1){var v;c.unselect(),Ir(v=this.selection).call(v,d,1),l=!0}}}catch(p){u.e(p)}finally{u.f()}if(l){var m=this.getSelection();this.body.emitter.emit("select",{items:m,event})}}this.clusters=n||[]}}],[{key:"_getItemRange",value:function(n){var a=null,o=null;return G(n).call(n,function(s){(o==null||s.start<o)&&(o=s.start),s.end!=null?(a==null||s.end>a)&&(a=s.end):(a==null||s.start>a)&&(a=s.start)}),{min:o,max:a}}},{key:"itemSetFromTarget",value:function(n){for(var a=n.target;a;){if(a.hasOwnProperty("vis-itemset"))return a["vis-itemset"];a=a.parentNode}return null}}]),t}(Hn);Cc.types={background:ao,box:e4,range:no,point:n4};Cc.prototype._onAdd=Cc.prototype._onUpdate;var Ru=!1,lx,Oc="background: #FFeeee; color: #dd0000",ux=function(){function e(){Ct(this,e)}return Ot(e,null,[{key:"validate",value:function(t,i,n){Ru=!1,lx=i;var a=i;return n!==void 0&&(a=i[n]),e.parse(t,a,[]),Ru}},{key:"parse",value:function(t,i,n){for(var a in t)t.hasOwnProperty(a)&&e.check(a,t,i,n)}},{key:"check",value:function(t,i,n,a){if(n[t]===void 0&&n.__any__===void 0){e.getSuggestion(t,n,a);return}var o=t,s=!0;n[t]===void 0&&n.__any__!==void 0&&(o="__any__",s=e.getType(i[t])==="object");var l=n[o];s&&l.__type__!==void 0&&(l=l.__type__),e.checkFields(t,i,n,o,l,a)}},{key:"checkFields",value:function(t,i,n,a,o,s){var l=function(c){console.log("%c"+c+e.printLocation(s,t),Oc)},u=e.getType(i[t]),h=o[u];h!==void 0?e.getType(h)==="array"&&Pt(h).call(h,i[t])===-1?(l('Invalid option detected in "'+t+'". Allowed values are:'+e.print(h)+' not "'+i[t]+'". '),Ru=!0):u==="object"&&a!=="__any__"&&(s=b.copyAndExtendArray(s,t),e.parse(i[t],n[a],s)):o.any===void 0&&(l('Invalid type received for "'+t+'". Expected: '+e.print(pe(o))+". Received ["+u+'] "'+i[t]+'"'),Ru=!0)}},{key:"getType",value:function(t){var i=at(t);return i==="object"?t===null?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":ct(t)?"array":t instanceof Date?"date":t.nodeType!==void 0?"dom":t._isAMomentObject===!0?"moment":"object":i==="number"?"number":i==="boolean"?"boolean":i==="string"?"string":i===void 0?"undefined":i}},{key:"getSuggestion",value:function(t,i,n){var a=e.findInOptions(t,i,n,!1),o=e.findInOptions(t,lx,[],!0),s=8,l=4,u;a.indexMatch!==void 0?u=" in "+e.printLocation(a.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+a.indexMatch+`"?

`:o.distance<=l&&a.distance>o.distance?u=" in "+e.printLocation(a.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""):a.distance<=s?u='. Did you mean "'+a.closestMatch+'"?'+e.printLocation(a.path,t):u=". Did you mean one of these: "+e.print(pe(i))+e.printLocation(n,t),console.log('%cUnknown option detected: "'+t+'"'+u,Oc),Ru=!0}},{key:"findInOptions",value:function(t,i,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,s="",l=[],u=t.toLowerCase(),h=void 0;for(var f in i){var c=void 0;if(i[f].__type__!==void 0&&a===!0){var d=e.findInOptions(t,i[f],b.copyAndExtendArray(n,f));o>d.distance&&(s=d.closestMatch,l=d.path,o=d.distance,h=d.indexMatch)}else{var v;Pt(v=f.toLowerCase()).call(v,u)!==-1&&(h=f),c=e.levenshteinDistance(t,f),o>c&&(s=f,l=b.copyArray(n),o=c)}}return{closestMatch:s,path:l,distance:o,indexMatch:h}}},{key:"printLocation",value:function(t,i){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,a=`

`+n+`options = {
`,o=0;o<t.length;o++){for(var s=0;s<o+1;s++)a+="  ";a+=t[o]+`: {
`}for(var l=0;l<t.length+1;l++)a+="  ";a+=i+`
`;for(var u=0;u<t.length+1;u++){for(var h=0;h<t.length-u;h++)a+="  ";a+=`}
`}return a+`

`}},{key:"print",value:function(t){return hr(t).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(t,i){if(t.length===0)return i.length;if(i.length===0)return t.length;var n=[],a;for(a=0;a<=i.length;a++)n[a]=[a];var o;for(o=0;o<=t.length;o++)n[0][o]=o;for(a=1;a<=i.length;a++)for(o=1;o<=t.length;o++)i.charAt(a-1)==t.charAt(o-1)?n[a][o]=n[a-1][o-1]:n[a][o]=Math.min(n[a-1][o-1]+1,Math.min(n[a][o-1]+1,n[a-1][o]+1));return n[i.length][t.length]}}]),e}(),tt="string",J="boolean",Ft="number",hx="array",Os="date",qt="object",I4="dom",Is="moment",fx="any",P4={configure:{enabled:{boolean:J},filter:{boolean:J,function:"function"},container:{dom:I4},__type__:{object:qt,boolean:J,function:"function"}},align:{string:tt},alignCurrentTime:{string:tt,undefined:"undefined"},rtl:{boolean:J,undefined:"undefined"},rollingMode:{follow:{boolean:J},offset:{number:Ft,undefined:"undefined"},__type__:{object:qt}},onTimeout:{timeoutMs:{number:Ft},callback:{function:"function"},__type__:{object:qt}},verticalScroll:{boolean:J,undefined:"undefined"},horizontalScroll:{boolean:J,undefined:"undefined"},autoResize:{boolean:J},throttleRedraw:{number:Ft},clickToUse:{boolean:J},dataAttributes:{string:tt,array:hx},editable:{add:{boolean:J,undefined:"undefined"},remove:{boolean:J,undefined:"undefined"},updateGroup:{boolean:J,undefined:"undefined"},updateTime:{boolean:J,undefined:"undefined"},overrideItems:{boolean:J,undefined:"undefined"},__type__:{boolean:J,object:qt}},end:{number:Ft,date:Os,string:tt,moment:Is},format:{minorLabels:{millisecond:{string:tt,undefined:"undefined"},second:{string:tt,undefined:"undefined"},minute:{string:tt,undefined:"undefined"},hour:{string:tt,undefined:"undefined"},weekday:{string:tt,undefined:"undefined"},day:{string:tt,undefined:"undefined"},week:{string:tt,undefined:"undefined"},month:{string:tt,undefined:"undefined"},year:{string:tt,undefined:"undefined"},__type__:{object:qt,function:"function"}},majorLabels:{millisecond:{string:tt,undefined:"undefined"},second:{string:tt,undefined:"undefined"},minute:{string:tt,undefined:"undefined"},hour:{string:tt,undefined:"undefined"},weekday:{string:tt,undefined:"undefined"},day:{string:tt,undefined:"undefined"},week:{string:tt,undefined:"undefined"},month:{string:tt,undefined:"undefined"},year:{string:tt,undefined:"undefined"},__type__:{object:qt,function:"function"}},__type__:{object:qt}},moment:{function:"function"},groupHeightMode:{string:tt},groupOrder:{string:tt,function:"function"},groupEditable:{add:{boolean:J,undefined:"undefined"},remove:{boolean:J,undefined:"undefined"},order:{boolean:J,undefined:"undefined"},__type__:{boolean:J,object:qt}},groupOrderSwap:{function:"function"},height:{string:tt,number:Ft},hiddenDates:{start:{date:Os,number:Ft,string:tt,moment:Is},end:{date:Os,number:Ft,string:tt,moment:Is},repeat:{string:tt},__type__:{object:qt,array:hx}},itemsAlwaysDraggable:{item:{boolean:J,undefined:"undefined"},range:{boolean:J,undefined:"undefined"},__type__:{boolean:J,object:qt}},limitSize:{boolean:J},locale:{string:tt},locales:{__any__:{any:fx},__type__:{object:qt}},longSelectPressTime:{number:Ft},margin:{axis:{number:Ft},item:{horizontal:{number:Ft,undefined:"undefined"},vertical:{number:Ft,undefined:"undefined"},__type__:{object:qt,number:Ft}},__type__:{object:qt,number:Ft}},max:{date:Os,number:Ft,string:tt,moment:Is},maxHeight:{number:Ft,string:tt},maxMinorChars:{number:Ft},min:{date:Os,number:Ft,string:tt,moment:Is},minHeight:{number:Ft,string:tt},moveable:{boolean:J},multiselect:{boolean:J},multiselectPerGroup:{boolean:J},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:tt,undefined:"undefined"},item:{string:tt,undefined:"undefined"},__type__:{string:tt,object:qt}},selectable:{boolean:J},sequentialSelection:{boolean:J},showCurrentTime:{boolean:J},showMajorLabels:{boolean:J},showMinorLabels:{boolean:J},showWeekScale:{boolean:J},stack:{boolean:J},stackSubgroups:{boolean:J},cluster:{maxItems:{number:Ft,undefined:"undefined"},titleTemplate:{string:tt,undefined:"undefined"},clusterCriteria:{function:"function",undefined:"undefined"},showStipes:{boolean:J,undefined:"undefined"},fitOnDoubleClick:{boolean:J,undefined:"undefined"},__type__:{boolean:J,object:qt}},snap:{function:"function",null:"null"},start:{date:Os,number:Ft,string:tt,moment:Is},template:{function:"function"},loadingScreenTemplate:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:tt,function:"function"},showTooltips:{boolean:J},tooltip:{followMouse:{boolean:J},overflowMethod:{string:["cap","flip","none"]},delay:{number:Ft},template:{function:"function"},__type__:{object:qt}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:J,object:qt}},timeAxis:{scale:{string:tt,undefined:"undefined"},step:{number:Ft,undefined:"undefined"},__type__:{object:qt}},type:{string:tt},width:{string:tt,number:Ft},preferZoom:{boolean:J},zoomable:{boolean:J},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:Ft},zoomMax:{number:Ft},zoomMin:{number:Ft},xss:{disabled:{boolean:J},filterOptions:{__any__:{any:fx},__type__:{object:qt}},__type__:{object:qt}},__type__:{object:qt}},k4={global:{align:["center","left","right"],alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],xss:{disabled:!1}}},D4={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},R4=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;Ct(this,e),this.pixelRatio=r,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return Ot(e,[{key:"insertTo",value:function(t){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if(typeof t=="function")this.updateCallback=t;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(t){if(typeof t=="function")this.closeCallback=t;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(t){if(typeof t=="string")return D4[t]}},{key:"setColor",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t!=="none"){var n,a=this._isColorString(t);if(a!==void 0&&(t=a),b.isString(t)===!0){if(b.isValidRGB(t)===!0){var o=t.substr(4).substr(0,t.length-5).split(",");n={r:o[0],g:o[1],b:o[2],a:1}}else if(b.isValidRGBA(t)===!0){var s=t.substr(5).substr(0,t.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(b.isValidHex(t)===!0){var l=b.hexToRGB(t);n={r:l.r,g:l.g,b:l.b,a:1}}}else if(t instanceof Object&&t.r!==void 0&&t.g!==void 0&&t.b!==void 0){var u=t.a!==void 0?t.a:"1.0";n={r:t.r,g:t.g,b:t.b,a:u}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+hr(t));this._setColor(n,i)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i===!0&&(this.previousColor=b.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Re(function(){t.closeCallback!==void 0&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i===!0&&(this.initialColor=b.extend({},t)),this.color=t;var n=b.RGBToHSV(t.r,t.g,t.b),a=2*Math.PI,o=this.r*n.s,s=this.centerCoordinates.x+o*Math.sin(a*n.h),l=this.centerCoordinates.y+o*Math.cos(a*n.h);this.colorPickerSelector.style.left=s-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var i=b.RGBToHSV(this.color.r,this.color.g,this.color.b);i.v=t/100;var n=b.HSVToRGB(i.h,i.s,i.v);n.a=this.color.a,this.color=n,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,i=b.RGBToHSV(t.r,t.g,t.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var a=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,a,o),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-i.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),ZT(n).call(n),this.brightnessRange.value=100*i.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,i,n,a;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var s=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(u){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(u){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var l=this;this.opacityRange.onchange=function(){l._setOpacity(this.value)},this.opacityRange.oninput=function(){l._setOpacity(this.value)},this.brightnessRange.onchange=function(){l._setBrightness(this.value)},this.brightnessRange.oninput=function(){l._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=D(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=D(i=this._apply).call(i,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=D(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=D(a=this._loadLast).call(a,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new Me(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),kS(this.hammer,function(i){t._moveSelector(i)}),this.hammer.on("tap",function(i){t._moveSelector(i)}),this.hammer.on("panstart",function(i){t._moveSelector(i)}),this.hammer.on("panmove",function(i){t._moveSelector(i)}),this.hammer.on("panend",function(i){t._moveSelector(i)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,i,n);var a,o,s,l;this.centerCoordinates={x:i*.5,y:n*.5},this.r=.49*i;var u=2*Math.PI/360,h=1/360,f=1/this.r,c;for(s=0;s<360;s++)for(l=0;l<this.r;l++)a=this.centerCoordinates.x+l*Math.sin(u*s),o=this.centerCoordinates.y+l*Math.cos(u*s),c=b.HSVToRGB(s*h,l*f,1),t.fillStyle="rgb("+c.r+","+c.g+","+c.b+")",t.fillRect(a-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,i,n)}this.generated=!0}},{key:"_moveSelector",value:function(t){var i=this.colorPickerDiv.getBoundingClientRect(),n=t.center.x-i.left,a=t.center.y-i.top,o=.5*this.colorPickerDiv.clientHeight,s=.5*this.colorPickerDiv.clientWidth,l=n-s,u=a-o,h=Math.atan2(l,u),f=.98*Math.min(Math.sqrt(l*l+u*u),s),c=Math.cos(h)*f+o,d=Math.sin(h)*f+s;this.colorPickerSelector.style.top=c-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=d-.5*this.colorPickerSelector.clientWidth+"px";var v=h/(2*Math.PI);v=v<0?v+1:v;var m=f/this.r,p=b.RGBToHSV(this.color.r,this.color.g,this.color.b);p.h=v,p.s=m;var g=b.HSVToRGB(p.h,p.s,p.v);g.a=this.color.a,this.color=g,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}(),cx=function(){function e(r,t,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;Ct(this,e),this.parent=r,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},b.extend(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new R4(n),this.wrapper=void 0}return Ot(e,[{key:"setOptions",value:function(t){if(t!==void 0){this.popupHistory={},this._removePopup();var i=!0;if(typeof t=="string")this.options.filter=t;else if(ct(t))this.options.filter=t.join();else if(at(t)==="object"){if(t==null)throw new TypeError("options cannot be null");t.container!==void 0&&(this.options.container=t.container),mt(t)!==void 0&&(this.options.filter=mt(t)),t.showButton!==void 0&&(this.options.showButton=t.showButton),t.enabled!==void 0&&(i=t.enabled)}else typeof t=="boolean"?(this.options.filter=!0,i=t):typeof t=="function"&&(this.options.filter=t,i=!0);mt(this.options)===!1&&(i=!1),this.options.enabled=i}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=mt(this.options),i=0,n=!1;for(var a in this.configureOptions)this.configureOptions.hasOwnProperty(a)&&(this.allowCreation=!1,n=!1,typeof t=="function"?(n=t(a,[]),n=n||this._handleObject(this.configureOptions[a],[a],!0)):(t===!0||Pt(t).call(t,a)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,i>0&&this._makeItem([]),this._makeHeader(a),this._handleObject(this.configureOptions[a],[a])),i++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var i=this.moduleOptions,n=0;n<t.length;n++)if(i[t[n]]!==void 0)i=i[t[n]];else{i=void 0;break}return i}},{key:"_makeItem",value:function(t){if(this.allowCreation===!0){var i=document.createElement("div");i.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return G(a).call(a,function(s){i.appendChild(s)}),this.domElements.push(i),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var i=document.createElement("div");i.className="vis-configuration vis-config-header",i.innerHTML=b.xss(t),this._makeItem([],i)}},{key:"_makeLabel",value:function(t,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=document.createElement("div");return a.className="vis-configuration vis-config-label vis-config-s"+i.length,n===!0?a.innerHTML=b.xss("<i><b>"+t+":</b></i>"):a.innerHTML=b.xss(t+":"),a}},{key:"_makeDropdown",value:function(t,i,n){var a=document.createElement("select");a.className="vis-configuration vis-config-select";var o=0;i!==void 0&&Pt(t).call(t,i)!==-1&&(o=Pt(t).call(t,i));for(var s=0;s<t.length;s++){var l=document.createElement("option");l.value=t[s],s===o&&(l.selected="selected"),l.innerHTML=t[s],a.appendChild(l)}var u=this;a.onchange=function(){u._update(this.value,n)};var h=this._makeLabel(n[n.length-1],n);this._makeItem(n,h,a)}},{key:"_makeRange",value:function(t,i,n){var a=t[0],o=t[1],s=t[2],l=t[3],u=document.createElement("input");u.className="vis-configuration vis-config-range";try{u.type="range",u.min=o,u.max=s}catch(g){}u.step=l;var h="",f=0;if(i!==void 0){var c=1.2;i<0&&i*c<o?(u.min=Math.ceil(i*c),f=u.min,h="range increased"):i/c<o&&(u.min=Math.ceil(i/c),f=u.min,h="range increased"),i*c>s&&s!==1&&(u.max=Math.ceil(i*c),f=u.max,h="range increased"),u.value=i}else u.value=a;var d=document.createElement("input");d.className="vis-configuration vis-config-rangeinput",d.value=Number(u.value);var v=this;u.onchange=function(){d.value=this.value,v._update(Number(this.value),n)},u.oninput=function(){d.value=this.value};var m=this._makeLabel(n[n.length-1],n),p=this._makeItem(n,m,u,d);h!==""&&this.popupHistory[p]!==f&&(this.popupHistory[p]=f,this._setupPopup(h,p))}},{key:"_makeButton",value:function(){var t=this;if(this.options.showButton===!0){var i=document.createElement("div");i.className="vis-configuration vis-config-button",i.innerHTML="generate options",i.onclick=function(){t._printOptions()},i.onmouseover=function(){i.className="vis-configuration vis-config-button hover"},i.onmouseout=function(){i.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(i)}}},{key:"_setupPopup",value:function(t,i){var n=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var a=document.createElement("div");a.id="vis-configuration-popup",a.className="vis-configuration-popup",a.innerHTML=b.xss(t),a.onclick=function(){n._removePopup()},this.popupCounter+=1,this.popupDiv={html:a,index:i}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(this.popupDiv.html!==void 0){var i=this.domElements[this.popupDiv.index],n=i.getBoundingClientRect();this.popupDiv.html.style.left=n.left+"px",this.popupDiv.html.style.top=n.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Re(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Re(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,i,n){var a=document.createElement("input");a.type="checkbox",a.className="vis-configuration vis-config-checkbox",a.checked=t,i!==void 0&&(a.checked=i,i!==t&&(at(t)==="object"?i!==t.enabled&&this.changedOptions.push({path:n,value:i}):this.changedOptions.push({path:n,value:i})));var o=this;a.onchange=function(){o._update(this.checked,n)};var s=this._makeLabel(n[n.length-1],n);this._makeItem(n,s,a)}},{key:"_makeTextInput",value:function(t,i,n){var a=document.createElement("input");a.type="text",a.className="vis-configuration vis-config-text",a.value=i,i!==t&&this.changedOptions.push({path:n,value:i});var o=this;a.onchange=function(){o._update(this.value,n)};var s=this._makeLabel(n[n.length-1],n);this._makeItem(n,s,a)}},{key:"_makeColorField",value:function(t,i,n){var a=this,o=t[1],s=document.createElement("div");i=i===void 0?o:i,i!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=i):s.className="vis-configuration vis-config-colorBlock none",i=i===void 0?o:i,s.onclick=function(){a._showColorPicker(i,s,n)};var l=this._makeLabel(n[n.length-1],n);this._makeItem(n,l,s)}},{key:"_showColorPicker",value:function(t,i,n){var a=this;i.onclick=function(){},this.colorPicker.insertTo(i),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(o){var s="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";i.style.backgroundColor=s,a._update(s,n)}),this.colorPicker.setCloseCallback(function(){i.onclick=function(){a._showColorPicker(t,i,n)}})}},{key:"_handleObject",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=!1,o=mt(this.options),s=!1;for(var l in t)if(t.hasOwnProperty(l)){a=!0;var u=t[l],h=b.copyAndExtendArray(i,l);if(typeof o=="function"&&(a=o(l,i),a===!1&&!ct(u)&&typeof u!="string"&&typeof u!="boolean"&&u instanceof Object&&(this.allowCreation=!1,a=this._handleObject(u,h,!0),this.allowCreation=n===!1)),a!==!1){s=!0;var f=this._getValue(h);if(ct(u))this._handleArray(u,f,h);else if(typeof u=="string")this._makeTextInput(u,f,h);else if(typeof u=="boolean")this._makeCheckbox(u,f,h);else if(u instanceof Object){var c=!0;if(Pt(i).call(i,"physics")!==-1&&this.moduleOptions.physics.solver!==l&&(c=!1),c===!0)if(u.enabled!==void 0){var d=b.copyAndExtendArray(h,"enabled"),v=this._getValue(d);if(v===!0){var m=this._makeLabel(l,h,!0);this._makeItem(h,m),s=this._handleObject(u,h)||s}else this._makeCheckbox(u,v,h)}else{var p=this._makeLabel(l,h,!0);this._makeItem(h,p),s=this._handleObject(u,h)||s}}else console.error("dont know how to handle",u,l,h)}}return s}},{key:"_handleArray",value:function(t,i,n){typeof t[0]=="string"&&t[0]==="color"?(this._makeColorField(t,i,n),t[1]!==i&&this.changedOptions.push({path:n,value:i})):typeof t[0]=="string"?(this._makeDropdown(t,i,n),t[0]!==i&&this.changedOptions.push({path:n,value:i})):typeof t[0]=="number"&&(this._makeRange(t,i,n),t[0]!==i&&this.changedOptions.push({path:n,value:Number(i)}))}},{key:"_update",value:function(t,i){var n=this._constructOptions(t,i);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}},{key:"_constructOptions",value:function(t,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n;t=t==="true"?!0:t,t=t==="false"?!1:t;for(var o=0;o<i.length;o++)i[o]!=="global"&&(a[i[o]]===void 0&&(a[i[o]]={}),o!==i.length-1?a=a[i[o]]:a[i[o]]=t);return n}},{key:"_printOptions",value:function(){var t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+hr(t,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var t={},i=0;i<this.changedOptions.length;i++)this._constructOptions(this.changedOptions[i].value,this.changedOptions[i].path,t);return t}}]),e}();function A4(e){var r=M4();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=z(i,arguments,a)}else n=i.apply(this,arguments);return sr(this,n)}}function M4(){if(typeof Reflect=="undefined"||!z||z.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z(Boolean,[],function(){})),!0}catch(e){return!1}}var o6=function(e){or(t,e);var r=A4(t);function t(i,n,a,o){var s,l,u,h,f,c,d,v;if(Ct(this,t),v=r.call(this),v.initTime=new Date,v.itemsDone=!1,!(Ce(v)instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!(ct(a)||Bi("id",a))&&a instanceof Object){var m=o;o=a,a=m}o&&o.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var p=Ce(v);if(v.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:Ke},v.options=b.deepExtend({},v.defaultOptions),o&&b.setupXSSProtection(o.xss),v._create(i),!o||o&&typeof o.rtl=="undefined"){v.dom.root.style.visibility="hidden";for(var g,_=v.dom.root;!g&&_;)g=window.getComputedStyle(_,null).direction,_=_.parentElement;v.options.rtl=g&&g.toLowerCase()=="rtl"}else v.options.rtl=o.rtl;o&&(o.rollingMode&&(v.options.rollingMode=o.rollingMode),o.onInitialDrawComplete&&(v.options.onInitialDrawComplete=o.onInitialDrawComplete),o.onTimeout&&(v.options.onTimeout=o.onTimeout),o.loadingScreenTemplate&&(v.options.loadingScreenTemplate=o.loadingScreenTemplate));var y=document.createElement("div");if(v.options.loadingScreenTemplate){var w,T=D(w=v.options.loadingScreenTemplate).call(w,Ce(v)),S=T(v.dom.loadingScreen);S instanceof Object&&!(S instanceof Element)?T(y):S instanceof Element?(y.innerHTML="",y.appendChild(S)):S!=null&&(y.innerHTML=b.xss(S))}v.dom.loadingScreen.appendChild(y),v.components=[],v.body={dom:v.dom,domProps:v.props,emitter:{on:D(s=v.on).call(s,Ce(v)),off:D(l=v.off).call(l,Ce(v)),emit:D(u=v.emit).call(u,Ce(v))},hiddenDates:[],util:{getScale:function(){return p.timeAxis.step.scale},getStep:function(){return p.timeAxis.step.step},toScreen:D(h=p._toScreen).call(h,p),toGlobalScreen:D(f=p._toGlobalScreen).call(f,p),toTime:D(c=p._toTime).call(c,p),toGlobalTime:D(d=p._toGlobalTime).call(d,p)}},v.range=new CS(v.body,v.options),v.components.push(v.range),v.body.range=v.range,v.timeAxis=new Tc(v.body,v.options),v.timeAxis2=null,v.components.push(v.timeAxis),v.currentTime=new GS(v.body,v.options),v.components.push(v.currentTime),v.itemSet=new Cc(v.body,v.options),v.components.push(v.itemSet),v.itemsData=null,v.groupsData=null;function x(E,I){!p.hasListeners(E)||p.emit(E,p.getEventProperties(I))}return v.dom.root.onclick=function(E){x("click",E)},v.dom.root.ondblclick=function(E){x("doubleClick",E)},v.dom.root.oncontextmenu=function(E){x("contextmenu",E)},v.dom.root.onmouseover=function(E){x("mouseOver",E)},window.PointerEvent?(v.dom.root.onpointerdown=function(E){x("mouseDown",E)},v.dom.root.onpointermove=function(E){x("mouseMove",E)},v.dom.root.onpointerup=function(E){x("mouseUp",E)}):(v.dom.root.onmousemove=function(E){x("mouseMove",E)},v.dom.root.onmousedown=function(E){x("mouseDown",E)},v.dom.root.onmouseup=function(E){x("mouseUp",E)}),v.initialFitDone=!1,v.on("changed",function(){if(p.itemsData!=null){if(!p.initialFitDone&&!p.options.rollingMode)if(p.initialFitDone=!0,p.options.start!=null||p.options.end!=null){if(p.options.start==null||p.options.end==null)var E=p.getItemRange();var I=p.options.start!=null?p.options.start:E.min,A=p.options.end!=null?p.options.end:E.max;p.setWindow(I,A,{animation:!1})}else p.fit({animation:!1});!p.initialDrawDone&&(p.initialRangeChangeDone||!p.options.start&&!p.options.end||p.options.rollingMode)&&(p.initialDrawDone=!0,p.itemSet.initialDrawDone=!0,p.dom.root.style.visibility="visible",p.dom.loadingScreen.parentNode.removeChild(p.dom.loadingScreen),p.options.onInitialDrawComplete&&Re(function(){return p.options.onInitialDrawComplete()},0))}}),v.on("destroyTimeline",function(){p.destroy()}),o&&v.setOptions(o),v.body.emitter.on("fit",function(E){v._onFit(E),v.redraw()}),a&&v.setGroups(a),n&&v.setItems(n),v._redraw(),v}return Ot(t,[{key:"_createConfigurator",value:function(){return new cx(this,this.dom.container,k4)}},{key:"redraw",value:function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()}},{key:"setOptions",value:function(n){var a=ux.validate(n,P4);if(a===!0&&console.log("%cErrors have been found in the supplied options object.",Oc),Ss.prototype.setOptions.call(this,n),"type"in n&&n.type!==this.options.type){this.options.type=n.type;var o=this.itemsData;if(o){var s=this.getSelection();this.setItems(null),this.setItems(o.rawDS),this.setSelection(s)}}}},{key:"setItems",value:function(n){this.itemsDone=!1;var a;n?Bi("id",n)?a=bs(n):a=bs(new Bo(n)):a=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=a,this.itemSet&&this.itemSet.setItems(a!=null?a.rawDS:null)}},{key:"setGroups",value:function(n){var a,o=function(l){return l.visible!==!1};n?(ct(n)&&(n=new Bo(n)),a=new G$(n,{filter:o})):a=null,this.groupsData!=null&&typeof this.groupsData.setData=="function"&&this.groupsData.setData(null),this.groupsData=a,this.itemSet.setGroups(a)}},{key:"setData",value:function(n){n&&n.groups&&this.setGroups(n.groups),n&&n.items&&this.setItems(n.items)}},{key:"setSelection",value:function(n,a){this.itemSet&&this.itemSet.setSelection(n),a&&a.focus&&this.focus(n,a)}},{key:"getSelection",value:function(){return this.itemSet&&this.itemSet.getSelection()||[]}},{key:"focus",value:function(n,a){if(!(!this.itemsData||n==null)){var o=ct(n)?n:[n],s=this.itemsData.get(o),l=null,u=null;if(G(s).call(s,function(T){var S=T.start.valueOf(),x="end"in T?T.end.valueOf():T.start.valueOf();(l===null||S<l)&&(l=S),(u===null||x>u)&&(u=x)}),l!==null&&u!==null){var h=this,f=this.itemSet.items[o[0]],c=this._getScrollTop()*-1,d=null,v=function(S,x,E){var I=dx(h,f);if(I!==!1&&(d||(d=I),!(d.itemTop==I.itemTop&&!d.shouldScroll))){d.itemTop!=I.itemTop&&I.shouldScroll&&(d=I,c=h._getScrollTop()*-1);var A=c,P=d.scrollOffset,R=E?P:A+(P-A)*S;h._setScrollTop(-R),x||h._redraw()}},m=function(){var S=dx(h,f);S.shouldScroll&&S.itemTop!=d.itemTop&&(h._setScrollTop(-S.scrollOffset),h._redraw())},p=function(){m(),Re(m,100)},g=a&&a.zoom!==void 0?a.zoom:!0,_=(l+u)/2,y=g?(u-l)*1.1:Math.max(this.range.end-this.range.start,(u-l)*1.1),w=a&&a.animation!==void 0?a.animation:!0;w||(d={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.setRange(_-y/2,_+y/2,{animation:w},p,v)}}}},{key:"fit",value:function(n,a){var o=n&&n.animation!==void 0?n.animation:!0,s;this.itemsData.length===1&&this.itemsData.get()[0].end===void 0?(s=this.getDataRange(),this.moveTo(s.min.valueOf(),{animation:o},a)):(s=this.getItemRange(),this.range.setRange(s.min,s.max,{animation:o},a))}},{key:"getItemRange",value:function(){var n=this,a=this.getDataRange(),o=a.min!==null?a.min.valueOf():null,s=a.max!==null?a.max.valueOf():null,l=null,u=null;if(o!=null&&s!=null){var h=s-o;h<=0&&(h=10);var f=h/this.props.center.width,c={},d=0;G(b).call(b,this.itemSet.items,function(w,T){if(w.groupShowing){var S=!0;c[T]=w.redraw(S),d=c[T].length}});var v=d>0;if(v)for(var m=function(T){G(b).call(b,c,function(S){S[T]()})},p=0;p<d;p++)m(p);if(G(b).call(b,this.itemSet.items,function(w){var T=xm(w),S=Cm(w),x,E;n.options.rtl?(x=T-(w.getWidthRight()+10)*f,E=S+(w.getWidthLeft()+10)*f):(x=T-(w.getWidthLeft()+10)*f,E=S+(w.getWidthRight()+10)*f),x<o&&(o=x,l=w),E>s&&(s=E,u=w)}),l&&u){var g=l.getWidthLeft()+10,_=u.getWidthRight()+10,y=this.props.center.width-g-_;y>0&&(this.options.rtl?(o=xm(l)-_*h/y,s=Cm(u)+g*h/y):(o=xm(l)-g*h/y,s=Cm(u)+_*h/y))}}return{min:o!=null?new Date(o):null,max:s!=null?new Date(s):null}}},{key:"getDataRange",value:function(){var n=null,a=null;if(this.itemsData){var o;G(o=this.itemsData).call(o,function(s){var l=b.convert(s.start,"Date").valueOf(),u=b.convert(s.end!=null?s.end:s.start,"Date").valueOf();(n===null||l<n)&&(n=l),(a===null||u>a)&&(a=u)})}return{min:n!=null?new Date(n):null,max:a!=null?new Date(a):null}}},{key:"getEventProperties",value:function(n){var a=n.center?n.center.x:n.clientX,o=n.center?n.center.y:n.clientY,s=this.dom.centerContainer.getBoundingClientRect(),l=this.options.rtl?s.right-a:a-s.left,u=o-s.top,h=this.itemSet.itemFromTarget(n),f=this.itemSet.groupFromTarget(n),c=Tm.customTimeFromTarget(n),d=this.itemSet.options.snap||null,v=this.body.util.getScale(),m=this.body.util.getStep(),p=this._toTime(l),g=d?d(p,v,m):p,_=b.getTarget(n),y=null;return h!=null?y="item":c!=null?y="custom-time":b.hasParent(_,this.timeAxis.dom.foreground)||this.timeAxis2&&b.hasParent(_,this.timeAxis2.dom.foreground)?y="axis":b.hasParent(_,this.itemSet.dom.labelSet)?y="group-label":b.hasParent(_,this.currentTime.bar)?y="current-time":b.hasParent(_,this.dom.center)&&(y="background"),{event:n,item:h?h.id:null,isCluster:h?!!h.isCluster:!1,items:h?h.items||[]:null,group:f?f.groupId:null,customTime:c?c.options.id:null,what:y,pageX:n.srcEvent?n.srcEvent.pageX:n.pageX,pageY:n.srcEvent?n.srcEvent.pageY:n.pageY,x:l,y:u,time:p,snappedTime:g}}},{key:"toggleRollingMode",value:function(){this.range.rolling?this.range.stopRolling():(this.options.rollingMode==null&&this.setOptions(this.options),this.range.startRolling())}},{key:"_redraw",value:function(){Ss.prototype._redraw.call(this)}},{key:"_onFit",value:function(n){var a=n.start,o=n.end,s=n.animation;o?this.range.setRange(a,o,{animation:s}):this.moveTo(a.valueOf(),{animation:s})}}]),t}(Ss);function xm(e){return b.convert(e.data.start,"Date").valueOf()}function Cm(e){var r=e.data.end!=null?e.data.end:e.data.start;return b.convert(r,"Date").valueOf()}function dx(e,r){if(!r.parent)return!1;var t=e.options.rtl?e.props.rightContainer.height:e.props.leftContainer.height,i=e.props.center.height,n=r.parent,a=n.top,o=!0,s=e.timeAxis.options.orientation.axis,l=function(){return s=="bottom"?n.height-r.top-r.height:r.top},u=e._getScrollTop()*-1,h=a+l(),f=r.height;return h<u?a+t<=a+l()+f&&(a+=l()-e.itemSet.options.margin.item.vertical):h+f>u+t?a+=l()+f-t+e.itemSet.options.margin.item.vertical:o=!1,a=Math.min(a,i-t),{shouldScroll:o,scrollOffset:a,itemTop:h}}function zn(e){for(var r in e)e.hasOwnProperty(r)&&(e[r].redundant=e[r].used,e[r].used=[])}function Rr(e){for(var r in e)if(e.hasOwnProperty(r)&&e[r].redundant){for(var t=0;t<e[r].redundant.length;t++)e[r].redundant[t].parentNode.removeChild(e[r].redundant[t]);e[r].redundant=[]}}function L4(e){zn(e),Rr(e),zn(e)}function Kr(e,r,t){var i;return r.hasOwnProperty(e)?r[e].redundant.length>0?(i=r[e].redundant[0],r[e].redundant.shift()):(i=document.createElementNS("http://www.w3.org/2000/svg",e),t.appendChild(i)):(i=document.createElementNS("http://www.w3.org/2000/svg",e),r[e]={used:[],redundant:[]},t.appendChild(i)),r[e].used.push(i),i}function Om(e,r,t,i){var n;return r.hasOwnProperty(e)?r[e].redundant.length>0?(n=r[e].redundant[0],r[e].redundant.shift()):(n=document.createElement(e),i!==void 0?t.insertBefore(n,i):t.appendChild(n)):(n=document.createElement(e),r[e]={used:[],redundant:[]},i!==void 0?t.insertBefore(n,i):t.appendChild(n)),r[e].used.push(n),n}function Ps(e,r,t,i,n,a){var o;if(t.style=="circle"?(o=Kr("circle",i,n),o.setAttributeNS(null,"cx",e),o.setAttributeNS(null,"cy",r),o.setAttributeNS(null,"r",.5*t.size)):(o=Kr("rect",i,n),o.setAttributeNS(null,"x",e-.5*t.size),o.setAttributeNS(null,"y",r-.5*t.size),o.setAttributeNS(null,"width",t.size),o.setAttributeNS(null,"height",t.size)),t.styles!==void 0&&o.setAttributeNS(null,"style",t.styles),o.setAttributeNS(null,"class",t.className+" vis-point"),a){var s=Kr("text",i,n);a.xOffset&&(e=e+a.xOffset),a.yOffset&&(r=r+a.yOffset),a.content&&(s.textContent=a.content),a.className&&s.setAttributeNS(null,"class",a.className+" vis-label"),s.setAttributeNS(null,"x",e),s.setAttributeNS(null,"y",r)}return o}function Im(e,r,t,i,n,a,o,s){if(i!=0){i<0&&(i*=-1,r-=i);var l=Kr("rect",a,o);l.setAttributeNS(null,"x",e-.5*t),l.setAttributeNS(null,"y",r),l.setAttributeNS(null,"width",t),l.setAttributeNS(null,"height",i),l.setAttributeNS(null,"class",n),s&&l.setAttributeNS(null,"style",s)}}function F4(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch(e){return"en"}}var N4=function(){function e(r,t,i,n,a,o){var s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;if(Ct(this,e),this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=a,this.majorCharHeight=o,this._start=r,this._end=t,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=s,this.autoScaleStart=i,this.autoScaleEnd=n,this.formattingFunction=l,i||n){var u=this,h=function(c){var d=c-c%(u.magnitudefactor*u.minorSteps[u.minorStepIdx]);return c%(u.magnitudefactor*u.minorSteps[u.minorStepIdx])>.5*(u.magnitudefactor*u.minorSteps[u.minorStepIdx])?d+u.magnitudefactor*u.minorSteps[u.minorStepIdx]:d};i&&(this._start-=this.magnitudefactor*2*this.minorSteps[this.minorStepIdx],this._start=h(this._start)),n&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=h(this._end)),this.determineScale()}}return Ot(e,[{key:"setCharHeight",value:function(t){this.majorCharHeight=t}},{key:"setHeight",value:function(t){this.containerHeight=t}},{key:"determineScale",value:function(){var t=this._end-this._start;this.scale=this.containerHeight/t;var i=this.majorCharHeight/this.scale,n=t>0?Math.round(Math.log(t)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,n);var a=0;n<0&&(a=n);for(var o=!1,s=a;Math.abs(s)<=Math.abs(n);s++){this.magnitudefactor=Math.pow(10,s);for(var l=0;l<this.minorSteps.length;l++){var u=this.magnitudefactor*this.minorSteps[l];if(u>=i){o=!0,this.minorStepIdx=l;break}}if(o===!0)break}}},{key:"is_major",value:function(t){return t%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])==0}},{key:"getStep",value:function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}},{key:"getFirstMajor",value:function(){var t=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(t-this._start%t)%t)}},{key:"formatValue",value:function(t){var i=t.toPrecision(5);return typeof this.formattingFunction=="function"&&(i=this.formattingFunction(t)),typeof i=="number"?"".concat(i):typeof i=="string"?i:t.toPrecision(5)}},{key:"getLines",value:function(){for(var t=[],i=this.getStep(),n=(i-this._start%i)%i,a=this._start+n;this._end-a>1e-5;a+=i)a!=this._start&&t.push({major:this.is_major(a),y:this.convertValue(a),val:this.formatValue(a)});return t}},{key:"followScale",value:function(t){var i=this.minorStepIdx,n=this._start,a=this._end,o=this,s=function(){o.magnitudefactor*=2},l=function(){o.magnitudefactor/=2};t.minorStepIdx<=1&&this.minorStepIdx<=1||t.minorStepIdx>1&&this.minorStepIdx>1||(t.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,i==2||s(),s()):(this.minorStepIdx=2,i==1||l(),l()));for(var u=t.convertValue(0),h=t.getStep()*t.scale,f=!1,c=0;!f&&c++<5;){this.scale=h/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var d=this.containerHeight/this.scale;this._start=n,this._end=this._start+d;var v=this._end*this.scale,m=this.magnitudefactor*this.majorSteps[this.minorStepIdx],p=this.getFirstMajor()-t.getFirstMajor();if(this.zeroAlign){var g=u-v;this._end+=g/this.scale,this._start=this._end-d}else this.autoScaleStart?(this._start-=p/this.scale,this._end=this._start+d):(this._start+=m-p/this.scale,this._end=this._start+d);if(!this.autoScaleEnd&&this._end>a+1e-5){l(),f=!1;continue}if(!this.autoScaleStart&&this._start<n-1e-5)if(this.zeroAlign&&n>=0)console.warn("Can't adhere to given 'min' range, due to zeroalign");else{l(),f=!1;continue}if(this.autoScaleStart&&this.autoScaleEnd&&d<a-n){s(),f=!1;continue}f=!0}}},{key:"convertValue",value:function(t){return this.containerHeight-(t-this._start)*this.scale}},{key:"screenToValue",value:function(t){return(this.containerHeight-t)/this.scale+this._start}}]),e}();function $4(e,r){var t=typeof za!="undefined"&&Yn(e)||e["@@iterator"];if(!t){if(ct(e)||(t=G4(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function G4(e,r){var t;if(!!e){if(typeof e=="string")return vx(e,r);var i=Or(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return ls(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return vx(e,r)}}function vx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function Y4(e){var r=j4();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=z(i,arguments,a)}else n=i.apply(this,arguments);return sr(this,n)}}function j4(){if(typeof Reflect=="undefined"||!z||z.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z(Boolean,[],function(){})),!0}catch(e){return!1}}var px=function(e){or(t,e);var r=Y4(t);function t(i,n,a,o){var s;Ct(this,t),s=r.call(this),s.id=ws(),s.body=i,s.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(h){return"".concat(mc(h.toPrecision(3)))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:function(h){return"".concat(mc(h.toPrecision(3)))},title:{text:void 0,style:void 0}}},s.linegraphOptions=o,s.linegraphSVG=a,s.props={},s.DOMelements={lines:{},labels:{},title:{}},s.dom={},s.scale=void 0,s.range={start:0,end:0},s.options=b.extend({},s.defaultOptions),s.conversionFactor=1,s.setOptions(n),s.width=Number("".concat(s.options.width).replace("px","")),s.minWidth=s.width,s.height=s.linegraphSVG.getBoundingClientRect().height,s.hidden=!1,s.stepPixels=25,s.zeroCrossing=-1,s.amountOfSteps=-1,s.lineOffset=0,s.master=!0,s.masterAxis=null,s.svgElements={},s.iconsRemoved=!1,s.groups={},s.amountOfGroups=0,s._create(),s.scale==null&&s._redrawLabels(),s.framework={svg:s.svg,svgElements:s.svgElements,options:s.options,groups:s.groups};var l=Ce(s);return s.body.emitter.on("verticalDrag",function(){l.dom.lineContainer.style.top="".concat(l.body.domProps.scrollTop,"px")}),s}return Ot(t,[{key:"addGroup",value:function(n,a){this.groups.hasOwnProperty(n)||(this.groups[n]=a),this.amountOfGroups+=1}},{key:"updateGroup",value:function(n,a){this.groups.hasOwnProperty(n)||(this.amountOfGroups+=1),this.groups[n]=a}},{key:"removeGroup",value:function(n){this.groups.hasOwnProperty(n)&&(delete this.groups[n],this.amountOfGroups-=1)}},{key:"setOptions",value:function(n){if(n){var a=!1;this.options.orientation!=n.orientation&&n.orientation!==void 0&&(a=!0);var o=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];b.selectiveDeepExtend(o,this.options,n),this.minWidth=Number("".concat(this.options.width).replace("px","")),a===!0&&this.dom.frame&&(this.hide(),this.show())}}},{key:"_create",value:function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}},{key:"_redrawGroupIcons",value:function(){zn(this.svgElements);var n,a=this.options.iconWidth,o=15,s=4,l=s+.5*o;this.options.orientation==="left"?n=s:n=this.width-a-s;var u=pe(this.groups);Ie(u).call(u,function(d,v){return d<v?-1:1});var h=$4(u),f;try{for(h.s();!(f=h.n()).done;){var c=f.value;this.groups[c].visible===!0&&(this.linegraphOptions.visibility[c]===void 0||this.linegraphOptions.visibility[c]===!0)&&(this.groups[c].getLegend(a,o,this.framework,n,l),l+=o+s)}}catch(d){h.e(d)}finally{h.f()}Rr(this.svgElements),this.iconsRemoved=!1}},{key:"_cleanupIcons",value:function(){this.iconsRemoved===!1&&(zn(this.svgElements),Rr(this.svgElements),this.iconsRemoved=!0)}},{key:"show",value:function(){this.hidden=!1,this.dom.frame.parentNode||(this.options.orientation==="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}},{key:"hide",value:function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}},{key:"setRange",value:function(n,a){this.range.start=n,this.range.end=a}},{key:"redraw",value:function(){var n=!1,a=0;this.dom.lineContainer.style.top="".concat(this.body.domProps.scrollTop,"px");for(var o in this.groups)this.groups.hasOwnProperty(o)&&this.groups[o].visible===!0&&(this.linegraphOptions.visibility[o]===void 0||this.linegraphOptions.visibility[o]===!0)&&a++;if(this.amountOfGroups===0||a===0)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height="".concat(this.height,"px"),this.width=this.options.visible===!0?Number("".concat(this.options.width).replace("px","")):0;var s=this.props,l=this.dom.frame;l.className="vis-data-axis",this._calculateCharSize();var u=this.options.orientation,h=this.options.showMinorLabels,f=this.options.showMajorLabels,c=this.body.dom.backgroundHorizontal.offsetWidth;s.minorLabelHeight=h?s.minorCharHeight:0,s.majorLabelHeight=f?s.majorCharHeight:0,s.minorLineWidth=c-this.lineOffset-this.width+2*this.options.minorLinesOffset,s.minorLineHeight=1,s.majorLineWidth=c-this.lineOffset-this.width+2*this.options.majorLinesOffset,s.majorLineHeight=1,u==="left"?(l.style.top="0",l.style.left="0",l.style.bottom="",l.style.width="".concat(this.width,"px"),l.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(l.style.top="",l.style.bottom="0",l.style.left="0",l.style.width="".concat(this.width,"px"),l.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),n=this._redrawLabels(),n=this._isResized()||n,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(u)}return n}},{key:"_redrawLabels",value:function(){var n=this,a=!1;zn(this.DOMelements.lines),zn(this.DOMelements.labels);var o=this.options.orientation,s=this.options[o].range!=null?this.options[o].range:{},l=!0;s.max!=null&&(this.range.end=s.max,l=!1);var u=!0;s.min!=null&&(this.range.start=s.min,u=!1),this.scale=new N4(this.range.start,this.range.end,u,l,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[o].format),this.master===!1&&this.masterAxis!=null?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0;var h=this.scale.getLines();G(h).call(h,function(d){var v=d.y,m=d.major;n.options.showMinorLabels&&m===!1&&n._redrawLabel(v-2,d.val,o,"vis-y-axis vis-minor",n.props.minorCharHeight),m&&v>=0&&n._redrawLabel(v-2,d.val,o,"vis-y-axis vis-major",n.props.majorCharHeight),n.master===!0&&(m?n._redrawLine(v,o,"vis-grid vis-horizontal vis-major",n.options.majorLinesOffset,n.props.majorLineWidth):n._redrawLine(v,o,"vis-grid vis-horizontal vis-minor",n.options.minorLinesOffset,n.props.minorLineWidth))});var f=0;this.options[o].title!==void 0&&this.options[o].title.text!==void 0&&(f=this.props.titleCharHeight);var c=this.options.icons===!0?Math.max(this.options.iconWidth,f)+this.options.labelOffsetX+15:f+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-c&&this.options.visible===!0?(this.width=this.maxLabelSize+c,this.options.width="".concat(this.width,"px"),Rr(this.DOMelements.lines),Rr(this.DOMelements.labels),this.redraw(),a=!0):this.maxLabelSize<this.width-c&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+c),this.options.width="".concat(this.width,"px"),Rr(this.DOMelements.lines),Rr(this.DOMelements.labels),this.redraw(),a=!0):(Rr(this.DOMelements.lines),Rr(this.DOMelements.labels),a=!1),a}},{key:"convertValue",value:function(n){return this.scale.convertValue(n)}},{key:"screenToValue",value:function(n){return this.scale.screenToValue(n)}},{key:"_redrawLabel",value:function(n,a,o,s,l){var u=Om("div",this.DOMelements.labels,this.dom.frame);u.className=s,u.innerHTML=b.xss(a),o==="left"?(u.style.left="-".concat(this.options.labelOffsetX,"px"),u.style.textAlign="right"):(u.style.right="-".concat(this.options.labelOffsetX,"px"),u.style.textAlign="left"),u.style.top="".concat(n-.5*l+this.options.labelOffsetY,"px"),a+="";var h=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<a.length*h&&(this.maxLabelSize=a.length*h)}},{key:"_redrawLine",value:function(n,a,o,s,l){if(this.master===!0){var u=Om("div",this.DOMelements.lines,this.dom.lineContainer);u.className=o,u.innerHTML="",a==="left"?u.style.left="".concat(this.width-s,"px"):u.style.right="".concat(this.width-s,"px"),u.style.width="".concat(l,"px"),u.style.top="".concat(n,"px")}}},{key:"_redrawTitle",value:function(n){if(zn(this.DOMelements.title),this.options[n].title!==void 0&&this.options[n].title.text!==void 0){var a=Om("div",this.DOMelements.title,this.dom.frame);a.className="vis-y-axis vis-title vis-".concat(n),a.innerHTML=b.xss(this.options[n].title.text),this.options[n].title.style!==void 0&&b.addCssText(a,this.options[n].title.style),n==="left"?a.style.left="".concat(this.props.titleCharHeight,"px"):a.style.right="".concat(this.props.titleCharHeight,"px"),a.style.width="".concat(this.height,"px")}Rr(this.DOMelements.title)}},{key:"_calculateCharSize",value:function(){if(!("minorCharHeight"in this.props)){var n=document.createTextNode("0"),a=document.createElement("div");a.className="vis-y-axis vis-minor vis-measure",a.appendChild(n),this.dom.frame.appendChild(a),this.props.minorCharHeight=a.clientHeight,this.props.minorCharWidth=a.clientWidth,this.dom.frame.removeChild(a)}if(!("majorCharHeight"in this.props)){var o=document.createTextNode("0"),s=document.createElement("div");s.className="vis-y-axis vis-major vis-measure",s.appendChild(o),this.dom.frame.appendChild(s),this.props.majorCharHeight=s.clientHeight,this.props.majorCharWidth=s.clientWidth,this.dom.frame.removeChild(s)}if(!("titleCharHeight"in this.props)){var l=document.createTextNode("0"),u=document.createElement("div");u.className="vis-y-axis vis-title vis-measure",u.appendChild(l),this.dom.frame.appendChild(u),this.props.titleCharHeight=u.clientHeight,this.props.titleCharWidth=u.clientWidth,this.dom.frame.removeChild(u)}}}]),t}(Hn);function Au(e,r){}Au.draw=function(e,r,t,i){i=i||0;for(var n=W4(t,r),a=0;a<e.length;a++)if(!n)Ps(e[a].screen_x+i,e[a].screen_y,Pm(r),t.svgElements,t.svg,e[a].label);else{var o=n(e[a],r);(o===!0||at(o)==="object")&&Ps(e[a].screen_x+i,e[a].screen_y,Pm(r,o),t.svgElements,t.svg,e[a].label)}};Au.drawIcon=function(e,r,t,i,n,a){var o=n*.5,s=Kr("rect",a.svgElements,a.svg);s.setAttributeNS(null,"x",r),s.setAttributeNS(null,"y",t-o),s.setAttributeNS(null,"width",i),s.setAttributeNS(null,"height",2*o),s.setAttributeNS(null,"class","vis-outline"),Ps(r+.5*i,t,Pm(e),a.svgElements,a.svg)};function Pm(e,r){return r=typeof r=="undefined"?{}:r,{style:r.style||e.options.drawPoints.style,styles:r.styles||e.options.drawPoints.styles,size:r.size||e.options.drawPoints.size,className:r.className||e.className}}function W4(e,r){var t=void 0;return e.options&&e.options.drawPoints&&e.options.drawPoints.onRender&&typeof e.options.drawPoints.onRender=="function"&&(t=e.options.drawPoints.onRender),r.group.options&&r.group.options.drawPoints&&r.group.options.drawPoints.onRender&&typeof r.group.options.drawPoints.onRender=="function"&&(t=r.group.options.drawPoints.onRender),t}function Le(e,r){}Le.drawIcon=function(e,r,t,i,n,a){var o=n*.5,s=Kr("rect",a.svgElements,a.svg);s.setAttributeNS(null,"x",r),s.setAttributeNS(null,"y",t-o),s.setAttributeNS(null,"width",i),s.setAttributeNS(null,"height",2*o),s.setAttributeNS(null,"class","vis-outline");var l=Math.round(.3*i),u=e.options.barChart.width,h=u/l,f=Math.round(.4*n),c=Math.round(.75*n),d=Math.round((i-2*l)/3);if(Im(r+.5*l+d,t+o-f-1,l,f,e.className+" vis-bar",a.svgElements,a.svg,e.style),Im(r+1.5*l+d+2,t+o-c-1,l,c,e.className+" vis-bar",a.svgElements,a.svg,e.style),e.options.drawPoints.enabled==!0){var v={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size/h,className:e.className};Ps(r+.5*l+d,t+o-f-1,v,a.svgElements,a.svg),Ps(r+1.5*l+d+2,t+o-c-1,v,a.svgElements,a.svg)}};Le.draw=function(e,r,t){var i=[],n={},a,o,s,l,u,h,f=0;for(u=0;u<e.length;u++)if(l=t.groups[e[u]],l.options.style==="bar"&&l.visible===!0&&(t.options.groups.visibility[e[u]]===void 0||t.options.groups.visibility[e[u]]===!0))for(h=0;h<r[e[u]].length;h++)i.push({screen_x:r[e[u]][h].screen_x,screen_end:r[e[u]][h].screen_end,screen_y:r[e[u]][h].screen_y,x:r[e[u]][h].x,end:r[e[u]][h].end,y:r[e[u]][h].y,groupId:e[u],label:r[e[u]][h].label}),f+=1;if(f!==0)for(Ie(i).call(i,function(_,y){return _.screen_x===y.screen_x?_.groupId<y.groupId?-1:1:_.screen_x-y.screen_x}),Le._getDataIntersections(n,i),u=0;u<i.length;u++){l=t.groups[i[u].groupId];var c=l.options.barChart.minWidth!=null?l.options.barChart.minWidth:.1*l.options.barChart.width;o=i[u].screen_x;var d=0;if(n[o]===void 0)u+1<i.length&&(a=Math.abs(i[u+1].screen_x-o)),s=Le._getSafeDrawData(a,l,c);else{var v=u+(n[o].amount-n[o].resolved);v<i.length&&(a=Math.abs(i[v].screen_x-o)),s=Le._getSafeDrawData(a,l,c),n[o].resolved+=1,l.options.stack===!0&&l.options.excludeFromStacking!==!0?i[u].screen_y<l.zeroPosition?(d=n[o].accumulatedNegative,n[o].accumulatedNegative+=l.zeroPosition-i[u].screen_y):(d=n[o].accumulatedPositive,n[o].accumulatedPositive+=l.zeroPosition-i[u].screen_y):l.options.barChart.sideBySide===!0&&(s.width=s.width/n[o].amount,s.offset+=n[o].resolved*s.width-.5*s.width*(n[o].amount+1))}var m=s.width,p=i[u].screen_x;if(i[u].screen_end!=null?(m=i[u].screen_end-i[u].screen_x,p+=m*.5):p+=s.offset,Im(p,i[u].screen_y-d,m,l.zeroPosition-i[u].screen_y,l.className+" vis-bar",t.svgElements,t.svg,l.style),l.options.drawPoints.enabled===!0){var g={screen_x:i[u].screen_x,screen_y:i[u].screen_y-d,x:i[u].x,y:i[u].y,groupId:i[u].groupId,label:i[u].label};Au.draw([g],l,t,s.offset)}}};Le._getDataIntersections=function(e,r){for(var t,i=0;i<r.length;i++)i+1<r.length&&(t=Math.abs(r[i+1].screen_x-r[i].screen_x)),i>0&&(t=Math.min(t,Math.abs(r[i-1].screen_x-r[i].screen_x))),t===0&&(e[r[i].screen_x]===void 0&&(e[r[i].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),e[r[i].screen_x].amount+=1)};Le._getSafeDrawData=function(e,r,t){var i,n;return e<r.options.barChart.width&&e>0?(i=e<t?t:e,n=0,r.options.barChart.align==="left"?n-=.5*e:r.options.barChart.align==="right"&&(n+=.5*e)):(i=r.options.barChart.width,n=0,r.options.barChart.align==="left"?n-=.5*r.options.barChart.width:r.options.barChart.align==="right"&&(n+=.5*r.options.barChart.width)),{width:i,offset:n}};Le.getStackedYRange=function(e,r,t,i,n){if(e.length>0){Ie(e).call(e,function(o,s){return o.screen_x===s.screen_x?o.groupId<s.groupId?-1:1:o.screen_x-s.screen_x});var a={};Le._getDataIntersections(a,e),r[i]=Le._getStackedYRange(a,e),r[i].yAxisOrientation=n,t.push(i)}};Le._getStackedYRange=function(e,r){for(var t,i=r[0].screen_y,n=r[0].screen_y,a=0;a<r.length;a++)t=r[a].screen_x,e[t]===void 0?(i=i>r[a].screen_y?r[a].screen_y:i,n=n<r[a].screen_y?r[a].screen_y:n):r[a].screen_y<0?e[t].accumulatedNegative+=r[a].screen_y:e[t].accumulatedPositive+=r[a].screen_y;for(var o in e)e.hasOwnProperty(o)&&(i=i>e[o].accumulatedNegative?e[o].accumulatedNegative:i,i=i>e[o].accumulatedPositive?e[o].accumulatedPositive:i,n=n<e[o].accumulatedNegative?e[o].accumulatedNegative:n,n=n<e[o].accumulatedPositive?e[o].accumulatedPositive:n);return{min:i,max:n}};function ye(e,r){}ye.calcPath=function(e,r){if(e!=null&&e.length>0){var t=[];return r.options.interpolation.enabled==!0?t=ye._catmullRom(e,r):t=ye._linear(e),t}};ye.drawIcon=function(e,r,t,i,n,a){var o=n*.5,s,l,u=Kr("rect",a.svgElements,a.svg);if(u.setAttributeNS(null,"x",r),u.setAttributeNS(null,"y",t-o),u.setAttributeNS(null,"width",i),u.setAttributeNS(null,"height",2*o),u.setAttributeNS(null,"class","vis-outline"),s=Kr("path",a.svgElements,a.svg),s.setAttributeNS(null,"class",e.className),e.style!==void 0&&s.setAttributeNS(null,"style",e.style),s.setAttributeNS(null,"d","M"+r+","+t+" L"+(r+i)+","+t+""),e.options.shaded.enabled==!0&&(l=Kr("path",a.svgElements,a.svg),e.options.shaded.orientation=="top"?l.setAttributeNS(null,"d","M"+r+", "+(t-o)+"L"+r+","+t+" L"+(r+i)+","+t+" L"+(r+i)+","+(t-o)):l.setAttributeNS(null,"d","M"+r+","+t+" L"+r+","+(t+o)+" L"+(r+i)+","+(t+o)+"L"+(r+i)+","+t),l.setAttributeNS(null,"class",e.className+" vis-icon-fill"),e.options.shaded.style!==void 0&&e.options.shaded.style!==""&&l.setAttributeNS(null,"style",e.options.shaded.style)),e.options.drawPoints.enabled==!0){var h={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size,className:e.className};Ps(r+.5*i,t,h,a.svgElements,a.svg)}};ye.drawShading=function(e,r,t,i){if(r.options.shaded.enabled==!0){var n=Number(i.svg.style.height.replace("px","")),a=Kr("path",i.svgElements,i.svg),o="L";r.options.interpolation.enabled==!0&&(o="C");var s,l=0;r.options.shaded.orientation=="top"?l=0:r.options.shaded.orientation=="bottom"?l=n:l=Math.min(Math.max(0,r.zeroPosition),n),r.options.shaded.orientation=="group"&&t!=null&&t!=null?s="M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,o,!1)+" L"+t[t.length-1][0]+","+t[t.length-1][1]+" "+this.serializePath(t,o,!0)+t[0][0]+","+t[0][1]+" Z":s="M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,o,!1)+" V"+l+" H"+e[0][0]+" Z",a.setAttributeNS(null,"class",r.className+" vis-fill"),r.options.shaded.style!==void 0&&a.setAttributeNS(null,"style",r.options.shaded.style),a.setAttributeNS(null,"d",s)}};ye.draw=function(e,r,t){if(e!=null&&e!=null){var i=Kr("path",t.svgElements,t.svg);i.setAttributeNS(null,"class",r.className),r.style!==void 0&&i.setAttributeNS(null,"style",r.style);var n="L";r.options.interpolation.enabled==!0&&(n="C"),i.setAttributeNS(null,"d","M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,n,!1))}};ye.serializePath=function(e,r,t){if(e.length<2)return"";var i=r,n;if(t)for(n=e.length-2;n>0;n--)i+=e[n][0]+","+e[n][1]+" ";else for(n=1;n<e.length;n++)i+=e[n][0]+","+e[n][1]+" ";return i};ye._catmullRomUniform=function(e){var r,t,i,n,a,o,s=[];s.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);for(var l=1/6,u=e.length,h=0;h<u-1;h++)r=h==0?e[0]:e[h-1],t=e[h],i=e[h+1],n=h+2<u?e[h+2]:i,a={screen_x:(-r.screen_x+6*t.screen_x+i.screen_x)*l,screen_y:(-r.screen_y+6*t.screen_y+i.screen_y)*l},o={screen_x:(t.screen_x+6*i.screen_x-n.screen_x)*l,screen_y:(t.screen_y+6*i.screen_y-n.screen_y)*l},s.push([a.screen_x,a.screen_y]),s.push([o.screen_x,o.screen_y]),s.push([i.screen_x,i.screen_y]);return s};ye._catmullRom=function(e,r){var t=r.options.interpolation.alpha;if(t==0||t===void 0)return this._catmullRomUniform(e);var i,n,a,o,s,l,u,h,f,c,d,v,m,p,g,_,y,w,T,S=[];S.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);for(var x=e.length,E=0;E<x-1;E++)i=E==0?e[0]:e[E-1],n=e[E],a=e[E+1],o=E+2<x?e[E+2]:a,u=Math.sqrt(Math.pow(i.screen_x-n.screen_x,2)+Math.pow(i.screen_y-n.screen_y,2)),h=Math.sqrt(Math.pow(n.screen_x-a.screen_x,2)+Math.pow(n.screen_y-a.screen_y,2)),f=Math.sqrt(Math.pow(a.screen_x-o.screen_x,2)+Math.pow(a.screen_y-o.screen_y,2)),p=Math.pow(f,t),_=Math.pow(f,2*t),g=Math.pow(h,t),y=Math.pow(h,2*t),T=Math.pow(u,t),w=Math.pow(u,2*t),c=2*w+3*T*g+y,d=2*_+3*p*g+y,v=3*T*(T+g),v>0&&(v=1/v),m=3*p*(p+g),m>0&&(m=1/m),s={screen_x:(-y*i.screen_x+c*n.screen_x+w*a.screen_x)*v,screen_y:(-y*i.screen_y+c*n.screen_y+w*a.screen_y)*v},l={screen_x:(_*n.screen_x+d*a.screen_x-y*o.screen_x)*m,screen_y:(_*n.screen_y+d*a.screen_y-y*o.screen_y)*m},s.screen_x==0&&s.screen_y==0&&(s=n),l.screen_x==0&&l.screen_y==0&&(l=a),S.push([s.screen_x,s.screen_y]),S.push([l.screen_x,l.screen_y]),S.push([a.screen_x,a.screen_y]);return S};ye._linear=function(e){for(var r=[],t=0;t<e.length;t++)r.push([e[t].screen_x,e[t].screen_y]);return r};function Vn(e,r,t,i){this.id=r;var n=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=b.selectiveBridgeObject(n,t),this.usingDefaultStyle=e.className===void 0,this.groupsUsingDefaultStyles=i,this.zeroPosition=0,this.update(e),this.usingDefaultStyle==!0&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=e.visible===void 0?!0:e.visible}Vn.prototype.setItems=function(e){e!=null?(this.itemsData=e,Ie(this.options)==!0&&b.insertSort(this.itemsData,function(r,t){return r.x>t.x?1:-1})):this.itemsData=[]};Vn.prototype.getItems=function(){return this.itemsData};Vn.prototype.setZeroPosition=function(e){this.zeroPosition=e};Vn.prototype.setOptions=function(e){if(e!==void 0){var r=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];b.selectiveDeepExtend(r,this.options,e),typeof e.drawPoints=="function"&&(e.drawPoints={onRender:e.drawPoints}),b.mergeOptions(this.options,e,"interpolation"),b.mergeOptions(this.options,e,"drawPoints"),b.mergeOptions(this.options,e,"shaded"),e.interpolation&&at(e.interpolation)=="object"&&e.interpolation.parametrization&&(e.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:e.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}};Vn.prototype.update=function(e){this.group=e,this.content=e.content||"graph",this.className=e.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=e.visible===void 0?!0:e.visible,this.style=e.style,this.setOptions(e.options)};Vn.prototype.getLegend=function(e,r,t,i,n){if(t==null||t==null){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");t={svg:a,svgElements:{},options:this.options,groups:[this]}}switch((i==null||i==null)&&(i=0),(n==null||n==null)&&(n=.5*r),this.options.style){case"line":ye.drawIcon(this,i,n,e,r,t);break;case"points":case"point":Au.drawIcon(this,i,n,e,r,t);break;case"bar":Le.drawIcon(this,i,n,e,r,t);break}return{icon:t.svg,label:this.content,orientation:this.options.yAxisOrientation}};Vn.prototype.getYRange=function(e){for(var r=e[0].y,t=e[0].y,i=0;i<e.length;i++)r=r>e[i].y?e[i].y:r,t=t<e[i].y?e[i].y:t;return{min:r,max:t,yAxisOrientation:this.options.yAxisOrientation}};function dr(e,r,t,i){this.body=e,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=t,this.options=b.extend({},this.defaultOptions),this.linegraphOptions=i,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(r)}dr.prototype=new Hn;dr.prototype.clear=function(){this.groups={},this.amountOfGroups=0};dr.prototype.addGroup=function(e,r){r.options.excludeFromLegend!=!0&&(this.groups.hasOwnProperty(e)||(this.groups[e]=r),this.amountOfGroups+=1)};dr.prototype.updateGroup=function(e,r){this.groups[e]=r};dr.prototype.removeGroup=function(e){this.groups.hasOwnProperty(e)&&(delete this.groups[e],this.amountOfGroups-=1)};dr.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top=0+"px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)};dr.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};dr.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};dr.prototype.setOptions=function(e){var r=["enabled","orientation","icons","left","right"];b.selectiveDeepExtend(r,this.options,e)};dr.prototype.redraw=function(){var e=0,r=pe(this.groups);Ie(r).call(r,function(o,s){return o<s?-1:1});for(var t=0;t<r.length;t++){var i=r[t];this.groups[i].visible==!0&&(this.linegraphOptions.visibility[i]===void 0||this.linegraphOptions.visibility[i]==!0)&&e++}if(this.options[this.side].visible==!1||this.amountOfGroups==0||this.options.enabled==!1||e==0)this.hide();else{if(this.show(),this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left=0+"px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right=0+"px",this.svg.style.left=""),this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right")this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var n=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+n+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}this.options.icons==!1?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var a="";for(t=0;t<r.length;t++)i=r[t],this.groups[i].visible==!0&&(this.linegraphOptions.visibility[i]===void 0||this.linegraphOptions.visibility[i]==!0)&&(a+=this.groups[i].content+"<br />");this.dom.textArea.innerHTML=b.xss(a),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};dr.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var e=pe(this.groups);Ie(e).call(e,function(u,h){return u<h?-1:1}),L4(this.svgElements);var r=window.getComputedStyle(this.dom.frame).paddingTop,t=Number(r.replace("px","")),i=t,n=this.options.iconSize,a=.75*this.options.iconSize,o=t+.5*a+3;this.svg.style.width=n+5+t+"px";for(var s=0;s<e.length;s++){var l=e[s];this.groups[l].visible==!0&&(this.linegraphOptions.visibility[l]===void 0||this.linegraphOptions.visibility[l]==!0)&&(this.groups[l].getLegend(n,a,this.framework,i,o),o+=a+this.options.iconSpacing)}}};var Ic="__ungrouped__";function kt(e,r){this.id=ws(),this.body=e,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=b.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var t=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(n,a,o){t._onAdd(a.items)},update:function(n,a,o){t._onUpdate(a.items)},remove:function(n,a,o){t._onRemove(a.items)}},this.groupListeners={add:function(n,a,o){t._onAddGroups(a.items)},update:function(n,a,o){t._onUpdateGroups(a.items)},remove:function(n,a,o){t._onRemoveGroups(a.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(r),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){t.svg.style.left=b.option.asSize(-t.props.width),t.forceGraphUpdate=!0,t.redraw.call(t)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}kt.prototype=new Hn;kt.prototype._create=function(){var e=document.createElement("div");e.className="vis-line-graph",this.dom.frame=e,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",e.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new px(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new px(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new dr(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new dr(this.body,this.options.legend,"right",this.options.groups),this.show()};kt.prototype.setOptions=function(e){if(e){var r=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];e.graphHeight===void 0&&e.height!==void 0?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):this.body.domProps.centerContainer.height!==void 0&&e.graphHeight!==void 0&&ur((e.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),b.selectiveDeepExtend(r,this.options,e),b.mergeOptions(this.options,e,"interpolation"),b.mergeOptions(this.options,e,"drawPoints"),b.mergeOptions(this.options,e,"shaded"),b.mergeOptions(this.options,e,"legend"),e.interpolation&&at(e.interpolation)=="object"&&e.interpolation.parametrization&&(e.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:e.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&e.dataAxis!==void 0&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&e.legend!==void 0&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(Ic)&&this.groups[Ic].setOptions(e)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))};kt.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};kt.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};kt.prototype.setItems=function(e){var r=this,t,i=this.itemsData;if(!e)this.itemsData=null;else if(Bi("id",e))this.itemsData=bs(e);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(i&&(G(b).call(b,this.itemListeners,function(a,o){i.off(o,a)}),i.dispose(),t=i.getIds(),this._onRemove(t)),this.itemsData){var n=this.id;G(b).call(b,this.itemListeners,function(a,o){r.itemsData.on(o,a,n)}),t=this.itemsData.getIds(),this._onAdd(t)}};kt.prototype.setGroups=function(e){var r=this,t;if(this.groupsData){G(b).call(b,this.groupListeners,function(a,o){r.groupsData.off(o,a)}),t=this.groupsData.getIds(),this.groupsData=null;for(var i=0;i<t.length;i++)this._removeGroup(t[i])}if(!e)this.groupsData=null;else if(Bi("id",e))this.groupsData=e;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var n=this.id;G(b).call(b,this.groupListeners,function(a,o){r.groupsData.on(o,a,n)}),t=this.groupsData.getIds(),this._onAddGroups(t)}};kt.prototype._onUpdate=function(e){this._updateAllGroupData(e)};kt.prototype._onAdd=function(e){this._onUpdate(e)};kt.prototype._onRemove=function(e){this._onUpdate(e)};kt.prototype._onUpdateGroups=function(e){this._updateAllGroupData(null,e)};kt.prototype._onAddGroups=function(e){this._onUpdateGroups(e)};kt.prototype._onRemoveGroups=function(e){for(var r=0;r<e.length;r++)this._removeGroup(e[r]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})};kt.prototype._removeGroup=function(e){this.groups.hasOwnProperty(e)&&(this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e),this.legendLeft.redraw()),delete this.groups[e])};kt.prototype._updateGroup=function(e,r){this.groups.hasOwnProperty(r)?(this.groups[r].update(e),this.groups[r].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(r,this.groups[r]),this.legendRight.updateGroup(r,this.groups[r]),this.yAxisLeft.removeGroup(r),this.legendLeft.removeGroup(r)):(this.yAxisLeft.updateGroup(r,this.groups[r]),this.legendLeft.updateGroup(r,this.groups[r]),this.yAxisRight.removeGroup(r),this.legendRight.removeGroup(r))):(this.groups[r]=new Vn(e,r,this.options,this.groupsUsingDefaultStyles),this.groups[r].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(r,this.groups[r]),this.legendRight.addGroup(r,this.groups[r])):(this.yAxisLeft.addGroup(r,this.groups[r]),this.legendLeft.addGroup(r,this.groups[r]))),this.legendLeft.redraw(),this.legendRight.redraw()};kt.prototype._updateAllGroupData=function(e,r){if(this.itemsData!=null){var t={},i=this.itemsData.get(),n=this.itemsData.idProp,a={};e&&ve(e).call(e,function(p){a[p]=p});for(var o={},s=0;s<i.length;s++){var l=i[s],u=l.group;u==null&&(u=Ic),o.hasOwnProperty(u)?o[u]++:o[u]=1}var h={};if(!r&&e){for(u in this.groups)if(this.groups.hasOwnProperty(u)){m=this.groups[u];var f=m.getItems();t[u]=mt(f).call(f,function(p){return h[p[n]]=p[n],p[n]!==a[p[n]]});var c=o[u];o[u]-=t[u].length,t[u].length<c&&(t[u][c-1]={})}}for(s=0;s<i.length;s++)if(l=i[s],u=l.group,u==null&&(u=Ic),!(!r&&e&&l[n]!==a[l[n]]&&h.hasOwnProperty(l[n]))){t.hasOwnProperty(u)||(t[u]=new Array(o[u]));var d=b.bridgeObject(l);d.x=b.convert(l.x,"Date"),d.end=b.convert(l.end,"Date"),d.orginalY=l.y,d.y=Number(l.y),d[n]=l[n];var v=t[u].length-o[u]--;t[u][v]=d}for(u in this.groups)this.groups.hasOwnProperty(u)&&(t.hasOwnProperty(u)||(t[u]=new Array(0)));for(u in t)if(t.hasOwnProperty(u))if(t[u].length==0)this.groups.hasOwnProperty(u)&&this._removeGroup(u);else{var m=void 0;this.groupsData!=null&&(m=this.groupsData.get(u)),m==null&&(m={id:u,content:this.options.defaultGroup+u}),this._updateGroup(m,u),this.groups[u].setItems(t[u])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}};kt.prototype.redraw=function(){var e=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,e=this._isResized()||e;var r=this.body.range.end-this.body.range.start,t=r!=this.lastVisibleInterval;if(this.lastVisibleInterval=r,e==!0){var i;this.svg.style.width=b.option.asSize(3*this.props.width),this.svg.style.left=b.option.asSize(-this.props.width),(Pt(i=this.options.height+"").call(i,"%")!=-1||this.updateSVGheightOnResize==!0)&&(this.updateSVGheight=!0)}if(this.updateSVGheight==!0?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",e==!0||t==!0||this.abortedGraphUpdate==!0||this.forceGraphUpdate==!0)e=this._updateGraph()||e,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(this.lastStart!=0){var n=this.body.range.start-this.lastStart,a=this.body.range.end-this.body.range.start;if(this.props.width!=0){var o=this.props.width/a,s=n*o;this.svg.style.left=-this.props.width-s+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),e};kt.prototype._getSortedGroupIds=function(){var e=[];for(var r in this.groups)if(this.groups.hasOwnProperty(r)){var t=this.groups[r];t.visible==!0&&(this.options.groups.visibility[r]===void 0||this.options.groups.visibility[r]==!0)&&e.push({id:r,zIndex:t.options.zIndex})}b.insertSort(e,function(a,o){var s=a.zIndex,l=o.zIndex;return s===void 0&&(s=0),l===void 0&&(l=0),s==l?0:s<l?-1:1});for(var i=new Array(e.length),n=0;n<e.length;n++)i[n]=e[n].id;return i};kt.prototype._updateGraph=function(){if(zn(this.svgElements),this.props.width!=0&&this.itemsData!=null){var e,r,t={},i=!1,n=this.body.util.toGlobalTime(-this.body.domProps.root.width),a=this.body.util.toGlobalTime(2*this.body.domProps.root.width),o=this._getSortedGroupIds();if(o.length>0){var s={};for(this._getRelevantData(o,s,n,a),this._applySampling(o,s),r=0;r<o.length;r++)this._convertXcoordinates(s[o[r]]);if(this._getYRanges(o,s,t),i=this._updateYAxis(o,t),i==!0)return Rr(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var l=void 0;for(r=0;r<o.length;r++)e=this.groups[o[r]],this.options.stack===!0&&this.options.style==="line"&&(e.options.excludeFromStacking==null||!e.options.excludeFromStacking)&&(l!=null&&(this._stack(s[e.id],s[l.id]),e.options.shaded.enabled==!0&&e.options.shaded.orientation!=="group"&&(e.options.shaded.orientation=="top"&&l.options.shaded.orientation!=="group"?(l.options.shaded.orientation="group",l.options.shaded.groupId=e.id):(e.options.shaded.orientation="group",e.options.shaded.groupId=l.id))),l=e),this._convertYcoordinates(s[o[r]],e);var u={};for(r=0;r<o.length;r++)if(e=this.groups[o[r]],e.options.style==="line"&&e.options.shaded.enabled==!0){var h=s[o[r]];if(h==null||h.length==0)continue;if(u.hasOwnProperty(o[r])||(u[o[r]]=ye.calcPath(h,e)),e.options.shaded.orientation==="group"){var f=e.options.shaded.groupId;if(Pt(o).call(o,f)===-1){console.log(e.id+": Unknown shading group target given:"+f);continue}u.hasOwnProperty(f)||(u[f]=ye.calcPath(s[f],this.groups[f])),ye.drawShading(u[o[r]],e,u[f],this.framework)}else ye.drawShading(u[o[r]],e,void 0,this.framework)}for(Le.draw(o,s,this.framework),r=0;r<o.length;r++)if(e=this.groups[o[r]],s[o[r]].length>0)switch(e.options.style){case"line":u.hasOwnProperty(o[r])||(u[o[r]]=ye.calcPath(s[o[r]],e)),ye.draw(u[o[r]],e,this.framework);case"point":case"points":(e.options.style=="point"||e.options.style=="points"||e.options.drawPoints.enabled==!0)&&Au.draw(s[o[r]],e,this.framework);break}}}return Rr(this.svgElements),!1};kt.prototype._stack=function(e,r){var t,i,n,a,o;t=0;for(var s=0;s<e.length;s++){a=void 0,o=void 0;for(var l=t;l<r.length;l++)if(r[l].x===e[s].x){a=r[l],o=r[l],t=l;break}else if(r[l].x>e[s].x){o=r[l],l==0?a=o:a=r[l-1],t=l;break}o===void 0&&(a=r[r.length-1],o=r[r.length-1]),i=o.x-a.x,n=o.y-a.y,i==0?e[s].y=e[s].orginalY+o.y:e[s].y=e[s].orginalY+n/i*(e[s].x-a.x)+a.y}};kt.prototype._getRelevantData=function(e,r,t,i){var n,a,o,s;if(e.length>0)for(a=0;a<e.length;a++){n=this.groups[e[a]];var l=n.getItems();if(Ie(n.options)==!0){var u=function(v,m){return v.getTime()==m.getTime()?0:v<m?-1:1},h=Math.max(0,b.binarySearchValue(l,t,"x","before",u)),f=Math.min(l.length,b.binarySearchValue(l,i,"x","after",u)+1);f<=0&&(f=l.length);var c=new Array(f-h);for(o=h;o<f;o++)s=n.itemsData[o],c[o-h]=s;r[e[a]]=c}else r[e[a]]=n.itemsData}};kt.prototype._applySampling=function(e,r){var t;if(e.length>0){for(var i=0;i<e.length;i++)if(t=this.groups[e[i]],t.options.sampling==!0){var n=r[e[i]];if(n.length>0){var a=1,o=n.length,s=this.body.util.toGlobalScreen(n[n.length-1].x)-this.body.util.toGlobalScreen(n[0].x),l=o/s;a=Math.min(Math.ceil(.2*o),Math.max(1,Math.round(l)));for(var u=new Array(o),h=0;h<o;h+=a){var f=Math.round(h/a);u[f]=n[h]}r[e[i]]=Ir(u).call(u,0,Math.round(o/a))}}}};kt.prototype._getYRanges=function(e,r,t){var i,n,a,o=[],s=[],l;if(e.length>0){for(a=0;a<e.length;a++)i=r[e[a]],l=this.groups[e[a]].options,i.length>0&&(n=this.groups[e[a]],l.stack===!0&&l.style==="bar"?l.yAxisOrientation==="left"?o=Ut(o).call(o,i):s=Ut(s).call(s,i):t[e[a]]=n.getYRange(i,e[a]));Le.getStackedYRange(o,t,e,"__barStackLeft","left"),Le.getStackedYRange(s,t,e,"__barStackRight","right")}};kt.prototype._updateYAxis=function(e,r){var t=!1,i=!1,n=!1,a=1e9,o=1e9,s=-1e9,l=-1e9,u,h;if(e.length>0){for(var f=0;f<e.length;f++){var c=this.groups[e[f]];c&&c.options.yAxisOrientation!="right"?(i=!0,a=1e9,s=-1e9):c&&c.options.yAxisOrientation&&(n=!0,o=1e9,l=-1e9)}for(f=0;f<e.length;f++)r.hasOwnProperty(e[f])&&r[e[f]].ignore!==!0&&(u=r[e[f]].min,h=r[e[f]].max,r[e[f]].yAxisOrientation!="right"?(i=!0,a=a>u?u:a,s=s<h?h:s):(n=!0,o=o>u?u:o,l=l<h?h:l));i==!0&&this.yAxisLeft.setRange(a,s),n==!0&&this.yAxisRight.setRange(o,l)}t=this._toggleAxisVisiblity(i,this.yAxisLeft)||t,t=this._toggleAxisVisiblity(n,this.yAxisRight)||t,n==!0&&i==!0?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!i,this.yAxisRight.masterAxis=this.yAxisLeft,this.yAxisRight.master==!1?(n==!0?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,t=this.yAxisLeft.redraw()||t,t=this.yAxisRight.redraw()||t):t=this.yAxisRight.redraw()||t;var d=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(f=0;f<d.length;f++)Pt(e).call(e,d[f])!=-1&&Ir(e).call(e,Pt(e).call(e,d[f]),1);return t};kt.prototype._toggleAxisVisiblity=function(e,r){var t=!1;return e==!1?r.dom.frame.parentNode&&r.hidden==!1&&(r.hide(),t=!0):!r.dom.frame.parentNode&&r.hidden==!0&&(r.show(),t=!0),t};kt.prototype._convertXcoordinates=function(e){for(var r=this.body.util.toScreen,t=0;t<e.length;t++)e[t].screen_x=r(e[t].x)+this.props.width,e[t].screen_y=e[t].y,e[t].end!=null?e[t].screen_end=r(e[t].end)+this.props.width:e[t].screen_end=void 0};kt.prototype._convertYcoordinates=function(e,r){var t=this.yAxisLeft,i=Number(this.svg.style.height.replace("px",""));r.options.yAxisOrientation=="right"&&(t=this.yAxisRight);for(var n=0;n<e.length;n++)e[n].screen_y=Math.round(t.convertValue(e[n].y));r.setZeroPosition(Math.min(i,t.convertValue(0)))};var et="string",gt="boolean",Dt="number",H4="array",ks="date",zt="object",B4="dom",Ds="moment",mx="any",U4={configure:{enabled:{boolean:gt},filter:{boolean:gt,function:"function"},container:{dom:B4},__type__:{object:zt,boolean:gt,function:"function"}},alignCurrentTime:{string:et,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:et},sort:{boolean:gt},sampling:{boolean:gt},stack:{boolean:gt},graphHeight:{string:et,number:Dt},shaded:{enabled:{boolean:gt},orientation:{string:["bottom","top","zero","group"]},groupId:{object:zt},__type__:{boolean:gt,object:zt}},style:{string:["line","bar","points"]},barChart:{width:{number:Dt},minWidth:{number:Dt},sideBySide:{boolean:gt},align:{string:["left","center","right"]},__type__:{object:zt}},interpolation:{enabled:{boolean:gt},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:Dt},__type__:{object:zt,boolean:gt}},drawPoints:{enabled:{boolean:gt},onRender:{function:"function"},size:{number:Dt},style:{string:["square","circle"]},__type__:{object:zt,boolean:gt,function:"function"}},dataAxis:{showMinorLabels:{boolean:gt},showMajorLabels:{boolean:gt},showWeekScale:{boolean:gt},icons:{boolean:gt},width:{string:et,number:Dt},visible:{boolean:gt},alignZeros:{boolean:gt},left:{range:{min:{number:Dt,undefined:"undefined"},max:{number:Dt,undefined:"undefined"},__type__:{object:zt}},format:{function:"function"},title:{text:{string:et,number:Dt,undefined:"undefined"},style:{string:et,undefined:"undefined"},__type__:{object:zt}},__type__:{object:zt}},right:{range:{min:{number:Dt,undefined:"undefined"},max:{number:Dt,undefined:"undefined"},__type__:{object:zt}},format:{function:"function"},title:{text:{string:et,number:Dt,undefined:"undefined"},style:{string:et,undefined:"undefined"},__type__:{object:zt}},__type__:{object:zt}},__type__:{object:zt}},legend:{enabled:{boolean:gt},icons:{boolean:gt},left:{visible:{boolean:gt},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:zt}},right:{visible:{boolean:gt},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:zt}},__type__:{object:zt,boolean:gt}},groups:{visibility:{any:mx},__type__:{object:zt}},autoResize:{boolean:gt},throttleRedraw:{number:Dt},clickToUse:{boolean:gt},end:{number:Dt,date:ks,string:et,moment:Ds},format:{minorLabels:{millisecond:{string:et,undefined:"undefined"},second:{string:et,undefined:"undefined"},minute:{string:et,undefined:"undefined"},hour:{string:et,undefined:"undefined"},weekday:{string:et,undefined:"undefined"},day:{string:et,undefined:"undefined"},week:{string:et,undefined:"undefined"},month:{string:et,undefined:"undefined"},quarter:{string:et,undefined:"undefined"},year:{string:et,undefined:"undefined"},__type__:{object:zt}},majorLabels:{millisecond:{string:et,undefined:"undefined"},second:{string:et,undefined:"undefined"},minute:{string:et,undefined:"undefined"},hour:{string:et,undefined:"undefined"},weekday:{string:et,undefined:"undefined"},day:{string:et,undefined:"undefined"},week:{string:et,undefined:"undefined"},month:{string:et,undefined:"undefined"},quarter:{string:et,undefined:"undefined"},year:{string:et,undefined:"undefined"},__type__:{object:zt}},__type__:{object:zt}},moment:{function:"function"},height:{string:et,number:Dt},hiddenDates:{start:{date:ks,number:Dt,string:et,moment:Ds},end:{date:ks,number:Dt,string:et,moment:Ds},repeat:{string:et},__type__:{object:zt,array:H4}},locale:{string:et},locales:{__any__:{any:mx},__type__:{object:zt}},max:{date:ks,number:Dt,string:et,moment:Ds},maxHeight:{number:Dt,string:et},maxMinorChars:{number:Dt},min:{date:ks,number:Dt,string:et,moment:Ds},minHeight:{number:Dt,string:et},moveable:{boolean:gt},multiselect:{boolean:gt},orientation:{string:et},showCurrentTime:{boolean:gt},showMajorLabels:{boolean:gt},showMinorLabels:{boolean:gt},showWeekScale:{boolean:gt},snap:{function:"function",null:"null"},start:{date:ks,number:Dt,string:et,moment:Ds},timeAxis:{scale:{string:et,undefined:"undefined"},step:{number:Dt,undefined:"undefined"},__type__:{object:zt}},width:{string:et,number:Dt},zoomable:{boolean:gt},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:Dt},zoomMin:{number:Dt},zIndex:{number:Dt},__type__:{object:zt}},z4={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};function ln(e,r,t,i){var n,a,o,s,l,u,h;if(!(ct(t)||Bi("id",t))&&t instanceof Object){var f=i;i=t,t=f}i&&i.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var c=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:Ke,width:null,height:null,maxHeight:null,minHeight:null},this.options=b.deepExtend({},this.defaultOptions),this._create(e),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:D(n=this.on).call(n,this),off:D(a=this.off).call(a,this),emit:D(o=this.emit).call(o,this)},hiddenDates:[],util:{getScale:function(){return c.timeAxis.step.scale},getStep:function(){return c.timeAxis.step.step},toScreen:D(s=c._toScreen).call(s,c),toGlobalScreen:D(l=c._toGlobalScreen).call(l,c),toTime:D(u=c._toTime).call(u,c),toGlobalTime:D(h=c._toGlobalTime).call(h,c)}},this.range=new CS(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Tc(this.body),this.components.push(this.timeAxis),this.currentTime=new GS(this.body),this.components.push(this.currentTime),this.linegraph=new kt(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(d){c.emit("click",c.getEventProperties(d))}),this.on("doubletap",function(d){c.emit("doubleClick",c.getEventProperties(d))}),this.dom.root.oncontextmenu=function(d){c.emit("contextmenu",c.getEventProperties(d))},this.initialFitDone=!1,this.on("changed",function(){if(c.itemsData!=null){if(!c.initialFitDone&&!c.options.rollingMode)if(c.initialFitDone=!0,c.options.start!=null||c.options.end!=null){if(c.options.start==null||c.options.end==null)var d=c.getItemRange();var v=c.options.start!=null?c.options.start:d.min,m=c.options.end!=null?c.options.end:d.max;c.setWindow(v,m,{animation:!1})}else c.fit({animation:!1});!c.initialDrawDone&&(c.initialRangeChangeDone||!c.options.start&&!c.options.end||c.options.rollingMode)&&(c.initialDrawDone=!0,c.dom.root.style.visibility="visible",c.dom.loadingScreen.parentNode.removeChild(c.dom.loadingScreen),c.options.onInitialDrawComplete&&Re(function(){return c.options.onInitialDrawComplete()},0))}}),i&&this.setOptions(i),t&&this.setGroups(t),r&&this.setItems(r),this._redraw()}ln.prototype=new Ss;ln.prototype.setOptions=function(e){var r=ux.validate(e,U4);r===!0&&console.log("%cErrors have been found in the supplied options object.",Oc),Ss.prototype.setOptions.call(this,e)};ln.prototype.setItems=function(e){var r=this.itemsData==null,t;if(e?Bi("id",e)?t=bs(e):t=bs(new Bo(e)):t=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=t,this.linegraph&&this.linegraph.setItems(t!=null?t.rawDS:null),r)if(this.options.start!=null||this.options.end!=null){var i=this.options.start!=null?this.options.start:null,n=this.options.end!=null?this.options.end:null;this.setWindow(i,n,{animation:!1})}else this.fit({animation:!1})};ln.prototype.setGroups=function(e){var r;e?Bi("id",e)?r=e:r=new Bo(e):r=null,this.groupsData=r,this.linegraph.setGroups(r)};ln.prototype.getLegend=function(e,r,t){return r===void 0&&(r=15),t===void 0&&(t=15),this.linegraph.groups[e]!==void 0?this.linegraph.groups[e].getLegend(r,t):"cannot find group:'"+e+"'"};ln.prototype.isGroupVisible=function(e){return this.linegraph.groups[e]!==void 0?this.linegraph.groups[e].visible&&(this.linegraph.options.groups.visibility[e]===void 0||this.linegraph.options.groups.visibility[e]==!0):!1};ln.prototype.getDataRange=function(){var e=null,r=null;for(var t in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(t)&&this.linegraph.groups[t].visible==!0)for(var i=0;i<this.linegraph.groups[t].itemsData.length;i++){var n=this.linegraph.groups[t].itemsData[i],a=b.convert(n.x,"Date").valueOf();e=e==null||e>a?a:e,r=r==null||r<a?a:r}return{min:e!=null?new Date(e):null,max:r!=null?new Date(r):null}};ln.prototype.getEventProperties=function(e){var r=e.center?e.center.x:e.clientX,t=e.center?e.center.y:e.clientY,i=r-b.getAbsoluteLeft(this.dom.centerContainer),n=t-b.getAbsoluteTop(this.dom.centerContainer),a=this._toTime(i),o=Tm.customTimeFromTarget(e),s=b.getTarget(e),l=null;b.hasParent(s,this.timeAxis.dom.foreground)||this.timeAxis2&&b.hasParent(s,this.timeAxis2.dom.foreground)?l="axis":b.hasParent(s,this.linegraph.yAxisLeft.dom.frame)||b.hasParent(s,this.linegraph.yAxisRight.dom.frame)?l="data-axis":b.hasParent(s,this.linegraph.legendLeft.dom.frame)||b.hasParent(s,this.linegraph.legendRight.dom.frame)?l="legend":o!=null?l="custom-time":b.hasParent(s,this.currentTime.bar)?l="current-time":b.hasParent(s,this.dom.center)&&(l="background");var u=[],h=this.linegraph.yAxisLeft,f=this.linegraph.yAxisRight;return!h.hidden&&this.itemsData.length>0&&u.push(h.screenToValue(n)),!f.hidden&&this.itemsData.length>0&&u.push(f.screenToValue(n)),{event:e,customTime:o?o.options.id:null,what:l,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:i,y:n,time:a,value:u}};ln.prototype._createConfigurator=function(){return new cx(this,this.dom.container,z4)};var V4=F4();F.locale(V4);export{NP as C,Bo as D,GP as F,Ak as I,Q4 as L,r6 as M,q4 as O,ZO as P,J4 as S,a6 as T,fa as V,i6 as X,jP as a,t6 as b,e6 as c,o6 as d,Z4 as e,X4 as f,n6 as g,K4 as t};
