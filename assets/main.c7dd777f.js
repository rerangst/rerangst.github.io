import{O as V,M as N,V as _,T as z,X as j,D as R,a as Y,S as g,I as M,b as p,C as Z,F as H,c as k,d as T,G as X,t as q,e as J,g as K,P as B,f as P,L as Q}from"./vendor.2c9267fc.js";const U=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};U();const W="Rzyup56YSzgY1t6M2B7l",$=document.getElementById("popup"),ee=document.getElementById("popup-content"),y=document.getElementById("popup-closer"),C=document.getElementById("segments"),L=new V({element:$,autoPan:!0,autoPanAnimation:{duration:250}}),te=[-13767242957508618e-9,5542175421488685e-9],l=new N({target:document.getElementById("map"),overlays:[L],view:new _({center:te,zoom:10,minZoom:2,maxZoom:19}),layers:[new z({source:new j({url:"https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key="+W,tileSize:512})})]});function oe(e){var t=e.getSource().getFeatures()[0].getProperties().time;m=new Date(t[0]),w=new Date(t[t.length-1]),v.length<1&&(v.add([{id:"item0",start:m,end:w,content:"Demo GPS Tracks"}]),f.addCustomTime(m,A,!1)),f.fit()}var v=new R,ne={width:"100%",height:"120px",align:"center"},f=new Y(document.getElementById("timeline"),v,ne);f.on("timechange",re);function re(e){const t=w-m;if(r=(e.time.getTime()-m.getTime())/t,r>c)for(;c<r;){const n=Number(O.value);c=(c+n*20/1e6)%2,s.getSource().getFeatures().forEach(function(i,o,a){const u=i.getGeometry().getCoordinateAt(c);S[o].getGeometry().appendCoordinate(u)})}G()}const F={invisibleStyleIcon:new g({image:new M({src:"data/icon.png",opacity:0})}),route:new g({stroke:new p({width:6,color:[237,212,0,.8]})}),icon:new g({image:new M({anchor:[.5,1],src:"data/icon.png"})}),geoMarker:new g({image:new Z({radius:7,fill:new H({color:"black"}),stroke:new p({color:"white",width:2})})})},s=new k({source:new T({format:new X,url:"./data/demo-tracks-line.json"}),style:new g({stroke:new p({color:"rgba(255, 0, 0, 0.7)",lineDash:[2,5],width:5})})}),b=new k({source:new T,style:new g({stroke:new p({color:"rgba(30, 139, 195, 1)",width:5})})}),d=new k({source:new T,style:function(e){return F[e.get("type")]}});l.addLayer(s);l.addLayer(d);l.addLayer(b);s.setVisible(C.checked);var A="id";let m=new Date,w=new Date;const O=document.getElementById("speed"),E=document.getElementById("start-animation");let I=!1,c=0,r=0,D,h=[],S=[];function ae(e,t){e>0&&s.getSource().getFeatures().forEach(function(n,i,o){const a=n.getGeometry().getCoordinateAt(e);h[i].setCoordinates(a),c==e&&S[i].getGeometry().appendCoordinate(a),t.setStyle(F.geoMarker),t.drawGeometry(h[i])}),l.render()}function x(e){const t=Number(O.value),n=e.frameState.time,i=n-D;r=(r+t*i/1e6)%2,D=n;const o=K(e);c<r&&(c=r),ae(r,o);const a=w-m;var u=new Date(m.getTime()+a*r);f.customTimes[0].setCustomTime(u),f.setCustomTimeMarker(u,A,!1),r>1&&(c=0,G())}function ie(){I=!0,D=Date.now(),E.textContent="Stop",r=r>1?0:r,d.getSource().clear(),h=[],r==0&&(b.getSource().clear(),S=[]);for(let e=0;e<s.getSource().getFeatures().length;e++)h.push(new B([0,0]));for(const e of s.getSource().getFeatures()){const t=new P({type:"invisibleStyleIcon",geometry:new B(e.getGeometry().getFirstCoordinate())});if(d.getSource().addFeature(t),r==0){const n=new P({geometry:new Q([])});n.getGeometry().appendCoordinate(e.getGeometry().getFirstCoordinate()),S.push(n),b.getSource().addFeature(n)}}d.on("postrender",x),y.onclick()}function G(){I=!1,E.textContent="Start",d.un("postrender",x);const e=s.getSource().getFeatures().length;s.getSource().getFeatures().forEach(function(t,n){const i=t.getGeometry().getCoordinateAt(r>1?2-r:r);d.getSource().getFeatures()[e-n-1].getGeometry().setCoordinates(i)}),d.getSource().getFeatures().forEach(function(t,n,i){t.setStyle(F.geoMarker)}),y.onclick(),l.render()}E.addEventListener("click",function(){I?G():(oe(s),ie())});C.onchange=function(){s.setVisible(C.checked)};y.onclick=function(){return L.setPosition(void 0),y.blur(),!1};l.on("click",function(e){if(l.forEachFeatureAtPixel(e.pixel,function(n){return n})){const n=q(J(e.coordinate));ee.innerHTML="<p> here: </p><code>"+n+"</code>",L.setPosition(e.coordinate)}});
