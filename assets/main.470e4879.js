import{S as g,I as x,C as Z,F as X,a as S,O as q,V as K,b as F,c as b,M as J,T as Q,X as U,D as W,d as $,t as ee,e as te,f as B,P as T,L as ne,g as oe}from"./vendor.09e853de.js";const re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};re();const E={code:0,count:3,data:[{lat:"103.23278808593749",lng:"22.111088065307705",name:"Object1"},{lat:"104.166748046875",lng:"22.43134015636061",name:"Object2"},{lat:"105.16113281249999",lng:"22.558220454844033",name:"Object3"},{lat:"105.83129882812499",lng:"22.52270570348246",name:"Object4"},{lat:"107.2762451171875",lng:"21.37759064052037",name:"Object5"}],message:"Success"},ae="Rzyup56YSzgY1t6M2B7l";var A="id";let l=new Date,k=new Date,P=!1,f=0,a=0,D,M=[],y=[];const ie=document.getElementById("popup"),ce=document.getElementById("popup-content"),I=document.getElementById("popup-closer"),R=document.getElementById("segments"),V=document.getElementById("speed"),C=document.getElementById("start-animation"),_=document.getElementById("tick"),z=document.getElementById("timeline"),u=document.getElementById("showTimeLine"),p=document.getElementById("timeLineObj"),se=[-13767014650409194e-9,21.673377472518222],L={invisibleStyleIcon:new g({image:new x({src:"data/icon.png",opacity:0})}),icon:new g({image:new x({anchor:[.5,1],src:"data/icon.png"})}),geoMarker:new g({image:new Z({radius:7,fill:new X({color:"black"}),stroke:new S({color:"white",width:2})})}),drawRoute:new g({stroke:new S({color:"rgba(30, 139, 195, 1)",width:5})}),baseRoute:new g({stroke:new S({color:"rgba(255, 0, 0, 0.7)",lineDash:[2,5],width:5})})},G=new q({element:ie,autoPan:!0,autoPanAnimation:{duration:250}}),de=new K({projection:"EPSG:4326",center:se,zoom:7,minZoom:2,maxZoom:19}),s=new F({source:new b,style:L.drawRoute}),m=new F({source:new b,style:function(e){return L[e.get("type")]}}),w=new F({source:new b,style:function(e){return L[e.get("type")]}}),d=new J({target:document.getElementById("map"),overlays:[G],view:de,layers:[new Q({source:new U({url:"https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key="+ae,tileSize:512})})]});d.addLayer(s);d.addLayer(m);d.addLayer(w);var O=new W,le={width:"100%",height:"120px",align:"center",showCurrentTime:!1},h=new $(z,O,le);function N(e){var t=e.getProperties().startTime,o=e.getProperties().endTime;l=new Date(t),k=new Date(o),O.length<1&&(O.add([{id:"item0",start:l,end:k,content:"Demo GPS Tracks"}]),h.addCustomTime(l,A,!1)),h.fit()}h.on("timechange",ue);function ue(e){const t=k-l;if(a=(e.time.getTime()-l.getTime())/t,a>f)for(;f<a;){const o=Number(V.value);f=(f+o*20/1e6)%2}v()}function H(e){e.forEach(function(t,o){let i=s.getSource().getFeatures()[o].getGeometry().getCoordinates().length,n=w.getSource().getFeatureById(t.name).getGeometry().getCoordinates()[0]+Math.random()*.5*i,r=w.getSource().getFeatureById(t.name).getGeometry().getCoordinates()[1]-Math.random()*.5*i;var c=s.getSource().getFeatureById(t.name).getProperties().startTime;s.getSource().getFeatureById(t.name).setProperties({endTime:c+5e3*i}),s.getSource().getFeatureById(t.name).getGeometry().appendCoordinate([n,r]),w.getSource().getFeatureById(t.name).getGeometry().setCoordinates([n,r])})}function Y(e){const t=Number(V.value),o=e.frameState.time,i=o-D;if(a=(a+t*i/1e6)%2,D=o,oe(e),y.forEach(function(r,c,fe){const j=r.getGeometry().getCoordinateAt(a>1?2-a:a);M[c]=new T(j),m.getSource().getFeatureById(r.getId()).getGeometry().setCoordinates(j)}),u.checked){const r=k-l;var n=new Date(l.getTime()+r*a);h.customTimes[0].setCustomTime(n),h.setCustomTimeMarker(n,A,!1),a>1&&(f=0,v())}d.render()}function me(){P=!0,D=Date.now(),C.textContent="Stop",a=a>1?0:a,a==0&&(m.getSource().clear(),M=[]);for(const e of y){const t=new B({type:"geoMarker",geometry:new T(e.getGeometry().getFirstCoordinate())});t.setId(e.getId()),m.getSource().addFeature(t),M.push(new T(e.getGeometry().getFirstCoordinate()))}m.on("postrender",Y),I.onclick()}function v(){P=!1,C.textContent="Start",m.un("postrender",Y);const e=y.length;y.forEach(function(t,o){const i=t.getGeometry().getCoordinateAt(a>1?2-a:a);m.getSource().getFeatures()[e-o-1].getGeometry().setCoordinates(i)}),I.onclick(),d.render()}C.addEventListener("click",function(){y=u.checked?[s.getSource().getFeatureById(p.value)]:s.getSource().getFeatures(),P?v():me()});R.onchange=function(){s.setVisible(R.checked)};u.onchange=function(){p.disabled=!u.checked,z.hidden=!u.checked,_.disabled=u.checked,u.checked&&N(s.getSource().getFeatureById(p.value))};I.onclick=function(){return G.setPosition(void 0),I.blur(),!1};d.on("click",function(e){if(d.forEachFeatureAtPixel(e.pixel,function(o){return o})){const o=ee(te(e.coordinate));ce.innerHTML="<p> here: </p><code>"+o+"</code>",G.setPosition(e.coordinate)}console.log(d.getView().getCenter())});_.addEventListener("click",function(){H(E.data),d.render()});function ge(){var e=Math.round,t=Math.random,o=255;return"rgba("+e(t()*o)+","+e(t()*o)+","+e(t()*o)+","+1+")"}E.data.forEach(function(e,t){const o=ge(),i=new B({geometry:new T([parseFloat(e.lat),parseFloat(e.lng)])});i.setStyle(L.icon),i.setId(e.name),w.getSource().addFeature(i);const n=new B({geometry:new ne([])}),r=new g({stroke:new S({color:o,width:2,lineDash:[2,5]})});n.setStyle(r),n.setId(e.name),n.getGeometry().appendCoordinate([parseFloat(e.lat),parseFloat(e.lng)]),s.getSource().addFeature(n),n.setProperties({startTime:Date.now()});var c=document.createElement("option");c.value=e.name,c.innerHTML=e.name,p.appendChild(c)});p.addEventListener("change",function(e){a=0,v(),N(s.getSource().getFeatureById(e.target.value)),C.click()});H(E.data);
