var Ux=function(){function e(r){this.propagationStopped,this.defaultPrevented,this.type=r,this.target=null}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}(),pn=Ux,Qn={PROPERTYCHANGE:"propertychange"},zx=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}(),jc=zx;function Vx(e,r,t){for(var i,n,a=t||ta,o=0,s=e.length,l=!1;o<s;)i=o+(s-o>>1),n=+a(e[i],r),n<0?o=i+1:(s=i,l=!n);return l?o:~o}function ta(e,r){return e>r?1:e<r?-1:0}function Wc(e,r,t){var i=e.length;if(e[0]<=r)return 0;if(r<=e[i-1])return i-1;var n=void 0;if(t>0){for(n=1;n<i;++n)if(e[n]<r)return n-1}else if(t<0){for(n=1;n<i;++n)if(e[n]<=r)return n}else for(n=1;n<i;++n){if(e[n]==r)return n;if(e[n]<r)return typeof t=="function"?t(r,e[n-1],e[n])>0?n-1:n:e[n-1]-r<r-e[n]?n-1:n}return i-1}function Xx(e,r,t){for(;r<t;){var i=e[r];e[r]=e[t],e[t]=i,++r,--t}}function Ei(e,r){for(var t=Array.isArray(r)?r:[r],i=t.length,n=0;n<i;n++)e[e.length]=t[n]}function _o(e,r){var t=e.length;if(t!==r.length)return!1;for(var i=0;i<t;i++)if(e[i]!==r[i])return!1;return!0}function Kx(e,r,t){var i=r||ta;return e.every(function(n,a){if(a===0)return!0;var o=i(e[a-1],n);return!(o>0||t&&o===0)})}function wo(){return!0}function Xu(){return!1}function ea(){}function Zx(e){var r=!1,t,i,n;return function(){var a=Array.prototype.slice.call(arguments);return(!r||this!==n||!_o(a,i))&&(r=!0,n=this,i=a,t=e.apply(this,arguments)),t}}var ae=typeof Object.assign=="function"?Object.assign:function(e,r){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1,n=arguments.length;i<n;++i){var a=arguments[i];if(a!=null)for(var o in a)a.hasOwnProperty(o)&&(t[o]=a[o])}return t};function Us(e){for(var r in e)delete e[r]}var Qg=typeof Object.values=="function"?Object.values:function(e){var r=[];for(var t in e)r.push(e[t]);return r};function bo(e){var r;for(r in e)return!1;return!r}var qx=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jx=function(e){qx(r,e);function r(t){var i=e.call(this)||this;return i.eventTarget_=t,i.pendingRemovals_=null,i.dispatching_=null,i.listeners_=null,i}return r.prototype.addEventListener=function(t,i){if(!(!t||!i)){var n=this.listeners_||(this.listeners_={}),a=n[t]||(n[t]=[]);a.indexOf(i)===-1&&a.push(i)}},r.prototype.dispatchEvent=function(t){var i=typeof t=="string"?new pn(t):t,n=i.type;i.target||(i.target=this.eventTarget_||this);var a=this.listeners_&&this.listeners_[n],o;if(a){var s=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});n in s||(s[n]=0,l[n]=0),++s[n];for(var u=0,h=a.length;u<h;++u)if("handleEvent"in a[u]?o=a[u].handleEvent(i):o=a[u].call(this,i),o===!1||i.propagationStopped){o=!1;break}if(--s[n],s[n]===0){var f=l[n];for(delete l[n];f--;)this.removeEventListener(n,ea);delete s[n]}return o}},r.prototype.disposeInternal=function(){this.listeners_&&Us(this.listeners_)},r.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},r.prototype.hasListener=function(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1},r.prototype.removeEventListener=function(t,i){var n=this.listeners_&&this.listeners_[t];if(n){var a=n.indexOf(i);a!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[a]=ea,++this.pendingRemovals_[t]):(n.splice(a,1),n.length===0&&delete this.listeners_[t]))}},r}(jc),To=Jx,Q={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function yt(e,r,t,i,n){if(i&&i!==e&&(t=t.bind(i)),n){var a=t;t=function(){e.removeEventListener(r,t),a.apply(this,arguments)}}var o={target:e,type:r,listener:t};return e.addEventListener(r,t),o}function Ku(e,r,t,i){return yt(e,r,t,i,!0)}function Mt(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Us(e))}var Qx=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Zu=function(e){Qx(r,e);function r(){var t=e.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return r.prototype.changed=function(){++this.revision_,this.dispatchEvent(Q.CHANGE)},r.prototype.getRevision=function(){return this.revision_},r.prototype.onInternal=function(t,i){if(Array.isArray(t)){for(var n=t.length,a=new Array(n),o=0;o<n;++o)a[o]=yt(this,t[o],i);return a}else return yt(this,t,i)},r.prototype.onceInternal=function(t,i){var n;if(Array.isArray(t)){var a=t.length;n=new Array(a);for(var o=0;o<a;++o)n[o]=Ku(this,t[o],i)}else n=Ku(this,t,i);return i.ol_key=n,n},r.prototype.unInternal=function(t,i){var n=i.ol_key;if(n)tC(n);else if(Array.isArray(t))for(var a=0,o=t.length;a<o;++a)this.removeEventListener(t[a],i);else this.removeEventListener(t,i)},r}(To);Zu.prototype.on;Zu.prototype.once;Zu.prototype.un;function tC(e){if(Array.isArray(e))for(var r=0,t=e.length;r<t;++r)Mt(e[r]);else Mt(e)}var tm=Zu;function K(){return function(){throw new Error("Unimplemented abstract method.")}()}var eC=0;function bt(e){return e.ol_uid||(e.ol_uid=String(++eC))}var rC="6.9.0",em=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rm=function(e){em(r,e);function r(t,i,n){var a=e.call(this,t)||this;return a.key=i,a.oldValue=n,a}return r}(pn),iC=function(e){em(r,e);function r(t){var i=e.call(this)||this;return i.on,i.once,i.un,bt(i),i.values_=null,t!==void 0&&i.setProperties(t),i}return r.prototype.get=function(t){var i;return this.values_&&this.values_.hasOwnProperty(t)&&(i=this.values_[t]),i},r.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},r.prototype.getProperties=function(){return this.values_&&ae({},this.values_)||{}},r.prototype.hasProperties=function(){return!!this.values_},r.prototype.notify=function(t,i){var n;n="change:"+t,this.dispatchEvent(new rm(n,t,i)),n=Qn.PROPERTYCHANGE,this.dispatchEvent(new rm(n,t,i))},r.prototype.addChangeListener=function(t,i){this.addEventListener("change:"+t,i)},r.prototype.removeChangeListener=function(t,i){this.removeEventListener("change:"+t,i)},r.prototype.set=function(t,i,n){var a=this.values_||(this.values_={});if(n)a[t]=i;else{var o=a[t];a[t]=i,o!==i&&this.notify(t,o)}},r.prototype.setProperties=function(t,i){for(var n in t)this.set(n,t[n],i)},r.prototype.applyProperties=function(t){!t.values_||ae(this.values_||(this.values_={}),t.values_)},r.prototype.unset=function(t,i){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],bo(this.values_)&&(this.values_=null),i||this.notify(t,n)}},r}(tm),Nr=iC,nC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),aC=function(e){nC(r,e);function r(t){var i=this,n="v"+rC.split("-")[0],a="Assertion failed. See https://openlayers.org/en/"+n+"/doc/errors/#"+t+" for details.";return i=e.call(this,a)||this,i.code=t,i.name="AssertionError",i.message=a,i}return r}(Error),im=aC;function ut(e,r){if(!e)throw new im(r)}var oC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),sC=function(e){oC(r,e);function r(t){var i=e.call(this)||this;if(i.on,i.once,i.un,i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addChangeListener(i.geometryName_,i.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){var n=t;i.setGeometry(n)}else{var a=t;i.setProperties(a)}return i}return r.prototype.clone=function(){var t=new r(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},r.prototype.getGeometry=function(){return this.get(this.geometryName_)},r.prototype.getId=function(){return this.id_},r.prototype.getGeometryName=function(){return this.geometryName_},r.prototype.getStyle=function(){return this.style_},r.prototype.getStyleFunction=function(){return this.styleFunction_},r.prototype.handleGeometryChange_=function(){this.changed()},r.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Mt(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=yt(t,Q.CHANGE,this.handleGeometryChange_,this)),this.changed()},r.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},r.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?lC(t):void 0,this.changed()},r.prototype.setId=function(t){this.id_=t,this.changed()},r.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},r}(Nr);function lC(e){if(typeof e=="function")return e;var r;if(Array.isArray(e))r=e;else{ut(typeof e.getZIndex=="function",41);var t=e;r=[t]}return function(){return r}}var uC=sC,Eo=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",hC=Eo.indexOf("firefox")!==-1;Eo.indexOf("safari")!==-1&&Eo.indexOf("chrom")==-1;var fC=Eo.indexOf("webkit")!==-1&&Eo.indexOf("edge")==-1,cC=Eo.indexOf("macintosh")!==-1,nm=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,qu=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,dC=typeof Image!="undefined"&&Image.prototype.decode,am=function(){var e=!1;try{var r=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,r),window.removeEventListener("_",null,r)}catch(t){}return e}();new Array(6);function qr(){return[1,0,0,1,0,0]}function vC(e,r){var t=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=r[0],u=r[1],h=r[2],f=r[3],c=r[4],d=r[5];return e[0]=t*l+n*u,e[1]=i*l+a*u,e[2]=t*h+n*f,e[3]=i*h+a*f,e[4]=t*c+n*d+o,e[5]=i*c+a*d+s,e}function pC(e,r,t,i,n,a,o){return e[0]=r,e[1]=t,e[2]=i,e[3]=n,e[4]=a,e[5]=o,e}function gC(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function oe(e,r){var t=r[0],i=r[1];return r[0]=e[0]*t+e[2]*i+e[4],r[1]=e[1]*t+e[3]*i+e[5],r}function mC(e,r,t){return pC(e,r,0,0,t,0,0)}function Si(e,r,t,i,n,a,o,s){var l=Math.sin(a),u=Math.cos(a);return e[0]=i*u,e[1]=n*l,e[2]=-i*l,e[3]=n*u,e[4]=o*i*u-s*i*l+r,e[5]=o*n*l+s*n*u+t,e}function Hc(e,r){var t=yC(r);ut(t!==0,32);var i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],l=r[5];return e[0]=o/t,e[1]=-n/t,e[2]=-a/t,e[3]=i/t,e[4]=(a*l-o*s)/t,e[5]=-(i*l-n*s)/t,e}function yC(e){return e[0]*e[3]-e[1]*e[2]}var om;function sm(e){var r="matrix("+e.join(", ")+")";if(qu)return r;var t=om||(om=document.createElement("div"));return t.style.transform=r,t.style.transform}var zs={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},pe={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function lm(e){for(var r=gr(),t=0,i=e.length;t<i;++t)Ks(r,e[t]);return r}function Bc(e,r,t){return t?(t[0]=e[0]-r,t[1]=e[1]-r,t[2]=e[2]+r,t[3]=e[3]+r,t):[e[0]-r,e[1]-r,e[2]+r,e[3]+r]}function um(e,r){return r?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r):e.slice()}function ra(e,r,t){var i,n;return r<e[0]?i=e[0]-r:e[2]<r?i=r-e[2]:i=0,t<e[1]?n=e[1]-t:e[3]<t?n=t-e[3]:n=0,i*i+n*n}function Ju(e,r){return Uc(e,r[0],r[1])}function ia(e,r){return e[0]<=r[0]&&r[2]<=e[2]&&e[1]<=r[1]&&r[3]<=e[3]}function Uc(e,r,t){return e[0]<=r&&r<=e[2]&&e[1]<=t&&t<=e[3]}function zc(e,r){var t=e[0],i=e[1],n=e[2],a=e[3],o=r[0],s=r[1],l=pe.UNKNOWN;return o<t?l=l|pe.LEFT:o>n&&(l=l|pe.RIGHT),s<i?l=l|pe.BELOW:s>a&&(l=l|pe.ABOVE),l===pe.UNKNOWN&&(l=pe.INTERSECTING),l}function gr(){return[1/0,1/0,-1/0,-1/0]}function xi(e,r,t,i,n){return n?(n[0]=e,n[1]=r,n[2]=t,n[3]=i,n):[e,r,t,i]}function Vs(e){return xi(1/0,1/0,-1/0,-1/0,e)}function _C(e,r){var t=e[0],i=e[1];return xi(t,i,t,i,r)}function hm(e,r,t,i,n){var a=Vs(n);return cm(a,e,r,t,i)}function Xs(e,r){return e[0]==r[0]&&e[2]==r[2]&&e[1]==r[1]&&e[3]==r[3]}function fm(e,r){return r[0]<e[0]&&(e[0]=r[0]),r[2]>e[2]&&(e[2]=r[2]),r[1]<e[1]&&(e[1]=r[1]),r[3]>e[3]&&(e[3]=r[3]),e}function Ks(e,r){r[0]<e[0]&&(e[0]=r[0]),r[0]>e[2]&&(e[2]=r[0]),r[1]<e[1]&&(e[1]=r[1]),r[1]>e[3]&&(e[3]=r[1])}function cm(e,r,t,i,n){for(;t<i;t+=n)wC(e,r[t],r[t+1]);return e}function wC(e,r,t){e[0]=Math.min(e[0],r),e[1]=Math.min(e[1],t),e[2]=Math.max(e[2],r),e[3]=Math.max(e[3],t)}function dm(e,r){var t;return t=r(Qu(e)),t||(t=r(th(e)),t)||(t=r(eh(e)),t)||(t=r(aa(e)),t)?t:!1}function Vc(e){var r=0;return Kc(e)||(r=Xt(e)*$r(e)),r}function Qu(e){return[e[0],e[1]]}function th(e){return[e[2],e[1]]}function na(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function bC(e,r){var t;return r===zs.BOTTOM_LEFT?t=Qu(e):r===zs.BOTTOM_RIGHT?t=th(e):r===zs.TOP_LEFT?t=aa(e):r===zs.TOP_RIGHT?t=eh(e):ut(!1,13),t}function Xc(e,r,t,i,n){var a=r*i[0]/2,o=r*i[1]/2,s=Math.cos(t),l=Math.sin(t),u=a*s,h=a*l,f=o*s,c=o*l,d=e[0],v=e[1],g=d-u+c,p=d-u-c,m=d+u-c,_=d+u+c,y=v-h-f,w=v-h+f,T=v+h+f,S=v+h-f;return xi(Math.min(g,p,m,_),Math.min(y,w,T,S),Math.max(g,p,m,_),Math.max(y,w,T,S),n)}function $r(e){return e[3]-e[1]}function Zs(e,r,t){var i=t||gr();return Je(e,r)?(e[0]>r[0]?i[0]=e[0]:i[0]=r[0],e[1]>r[1]?i[1]=e[1]:i[1]=r[1],e[2]<r[2]?i[2]=e[2]:i[2]=r[2],e[3]<r[3]?i[3]=e[3]:i[3]=r[3]):Vs(i),i}function aa(e){return[e[0],e[3]]}function eh(e){return[e[2],e[3]]}function Xt(e){return e[2]-e[0]}function Je(e,r){return e[0]<=r[2]&&e[2]>=r[0]&&e[1]<=r[3]&&e[3]>=r[1]}function Kc(e){return e[2]<e[0]||e[3]<e[1]}function TC(e,r){return r?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r):e}function EC(e,r,t){var i=!1,n=zc(e,r),a=zc(e,t);if(n===pe.INTERSECTING||a===pe.INTERSECTING)i=!0;else{var o=e[0],s=e[1],l=e[2],u=e[3],h=r[0],f=r[1],c=t[0],d=t[1],v=(d-f)/(c-h),g=void 0,p=void 0;!!(a&pe.ABOVE)&&!(n&pe.ABOVE)&&(g=c-(d-u)/v,i=g>=o&&g<=l),!i&&!!(a&pe.RIGHT)&&!(n&pe.RIGHT)&&(p=d-(c-l)*v,i=p>=s&&p<=u),!i&&!!(a&pe.BELOW)&&!(n&pe.BELOW)&&(g=c-(d-s)/v,i=g>=o&&g<=l),!i&&!!(a&pe.LEFT)&&!(n&pe.LEFT)&&(p=d-(c-o)*v,i=p>=s&&p<=u)}return i}function SC(e,r){var t=r.getExtent(),i=na(e);if(r.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){var n=Xt(t),a=Math.floor((i[0]-t[0])/n),o=a*n;e[0]-=o,e[2]-=o}return e}function Qt(e,r,t){return Math.min(Math.max(e,r),t)}var xC=function(){var e;return"cosh"in Math?e=Math.cosh:e=function(r){var t=Math.exp(r);return(t+1/t)/2},e}(),CC=function(){var e;return"log2"in Math?e=Math.log2:e=function(r){return Math.log(r)*Math.LOG2E},e}();function OC(e,r,t,i,n,a){var o=n-t,s=a-i;if(o!==0||s!==0){var l=((e-t)*o+(r-i)*s)/(o*o+s*s);l>1?(t=n,i=a):l>0&&(t+=o*l,i+=s*l)}return oa(e,r,t,i)}function oa(e,r,t,i){var n=t-e,a=i-r;return n*n+a*a}function IC(e){for(var r=e.length,t=0;t<r;t++){for(var i=t,n=Math.abs(e[t][t]),a=t+1;a<r;a++){var o=Math.abs(e[a][t]);o>n&&(n=o,i=a)}if(n===0)return null;var s=e[i];e[i]=e[t],e[t]=s;for(var l=t+1;l<r;l++)for(var u=-e[l][t]/e[t][t],h=t;h<r+1;h++)t==h?e[l][h]=0:e[l][h]+=u*e[t][h]}for(var f=new Array(r),c=r-1;c>=0;c--){f[c]=e[c][r]/e[c][c];for(var d=c-1;d>=0;d--)e[d][r]-=e[d][c]*f[c]}return f}function rh(e){return e*Math.PI/180}function gn(e,r){var t=e%r;return t*r<0?t+r:t}function Ci(e,r,t){return e+t*(r-e)}var PC=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,kC=/^([a-z]*)$|^hsla?\(.*\)$/i;function vm(e){return typeof e=="string"?e:mm(e)}function RC(e){var r=document.createElement("div");if(r.style.color=e,r.style.color!==""){document.body.appendChild(r);var t=getComputedStyle(r).color;return document.body.removeChild(r),t}else return""}var DC=function(){var e=1024,r={},t=0;return function(i){var n;if(r.hasOwnProperty(i))n=r[i];else{if(t>=e){var a=0;for(var o in r)(a++&3)==0&&(delete r[o],--t)}n=AC(i),r[i]=n,++t}return n}}();function pm(e){return Array.isArray(e)?e:DC(e)}function AC(e){var r,t,i,n,a;if(kC.exec(e)&&(e=RC(e)),PC.exec(e)){var o=e.length-1,s=void 0;o<=4?s=1:s=2;var l=o===4||o===8;r=parseInt(e.substr(1+0*s,s),16),t=parseInt(e.substr(1+1*s,s),16),i=parseInt(e.substr(1+2*s,s),16),l?n=parseInt(e.substr(1+3*s,s),16):n=255,s==1&&(r=(r<<4)+r,t=(t<<4)+t,i=(i<<4)+i,l&&(n=(n<<4)+n)),a=[r,t,i,n/255]}else e.indexOf("rgba(")==0?(a=e.slice(5,-1).split(",").map(Number),gm(a)):e.indexOf("rgb(")==0?(a=e.slice(4,-1).split(",").map(Number),a.push(1),gm(a)):ut(!1,14);return a}function gm(e){return e[0]=Qt(e[0]+.5|0,0,255),e[1]=Qt(e[1]+.5|0,0,255),e[2]=Qt(e[2]+.5|0,0,255),e[3]=Qt(e[3],0,1),e}function mm(e){var r=e[0];r!=(r|0)&&(r=r+.5|0);var t=e[1];t!=(t|0)&&(t=t+.5|0);var i=e[2];i!=(i|0)&&(i=i+.5|0);var n=e[3]===void 0?1:e[3];return"rgba("+r+","+t+","+i+","+n+")"}var MC=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var r=0;for(var t in this.cache_){var i=this.cache_[t];(r++&3)==0&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}},e.prototype.get=function(r,t,i){var n=ym(r,t,i);return n in this.cache_?this.cache_[n]:null},e.prototype.set=function(r,t,i,n){var a=ym(r,t,i);this.cache_[a]=n,++this.cacheSize_},e.prototype.setSize=function(r){this.maxCacheSize_=r,this.expire()},e}();function ym(e,r,t){var i=t?vm(t):"null";return r+":"+e+":"+i}var ih=new MC,Dt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"},LC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),FC=function(e){LC(r,e);function r(t){var i=e.call(this)||this;i.on,i.once,i.un;var n=ae({},t);return typeof t.properties=="object"&&(delete n.properties,ae(n,t.properties)),n[Dt.OPACITY]=t.opacity!==void 0?t.opacity:1,ut(typeof n[Dt.OPACITY]=="number",64),n[Dt.VISIBLE]=t.visible!==void 0?t.visible:!0,n[Dt.Z_INDEX]=t.zIndex,n[Dt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,n[Dt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,n[Dt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,n[Dt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,i.className_=n.className!==void 0?t.className:"ol-layer",delete n.className,i.setProperties(n),i.state_=null,i}return r.prototype.getClassName=function(){return this.className_},r.prototype.getLayerState=function(t){var i=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return i.opacity=Qt(Math.round(this.getOpacity()*100)/100,0,1),i.sourceState=this.getSourceState(),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=n===void 0&&!i.managed?1/0:n,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i},r.prototype.getLayersArray=function(t){return K()},r.prototype.getLayerStatesArray=function(t){return K()},r.prototype.getExtent=function(){return this.get(Dt.EXTENT)},r.prototype.getMaxResolution=function(){return this.get(Dt.MAX_RESOLUTION)},r.prototype.getMinResolution=function(){return this.get(Dt.MIN_RESOLUTION)},r.prototype.getMinZoom=function(){return this.get(Dt.MIN_ZOOM)},r.prototype.getMaxZoom=function(){return this.get(Dt.MAX_ZOOM)},r.prototype.getOpacity=function(){return this.get(Dt.OPACITY)},r.prototype.getSourceState=function(){return K()},r.prototype.getVisible=function(){return this.get(Dt.VISIBLE)},r.prototype.getZIndex=function(){return this.get(Dt.Z_INDEX)},r.prototype.setExtent=function(t){this.set(Dt.EXTENT,t)},r.prototype.setMaxResolution=function(t){this.set(Dt.MAX_RESOLUTION,t)},r.prototype.setMinResolution=function(t){this.set(Dt.MIN_RESOLUTION,t)},r.prototype.setMaxZoom=function(t){this.set(Dt.MAX_ZOOM,t)},r.prototype.setMinZoom=function(t){this.set(Dt.MIN_ZOOM,t)},r.prototype.setOpacity=function(t){ut(typeof t=="number",64),this.set(Dt.OPACITY,t)},r.prototype.setVisible=function(t){this.set(Dt.VISIBLE,t)},r.prototype.setZIndex=function(t){this.set(Dt.Z_INDEX,t)},r.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),e.prototype.disposeInternal.call(this)},r}(Nr),_m=FC,sa={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},la={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},NC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$C=function(e){NC(r,e);function r(t){var i=this,n=ae({},t);delete n.source,i=e.call(this,n)||this,i.on,i.once,i.un,i.mapPrecomposeKey_=null,i.mapRenderKey_=null,i.sourceChangeKey_=null,i.renderer_=null,t.render&&(i.render=t.render),t.map&&i.setMap(t.map),i.addChangeListener(Dt.SOURCE,i.handleSourcePropertyChange_);var a=t.source?t.source:null;return i.setSource(a),i}return r.prototype.getLayersArray=function(t){var i=t||[];return i.push(this),i},r.prototype.getLayerStatesArray=function(t){var i=t||[];return i.push(this.getLayerState()),i},r.prototype.getSource=function(){return this.get(Dt.SOURCE)||null},r.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():la.UNDEFINED},r.prototype.handleSourceChange_=function(){this.changed()},r.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Mt(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=yt(t,Q.CHANGE,this.handleSourceChange_,this)),this.changed()},r.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(i){return i([])})},r.prototype.render=function(t,i){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,i)},r.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Mt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Mt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=yt(t,sa.PRECOMPOSE,function(i){var n=i,a=n.frameState.layerStatesArray,o=this.getLayerState(!1);ut(!a.some(function(s){return s.layer===o.layer}),67),a.push(o)},this),this.mapRenderKey_=yt(this,Q.CHANGE,t.render,t),this.changed())},r.prototype.setSource=function(t){this.set(Dt.SOURCE,t)},r.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},r.prototype.hasRenderer=function(){return!!this.renderer_},r.prototype.createRenderer=function(){return null},r.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),e.prototype.disposeInternal.call(this)},r}(_m);function nh(e,r){if(!e.visible)return!1;var t=r.resolution;if(t<e.minResolution||t>=e.maxResolution)return!1;var i=r.zoom;return i>e.minZoom&&i<=e.maxZoom}var wm=$C;function bm(e,r,t){var i=t!==void 0?e.toFixed(t):""+e,n=i.indexOf(".");return n=n===-1?i.length:n,n>r?i:new Array(1+r-n).join("0")+i}function GC(e,r){return e[0]+=+r[0],e[1]+=+r[1],e}function Tm(e,r,t){var i=gn(r+180,360)-180,n=Math.abs(3600*i),a=t||0,o=Math.pow(10,a),s=Math.floor(n/3600),l=Math.floor((n-s*3600)/60),u=n-s*3600-l*60;return u=Math.ceil(u*o)/o,u>=60&&(u=0,l+=1),l>=60&&(l=0,s+=1),s+"\xB0 "+bm(l,2)+"\u2032 "+bm(u,2,a)+"\u2033"+(i==0?"":" "+e.charAt(i<0?1:0))}function Zc(e,r){for(var t=!0,i=e.length-1;i>=0;--i)if(e[i]!=r[i]){t=!1;break}return t}function qc(e,r){var t=Math.cos(r),i=Math.sin(r),n=e[0]*t-e[1]*i,a=e[1]*t+e[0]*i;return e[0]=n,e[1]=a,e}function YC(e,r){return e[0]*=r,e[1]*=r,e}function X6(e,r){return e?Tm("NS",e[1],r)+" "+Tm("EW",e[0],r):""}function Em(e,r){if(r.canWrapX()){var t=Xt(r.getExtent()),i=jC(e,r,t);i&&(e[0]-=i*t)}return e}function jC(e,r,t){var i=r.getExtent(),n=0;if(r.canWrapX()&&(e[0]<i[0]||e[0]>i[2])){var a=t||Xt(i);n=Math.floor((e[0]-i[0])/a)}return n}var WC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),HC=function(e){WC(r,e);function r(t){var i=e.call(this)||this;return i.map_=t,i}return r.prototype.dispatchRenderEvent=function(t,i){K()},r.prototype.calculateMatrices2D=function(t){var i=t.viewState,n=t.coordinateToPixelTransform,a=t.pixelToCoordinateTransform;Si(n,t.size[0]/2,t.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),Hc(a,n)},r.prototype.forEachFeatureAtCoordinate=function(t,i,n,a,o,s,l,u){var h,f=i.viewState;function c(W,z,B,k){return o.call(s,z,W?B:null,k)}var d=f.projection,v=Em(t.slice(),d),g=[[0,0]];if(d.canWrapX()&&a){var p=d.getExtent(),m=Xt(p);g.push([-m,0],[m,0])}for(var _=i.layerStatesArray,y=_.length,w=[],T=[],S=0;S<g.length;S++)for(var x=y-1;x>=0;--x){var E=_[x],I=E.layer;if(I.hasRenderer()&&nh(E,f)&&l.call(u,I)){var A=I.getRenderer(),P=I.getSource();if(A&&P){var D=P.getWrapX()?v:t,N=c.bind(null,E.managed);T[0]=D[0]+g[S][0],T[1]=D[1]+g[S][1],h=A.forEachFeatureAtCoordinate(T,i,n,N,w)}if(h)return h}}if(w.length!==0){var j=1/w.length;return w.forEach(function(W,z){return W.distanceSq+=z*j}),w.sort(function(W,z){return W.distanceSq-z.distanceSq}),w.some(function(W){return h=W.callback(W.feature,W.layer,W.geometry)}),h}},r.prototype.forEachLayerAtPixel=function(t,i,n,a,o){return K()},r.prototype.hasFeatureAtCoordinate=function(t,i,n,a,o,s){var l=this.forEachFeatureAtCoordinate(t,i,n,a,wo,this,o,s);return l!==void 0},r.prototype.getMap=function(){return this.map_},r.prototype.renderFrame=function(t){K()},r.prototype.scheduleExpireIconCache=function(t){ih.canExpireCache()&&t.postRenderFunctions.push(BC)},r}(jc);function BC(e,r){ih.expire()}var UC=HC,zC=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),VC=function(e){zC(r,e);function r(t,i,n,a){var o=e.call(this,t)||this;return o.inversePixelTransform=i,o.frameState=n,o.context=a,o}return r}(pn),Sm=VC,ah="ol-hidden",XC="ol-selectable",oh="ol-unselectable",Jc="ol-control",xm="ol-collapsed",KC=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Cm=["style","variant","weight","size","lineHeight","family"],Om=function(e){var r=e.match(KC);if(!r)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},i=0,n=Cm.length;i<n;++i){var a=r[i+1];a!==void 0&&(t[Cm[i]]=a)}return t.families=t.family.split(/,\s?/),t};function Qc(e){return e===1?"":String(Math.round(e*100)/100)}function mr(e,r,t,i){var n;return t&&t.length?n=t.shift():qu?n=new OffscreenCanvas(e||300,r||300):(n=document.createElement("canvas"),n.style.all="unset"),e&&(n.width=e),r&&(n.height=r),n.getContext("2d",i)}function ZC(e){var r=e.offsetWidth,t=getComputedStyle(e);return r+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),r}function qC(e){var r=e.offsetHeight,t=getComputedStyle(e);return r+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),r}function Im(e,r){var t=r.parentNode;t&&t.replaceChild(e,r)}function sh(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function Pm(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function JC(e,r){for(var t=e.childNodes,i=0;;++i){var n=t[i],a=r[i];if(!n&&!a)break;if(n!==a){if(!n){e.appendChild(a);continue}if(!a){e.removeChild(n),--i;continue}e.insertBefore(a,n)}}}var km="10px sans-serif",Oi="#000",lh="round",qs=[],Js=0,So="round",Qs=10,tl="#000",el="center",uh="middle",ua=[0,0,0,0],rl=1,Ii=new Nr,QC=new To;QC.setSize=function(){console.warn("labelCache is deprecated.")};var xo=null,td,ed={},tO=function(){var e=100,r="32px ",t=["monospace","serif"],i=t.length,n="wmytzilWMYTZIL@#/&?$%10\uF013",a,o;function s(u,h,f){for(var c=!0,d=0;d<i;++d){var v=t[d];if(o=hh(u+" "+h+" "+r+v,n),f!=v){var g=hh(u+" "+h+" "+r+f+","+v,n);c=c&&g!=o}}return!!c}function l(){for(var u=!0,h=Ii.getKeys(),f=0,c=h.length;f<c;++f){var d=h[f];Ii.get(d)<e&&(s.apply(this,d.split(`
`))?(Us(ed),xo=null,td=void 0,Ii.set(d,e)):(Ii.set(d,Ii.get(d)+1,!0),u=!1))}u&&(clearInterval(a),a=void 0)}return function(u){var h=Om(u);if(!!h)for(var f=h.families,c=0,d=f.length;c<d;++c){var v=f[c],g=h.style+`
`+h.weight+`
`+v;Ii.get(g)===void 0&&(Ii.set(g,e,!0),s(h.style,h.weight,v)||(Ii.set(g,0,!0),a===void 0&&(a=setInterval(l,32))))}}}(),eO=function(){var e;return function(r){var t=ed[r];if(t==null){if(qu){var i=Om(r),n=Rm(r,"\u017Dg"),a=isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight);t=a*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=r,document.body.appendChild(e),t=e.offsetHeight,document.body.removeChild(e);ed[r]=t}return t}}();function Rm(e,r){return xo||(xo=mr(1,1)),e!=td&&(xo.font=e,td=xo.font),xo.measureText(r)}function hh(e,r){return Rm(e,r).width}function Dm(e,r,t){if(r in t)return t[r];var i=hh(e,r);return t[r]=i,i}function rO(e,r,t){for(var i=r.length,n=0,a=0;a<i;++a){var o=hh(e,r[a]);n=Math.max(n,o),t.push(o)}return n}function iO(e,r,t,i,n,a,o,s,l,u,h){e.save(),t!==1&&(e.globalAlpha*=t),r&&e.setTransform.apply(e,r),i.contextInstructions?(e.translate(l,u),e.scale(h[0],h[1]),nO(i,e)):h[0]<0||h[1]<0?(e.translate(l,u),e.scale(h[0],h[1]),e.drawImage(i,n,a,o,s,0,0,o,s)):e.drawImage(i,n,a,o,s,l,u,o*h[0],s*h[1]),e.restore()}function nO(e,r){for(var t=e.contextInstructions,i=0,n=t.length;i<n;i+=2)Array.isArray(t[i+1])?r[t[i]].apply(r,t[i+1]):r[t[i]]=t[i+1]}var aO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),oO=function(e){aO(r,e);function r(t){var i=e.call(this,t)||this;i.fontChangeListenerKey_=yt(Ii,Qn.PROPERTYCHANGE,t.redrawText.bind(t)),i.element_=document.createElement("div");var n=i.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",i.element_.className=oh+" ol-layers";var a=t.getViewport();return a.insertBefore(i.element_,a.firstChild||null),i.children_=[],i.renderedVisible_=!0,i}return r.prototype.dispatchRenderEvent=function(t,i){var n=this.getMap();if(n.hasListener(t)){var a=new Sm(t,void 0,i);n.dispatchEvent(a)}},r.prototype.disposeInternal=function(){Mt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},r.prototype.renderFrame=function(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(sa.PRECOMPOSE,t);var i=t.layerStatesArray.sort(function(c,d){return c.zIndex-d.zIndex}),n=t.viewState;this.children_.length=0;for(var a=[],o=null,s=0,l=i.length;s<l;++s){var u=i[s];if(t.layerIndex=s,!(!nh(u,n)||u.sourceState!=la.READY&&u.sourceState!=la.UNDEFINED)){var h=u.layer,f=h.render(t,o);!f||(f!==o&&(this.children_.push(f),o=f),"getDeclutter"in h&&a.push(h))}}for(var s=a.length-1;s>=0;--s)a[s].renderDeclutter(t);JC(this.element_,this.children_),this.dispatchRenderEvent(sa.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)},r.prototype.forEachLayerAtPixel=function(t,i,n,a,o){for(var s=i.viewState,l=i.layerStatesArray,u=l.length,h=u-1;h>=0;--h){var f=l[h],c=f.layer;if(c.hasRenderer()&&nh(f,s)&&o(c)){var d=c.getRenderer(),v=d.getDataAtPixel(t,i,n);if(v){var g=a(c,v);if(g)return g}}}},r}(UC),sO=oO,Ge={ADD:"add",REMOVE:"remove"},Am=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Mm={LENGTH:"length"},fh=function(e){Am(r,e);function r(t,i,n){var a=e.call(this,t)||this;return a.element=i,a.index=n,a}return r}(pn),lO=function(e){Am(r,e);function r(t,i){var n=e.call(this)||this;n.on,n.once,n.un;var a=i||{};if(n.unique_=!!a.unique,n.array_=t||[],n.unique_)for(var o=0,s=n.array_.length;o<s;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return r.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},r.prototype.extend=function(t){for(var i=0,n=t.length;i<n;++i)this.push(t[i]);return this},r.prototype.forEach=function(t){for(var i=this.array_,n=0,a=i.length;n<a;++n)t(i[n],n,i)},r.prototype.getArray=function(){return this.array_},r.prototype.item=function(t){return this.array_[t]},r.prototype.getLength=function(){return this.get(Mm.LENGTH)},r.prototype.insertAt=function(t,i){this.unique_&&this.assertUnique_(i),this.array_.splice(t,0,i),this.updateLength_(),this.dispatchEvent(new fh(Ge.ADD,i,t))},r.prototype.pop=function(){return this.removeAt(this.getLength()-1)},r.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var i=this.getLength();return this.insertAt(i,t),this.getLength()},r.prototype.remove=function(t){for(var i=this.array_,n=0,a=i.length;n<a;++n)if(i[n]===t)return this.removeAt(n)},r.prototype.removeAt=function(t){var i=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new fh(Ge.REMOVE,i,t)),i},r.prototype.setAt=function(t,i){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(i,t);var a=this.array_[t];this.array_[t]=i,this.dispatchEvent(new fh(Ge.REMOVE,a,t)),this.dispatchEvent(new fh(Ge.ADD,i,t))}else{for(var o=n;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,i)}},r.prototype.updateLength_=function(){this.set(Mm.LENGTH,this.array_.length)},r.prototype.assertUnique_=function(t,i){for(var n=0,a=this.array_.length;n<a;++n)if(this.array_[n]===t&&n!==i)throw new im(58)},r}(Nr),yr=lO,uO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rd={LAYERS:"layers"},hO=function(e){uO(r,e);function r(t){var i=this,n=t||{},a=ae({},n);delete a.layers;var o=n.layers;return i=e.call(this,a)||this,i.on,i.once,i.un,i.layersListenerKeys_=[],i.listenerKeys_={},i.addChangeListener(rd.LAYERS,i.handleLayersChanged_),o?Array.isArray(o)?o=new yr(o.slice(),{unique:!0}):ut(typeof o.getArray=="function",43):o=new yr(void 0,{unique:!0}),i.setLayers(o),i}return r.prototype.handleLayerChange_=function(){this.changed()},r.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Mt),this.layersListenerKeys_.length=0;var t=this.getLayers();this.layersListenerKeys_.push(yt(t,Ge.ADD,this.handleLayersAdd_,this),yt(t,Ge.REMOVE,this.handleLayersRemove_,this));for(var i in this.listenerKeys_)this.listenerKeys_[i].forEach(Mt);Us(this.listenerKeys_);for(var n=t.getArray(),a=0,o=n.length;a<o;a++){var s=n[a];this.listenerKeys_[bt(s)]=[yt(s,Qn.PROPERTYCHANGE,this.handleLayerChange_,this),yt(s,Q.CHANGE,this.handleLayerChange_,this)]}this.changed()},r.prototype.handleLayersAdd_=function(t){var i=t.element;this.listenerKeys_[bt(i)]=[yt(i,Qn.PROPERTYCHANGE,this.handleLayerChange_,this),yt(i,Q.CHANGE,this.handleLayerChange_,this)],this.changed()},r.prototype.handleLayersRemove_=function(t){var i=t.element,n=bt(i);this.listenerKeys_[n].forEach(Mt),delete this.listenerKeys_[n],this.changed()},r.prototype.getLayers=function(){return this.get(rd.LAYERS)},r.prototype.setLayers=function(t){this.set(rd.LAYERS,t)},r.prototype.getLayersArray=function(t){var i=t!==void 0?t:[];return this.getLayers().forEach(function(n){n.getLayersArray(i)}),i},r.prototype.getLayerStatesArray=function(t){var i=t!==void 0?t:[],n=i.length;this.getLayers().forEach(function(h){h.getLayerStatesArray(i)});var a=this.getLayerState(),o=a.zIndex;!t&&a.zIndex===void 0&&(o=0);for(var s=n,l=i.length;s<l;s++){var u=i[s];u.opacity*=a.opacity,u.visible=u.visible&&a.visible,u.maxResolution=Math.min(u.maxResolution,a.maxResolution),u.minResolution=Math.max(u.minResolution,a.minResolution),u.minZoom=Math.max(u.minZoom,a.minZoom),u.maxZoom=Math.min(u.maxZoom,a.maxZoom),a.extent!==void 0&&(u.extent!==void 0?u.extent=Zs(u.extent,a.extent):u.extent=a.extent),u.zIndex===void 0&&(u.zIndex=o)}return i},r.prototype.getSourceState=function(){return la.READY},r}(_m),fO=hO,cO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),dO=function(e){cO(r,e);function r(t,i,n){var a=e.call(this,t)||this;return a.map=i,a.frameState=n!==void 0?n:null,a}return r}(pn),ch=dO,vO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),pO=function(e){vO(r,e);function r(t,i,n,a,o){var s=e.call(this,t,i,o)||this;return s.originalEvent=n,s.pixel_=null,s.coordinate_=null,s.dragging=a!==void 0?a:!1,s}return Object.defineProperty(r.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),r.prototype.preventDefault=function(){e.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){e.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},r}(ch),mn=pO,$t={SINGLECLICK:"singleclick",CLICK:Q.CLICK,DBLCLICK:Q.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},id={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},gO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),mO=function(e){gO(r,e);function r(t,i){var n=e.call(this,t)||this;n.map_=t,n.clickTimeoutId_,n.emulateClicks_=!1,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=i===void 0?1:i,n.down_=null;var a=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=a,n.pointerdownListenerKey_=yt(a,id.POINTERDOWN,n.handlePointerDown_,n),n.originalPointerMoveEvent_,n.relayedListenerKey_=yt(a,id.POINTERMOVE,n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(Q.TOUCHMOVE,n.boundHandleTouchMove_,am?{passive:!1}:!1),n}return r.prototype.emulateClick_=function(t){var i=new mn($t.CLICK,this.map_,t);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new mn($t.DBLCLICK,this.map_,t),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var n=new mn($t.SINGLECLICK,this.map_,t);this.dispatchEvent(n)}.bind(this),250)},r.prototype.updateActivePointers_=function(t){var i=t;i.type==$t.POINTERUP||i.type==$t.POINTERCANCEL?delete this.trackedTouches_[i.pointerId]:i.type==$t.POINTERDOWN&&(this.trackedTouches_[i.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},r.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var i=new mn($t.POINTERUP,this.map_,t);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_===0&&(this.dragListenerKeys_.forEach(Mt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},r.prototype.isMouseActionButton_=function(t){return t.button===0},r.prototype.handlePointerDown_=function(t){this.emulateClicks_=this.activePointers_===0,this.updateActivePointers_(t);var i=new mn($t.POINTERDOWN,this.map_,t);this.dispatchEvent(i),this.down_={};for(var n in t){var a=t[n];this.down_[n]=typeof a=="function"?ea:a}if(this.dragListenerKeys_.length===0){var o=this.map_.getOwnerDocument();this.dragListenerKeys_.push(yt(o,$t.POINTERMOVE,this.handlePointerMove_,this),yt(o,$t.POINTERUP,this.handlePointerUp_,this),yt(this.element_,$t.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==o&&this.dragListenerKeys_.push(yt(this.element_.getRootNode(),$t.POINTERUP,this.handlePointerUp_,this))}},r.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var i=new mn($t.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(i)}},r.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var i=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new mn(t.type,this.map_,t,i))},r.prototype.handleTouchMove_=function(t){var i=this.originalPointerMoveEvent_;(!i||i.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()},r.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},r.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Mt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Q.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Mt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Mt),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},r}(To),yO=mO,il={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"},be={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},dh=1/0,_O=function(){function e(r,t){this.priorityFunction_=r,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return e.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Us(this.queuedElements_)},e.prototype.dequeue=function(){var r=this.elements_,t=this.priorities_,i=r[0];r.length==1?(r.length=0,t.length=0):(r[0]=r.pop(),t[0]=t.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},e.prototype.enqueue=function(r){ut(!(this.keyFunction_(r)in this.queuedElements_),31);var t=this.priorityFunction_(r);return t!=dh?(this.elements_.push(r),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(r)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},e.prototype.getCount=function(){return this.elements_.length},e.prototype.getLeftChildIndex_=function(r){return r*2+1},e.prototype.getRightChildIndex_=function(r){return r*2+2},e.prototype.getParentIndex_=function(r){return r-1>>1},e.prototype.heapify_=function(){var r;for(r=(this.elements_.length>>1)-1;r>=0;r--)this.siftUp_(r)},e.prototype.isEmpty=function(){return this.elements_.length===0},e.prototype.isKeyQueued=function(r){return r in this.queuedElements_},e.prototype.isQueued=function(r){return this.isKeyQueued(this.keyFunction_(r))},e.prototype.siftUp_=function(r){for(var t=this.elements_,i=this.priorities_,n=t.length,a=t[r],o=i[r],s=r;r<n>>1;){var l=this.getLeftChildIndex_(r),u=this.getRightChildIndex_(r),h=u<n&&i[u]<i[l]?u:l;t[r]=t[h],i[r]=i[h],r=h}t[r]=a,i[r]=o,this.siftDown_(s,r)},e.prototype.siftDown_=function(r,t){for(var i=this.elements_,n=this.priorities_,a=i[t],o=n[t];t>r;){var s=this.getParentIndex_(t);if(n[s]>o)i[t]=i[s],n[t]=n[s],t=s;else break}i[t]=a,n[t]=o},e.prototype.reprioritize=function(){var r=this.priorityFunction_,t=this.elements_,i=this.priorities_,n=0,a=t.length,o,s,l;for(s=0;s<a;++s)o=t[s],l=r(o),l==dh?delete this.queuedElements_[this.keyFunction_(o)]:(i[n]=l,t[n++]=o);t.length=n,i.length=n,this.heapify_()},e}(),wO=_O,q={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},bO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),TO=function(e){bO(r,e);function r(t,i){var n=e.call(this,function(a){return t.apply(null,a)},function(a){return a[0].getKey()})||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=i,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return r.prototype.enqueue=function(t){var i=e.prototype.enqueue.call(this,t);if(i){var n=t[0];n.addEventListener(Q.CHANGE,this.boundHandleTileChange_)}return i},r.prototype.getTilesLoading=function(){return this.tilesLoading_},r.prototype.handleTileChange=function(t){var i=t.target,n=i.getState();if(n===q.LOADED||n===q.ERROR||n===q.EMPTY){i.removeEventListener(Q.CHANGE,this.boundHandleTileChange_);var a=i.getKey();a in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[a],--this.tilesLoading_),this.tileChangeCallback_()}},r.prototype.loadMoreTiles=function(t,i){for(var n=0,a,o,s;this.tilesLoading_<t&&n<i&&this.getCount()>0;)o=this.dequeue()[0],s=o.getKey(),a=o.getState(),a===q.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++n,o.load())},r}(wO),EO=TO;function SO(e,r,t,i,n){if(!e||!(t in e.wantedTiles)||!e.wantedTiles[t][r.getKey()])return dh;var a=e.viewState.center,o=i[0]-a[0],s=i[1]-a[1];return 65536*Math.log(n)+Math.sqrt(o*o+s*s)/n}var H={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Co={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Jr={};Jr[Co.RADIANS]=6370997/(2*Math.PI);Jr[Co.DEGREES]=2*Math.PI*6370997/360;Jr[Co.FEET]=.3048;Jr[Co.METERS]=1;Jr[Co.USFEET]=1200/3937;var Pi=Co,Te={ANIMATING:0,INTERACTING:1},Qr={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},xO=42,nd=256,CO=function(){function e(r){this.code_=r.code,this.units_=r.units,this.extent_=r.extent!==void 0?r.extent:null,this.worldExtent_=r.worldExtent!==void 0?r.worldExtent:null,this.axisOrientation_=r.axisOrientation!==void 0?r.axisOrientation:"enu",this.global_=r.global!==void 0?r.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=r.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=r.metersPerUnit}return e.prototype.canWrapX=function(){return this.canWrapX_},e.prototype.getCode=function(){return this.code_},e.prototype.getExtent=function(){return this.extent_},e.prototype.getUnits=function(){return this.units_},e.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Jr[this.units_]},e.prototype.getWorldExtent=function(){return this.worldExtent_},e.prototype.getAxisOrientation=function(){return this.axisOrientation_},e.prototype.isGlobal=function(){return this.global_},e.prototype.setGlobal=function(r){this.global_=r,this.canWrapX_=!!(r&&this.extent_)},e.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},e.prototype.setDefaultTileGrid=function(r){this.defaultTileGrid_=r},e.prototype.setExtent=function(r){this.extent_=r,this.canWrapX_=!!(this.global_&&r)},e.prototype.setWorldExtent=function(r){this.worldExtent_=r},e.prototype.setGetPointResolution=function(r){this.getPointResolutionFunc_=r},e.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e}(),Lm=CO,OO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),nl=6378137,Oo=Math.PI*nl,IO=[-Oo,-Oo,Oo,Oo],PO=[-180,-85,180,85],vh=nl*Math.log(Math.tan(Math.PI/2)),Io=function(e){OO(r,e);function r(t){return e.call(this,{code:t,units:Pi.METERS,extent:IO,global:!0,worldExtent:PO,getPointResolution:function(i,n){return i/xC(n[1]/nl)}})||this}return r}(Lm),Fm=[new Io("EPSG:3857"),new Io("EPSG:102100"),new Io("EPSG:102113"),new Io("EPSG:900913"),new Io("http://www.opengis.net/def/crs/EPSG/0/3857"),new Io("http://www.opengis.net/gml/srs/epsg.xml#3857")];function kO(e,r,t){var i=e.length,n=t>1?t:2,a=r;a===void 0&&(n>2?a=e.slice():a=new Array(i));for(var o=0;o<i;o+=n){a[o]=Oo*e[o]/180;var s=nl*Math.log(Math.tan(Math.PI*(+e[o+1]+90)/360));s>vh?s=vh:s<-vh&&(s=-vh),a[o+1]=s}return a}function RO(e,r,t){var i=e.length,n=t>1?t:2,a=r;a===void 0&&(n>2?a=e.slice():a=new Array(i));for(var o=0;o<i;o+=n)a[o]=180*e[o]/Oo,a[o+1]=360*Math.atan(Math.exp(e[o+1]/nl))/Math.PI-90;return a}var DO=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),AO=6378137,Nm=[-180,-90,180,90],MO=Math.PI*AO/180,ha=function(e){DO(r,e);function r(t,i){return e.call(this,{code:t,units:Pi.DEGREES,extent:Nm,axisOrientation:i,global:!0,metersPerUnit:MO,worldExtent:Nm})||this}return r}(Lm),$m=[new ha("CRS:84"),new ha("EPSG:4326","neu"),new ha("urn:ogc:def:crs:OGC:1.3:CRS84"),new ha("urn:ogc:def:crs:OGC:2:84"),new ha("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new ha("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ha("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],ad={};function LO(e){return ad[e]||ad[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function FO(e,r){ad[e]=r}var Po={};function ph(e,r,t){var i=e.getCode(),n=r.getCode();i in Po||(Po[i]={}),Po[i][n]=t}function NO(e,r){var t;return e in Po&&r in Po[e]&&(t=Po[e][r]),t}var $O=63710088e-1;function Gm(e,r,t){var i=t||$O,n=rh(e[1]),a=rh(r[1]),o=(a-n)/2,s=rh(r[0]-e[0])/2,l=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(n)*Math.cos(a);return 2*i*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function od(e,r,t){var i;if(r!==void 0){for(var n=0,a=e.length;n<a;++n)r[n]=e[n];i=r}else i=e.slice();return i}function Ym(e,r,t){if(r!==void 0&&e!==r){for(var i=0,n=e.length;i<n;++i)r[i]=e[i];e=r}return e}function GO(e){FO(e.getCode(),e),ph(e,e,od)}function YO(e){e.forEach(GO)}function se(e){return typeof e=="string"?LO(e):e||null}function jm(e,r,t,i){e=se(e);var n,a=e.getPointResolutionFunc();if(a){if(n=a(r,t),i&&i!==e.getUnits()){var o=e.getMetersPerUnit();o&&(n=n*o/Jr[i])}}else{var s=e.getUnits();if(s==Pi.DEGREES&&!i||i==Pi.DEGREES)n=r;else{var l=ld(e,se("EPSG:4326"));if(l===Ym&&s!==Pi.DEGREES)n=r*e.getMetersPerUnit();else{var u=[t[0]-r/2,t[1],t[0]+r/2,t[1],t[0],t[1]-r/2,t[0],t[1]+r/2];u=l(u,u,2);var h=Gm(u.slice(0,2),u.slice(2,4)),f=Gm(u.slice(4,6),u.slice(6,8));n=(h+f)/2}var o=i?Jr[i]:e.getMetersPerUnit();o!==void 0&&(n/=o)}}return n}function Wm(e){YO(e),e.forEach(function(r){e.forEach(function(t){r!==t&&ph(r,t,od)})})}function jO(e,r,t,i){e.forEach(function(n){r.forEach(function(a){ph(n,a,t),ph(a,n,i)})})}function sd(e,r){return e?typeof e=="string"?se(e):e:se(r)}function K6(e,r){var t=Hm(e,r!==void 0?r:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=gn(i+180,360)-180),t}function fa(e,r){if(e===r)return!0;var t=e.getUnits()===r.getUnits();if(e.getCode()===r.getCode())return t;var i=ld(e,r);return i===od&&t}function ld(e,r){var t=e.getCode(),i=r.getCode(),n=NO(t,i);return n||(n=Ym),n}function gh(e,r){var t=se(e),i=se(r);return ld(t,i)}function Hm(e,r,t){var i=gh(r,t);return i(e,void 0,e.length)}var WO=null;function HO(){return WO}function ud(e,r){return e}function ki(e,r){return e}function Bm(e,r){return e}function ca(e,r){return e}function BO(){Wm(Fm),Wm($m),jO($m,Fm,kO,RO)}BO();function Um(e,r,t){return function(i,n,a,o,s){if(i){var l=r?0:a[0]*n,u=r?0:a[1]*n,h=s?s[0]:0,f=s?s[1]:0,c=e[0]+l/2+h,d=e[2]-l/2+h,v=e[1]+u/2+f,g=e[3]-u/2+f;c>d&&(c=(d+c)/2,d=c),v>g&&(v=(g+v)/2,g=v);var p=Qt(i[0],c,d),m=Qt(i[1],v,g),_=30*n;return o&&t&&(p+=-_*Math.log(1+Math.max(0,c-i[0])/_)+_*Math.log(1+Math.max(0,i[0]-d)/_),m+=-_*Math.log(1+Math.max(0,v-i[1])/_)+_*Math.log(1+Math.max(0,i[1]-g)/_)),[p,m]}else return}}function UO(e){return e}function hd(e,r,t,i){var n=Xt(r)/t[0],a=$r(r)/t[1];return i?Math.min(e,Math.max(n,a)):Math.min(e,Math.min(n,a))}function fd(e,r,t){var i=Math.min(e,r),n=50;return i*=Math.log(1+n*Math.max(0,e/r-1))/n+1,t&&(i=Math.max(i,t),i/=Math.log(1+n*Math.max(0,t/e-1))/n+1),Qt(i,t/2,r*2)}function zO(e,r,t,i){return function(n,a,o,s){if(n!==void 0){var l=e[0],u=e[e.length-1],h=t?hd(l,t,o,i):l;if(s){var f=r!==void 0?r:!0;return f?fd(n,h,u):Qt(n,u,h)}var c=Math.min(h,n),d=Math.floor(Wc(e,c,a));return e[d]>h&&d<e.length-1?e[d+1]:e[d]}else return}}function VO(e,r,t,i,n,a){return function(o,s,l,u){if(o!==void 0){var h=n?hd(r,n,l,a):r,f=t!==void 0?t:0;if(u){var c=i!==void 0?i:!0;return c?fd(o,h,f):Qt(o,f,h)}var d=1e-9,v=Math.ceil(Math.log(r/h)/Math.log(e)-d),g=-s*(.5-d)+.5,p=Math.min(h,o),m=Math.floor(Math.log(r/p)/Math.log(e)+g),_=Math.max(v,m),y=r/Math.pow(e,_);return Qt(y,f,h)}else return}}function zm(e,r,t,i,n){return function(a,o,s,l){if(a!==void 0){var u=i?hd(e,i,s,n):e,h=t!==void 0?t:!0;return!h||!l?Qt(a,r,u):fd(a,u,r)}else return}}function cd(e){if(e!==void 0)return 0}function Vm(e){if(e!==void 0)return e}function XO(e){var r=2*Math.PI/e;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/r+.5)*r,t}}function KO(e){var r=e||rh(5);return function(t,i){if(i)return t;if(t!==void 0)return Math.abs(t)<=r?0:t}}function Xm(e){return Math.pow(e,3)}function ko(e){return 1-Xm(1-e)}function ZO(e){return 3*e*e-2*e*e*e}function qO(e){return e}var Kt={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};function da(e,r,t,i,n,a){for(var o=a||[],s=0,l=r;l<t;l+=i){var u=e[l],h=e[l+1];o[s++]=n[0]*u+n[2]*h+n[4],o[s++]=n[1]*u+n[3]*h+n[5]}return a&&o.length!=s&&(o.length=s),o}function Km(e,r,t,i,n,a,o){for(var s=o||[],l=Math.cos(n),u=Math.sin(n),h=a[0],f=a[1],c=0,d=r;d<t;d+=i){var v=e[d]-h,g=e[d+1]-f;s[c++]=h+v*l-g*u,s[c++]=f+v*u+g*l;for(var p=d+2;p<d+i;++p)s[c++]=e[p]}return o&&s.length!=c&&(s.length=c),s}function JO(e,r,t,i,n,a,o,s){for(var l=s||[],u=o[0],h=o[1],f=0,c=r;c<t;c+=i){var d=e[c]-u,v=e[c+1]-h;l[f++]=u+n*d,l[f++]=h+a*v;for(var g=c+2;g<c+i;++g)l[f++]=e[g]}return s&&l.length!=f&&(l.length=f),l}function QO(e,r,t,i,n,a,o){for(var s=o||[],l=0,u=r;u<t;u+=i){s[l++]=e[u]+n,s[l++]=e[u+1]+a;for(var h=u+2;h<u+i;++h)s[l++]=e[h]}return o&&s.length!=l&&(s.length=l),s}var tI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Zm=qr(),eI=function(e){tI(r,e);function r(){var t=e.call(this)||this;return t.extent_=gr(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=Zx(function(i,n,a){if(!a)return this.getSimplifiedGeometry(n);var o=this.clone();return o.applyTransform(a),o.getSimplifiedGeometry(n)}),t}return r.prototype.simplifyTransformed=function(t,i){return this.simplifyTransformedInternal(this.getRevision(),t,i)},r.prototype.clone=function(){return K()},r.prototype.closestPointXY=function(t,i,n,a){return K()},r.prototype.containsXY=function(t,i){var n=this.getClosestPoint([t,i]);return n[0]===t&&n[1]===i},r.prototype.getClosestPoint=function(t,i){var n=i||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},r.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},r.prototype.computeExtent=function(t){return K()},r.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&Vs(i),this.extentRevision_=this.getRevision()}return TC(this.extent_,t)},r.prototype.rotate=function(t,i){K()},r.prototype.scale=function(t,i,n){K()},r.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},r.prototype.getSimplifiedGeometry=function(t){return K()},r.prototype.getType=function(){return K()},r.prototype.applyTransform=function(t){K()},r.prototype.intersectsExtent=function(t){return K()},r.prototype.translate=function(t,i){K()},r.prototype.transform=function(t,i){var n=se(t),a=n.getUnits()==Pi.TILE_PIXELS?function(o,s,l){var u=n.getExtent(),h=n.getWorldExtent(),f=$r(h)/$r(u);return Si(Zm,h[0],h[3],f,-f,0,0,0),da(o,0,o.length,l,Zm,s),gh(n,i)(o,s,l)}:gh(n,i);return this.applyTransform(a),this},r}(Nr),qm=eI,rI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),iI=function(e){rI(r,e);function r(){var t=e.call(this)||this;return t.layout=Kt.XY,t.stride=2,t.flatCoordinates=null,t}return r.prototype.computeExtent=function(t){return hm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},r.prototype.getCoordinates=function(){return K()},r.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},r.prototype.getFlatCoordinates=function(){return this.flatCoordinates},r.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},r.prototype.getLayout=function(){return this.layout},r.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=this.getSimplifiedGeometryInternal(t),n=i.getFlatCoordinates();return n.length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},r.prototype.getSimplifiedGeometryInternal=function(t){return this},r.prototype.getStride=function(){return this.stride},r.prototype.setFlatCoordinates=function(t,i){this.stride=Jm(t),this.layout=t,this.flatCoordinates=i},r.prototype.setCoordinates=function(t,i){K()},r.prototype.setLayout=function(t,i,n){var a;if(t)a=Jm(t);else{for(var o=0;o<n;++o)if(i.length===0){this.layout=Kt.XY,this.stride=2;return}else i=i[0];a=i.length,t=nI(a)}this.layout=t,this.stride=a},r.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},r.prototype.rotate=function(t,i){var n=this.getFlatCoordinates();if(n){var a=this.getStride();Km(n,0,n.length,a,t,i,n),this.changed()}},r.prototype.scale=function(t,i,n){var a=i;a===void 0&&(a=t);var o=n;o||(o=na(this.getExtent()));var s=this.getFlatCoordinates();if(s){var l=this.getStride();JO(s,0,s.length,l,t,a,o,s),this.changed()}},r.prototype.translate=function(t,i){var n=this.getFlatCoordinates();if(n){var a=this.getStride();QO(n,0,n.length,a,t,i,n),this.changed()}},r}(qm);function nI(e){var r;return e==2?r=Kt.XY:e==3?r=Kt.XYZ:e==4&&(r=Kt.XYZM),r}function Jm(e){var r;return e==Kt.XY?r=2:e==Kt.XYZ||e==Kt.XYM?r=3:e==Kt.XYZM&&(r=4),r}function aI(e,r,t){var i=e.getFlatCoordinates();if(i){var n=e.getStride();return da(i,0,i.length,n,r,t)}else return null}var va=iI;function Qm(e,r,t,i,n,a,o){var s=e[r],l=e[r+1],u=e[t]-s,h=e[t+1]-l,f;if(u===0&&h===0)f=r;else{var c=((n-s)*u+(a-l)*h)/(u*u+h*h);if(c>1)f=t;else if(c>0){for(var d=0;d<i;++d)o[d]=Ci(e[r+d],e[t+d],c);o.length=i;return}else f=r}for(var d=0;d<i;++d)o[d]=e[f+d];o.length=i}function dd(e,r,t,i,n){var a=e[r],o=e[r+1];for(r+=i;r<t;r+=i){var s=e[r],l=e[r+1],u=oa(a,o,s,l);u>n&&(n=u),a=s,o=l}return n}function vd(e,r,t,i,n){for(var a=0,o=t.length;a<o;++a){var s=t[a];n=dd(e,r,s,i,n),r=s}return n}function oI(e,r,t,i,n){for(var a=0,o=t.length;a<o;++a){var s=t[a];n=vd(e,r,s,i,n),r=s[s.length-1]}return n}function pd(e,r,t,i,n,a,o,s,l,u,h){if(r==t)return u;var f,c;if(n===0)if(c=oa(o,s,e[r],e[r+1]),c<u){for(f=0;f<i;++f)l[f]=e[r+f];return l.length=i,c}else return u;for(var d=h||[NaN,NaN],v=r+i;v<t;)if(Qm(e,v-i,v,i,o,s,d),c=oa(o,s,d[0],d[1]),c<u){for(u=c,f=0;f<i;++f)l[f]=d[f];l.length=i,v+=i}else v+=i*Math.max((Math.sqrt(c)-Math.sqrt(u))/n|0,1);if(a&&(Qm(e,t-i,r,i,o,s,d),c=oa(o,s,d[0],d[1]),c<u)){for(u=c,f=0;f<i;++f)l[f]=d[f];l.length=i}return u}function gd(e,r,t,i,n,a,o,s,l,u,h){for(var f=h||[NaN,NaN],c=0,d=t.length;c<d;++c){var v=t[c];u=pd(e,r,v,i,n,a,o,s,l,u,f),r=v}return u}function sI(e,r,t,i,n,a,o,s,l,u,h){for(var f=h||[NaN,NaN],c=0,d=t.length;c<d;++c){var v=t[c];u=gd(e,r,v,i,n,a,o,s,l,u,f),r=v[v.length-1]}return u}function lI(e,r,t,i){for(var n=0,a=t.length;n<a;++n)e[r++]=t[n];return r}function mh(e,r,t,i){for(var n=0,a=t.length;n<a;++n)for(var o=t[n],s=0;s<i;++s)e[r++]=o[s];return r}function md(e,r,t,i,n){for(var a=n||[],o=0,s=0,l=t.length;s<l;++s){var u=mh(e,r,t[s],i);a[o++]=u,r=u}return a.length=o,a}function uI(e,r,t,i,n){for(var a=n||[],o=0,s=0,l=t.length;s<l;++s){var u=md(e,r,t[s],i,a[o]);a[o++]=u,r=u[u.length-1]}return a.length=o,a}function yd(e,r,t,i,n,a,o){var s=(t-r)/i;if(s<3){for(;r<t;r+=i)a[o++]=e[r],a[o++]=e[r+1];return o}var l=new Array(s);l[0]=1,l[s-1]=1;for(var u=[r,t-i],h=0;u.length>0;){for(var f=u.pop(),c=u.pop(),d=0,v=e[c],g=e[c+1],p=e[f],m=e[f+1],_=c+i;_<f;_+=i){var y=e[_],w=e[_+1],T=OC(y,w,v,g,p,m);T>d&&(h=_,d=T)}d>n&&(l[(h-r)/i]=1,c+i<h&&u.push(c,h),h+i<f&&u.push(h,f))}for(var _=0;_<s;++_)l[_]&&(a[o++]=e[r+_*i],a[o++]=e[r+_*i+1]);return o}function hI(e,r,t,i,n,a,o,s){for(var l=0,u=t.length;l<u;++l){var h=t[l];o=yd(e,r,h,i,n,a,o),s.push(o),r=h}return o}function pa(e,r){return r*Math.round(e/r)}function fI(e,r,t,i,n,a,o){if(r==t)return o;var s=pa(e[r],n),l=pa(e[r+1],n);r+=i,a[o++]=s,a[o++]=l;var u,h;do if(u=pa(e[r],n),h=pa(e[r+1],n),r+=i,r==t)return a[o++]=u,a[o++]=h,o;while(u==s&&h==l);for(;r<t;){var f=pa(e[r],n),c=pa(e[r+1],n);if(r+=i,!(f==u&&c==h)){var d=u-s,v=h-l,g=f-s,p=c-l;if(d*p==v*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(v<0&&p<v||v==p||v>0&&p>v)){u=f,h=c;continue}a[o++]=u,a[o++]=h,s=u,l=h,u=f,h=c}}return a[o++]=u,a[o++]=h,o}function ty(e,r,t,i,n,a,o,s){for(var l=0,u=t.length;l<u;++l){var h=t[l];o=fI(e,r,h,i,n,a,o),s.push(o),r=h}return o}function cI(e,r,t,i,n,a,o,s){for(var l=0,u=t.length;l<u;++l){var h=t[l],f=[];o=ty(e,r,h,i,n,a,o,f),s.push(f),r=h[h.length-1]}return o}function yn(e,r,t,i,n){for(var a=n!==void 0?n:[],o=0,s=r;s<t;s+=i)a[o++]=e.slice(s,s+i);return a.length=o,a}function al(e,r,t,i,n){for(var a=n!==void 0?n:[],o=0,s=0,l=t.length;s<l;++s){var u=t[s];a[o++]=yn(e,r,u,i,a[o]),r=u}return a.length=o,a}function _d(e,r,t,i,n){for(var a=n!==void 0?n:[],o=0,s=0,l=t.length;s<l;++s){var u=t[s];a[o++]=al(e,r,u,i,a[o]),r=u[u.length-1]}return a.length=o,a}function ey(e,r,t,i){for(var n=0,a=e[t-i],o=e[t-i+1];r<t;r+=i){var s=e[r],l=e[r+1];n+=o*s-a*l,a=s,o=l}return n/2}function ry(e,r,t,i){for(var n=0,a=0,o=t.length;a<o;++a){var s=t[a];n+=ey(e,r,s,i),r=s}return n}function dI(e,r,t,i){for(var n=0,a=0,o=t.length;a<o;++a){var s=t[a];n+=ry(e,r,s,i),r=s[s.length-1]}return n}var vI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),pI=function(e){vI(r,e);function r(t,i){var n=e.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?n.setFlatCoordinates(i,t):n.setCoordinates(t,i),n}return r.prototype.clone=function(){return new r(this.flatCoordinates.slice(),this.layout)},r.prototype.closestPointXY=function(t,i,n,a){return a<ra(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(dd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,n,a))},r.prototype.getArea=function(){return ey(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getCoordinates=function(){return yn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=yd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new r(i,Kt.XY)},r.prototype.getType=function(){return H.LINEAR_RING},r.prototype.intersectsExtent=function(t){return!1},r.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=mh(this.flatCoordinates,0,t,this.stride),this.changed()},r}(va),iy=pI,gI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),mI=function(e){gI(r,e);function r(t,i){var n=e.call(this)||this;return n.setCoordinates(t,i),n}return r.prototype.clone=function(){var t=new r(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},r.prototype.closestPointXY=function(t,i,n,a){var o=this.flatCoordinates,s=oa(t,i,o[0],o[1]);if(s<a){for(var l=this.stride,u=0;u<l;++u)n[u]=o[u];return n.length=l,s}else return a},r.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},r.prototype.computeExtent=function(t){return _C(this.flatCoordinates,t)},r.prototype.getType=function(){return H.POINT},r.prototype.intersectsExtent=function(t){return Uc(t,this.flatCoordinates[0],this.flatCoordinates[1])},r.prototype.setCoordinates=function(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=lI(this.flatCoordinates,0,t,this.stride),this.changed()},r}(va),yh=mI;function yI(e,r,t,i,n){var a=dm(n,function(o){return!ga(e,r,t,i,o[0],o[1])});return!a}function ga(e,r,t,i,n,a){for(var o=0,s=e[t-i],l=e[t-i+1];r<t;r+=i){var u=e[r],h=e[r+1];l<=a?h>a&&(u-s)*(a-l)-(n-s)*(h-l)>0&&o++:h<=a&&(u-s)*(a-l)-(n-s)*(h-l)<0&&o--,s=u,l=h}return o!==0}function wd(e,r,t,i,n,a){if(t.length===0||!ga(e,r,t[0],i,n,a))return!1;for(var o=1,s=t.length;o<s;++o)if(ga(e,t[o-1],t[o],i,n,a))return!1;return!0}function _I(e,r,t,i,n,a){if(t.length===0)return!1;for(var o=0,s=t.length;o<s;++o){var l=t[o];if(wd(e,r,l,i,n,a))return!0;r=l[l.length-1]}return!1}function ny(e,r,t,i,n,a,o){for(var s,l,u,h,f,c,d,v=n[a+1],g=[],p=0,m=t.length;p<m;++p){var _=t[p];for(h=e[_-i],c=e[_-i+1],s=r;s<_;s+=i)f=e[s],d=e[s+1],(v<=c&&d<=v||c<=v&&v<=d)&&(u=(v-c)/(d-c)*(f-h)+h,g.push(u)),h=f,c=d}var y=NaN,w=-1/0;for(g.sort(ta),h=g[0],s=1,l=g.length;s<l;++s){f=g[s];var T=Math.abs(f-h);T>w&&(u=(h+f)/2,wd(e,r,t,i,u,v)&&(y=u,w=T)),h=f}return isNaN(y)&&(y=n[a]),o?(o.push(y,v,w),o):[y,v,w]}function wI(e,r,t,i,n){for(var a=[],o=0,s=t.length;o<s;++o){var l=t[o];a=ny(e,r,l,i,n,2*o,a),r=l[l.length-1]}return a}function ay(e,r,t,i,n){var a;for(r+=i;r<t;r+=i)if(a=n(e.slice(r-i,r),e.slice(r,r+i)),a)return a;return!1}function _h(e,r,t,i,n){var a=cm(gr(),e,r,t,i);return Je(n,a)?ia(n,a)||a[0]>=n[0]&&a[2]<=n[2]||a[1]>=n[1]&&a[3]<=n[3]?!0:ay(e,r,t,i,function(o,s){return EC(n,o,s)}):!1}function bI(e,r,t,i,n){for(var a=0,o=t.length;a<o;++a){if(_h(e,r,t[a],i,n))return!0;r=t[a]}return!1}function TI(e,r,t,i,n){return!!(_h(e,r,t,i,n)||ga(e,r,t,i,n[0],n[1])||ga(e,r,t,i,n[0],n[3])||ga(e,r,t,i,n[2],n[1])||ga(e,r,t,i,n[2],n[3]))}function oy(e,r,t,i,n){if(!TI(e,r,t[0],i,n))return!1;if(t.length===1)return!0;for(var a=1,o=t.length;a<o;++a)if(yI(e,t[a-1],t[a],i,n)&&!_h(e,t[a-1],t[a],i,n))return!1;return!0}function EI(e,r,t,i,n){for(var a=0,o=t.length;a<o;++a){var s=t[a];if(oy(e,r,s,i,n))return!0;r=s[s.length-1]}return!1}function SI(e,r,t,i){for(;r<t-i;){for(var n=0;n<i;++n){var a=e[r+n];e[r+n]=e[t-i+n],e[t-i+n]=a}r+=i,t-=i}}function sy(e,r,t,i){for(var n=0,a=e[t-i],o=e[t-i+1];r<t;r+=i){var s=e[r],l=e[r+1];n+=(s-a)*(l+o),a=s,o=l}return n===0?void 0:n>0}function ly(e,r,t,i,n){for(var a=n!==void 0?n:!1,o=0,s=t.length;o<s;++o){var l=t[o],u=sy(e,r,l,i);if(o===0){if(a&&u||!a&&!u)return!1}else if(a&&!u||!a&&u)return!1;r=l}return!0}function xI(e,r,t,i,n){for(var a=0,o=t.length;a<o;++a){var s=t[a];if(!ly(e,r,s,i,n))return!1;s.length&&(r=s[s.length-1])}return!0}function bd(e,r,t,i,n){for(var a=n!==void 0?n:!1,o=0,s=t.length;o<s;++o){var l=t[o],u=sy(e,r,l,i),h=o===0?a&&u||!a&&!u:a&&!u||!a&&u;h&&SI(e,r,l,i),r=l}return r}function uy(e,r,t,i,n){for(var a=0,o=t.length;a<o;++a)r=bd(e,r,t[a],i,n);return r}var CI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),hy=function(e){CI(r,e);function r(t,i,n){var a=e.call(this)||this;return a.ends_=[],a.flatInteriorPointRevision_=-1,a.flatInteriorPoint_=null,a.maxDelta_=-1,a.maxDeltaRevision_=-1,a.orientedRevision_=-1,a.orientedFlatCoordinates_=null,i!==void 0&&n?(a.setFlatCoordinates(i,t),a.ends_=n):a.setCoordinates(t,i),a}return r.prototype.appendLinearRing=function(t){this.flatCoordinates?Ei(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},r.prototype.clone=function(){var t=new r(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},r.prototype.closestPointXY=function(t,i,n,a){return a<ra(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vd(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,n,a))},r.prototype.containsXY=function(t,i){return wd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)},r.prototype.getArea=function(){return ry(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},r.prototype.getCoordinates=function(t){var i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),bd(i,0,this.ends_,this.stride,t)):i=this.flatCoordinates,al(i,0,this.ends_,this.stride)},r.prototype.getEnds=function(){return this.ends_},r.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=na(this.getExtent());this.flatInteriorPoint_=ny(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},r.prototype.getInteriorPoint=function(){return new yh(this.getFlatInteriorPoint(),Kt.XYM)},r.prototype.getLinearRingCount=function(){return this.ends_.length},r.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new iy(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},r.prototype.getLinearRings=function(){for(var t=this.layout,i=this.flatCoordinates,n=this.ends_,a=[],o=0,s=0,l=n.length;s<l;++s){var u=n[s],h=new iy(i.slice(o,u),t);a.push(h),o=u}return a},r.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;ly(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=bd(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},r.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=ty(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new r(i,Kt.XY,n)},r.prototype.getType=function(){return H.POLYGON},r.prototype.intersectsExtent=function(t){return oy(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},r.prototype.setCoordinates=function(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=md(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()},r}(va),wh=hy;function fy(e){var r=e[0],t=e[1],i=e[2],n=e[3],a=[r,t,r,n,i,n,i,t,r,t];return new hy(a,Kt.XY,[a.length])}var OI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Td=0,II=function(e){OI(r,e);function r(t){var i=e.call(this)||this;i.on,i.once,i.un;var n=ae({},t);return i.hints_=[0,0],i.animations_=[],i.updateAnimationKey_,i.projection_=sd(n.projection,"EPSG:3857"),i.viewportSize_=[100,100],i.targetCenter_=null,i.targetResolution_,i.targetRotation_,i.nextCenter_=null,i.nextResolution_,i.nextRotation_,i.cancelAnchor_=void 0,n.center&&(n.center=ki(n.center,i.projection_)),n.extent&&(n.extent=ca(n.extent,i.projection_)),i.applyOptions_(n),i}return r.prototype.applyOptions_=function(t){var i={},n=kI(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;var a=PI(t),o=n.constraint,s=RI(t);this.constraints_={center:a,resolution:o,rotation:s},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom),this.setProperties(i),this.options_=t},Object.defineProperty(r.prototype,"padding",{get:function(){return this.padding_},set:function(t){var i=this.padding_;this.padding_=t;var n=this.getCenter();if(n){var a=t||[0,0,0,0];i=i||[0,0,0,0];var o=this.getResolution(),s=o/2*(a[3]-i[3]+i[1]-a[1]),l=o/2*(a[0]-i[0]+i[2]-a[2]);this.setCenterInternal([n[0]+s,n[1]-l])}},enumerable:!1,configurable:!0}),r.prototype.getUpdatedOptions_=function(t){var i=ae({},this.options_);return i.resolution!==void 0?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),ae({},i,t)},r.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var i=new Array(arguments.length),n=0;n<i.length;++n){var a=arguments[n];a.center&&(a=ae({},a),a.center=ki(a.center,this.getProjection())),a.anchor&&(a=ae({},a),a.anchor=ki(a.anchor,this.getProjection())),i[n]=a}this.animateInternal.apply(this,i)},r.prototype.animateInternal=function(t){var i=arguments.length,n;i>1&&typeof arguments[i-1]=="function"&&(n=arguments[i-1],--i);for(var a=0;a<i&&!this.isDef();++a){var o=arguments[a];o.center&&this.setCenterInternal(o.center),o.zoom!==void 0?this.setZoom(o.zoom):o.resolution&&this.setResolution(o.resolution),o.rotation!==void 0&&this.setRotation(o.rotation)}if(a===i){n&&bh(n,!0);return}for(var s=Date.now(),l=this.targetCenter_.slice(),u=this.targetResolution_,h=this.targetRotation_,f=[];a<i;++a){var c=arguments[a],d={start:s,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||ZO,callback:n};if(c.center&&(d.sourceCenter=l,d.targetCenter=c.center.slice(),l=d.targetCenter),c.zoom!==void 0?(d.sourceResolution=u,d.targetResolution=this.getResolutionForZoom(c.zoom),u=d.targetResolution):c.resolution&&(d.sourceResolution=u,d.targetResolution=c.resolution,u=d.targetResolution),c.rotation!==void 0){d.sourceRotation=h;var v=gn(c.rotation-h+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=h+v,h=d.targetRotation}DI(d)?d.complete=!0:s+=d.duration,f.push(d)}this.animations_.push(f),this.setHint(Te.ANIMATING,1),this.updateAnimations_()},r.prototype.getAnimating=function(){return this.hints_[Te.ANIMATING]>0},r.prototype.getInteracting=function(){return this.hints_[Te.INTERACTING]>0},r.prototype.cancelAnimations=function(){this.setHint(Te.ANIMATING,-this.hints_[Te.ANIMATING]);for(var t,i=0,n=this.animations_.length;i<n;++i){var a=this.animations_[i];if(a[0].callback&&bh(a[0].callback,!1),!t)for(var o=0,s=a.length;o<s;++o){var l=a[o];if(!l.complete){t=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},r.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var t=Date.now(),i=!1,n=this.animations_.length-1;n>=0;--n){for(var a=this.animations_[n],o=!0,s=0,l=a.length;s<l;++s){var u=a[s];if(!u.complete){var h=t-u.start,f=u.duration>0?h/u.duration:1;f>=1?(u.complete=!0,f=1):o=!1;var c=u.easing(f);if(u.sourceCenter){var d=u.sourceCenter[0],v=u.sourceCenter[1],g=u.targetCenter[0],p=u.targetCenter[1];this.nextCenter_=u.targetCenter;var m=d+c*(g-d),_=v+c*(p-v);this.targetCenter_=[m,_]}if(u.sourceResolution&&u.targetResolution){var y=c===1?u.targetResolution:u.sourceResolution+c*(u.targetResolution-u.sourceResolution);if(u.anchor){var w=this.getViewportSize_(this.getRotation()),T=this.constraints_.resolution(y,0,w,!0);this.targetCenter_=this.calculateCenterZoom(T,u.anchor)}this.nextResolution_=u.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(u.sourceRotation!==void 0&&u.targetRotation!==void 0){var S=c===1?gn(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+c*(u.targetRotation-u.sourceRotation);if(u.anchor){var x=this.constraints_.rotation(S,!0);this.targetCenter_=this.calculateCenterRotate(x,u.anchor)}this.nextRotation_=u.targetRotation,this.targetRotation_=S}if(this.applyTargetState_(!0),i=!0,!u.complete)break}}if(o){this.animations_[n]=null,this.setHint(Te.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var E=a[0].callback;E&&bh(E,!0)}}this.animations_=this.animations_.filter(Boolean),i&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},r.prototype.calculateCenterRotate=function(t,i){var n,a=this.getCenterInternal();return a!==void 0&&(n=[a[0]-i[0],a[1]-i[1]],qc(n,t-this.getRotation()),GC(n,i)),n},r.prototype.calculateCenterZoom=function(t,i){var n,a=this.getCenterInternal(),o=this.getResolution();if(a!==void 0&&o!==void 0){var s=i[0]-t*(i[0]-a[0])/o,l=i[1]-t*(i[1]-a[1])/o;n=[s,l]}return n},r.prototype.getViewportSize_=function(t){var i=this.viewportSize_;if(t){var n=i[0],a=i[1];return[Math.abs(n*Math.cos(t))+Math.abs(a*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(a*Math.cos(t))]}else return i},r.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},r.prototype.getCenter=function(){var t=this.getCenterInternal();return t&&ud(t,this.getProjection())},r.prototype.getCenterInternal=function(){return this.get(Qr.CENTER)},r.prototype.getConstraints=function(){return this.constraints_},r.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},r.prototype.getHints=function(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},r.prototype.calculateExtent=function(t){var i=this.calculateExtentInternal(t);return Bm(i,this.getProjection())},r.prototype.calculateExtentInternal=function(t){var i=t||this.getViewportSizeMinusPadding_(),n=this.getCenterInternal();ut(n,1);var a=this.getResolution();ut(a!==void 0,2);var o=this.getRotation();return ut(o!==void 0,3),Xc(n,a,o,i)},r.prototype.getMaxResolution=function(){return this.maxResolution_},r.prototype.getMinResolution=function(){return this.minResolution_},r.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},r.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},r.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},r.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},r.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},r.prototype.getProjection=function(){return this.projection_},r.prototype.getResolution=function(){return this.get(Qr.RESOLUTION)},r.prototype.getResolutions=function(){return this.resolutions_},r.prototype.getResolutionForExtent=function(t,i){return this.getResolutionForExtentInternal(ca(t,this.getProjection()),i)},r.prototype.getResolutionForExtentInternal=function(t,i){var n=i||this.getViewportSizeMinusPadding_(),a=Xt(t)/n[0],o=$r(t)/n[1];return Math.max(a,o)},r.prototype.getResolutionForValueFunction=function(t){var i=t||2,n=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,o=Math.log(n/a)/Math.log(i);return function(s){var l=n/Math.pow(i,s*o);return l}},r.prototype.getRotation=function(){return this.get(Qr.ROTATION)},r.prototype.getValueForResolutionFunction=function(t){var i=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,o=Math.log(n/a)/i;return function(s){var l=Math.log(n/s)/i/o;return l}},r.prototype.getViewportSizeMinusPadding_=function(t){var i=this.getViewportSize_(t),n=this.padding_;return n&&(i=[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]),i},r.prototype.getState=function(){var t=this.getProjection(),i=this.getResolution(),n=this.getRotation(),a=this.getCenterInternal(),o=this.padding_;if(o){var s=this.getViewportSizeMinusPadding_();a=Ed(a,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],i,n)}return{center:a.slice(0),projection:t!==void 0?t:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}},r.prototype.getZoom=function(){var t,i=this.getResolution();return i!==void 0&&(t=this.getZoomForResolution(i)),t},r.prototype.getZoomForResolution=function(t){var i=this.minZoom_||0,n,a;if(this.resolutions_){var o=Wc(this.resolutions_,t,1);i=o,n=this.resolutions_[o],o==this.resolutions_.length-1?a=2:a=n/this.resolutions_[o+1]}else n=this.maxResolution_,a=this.zoomFactor_;return i+Math.log(n/t)/Math.log(a)},r.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var i=Qt(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(n,Qt(t-i,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},r.prototype.fit=function(t,i){var n;if(ut(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){ut(!Kc(t),25);var a=ca(t,this.getProjection());n=fy(a)}else if(t.getType()===H.CIRCLE){var a=ca(t.getExtent(),this.getProjection());n=fy(a),n.rotate(this.getRotation(),na(a))}else{var o=HO();o?n=t.clone().transform(o,this.getProjection()):n=t}this.fitInternal(n,i)},r.prototype.rotatedExtentForGeometry=function(t){for(var i=this.getRotation(),n=Math.cos(i),a=Math.sin(-i),o=t.getFlatCoordinates(),s=t.getStride(),l=1/0,u=1/0,h=-1/0,f=-1/0,c=0,d=o.length;c<d;c+=s){var v=o[c]*n-o[c+1]*a,g=o[c]*a+o[c+1]*n;l=Math.min(l,v),u=Math.min(u,g),h=Math.max(h,v),f=Math.max(f,g)}return[l,u,h,f]},r.prototype.fitInternal=function(t,i){var n=i||{},a=n.size;a||(a=this.getViewportSizeMinusPadding_());var o=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1,l;n.minResolution!==void 0?l=n.minResolution:n.maxZoom!==void 0?l=this.getResolutionForZoom(n.maxZoom):l=0;var u=this.rotatedExtentForGeometry(t),h=this.getResolutionForExtentInternal(u,[a[0]-o[1]-o[3],a[1]-o[0]-o[2]]);h=isNaN(h)?l:Math.max(h,l),h=this.getConstrainedResolution(h,s?0:1);var f=this.getRotation(),c=Math.sin(f),d=Math.cos(f),v=na(u);v[0]+=(o[1]-o[3])/2*h,v[1]+=(o[0]-o[2])/2*h;var g=v[0]*d-v[1]*c,p=v[1]*d+v[0]*c,m=this.getConstrainedCenter([g,p],h),_=n.callback?n.callback:ea;n.duration!==void 0?this.animateInternal({resolution:h,center:m,duration:n.duration,easing:n.easing},_):(this.targetResolution_=h,this.targetCenter_=m,this.applyTargetState_(!1,!0),bh(_,!0))},r.prototype.centerOn=function(t,i,n){this.centerOnInternal(ki(t,this.getProjection()),i,n)},r.prototype.centerOnInternal=function(t,i,n){this.setCenterInternal(Ed(t,i,n,this.getResolution(),this.getRotation()))},r.prototype.calculateCenterShift=function(t,i,n,a){var o,s=this.padding_;if(s&&t){var l=this.getViewportSizeMinusPadding_(-n),u=Ed(t,a,[l[0]/2+s[3],l[1]/2+s[0]],i,n);o=[t[0]-u[0],t[1]-u[1]]}return o},r.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},r.prototype.adjustCenter=function(t){var i=ud(this.targetCenter_,this.getProjection());this.setCenter([i[0]+t[0],i[1]+t[1]])},r.prototype.adjustCenterInternal=function(t){var i=this.targetCenter_;this.setCenterInternal([i[0]+t[0],i[1]+t[1]])},r.prototype.adjustResolution=function(t,i){var n=i&&ki(i,this.getProjection());this.adjustResolutionInternal(t,n)},r.prototype.adjustResolutionInternal=function(t,i){var n=this.getAnimating()||this.getInteracting(),a=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,a,n);i&&(this.targetCenter_=this.calculateCenterZoom(o,i)),this.targetResolution_*=t,this.applyTargetState_()},r.prototype.adjustZoom=function(t,i){this.adjustResolution(Math.pow(this.zoomFactor_,-t),i)},r.prototype.adjustRotation=function(t,i){i&&(i=ki(i,this.getProjection())),this.adjustRotationInternal(t,i)},r.prototype.adjustRotationInternal=function(t,i){var n=this.getAnimating()||this.getInteracting(),a=this.constraints_.rotation(this.targetRotation_+t,n);i&&(this.targetCenter_=this.calculateCenterRotate(a,i)),this.targetRotation_+=t,this.applyTargetState_()},r.prototype.setCenter=function(t){this.setCenterInternal(ki(t,this.getProjection()))},r.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},r.prototype.setHint=function(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]},r.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},r.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},r.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},r.prototype.applyTargetState_=function(t,i){var n=this.getAnimating()||this.getInteracting()||i,a=this.constraints_.rotation(this.targetRotation_,n),o=this.getViewportSize_(a),s=this.constraints_.resolution(this.targetResolution_,0,o,n),l=this.constraints_.center(this.targetCenter_,s,o,n,this.calculateCenterShift(this.targetCenter_,s,a,o));this.get(Qr.ROTATION)!==a&&this.set(Qr.ROTATION,a),this.get(Qr.RESOLUTION)!==s&&this.set(Qr.RESOLUTION,s),(!this.get(Qr.CENTER)||!Zc(this.get(Qr.CENTER),l))&&this.set(Qr.CENTER,l),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},r.prototype.resolveConstraints=function(t,i,n){var a=t!==void 0?t:200,o=i||0,s=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(s),u=this.constraints_.resolution(this.targetResolution_,o,l),h=this.constraints_.center(this.targetCenter_,u,l,!1,this.calculateCenterShift(this.targetCenter_,u,s,l));if(a===0&&!this.cancelAnchor_){this.targetResolution_=u,this.targetRotation_=s,this.targetCenter_=h,this.applyTargetState_();return}var f=n||(a===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==u||this.getRotation()!==s||!this.getCenterInternal()||!Zc(this.getCenterInternal(),h))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:h,resolution:u,duration:a,easing:ko,anchor:f}))},r.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Te.INTERACTING,1)},r.prototype.endInteraction=function(t,i,n){var a=n&&ki(n,this.getProjection());this.endInteractionInternal(t,i,a)},r.prototype.endInteractionInternal=function(t,i,n){this.setHint(Te.INTERACTING,-1),this.resolveConstraints(t,i,n)},r.prototype.getConstrainedCenter=function(t,i){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,i||this.getResolution(),n)},r.prototype.getConstrainedZoom=function(t,i){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,i))},r.prototype.getConstrainedResolution=function(t,i){var n=i||0,a=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,a)},r}(Nr);function bh(e,r){setTimeout(function(){e(r)},0)}function PI(e){if(e.extent!==void 0){var r=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return Um(e.extent,e.constrainOnlyCenter,r)}var t=sd(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&t.isGlobal()){var i=t.getExtent().slice();return i[0]=-1/0,i[2]=1/0,Um(i,!1,!1)}return UO}function kI(e){var r,t,i,n=28,a=2,o=e.minZoom!==void 0?e.minZoom:Td,s=e.maxZoom!==void 0?e.maxZoom:n,l=e.zoomFactor!==void 0?e.zoomFactor:a,u=e.multiWorld!==void 0?e.multiWorld:!1,h=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,f=e.showFullExtent!==void 0?e.showFullExtent:!1,c=sd(e.projection,"EPSG:3857"),d=c.getExtent(),v=e.constrainOnlyCenter,g=e.extent;if(!u&&!g&&c.isGlobal()&&(v=!1,g=d),e.resolutions!==void 0){var p=e.resolutions;t=p[o],i=p[s]!==void 0?p[s]:p[p.length-1],e.constrainResolution?r=zO(p,h,!v&&g,f):r=zm(t,i,h,!v&&g,f)}else{var m=d?Math.max(Xt(d),$r(d)):360*Jr[Pi.DEGREES]/c.getMetersPerUnit(),_=m/nd/Math.pow(a,Td),y=_/Math.pow(a,n-Td);t=e.maxResolution,t!==void 0?o=0:t=_/Math.pow(l,o),i=e.minResolution,i===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?i=t/Math.pow(l,s):i=_/Math.pow(l,s):i=y),s=o+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,s-o),e.constrainResolution?r=VO(l,t,i,h,!v&&g,f):r=zm(t,i,h,!v&&g,f)}return{constraint:r,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:l}}function RI(e){var r=e.enableRotation!==void 0?e.enableRotation:!0;if(r){var t=e.constrainRotation;return t===void 0||t===!0?KO():t===!1?Vm:typeof t=="number"?XO(t):Vm}else return cd}function DI(e){return!(e.sourceCenter&&e.targetCenter&&!Zc(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function Ed(e,r,t,i,n){var a=Math.cos(-n),o=Math.sin(-n),s=e[0]*a-e[1]*o,l=e[1]*a+e[0]*o;s+=(r[0]/2-t[0])*i,l+=(t[1]-r[1]/2)*i,o=-o;var u=s*a-l*o,h=l*a+s*o;return[u,h]}var ma=II;function cy(e){return e[0]>0&&e[1]>0}function AI(e,r,t){return t===void 0&&(t=[0,0]),t[0]=e[0]*r+.5|0,t[1]=e[1]*r+.5|0,t}function ti(e,r){return Array.isArray(e)?e:(r===void 0?r=[e,e]:(r[0]=e,r[1]=e),r)}var MI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),LI=function(e){MI(r,e);function r(t){var i=e.call(this)||this;i.on,i.once,i.un;var n=FI(t);i.boundHandleBrowserEvent_=i.handleBrowserEvent.bind(i),i.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,i.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:nm,i.postRenderTimeoutHandle_,i.animationDelayKey_,i.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(i),i.coordinateToPixelTransform_=qr(),i.pixelToCoordinateTransform_=qr(),i.frameIndex_=0,i.frameState_=null,i.previousExtent_=null,i.viewPropertyListenerKey_=null,i.viewChangeListenerKey_=null,i.layerGroupPropertyListenerKeys_=null,i.viewport_=document.createElement("div"),i.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.viewport_.style.position="relative",i.viewport_.style.overflow="hidden",i.viewport_.style.width="100%",i.viewport_.style.height="100%",i.overlayContainer_=document.createElement("div"),i.overlayContainer_.style.position="absolute",i.overlayContainer_.style.zIndex="0",i.overlayContainer_.style.width="100%",i.overlayContainer_.style.height="100%",i.overlayContainer_.style.pointerEvents="none",i.overlayContainer_.className="ol-overlaycontainer",i.viewport_.appendChild(i.overlayContainer_),i.overlayContainerStopEvent_=document.createElement("div"),i.overlayContainerStopEvent_.style.position="absolute",i.overlayContainerStopEvent_.style.zIndex="0",i.overlayContainerStopEvent_.style.width="100%",i.overlayContainerStopEvent_.style.height="100%",i.overlayContainerStopEvent_.style.pointerEvents="none",i.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",i.viewport_.appendChild(i.overlayContainerStopEvent_),i.mapBrowserEventHandler_=null,i.moveTolerance_=t.moveTolerance,i.keyboardEventTarget_=n.keyboardEventTarget,i.keyHandlerKeys_=null,i.controls=n.controls||new yr,i.interactions=n.interactions||new yr,i.overlays_=n.overlays,i.overlayIdIndex_={},i.renderer_=null,i.handleResize_,i.postRenderFunctions_=[],i.tileQueue_=new EO(i.getTilePriority.bind(i),i.handleTileChange_.bind(i)),i.addChangeListener(be.LAYERGROUP,i.handleLayerGroupChanged_),i.addChangeListener(be.VIEW,i.handleViewChanged_),i.addChangeListener(be.SIZE,i.handleSizeChanged_),i.addChangeListener(be.TARGET,i.handleTargetChanged_),i.setProperties(n.values);var a=i;return t.view&&!(t.view instanceof ma)&&t.view.then(function(o){a.setView(new ma(o))}),i.controls.addEventListener(Ge.ADD,function(o){o.element.setMap(this)}.bind(i)),i.controls.addEventListener(Ge.REMOVE,function(o){o.element.setMap(null)}.bind(i)),i.interactions.addEventListener(Ge.ADD,function(o){o.element.setMap(this)}.bind(i)),i.interactions.addEventListener(Ge.REMOVE,function(o){o.element.setMap(null)}.bind(i)),i.overlays_.addEventListener(Ge.ADD,function(o){this.addOverlayInternal_(o.element)}.bind(i)),i.overlays_.addEventListener(Ge.REMOVE,function(o){var s=o.element,l=s.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],o.element.setMap(null)}.bind(i)),i.controls.forEach(function(o){o.setMap(this)}.bind(i)),i.interactions.forEach(function(o){o.setMap(this)}.bind(i)),i.overlays_.forEach(i.addOverlayInternal_.bind(i)),i}return r.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},r.prototype.addControl=function(t){this.getControls().push(t)},r.prototype.addInteraction=function(t){this.getInteractions().push(t)},r.prototype.addLayer=function(t){var i=this.getLayerGroup().getLayers();i.push(t)},r.prototype.addOverlay=function(t){this.getOverlays().push(t)},r.prototype.addOverlayInternal_=function(t){var i=t.getId();i!==void 0&&(this.overlayIdIndex_[i.toString()]=t),t.setMap(this)},r.prototype.disposeInternal=function(){this.setTarget(null),e.prototype.disposeInternal.call(this)},r.prototype.forEachFeatureAtPixel=function(t,i,n){if(!!this.frameState_){var a=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};var o=n.hitTolerance!==void 0?n.hitTolerance:0,s=n.layerFilter!==void 0?n.layerFilter:wo,l=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(a,this.frameState_,o,l,i,null,s,null)}},r.prototype.getFeaturesAtPixel=function(t,i){var n=[];return this.forEachFeatureAtPixel(t,function(a){n.push(a)},i),n},r.prototype.forEachLayerAtPixel=function(t,i,n){if(!!this.frameState_){var a=n||{},o=a.hitTolerance!==void 0?a.hitTolerance:0,s=a.layerFilter||wo;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,o,i,s)}},r.prototype.hasFeatureAtPixel=function(t,i){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};var a=i.layerFilter!==void 0?i.layerFilter:wo,o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,o,s,a,null)},r.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},r.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},r.prototype.getEventPixel=function(t){var i=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-i.left,n.clientY-i.top]},r.prototype.getTarget=function(){return this.get(be.TARGET)},r.prototype.getTargetElement=function(){var t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null},r.prototype.getCoordinateFromPixel=function(t){return ud(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},r.prototype.getCoordinateFromPixelInternal=function(t){var i=this.frameState_;return i?oe(i.pixelToCoordinateTransform,t.slice()):null},r.prototype.getControls=function(){return this.controls},r.prototype.getOverlays=function(){return this.overlays_},r.prototype.getOverlayById=function(t){var i=this.overlayIdIndex_[t.toString()];return i!==void 0?i:null},r.prototype.getInteractions=function(){return this.interactions},r.prototype.getLayerGroup=function(){return this.get(be.LAYERGROUP)},r.prototype.setLayers=function(t){var i=this.getLayerGroup();if(t instanceof yr){i.setLayers(t);return}var n=i.getLayers();n.clear(),n.extend(t)},r.prototype.getLayers=function(){var t=this.getLayerGroup().getLayers();return t},r.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),i=0,n=t.length;i<n;++i){var a=t[i].layer,o=a.getSource();if(o&&o.loading)return!0}return!1},r.prototype.getPixelFromCoordinate=function(t){var i=ki(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(i)},r.prototype.getPixelFromCoordinateInternal=function(t){var i=this.frameState_;return i?oe(i.coordinateToPixelTransform,t.slice(0,2)):null},r.prototype.getRenderer=function(){return this.renderer_},r.prototype.getSize=function(){return this.get(be.SIZE)},r.prototype.getView=function(){return this.get(be.VIEW)},r.prototype.getViewport=function(){return this.viewport_},r.prototype.getOverlayContainer=function(){return this.overlayContainer_},r.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},r.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},r.prototype.getTilePriority=function(t,i,n,a){return SO(this.frameState_,t,i,n,a)},r.prototype.handleBrowserEvent=function(t,i){var n=i||t.type,a=new mn(n,this,t);this.handleMapBrowserEvent(a)},r.prototype.handleMapBrowserEvent=function(t){if(!!this.frameState_){var i=t.originalEvent,n=i.type;if(n===id.POINTERDOWN||n===Q.WHEEL||n===Q.KEYDOWN){var a=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():a,s=i.target;if(this.overlayContainerStopEvent_.contains(s)||!(o===a?a.documentElement:o).contains(s))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1)for(var l=this.getInteractions().getArray().slice(),u=l.length-1;u>=0;u--){var h=l[u];if(!(h.getMap()!==this||!h.getActive()||!this.getTargetElement())){var f=h.handleEvent(t);if(!f||t.propagationStopped)break}}}},r.prototype.handlePostRender=function(){var t=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){var n=this.maxTilesLoading_,a=n;if(t){var o=t.viewHints;if(o[Te.ANIMATING]||o[Te.INTERACTING]){var s=Date.now()-t.time>8;n=s?0:8,a=s?0:2}}i.getTilesLoading()<n&&(i.reprioritize(),i.loadMoreTiles(n,a))}t&&this.hasListener(sa.RENDERCOMPLETE)&&!t.animate&&!this.tileQueue_.getTilesLoading()&&!this.getLoading()&&this.renderer_.dispatchRenderEvent(sa.RENDERCOMPLETE,t);for(var l=this.postRenderFunctions_,u=0,h=l.length;u<h;++u)l[u](this,t);l.length=0},r.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},r.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.mapBrowserEventHandler_){for(var i=0,n=this.keyHandlerKeys_.length;i<n;++i)Mt(this.keyHandlerKeys_[i]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(Q.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Q.WHEEL,this.boundHandleBrowserEvent_),this.handleResize_!==void 0&&(removeEventListener(Q.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,sh(this.viewport_)}if(!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new yO(this,this.moveTolerance_);for(var a in $t)this.mapBrowserEventHandler_.addEventListener($t[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Q.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Q.WHEEL,this.boundHandleBrowserEvent_,am?{passive:!1}:!1);var o=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[yt(o,Q.KEYDOWN,this.handleBrowserEvent,this),yt(o,Q.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(Q.RESIZE,this.handleResize_,!1))}this.updateSize()},r.prototype.handleTileChange_=function(){this.render()},r.prototype.handleViewPropertyChanged_=function(){this.render()},r.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Mt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Mt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=yt(t,Qn.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=yt(t,Q.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},r.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Mt),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[yt(t,Qn.PROPERTYCHANGE,this.render,this),yt(t,Q.CHANGE,this.render,this)]),this.render()},r.prototype.isRendered=function(){return!!this.frameState_},r.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},r.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),i=0,n=t.length;i<n;++i){var a=t[i].layer;a.hasRenderer()&&a.getRenderer().handleFontsChanged()}},r.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},r.prototype.removeControl=function(t){return this.getControls().remove(t)},r.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},r.prototype.removeLayer=function(t){var i=this.getLayerGroup().getLayers();return i.remove(t)},r.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},r.prototype.renderFrame_=function(t){var i=this,n=this.getSize(),a=this.getView(),o=this.frameState_,s=null;if(n!==void 0&&cy(n)&&a&&a.isDef()){var l=a.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=a.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Xc(u.center,u.resolution,u.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:u,viewHints:l,wantedTiles:{}},u.nextCenter&&u.nextResolution){var h=isNaN(u.nextRotation)?u.rotation:u.nextRotation;s.nextExtent=Xc(u.nextCenter,u.nextResolution,h,n)}}if(this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),o){var f=!this.previousExtent_||!Kc(this.previousExtent_)&&!Xs(s.extent,this.previousExtent_);f&&(this.dispatchEvent(new ch(il.MOVESTART,this,o)),this.previousExtent_=Vs(this.previousExtent_))}var c=this.previousExtent_&&!s.viewHints[Te.ANIMATING]&&!s.viewHints[Te.INTERACTING]&&!Xs(s.extent,this.previousExtent_);c&&(this.dispatchEvent(new ch(il.MOVEEND,this,s)),um(s.extent,this.previousExtent_))}this.dispatchEvent(new ch(il.POSTRENDER,this,s)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){i.postRenderTimeoutHandle_=void 0,i.handlePostRender()},0))},r.prototype.setLayerGroup=function(t){this.set(be.LAYERGROUP,t)},r.prototype.setSize=function(t){this.set(be.SIZE,t)},r.prototype.setTarget=function(t){this.set(be.TARGET,t)},r.prototype.setView=function(t){if(!t||t instanceof ma){this.set(be.VIEW,t);return}this.set(be.VIEW,new ma);var i=this;t.then(function(n){i.setView(new ma(n))})},r.prototype.updateSize=function(){var t=this.getTargetElement(),i=void 0;if(t){var n=getComputedStyle(t),a=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),o=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);!isNaN(a)&&!isNaN(o)&&(i=[a,o],!cy(i)&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(i),this.updateViewportSize_()},r.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var i=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(i=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(i)}},r}(Nr);function FI(e){var r=null;e.keyboardEventTarget!==void 0&&(r=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var t={},i=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new fO({layers:e.layers});t[be.LAYERGROUP]=i,t[be.TARGET]=e.target,t[be.VIEW]=e.view instanceof ma?e.view:new ma;var n;e.controls!==void 0&&(Array.isArray(e.controls)?n=new yr(e.controls.slice()):(ut(typeof e.controls.getArray=="function",47),n=e.controls));var a;e.interactions!==void 0&&(Array.isArray(e.interactions)?a=new yr(e.interactions.slice()):(ut(typeof e.interactions.getArray=="function",48),a=e.interactions));var o;return e.overlays!==void 0?Array.isArray(e.overlays)?o=new yr(e.overlays.slice()):(ut(typeof e.overlays.getArray=="function",49),o=e.overlays):o=new yr,{controls:n,interactions:a,keyboardEventTarget:r,overlays:o,values:t}}var NI=LI,$I=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),GI=function(e){$I(r,e);function r(t){var i=e.call(this)||this,n=t.element;return n&&!t.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),i.element=n||null,i.target_=null,i.map_=null,i.listenerKeys=[],t.render&&(i.render=t.render),t.target&&i.setTarget(t.target),i}return r.prototype.disposeInternal=function(){sh(this.element),e.prototype.disposeInternal.call(this)},r.prototype.getMap=function(){return this.map_},r.prototype.setMap=function(t){this.map_&&sh(this.element);for(var i=0,n=this.listenerKeys.length;i<n;++i)Mt(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=t,this.map_){var a=this.target_?this.target_:t.getOverlayContainerStopEvent();a.appendChild(this.element),this.render!==ea&&this.listenerKeys.push(yt(t,il.POSTRENDER,this.render,this)),t.render()}},r.prototype.render=function(t){},r.prototype.setTarget=function(t){this.target_=typeof t=="string"?document.getElementById(t):t},r}(Nr),Sd=GI,YI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),jI=function(e){YI(r,e);function r(t){var i=this,n=t||{};i=e.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this,i.ulElement_=document.createElement("ul"),i.collapsed_=n.collapsed!==void 0?n.collapsed:!0,i.userCollapsed_=i.collapsed_,i.overrideCollapsible_=n.collapsible!==void 0,i.collapsible_=n.collapsible!==void 0?n.collapsible:!0,i.collapsible_||(i.collapsed_=!1);var a=n.className!==void 0?n.className:"ol-attribution",o=n.tipLabel!==void 0?n.tipLabel:"Attributions",s=n.expandClassName!==void 0?n.expandClassName:a+"-expand",l=n.collapseLabel!==void 0?n.collapseLabel:"\u203A",u=n.collapseClassName!==void 0?n.collapseClassName:a+"-collpase";typeof l=="string"?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=l,i.collapseLabel_.className=u):i.collapseLabel_=l;var h=n.label!==void 0?n.label:"i";typeof h=="string"?(i.label_=document.createElement("span"),i.label_.textContent=h,i.label_.className=s):i.label_=h;var f=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_;i.toggleButton_=document.createElement("button"),i.toggleButton_.setAttribute("type","button"),i.toggleButton_.setAttribute("aria-expanded",String(!i.collapsed_)),i.toggleButton_.title=o,i.toggleButton_.appendChild(f),i.toggleButton_.addEventListener(Q.CLICK,i.handleClick_.bind(i),!1);var c=a+" "+oh+" "+Jc+(i.collapsed_&&i.collapsible_?" "+xm:"")+(i.collapsible_?"":" ol-uncollapsible"),d=i.element;return d.className=c,d.appendChild(i.toggleButton_),d.appendChild(i.ulElement_),i.renderedAttributions_=[],i.renderedVisible_=!0,i}return r.prototype.collectSourceAttributions_=function(t){for(var i={},n=[],a=!0,o=t.layerStatesArray,s=0,l=o.length;s<l;++s){var u=o[s];if(!!nh(u,t.viewState)){var h=u.layer.getSource();if(!!h){var f=h.getAttributions();if(!!f){var c=f(t);if(!!c)if(a=a&&h.getAttributionsCollapsible()!==!1,Array.isArray(c))for(var d=0,v=c.length;d<v;++d)c[d]in i||(n.push(c[d]),i[c[d]]=!0);else c in i||(n.push(c),i[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(a),n},r.prototype.updateElement_=function(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var i=this.collectSourceAttributions_(t),n=i.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!_o(i,this.renderedAttributions_)){Pm(this.ulElement_);for(var a=0,o=i.length;a<o;++a){var s=document.createElement("li");s.innerHTML=i[a],this.ulElement_.appendChild(s)}this.renderedAttributions_=i}},r.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},r.prototype.handleToggle_=function(){this.element.classList.toggle(xm),this.collapsed_?Im(this.collapseLabel_,this.label_):Im(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},r.prototype.getCollapsible=function(){return this.collapsible_},r.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},r.prototype.setCollapsed=function(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()},r.prototype.getCollapsed=function(){return this.collapsed_},r.prototype.render=function(t){this.updateElement_(t.frameState)},r}(Sd),WI=jI,HI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),BI=function(e){HI(r,e);function r(t){var i=this,n=t||{};i=e.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this;var a=n.className!==void 0?n.className:"ol-rotate",o=n.label!==void 0?n.label:"\u21E7",s=n.compassClassName!==void 0?n.compassClassName:"ol-compass";i.label_=null,typeof o=="string"?(i.label_=document.createElement("span"),i.label_.className=s,i.label_.textContent=o):(i.label_=o,i.label_.classList.add(s));var l=n.tipLabel?n.tipLabel:"Reset rotation",u=document.createElement("button");u.className=a+"-reset",u.setAttribute("type","button"),u.title=l,u.appendChild(i.label_),u.addEventListener(Q.CLICK,i.handleClick_.bind(i),!1);var h=a+" "+oh+" "+Jc,f=i.element;return f.className=h,f.appendChild(u),i.callResetNorth_=n.resetNorth?n.resetNorth:void 0,i.duration_=n.duration!==void 0?n.duration:250,i.autoHide_=n.autoHide!==void 0?n.autoHide:!0,i.rotation_=void 0,i.autoHide_&&i.element.classList.add(ah),i}return r.prototype.handleClick_=function(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},r.prototype.resetNorth_=function(){var t=this.getMap(),i=t.getView();if(!!i){var n=i.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!=0?i.animate({rotation:0,duration:this.duration_,easing:ko}):i.setRotation(0))}},r.prototype.render=function(t){var i=t.frameState;if(!!i){var n=i.viewState.rotation;if(n!=this.rotation_){var a="rotate("+n+"rad)";if(this.autoHide_){var o=this.element.classList.contains(ah);!o&&n===0?this.element.classList.add(ah):o&&n!==0&&this.element.classList.remove(ah)}this.label_.style.transform=a}this.rotation_=n}},r}(Sd),UI=BI,zI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),VI=function(e){zI(r,e);function r(t){var i=this,n=t||{};i=e.call(this,{element:document.createElement("div"),target:n.target})||this;var a=n.className!==void 0?n.className:"ol-zoom",o=n.delta!==void 0?n.delta:1,s=n.zoomInClassName!==void 0?n.zoomInClassName:a+"-in",l=n.zoomOutClassName!==void 0?n.zoomOutClassName:a+"-out",u=n.zoomInLabel!==void 0?n.zoomInLabel:"+",h=n.zoomOutLabel!==void 0?n.zoomOutLabel:"\u2013",f=n.zoomInTipLabel!==void 0?n.zoomInTipLabel:"Zoom in",c=n.zoomOutTipLabel!==void 0?n.zoomOutTipLabel:"Zoom out",d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=f,d.appendChild(typeof u=="string"?document.createTextNode(u):u),d.addEventListener(Q.CLICK,i.handleClick_.bind(i,o),!1);var v=document.createElement("button");v.className=l,v.setAttribute("type","button"),v.title=c,v.appendChild(typeof h=="string"?document.createTextNode(h):h),v.addEventListener(Q.CLICK,i.handleClick_.bind(i,-o),!1);var g=a+" "+oh+" "+Jc,p=i.element;return p.className=g,p.appendChild(d),p.appendChild(v),i.duration_=n.duration!==void 0?n.duration:250,i}return r.prototype.handleClick_=function(t,i){i.preventDefault(),this.zoomByDelta_(t)},r.prototype.zoomByDelta_=function(t){var i=this.getMap(),n=i.getView();if(!!n){var a=n.getZoom();if(a!==void 0){var o=n.getConstrainedZoom(a+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:o,duration:this.duration_,easing:ko})):n.setZoom(o)}}},r}(Sd),XI=VI,Qe={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},KI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ee={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},ZI=function(e){KI(r,e);function r(t){var i=e.call(this)||this;i.on,i.once,i.un,i.options=t,i.id=t.id,i.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,i.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,i.element=document.createElement("div"),i.element.className=t.className!==void 0?t.className:"ol-overlay-container "+XC,i.element.style.position="absolute",i.element.style.pointerEvents="auto";var n=t.autoPan;return n&&typeof n!="object"&&(n={animation:t.autoPanAnimation,margin:t.autoPanMargin}),i.autoPan=n||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(Ee.ELEMENT,i.handleElementChanged),i.addChangeListener(Ee.MAP,i.handleMapChanged),i.addChangeListener(Ee.OFFSET,i.handleOffsetChanged),i.addChangeListener(Ee.POSITION,i.handlePositionChanged),i.addChangeListener(Ee.POSITIONING,i.handlePositioningChanged),t.element!==void 0&&i.setElement(t.element),i.setOffset(t.offset!==void 0?t.offset:[0,0]),i.setPositioning(t.positioning!==void 0?t.positioning:Qe.TOP_LEFT),t.position!==void 0&&i.setPosition(t.position),i}return r.prototype.getElement=function(){return this.get(Ee.ELEMENT)},r.prototype.getId=function(){return this.id},r.prototype.getMap=function(){return this.get(Ee.MAP)},r.prototype.getOffset=function(){return this.get(Ee.OFFSET)},r.prototype.getPosition=function(){return this.get(Ee.POSITION)},r.prototype.getPositioning=function(){return this.get(Ee.POSITIONING)},r.prototype.handleElementChanged=function(){Pm(this.element);var t=this.getElement();t&&this.element.appendChild(t)},r.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(sh(this.element),Mt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=yt(t,il.POSTRENDER,this.render,this),this.updatePixelPosition();var i=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}},r.prototype.render=function(){this.updatePixelPosition()},r.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},r.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},r.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},r.prototype.setElement=function(t){this.set(Ee.ELEMENT,t)},r.prototype.setMap=function(t){this.set(Ee.MAP,t)},r.prototype.setOffset=function(t){this.set(Ee.OFFSET,t)},r.prototype.setPosition=function(t){this.set(Ee.POSITION,t)},r.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},r.prototype.panIntoView=function(t){var i=this.getMap();if(!(!i||!i.getTargetElement()||!this.get(Ee.POSITION))){var n=this.getRect(i.getTargetElement(),i.getSize()),a=this.getElement(),o=this.getRect(a,[ZC(a),qC(a)]),s=t||{},l=s.margin===void 0?20:s.margin;if(!ia(n,o)){var u=o[0]-n[0],h=n[2]-o[2],f=o[1]-n[1],c=n[3]-o[3],d=[0,0];if(u<0?d[0]=u-l:h<0&&(d[0]=Math.abs(h)+l),f<0?d[1]=f-l:c<0&&(d[1]=Math.abs(c)+l),d[0]!==0||d[1]!==0){var v=i.getView().getCenterInternal(),g=i.getPixelFromCoordinateInternal(v);if(!g)return;var p=[g[0]+d[0],g[1]+d[1]],m=s.animation||{};i.getView().animateInternal({center:i.getCoordinateFromPixelInternal(p),duration:m.duration,easing:m.easing})}}}},r.prototype.getRect=function(t,i){var n=t.getBoundingClientRect(),a=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[a,o,a+i[0],o+i[1]]},r.prototype.setPositioning=function(t){this.set(Ee.POSITIONING,t)},r.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},r.prototype.updatePixelPosition=function(){var t=this.getMap(),i=this.getPosition();if(!t||!t.isRendered()||!i){this.setVisible(!1);return}var n=t.getPixelFromCoordinate(i),a=t.getSize();this.updateRenderedPosition(n,a)},r.prototype.updateRenderedPosition=function(t,i){var n=this.element.style,a=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var s=Math.round(t[0]+a[0])+"px",l=Math.round(t[1]+a[1])+"px",u="0%",h="0%";o==Qe.BOTTOM_RIGHT||o==Qe.CENTER_RIGHT||o==Qe.TOP_RIGHT?u="-100%":(o==Qe.BOTTOM_CENTER||o==Qe.CENTER_CENTER||o==Qe.TOP_CENTER)&&(u="-50%"),o==Qe.BOTTOM_LEFT||o==Qe.BOTTOM_CENTER||o==Qe.BOTTOM_RIGHT?h="-100%":(o==Qe.CENTER_LEFT||o==Qe.CENTER_CENTER||o==Qe.CENTER_RIGHT)&&(h="-50%");var f="translate("+u+", "+h+") translate("+s+", "+l+")";this.rendered.transform_!=f&&(this.rendered.transform_=f,n.transform=f,n.msTransform=f)},r.prototype.getOptions=function(){return this.options},r}(Nr),Z6=ZI;function qI(e){var r=e||{},t=new yr,i=r.zoom!==void 0?r.zoom:!0;i&&t.push(new XI(r.zoomOptions));var n=r.rotate!==void 0?r.rotate:!0;n&&t.push(new UI(r.rotateOptions));var a=r.attribution!==void 0?r.attribution:!0;return a&&t.push(new WI(r.attributionOptions)),t}var dy={ACTIVE:"active"},JI=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),QI=function(e){JI(r,e);function r(t){var i=e.call(this)||this;return i.on,i.once,i.un,t&&t.handleEvent&&(i.handleEvent=t.handleEvent),i.map_=null,i.setActive(!0),i}return r.prototype.getActive=function(){return this.get(dy.ACTIVE)},r.prototype.getMap=function(){return this.map_},r.prototype.handleEvent=function(t){return!0},r.prototype.setActive=function(t){this.set(dy.ACTIVE,t)},r.prototype.setMap=function(t){this.map_=t},r}(Nr);function tP(e,r,t){var i=e.getCenterInternal();if(i){var n=[i[0]+r[0],i[1]+r[1]];e.animateInternal({duration:t!==void 0?t:250,easing:qO,center:e.getConstrainedCenter(n)})}}function xd(e,r,t,i){var n=e.getZoom();if(n!==void 0){var a=e.getConstrainedZoom(n+r),o=e.getResolutionForZoom(a);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:ko})}}var ol=QI,eP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rP=function(e){eP(r,e);function r(t){var i=e.call(this)||this,n=t||{};return i.delta_=n.delta?n.delta:1,i.duration_=n.duration!==void 0?n.duration:250,i}return r.prototype.handleEvent=function(t){var i=!1;if(t.type==$t.DBLCLICK){var n=t.originalEvent,a=t.map,o=t.coordinate,s=n.shiftKey?-this.delta_:this.delta_,l=a.getView();xd(l,s,o,this.duration_),n.preventDefault(),i=!0}return!i},r}(ol),iP=rP,nP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),aP=function(e){nP(r,e);function r(t){var i=this,n=t||{};return i=e.call(this,n)||this,n.handleDownEvent&&(i.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(i.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(i.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(i.handleUpEvent=n.handleUpEvent),n.stopDown&&(i.stopDown=n.stopDown),i.handlingDownUpSequence=!1,i.trackedPointers_={},i.targetPointers=[],i}return r.prototype.getPointerCount=function(){return this.targetPointers.length},r.prototype.handleDownEvent=function(t){return!1},r.prototype.handleDragEvent=function(t){},r.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var i=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==$t.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==$t.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==$t.POINTERDOWN){var a=this.handleDownEvent(t);this.handlingDownUpSequence=a,i=this.stopDown(a)}else t.type==$t.POINTERMOVE&&this.handleMoveEvent(t);return!i},r.prototype.handleMoveEvent=function(t){},r.prototype.handleUpEvent=function(t){return!1},r.prototype.stopDown=function(t){return t},r.prototype.updateTrackedPointers_=function(t){if(oP(t)){var i=t.originalEvent,n=i.pointerId.toString();t.type==$t.POINTERUP?delete this.trackedPointers_[n]:t.type==$t.POINTERDOWN?this.trackedPointers_[n]=i:n in this.trackedPointers_&&(this.trackedPointers_[n]=i),this.targetPointers=Qg(this.trackedPointers_)}},r}(ol);function Cd(e){for(var r=e.length,t=0,i=0,n=0;n<r;n++)t+=e[n].clientX,i+=e[n].clientY;return[t/r,i/r]}function oP(e){var r=e.type;return r===$t.POINTERDOWN||r===$t.POINTERDRAG||r===$t.POINTERUP}var sl=aP;function Od(e){var r=arguments;return function(t){for(var i=!0,n=0,a=r.length;n<a&&(i=i&&r[n](t),!!i);++n);return i}}var sP=function(e){var r=e.originalEvent;return r.altKey&&!(r.metaKey||r.ctrlKey)&&r.shiftKey},lP=function(e){return e.target.getTargetElement().contains(document.activeElement)},vy=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?lP(e):!0},uP=wo,py=function(e){var r=e.originalEvent;return r.button==0&&!(fC&&cC&&r.ctrlKey)},gy=function(e){var r=e.originalEvent;return!r.altKey&&!(r.metaKey||r.ctrlKey)&&!r.shiftKey},hP=function(e){var r=e.originalEvent;return!r.altKey&&!(r.metaKey||r.ctrlKey)&&r.shiftKey},my=function(e){var r=e.originalEvent,t=r.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"},Id=function(e){var r=e.originalEvent;return ut(r!==void 0,56),r.pointerType=="mouse"},fP=function(e){var r=e.originalEvent;return ut(r!==void 0,56),r.isPrimary&&r.button===0},cP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),dP=function(e){cP(r,e);function r(t){var i=e.call(this,{stopDown:Xu})||this,n=t||{};i.kinetic_=n.kinetic,i.lastCentroid=null,i.lastPointersCount_,i.panning_=!1;var a=n.condition?n.condition:Od(gy,fP);return i.condition_=n.onFocusOnly?Od(vy,a):a,i.noKinetic_=!1,i}return r.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var i=this.targetPointers,n=Cd(i);if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var a=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],o=t.map,s=o.getView();YC(a,s.getResolution()),qc(a,s.getRotation()),s.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()},r.prototype.handleUpEvent=function(t){var i=t.map,n=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var a=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=n.getCenterInternal(),l=i.getPixelFromCoordinateInternal(s),u=i.getCoordinateFromPixelInternal([l[0]-a*Math.cos(o),l[1]-a*Math.sin(o)]);n.animateInternal({center:n.getConstrainedCenter(u),duration:500,easing:ko})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},r.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var i=t.map,n=i.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},r}(sl),vP=dP,pP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),gP=function(e){pP(r,e);function r(t){var i=this,n=t||{};return i=e.call(this,{stopDown:Xu})||this,i.condition_=n.condition?n.condition:sP,i.lastAngle_=void 0,i.duration_=n.duration!==void 0?n.duration:250,i}return r.prototype.handleDragEvent=function(t){if(!!Id(t)){var i=t.map,n=i.getView();if(n.getConstraints().rotation!==cd){var a=i.getSize(),o=t.pixel,s=Math.atan2(a[1]/2-o[1],o[0]-a[0]/2);if(this.lastAngle_!==void 0){var l=s-this.lastAngle_;n.adjustRotationInternal(-l)}this.lastAngle_=s}}},r.prototype.handleUpEvent=function(t){if(!Id(t))return!0;var i=t.map,n=i.getView();return n.endInteraction(this.duration_),!1},r.prototype.handleDownEvent=function(t){if(!Id(t))return!1;if(py(t)&&this.condition_(t)){var i=t.map;return i.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},r}(sl),mP=gP,yP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),_P=function(e){yP(r,e);function r(t){var i=e.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.style.pointerEvents="auto",i.element_.className="ol-box "+t,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return r.prototype.disposeInternal=function(){this.setMap(null)},r.prototype.render_=function(){var t=this.startPixel_,i=this.endPixel_,n="px",a=this.element_.style;a.left=Math.min(t[0],i[0])+n,a.top=Math.min(t[1],i[1])+n,a.width=Math.abs(i[0]-t[0])+n,a.height=Math.abs(i[1]-t[1])+n},r.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},r.prototype.setPixels=function(t,i){this.startPixel_=t,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()},r.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,i=this.endPixel_,n=[t,[t[0],i[1]],i,[i[0],t[1]]],a=n.map(this.map_.getCoordinateFromPixelInternal,this.map_);a[4]=a[0].slice(),this.geometry_?this.geometry_.setCoordinates([a]):this.geometry_=new wh([a])},r.prototype.getGeometry=function(){return this.geometry_},r}(jc),wP=_P,yy=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Th={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},Pd=function(e){yy(r,e);function r(t,i,n){var a=e.call(this,t)||this;return a.coordinate=i,a.mapBrowserEvent=n,a}return r}(pn),bP=function(e){yy(r,e);function r(t){var i=e.call(this)||this;i.on,i.once,i.un;var n=t||{};return i.box_=new wP(n.className||"ol-dragbox"),i.minArea_=n.minArea!==void 0?n.minArea:64,n.onBoxEnd&&(i.onBoxEnd=n.onBoxEnd),i.startPixel_=null,i.condition_=n.condition?n.condition:py,i.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:i.defaultBoxEndCondition,i}return r.prototype.defaultBoxEndCondition=function(t,i,n){var a=n[0]-i[0],o=n[1]-i[1];return a*a+o*o>=this.minArea_},r.prototype.getGeometry=function(){return this.box_.getGeometry()},r.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Pd(Th.BOXDRAG,t.coordinate,t))},r.prototype.handleUpEvent=function(t){this.box_.setMap(null);var i=this.boxEndCondition_(t,this.startPixel_,t.pixel);return i&&this.onBoxEnd(t),this.dispatchEvent(new Pd(i?Th.BOXEND:Th.BOXCANCEL,t.coordinate,t)),!1},r.prototype.handleDownEvent=function(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Pd(Th.BOXSTART,t.coordinate,t)),!0):!1},r.prototype.onBoxEnd=function(t){},r}(sl),TP=bP,EP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),SP=function(e){EP(r,e);function r(t){var i=this,n=t||{},a=n.condition?n.condition:hP;return i=e.call(this,{condition:a,className:n.className||"ol-dragzoom",minArea:n.minArea})||this,i.duration_=n.duration!==void 0?n.duration:200,i.out_=n.out!==void 0?n.out:!1,i}return r.prototype.onBoxEnd=function(t){var i=this.getMap(),n=i.getView(),a=this.getGeometry();if(this.out_){var o=n.rotatedExtentForGeometry(a),s=n.getResolutionForExtentInternal(o),l=n.getResolution()/s;a=a.clone(),a.scale(l*l)}n.fitInternal(a,{duration:this.duration_,easing:ko})},r}(TP),xP=SP,ya={LEFT:37,UP:38,RIGHT:39,DOWN:40},CP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),OP=function(e){CP(r,e);function r(t){var i=e.call(this)||this,n=t||{};return i.defaultCondition_=function(a){return gy(a)&&my(a)},i.condition_=n.condition!==void 0?n.condition:i.defaultCondition_,i.duration_=n.duration!==void 0?n.duration:100,i.pixelDelta_=n.pixelDelta!==void 0?n.pixelDelta:128,i}return r.prototype.handleEvent=function(t){var i=!1;if(t.type==Q.KEYDOWN){var n=t.originalEvent,a=n.keyCode;if(this.condition_(t)&&(a==ya.DOWN||a==ya.LEFT||a==ya.RIGHT||a==ya.UP)){var o=t.map,s=o.getView(),l=s.getResolution()*this.pixelDelta_,u=0,h=0;a==ya.DOWN?h=-l:a==ya.LEFT?u=-l:a==ya.RIGHT?u=l:h=l;var f=[u,h];qc(f,s.getRotation()),tP(s,f,this.duration_),n.preventDefault(),i=!0}}return!i},r}(ol),IP=OP,PP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),kP=function(e){PP(r,e);function r(t){var i=e.call(this)||this,n=t||{};return i.condition_=n.condition?n.condition:my,i.delta_=n.delta?n.delta:1,i.duration_=n.duration!==void 0?n.duration:100,i}return r.prototype.handleEvent=function(t){var i=!1;if(t.type==Q.KEYDOWN||t.type==Q.KEYPRESS){var n=t.originalEvent,a=n.charCode;if(this.condition_(t)&&(a=="+".charCodeAt(0)||a=="-".charCodeAt(0))){var o=t.map,s=a=="+".charCodeAt(0)?this.delta_:-this.delta_,l=o.getView();xd(l,s,void 0,this.duration_),n.preventDefault(),i=!0}}return!i},r}(ol),RP=kP,DP=function(){function e(r,t,i){this.decay_=r,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},e.prototype.update=function(r,t){this.points_.push(r,t,Date.now())},e.prototype.end=function(){if(this.points_.length<6)return!1;var r=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<r)return!1;for(var i=t-3;i>0&&this.points_[i+2]>r;)i-=3;var n=this.points_[t+2]-this.points_[i+2];if(n<1e3/60)return!1;var a=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,a),this.initialVelocity_=Math.sqrt(a*a+o*o)/n,this.initialVelocity_>this.minVelocity_},e.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},e.prototype.getAngle=function(){return this.angle_},e}(),AP=DP,MP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),kd={TRACKPAD:"trackpad",WHEEL:"wheel"},LP=function(e){MP(r,e);function r(t){var i=this,n=t||{};i=e.call(this,n)||this,i.totalDelta_=0,i.lastDelta_=0,i.maxDelta_=n.maxDelta!==void 0?n.maxDelta:1,i.duration_=n.duration!==void 0?n.duration:250,i.timeout_=n.timeout!==void 0?n.timeout:80,i.useAnchor_=n.useAnchor!==void 0?n.useAnchor:!0,i.constrainResolution_=n.constrainResolution!==void 0?n.constrainResolution:!1;var a=n.condition?n.condition:uP;return i.condition_=n.onFocusOnly?Od(vy,a):a,i.lastAnchor_=null,i.startTime_=void 0,i.timeoutId_,i.mode_=void 0,i.trackpadEventGap_=400,i.trackpadTimeoutId_,i.deltaPerZoom_=300,i}return r.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var t=this.getMap().getView();t.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},r.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var i=t.type;if(i!==Q.WHEEL)return!0;var n=t.map,a=t.originalEvent;a.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);var o;if(t.type==Q.WHEEL&&(o=a.deltaY,hC&&a.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=nm),a.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),o===0)return!1;this.lastDelta_=o;var s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?kd.TRACKPAD:kd.WHEEL);var l=n.getView();if(this.mode_===kd.TRACKPAD&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=o;var u=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),u),!1},r.prototype.handleWheelZoom_=function(t){var i=t.getView();i.getAnimating()&&i.cancelAnimations();var n=-Qt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),xd(i,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},r.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},r}(ol),FP=LP,NP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$P=function(e){NP(r,e);function r(t){var i=this,n=t||{},a=n;return a.stopDown||(a.stopDown=Xu),i=e.call(this,a)||this,i.anchor_=null,i.lastAngle_=void 0,i.rotating_=!1,i.rotationDelta_=0,i.threshold_=n.threshold!==void 0?n.threshold:.3,i.duration_=n.duration!==void 0?n.duration:250,i}return r.prototype.handleDragEvent=function(t){var i=0,n=this.targetPointers[0],a=this.targetPointers[1],o=Math.atan2(a.clientY-n.clientY,a.clientX-n.clientX);if(this.lastAngle_!==void 0){var s=o-this.lastAngle_;this.rotationDelta_+=s,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=s}this.lastAngle_=o;var l=t.map,u=l.getView();if(u.getConstraints().rotation!==cd){var h=l.getViewport().getBoundingClientRect(),f=Cd(this.targetPointers);f[0]-=h.left,f[1]-=h.top,this.anchor_=l.getCoordinateFromPixelInternal(f),this.rotating_&&(l.render(),u.adjustRotationInternal(i,this.anchor_))}},r.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var i=t.map,n=i.getView();return n.endInteraction(this.duration_),!1}else return!0},r.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}else return!1},r}(sl),GP=$P,YP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),jP=function(e){YP(r,e);function r(t){var i=this,n=t||{},a=n;return a.stopDown||(a.stopDown=Xu),i=e.call(this,a)||this,i.anchor_=null,i.duration_=n.duration!==void 0?n.duration:400,i.lastDistance_=void 0,i.lastScaleDelta_=1,i}return r.prototype.handleDragEvent=function(t){var i=1,n=this.targetPointers[0],a=this.targetPointers[1],o=n.clientX-a.clientX,s=n.clientY-a.clientY,l=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(i=this.lastDistance_/l),this.lastDistance_=l;var u=t.map,h=u.getView();i!=1&&(this.lastScaleDelta_=i);var f=u.getViewport().getBoundingClientRect(),c=Cd(this.targetPointers);c[0]-=f.left,c[1]-=f.top,this.anchor_=u.getCoordinateFromPixelInternal(c),u.render(),h.adjustResolutionInternal(i,this.anchor_)},r.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var i=t.map,n=i.getView(),a=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,a),!1}else return!0},r.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}else return!1},r}(sl),WP=jP,Ro={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};function _y(e,r,t,i,n,a,o){var s,l,u=(t-r)/i;if(u===1)s=r;else if(u===2)s=r,l=n;else if(u!==0){for(var h=e[r],f=e[r+1],c=0,d=[0],v=r+i;v<t;v+=i){var g=e[v],p=e[v+1];c+=Math.sqrt((g-h)*(g-h)+(p-f)*(p-f)),d.push(c),h=g,f=p}var m=n*c,_=Vx(d,m);_<0?(l=(m-d[-_-2])/(d[-_-1]-d[-_-2]),s=r+(-_-2)*i):s=r+_*i}for(var y=o>1?o:2,w=a||new Array(y),v=0;v<y;++v)w[v]=s===void 0?NaN:l===void 0?e[s+v]:Ci(e[s+v],e[s+i+v],l);return w}function Rd(e,r,t,i,n,a){if(t==r)return null;var o;if(n<e[r+i-1])return a?(o=e.slice(r,r+i),o[i-1]=n,o):null;if(e[t-1]<n)return a?(o=e.slice(t-i,t),o[i-1]=n,o):null;if(n==e[r+i-1])return e.slice(r,r+i);for(var s=r/i,l=t/i;s<l;){var u=s+l>>1;n<e[(u+1)*i-1]?l=u:s=u+1}var h=e[s*i-1];if(n==h)return e.slice((s-1)*i,(s-1)*i+i);var f=e[(s+1)*i-1],c=(n-h)/(f-h);o=[];for(var d=0;d<i-1;++d)o.push(Ci(e[(s-1)*i+d],e[s*i+d],c));return o.push(n),o}function HP(e,r,t,i,n,a,o){if(o)return Rd(e,r,t[t.length-1],i,n,a);var s;if(n<e[i-1])return a?(s=e.slice(0,i),s[i-1]=n,s):null;if(e[e.length-1]<n)return a?(s=e.slice(e.length-i),s[i-1]=n,s):null;for(var l=0,u=t.length;l<u;++l){var h=t[l];if(r!=h){if(n<e[r+i-1])return null;if(n<=e[h-1])return Rd(e,r,h,i,n,!1);r=h}}return null}function wy(e,r,t,i){for(var n=e[r],a=e[r+1],o=0,s=r+i;s<t;s+=i){var l=e[s],u=e[s+1];o+=Math.sqrt((l-n)*(l-n)+(u-a)*(u-a)),n=l,a=u}return o}var BP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),UP=function(e){BP(r,e);function r(t,i){var n=e.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?n.setFlatCoordinates(i,t):n.setCoordinates(t,i),n}return r.prototype.appendCoordinate=function(t){this.flatCoordinates?Ei(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},r.prototype.clone=function(){var t=new r(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},r.prototype.closestPointXY=function(t,i,n,a){return a<ra(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(dd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,n,a))},r.prototype.forEachSegment=function(t){return ay(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},r.prototype.getCoordinateAtM=function(t,i){if(this.layout!=Kt.XYM&&this.layout!=Kt.XYZM)return null;var n=i!==void 0?i:!1;return Rd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},r.prototype.getCoordinates=function(){return yn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getCoordinateAt=function(t,i){return _y(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,this.stride)},r.prototype.getLength=function(){return wy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},r.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=yd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new r(i,Kt.XY)},r.prototype.getType=function(){return H.LINE_STRING},r.prototype.intersectsExtent=function(t){return _h(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},r.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=mh(this.flatCoordinates,0,t,this.stride),this.changed()},r}(va),Dd=UP,zP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),VP=function(e){zP(r,e);function r(t,i,n){var a=e.call(this)||this;if(a.ends_=[],a.maxDelta_=-1,a.maxDeltaRevision_=-1,Array.isArray(t[0]))a.setCoordinates(t,i);else if(i!==void 0&&n)a.setFlatCoordinates(i,t),a.ends_=n;else{for(var o=a.getLayout(),s=t,l=[],u=[],h=0,f=s.length;h<f;++h){var c=s[h];h===0&&(o=c.getLayout()),Ei(l,c.getFlatCoordinates()),u.push(l.length)}a.setFlatCoordinates(o,l),a.ends_=u}return a}return r.prototype.appendLineString=function(t){this.flatCoordinates?Ei(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},r.prototype.clone=function(){var t=new r(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},r.prototype.closestPointXY=function(t,i,n,a){return a<ra(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vd(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,i,n,a))},r.prototype.getCoordinateAtM=function(t,i,n){if(this.layout!=Kt.XYM&&this.layout!=Kt.XYZM||this.flatCoordinates.length===0)return null;var a=i!==void 0?i:!1,o=n!==void 0?n:!1;return HP(this.flatCoordinates,0,this.ends_,this.stride,t,a,o)},r.prototype.getCoordinates=function(){return al(this.flatCoordinates,0,this.ends_,this.stride)},r.prototype.getEnds=function(){return this.ends_},r.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Dd(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},r.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,i=this.ends_,n=this.layout,a=[],o=0,s=0,l=i.length;s<l;++s){var u=i[s],h=new Dd(t.slice(o,u),n);a.push(h),o=u}return a},r.prototype.getFlatMidpoints=function(){for(var t=[],i=this.flatCoordinates,n=0,a=this.ends_,o=this.stride,s=0,l=a.length;s<l;++s){var u=a[s],h=_y(i,n,u,o,.5);Ei(t,h),n=u}return t},r.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=hI(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new r(i,Kt.XY,n)},r.prototype.getType=function(){return H.MULTI_LINE_STRING},r.prototype.intersectsExtent=function(t){return bI(this.flatCoordinates,0,this.ends_,this.stride,t)},r.prototype.setCoordinates=function(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=md(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()},r}(va),XP=VP,KP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ZP=function(e){KP(r,e);function r(t,i){var n=e.call(this)||this;return i&&!Array.isArray(t[0])?n.setFlatCoordinates(i,t):n.setCoordinates(t,i),n}return r.prototype.appendPoint=function(t){this.flatCoordinates?Ei(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},r.prototype.clone=function(){var t=new r(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},r.prototype.closestPointXY=function(t,i,n,a){if(a<ra(this.getExtent(),t,i))return a;for(var o=this.flatCoordinates,s=this.stride,l=0,u=o.length;l<u;l+=s){var h=oa(t,i,o[l],o[l+1]);if(h<a){a=h;for(var f=0;f<s;++f)n[f]=o[l+f];n.length=s}}return a},r.prototype.getCoordinates=function(){return yn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getPoint=function(t){var i=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||i<=t?null:new yh(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},r.prototype.getPoints=function(){for(var t=this.flatCoordinates,i=this.layout,n=this.stride,a=[],o=0,s=t.length;o<s;o+=n){var l=new yh(t.slice(o,o+n),i);a.push(l)}return a},r.prototype.getType=function(){return H.MULTI_POINT},r.prototype.intersectsExtent=function(t){for(var i=this.flatCoordinates,n=this.stride,a=0,o=i.length;a<o;a+=n){var s=i[a],l=i[a+1];if(Uc(t,s,l))return!0}return!1},r.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=mh(this.flatCoordinates,0,t,this.stride),this.changed()},r}(va),by=ZP;function qP(e,r,t,i){for(var n=[],a=gr(),o=0,s=t.length;o<s;++o){var l=t[o];a=hm(e,r,l[0],i),n.push((a[0]+a[2])/2,(a[1]+a[3])/2),r=l[l.length-1]}return n}var JP=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),QP=function(e){JP(r,e);function r(t,i,n){var a=e.call(this)||this;if(a.endss_=[],a.flatInteriorPointsRevision_=-1,a.flatInteriorPoints_=null,a.maxDelta_=-1,a.maxDeltaRevision_=-1,a.orientedRevision_=-1,a.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){for(var o=a.getLayout(),s=t,l=[],u=[],h=0,f=s.length;h<f;++h){var c=s[h];h===0&&(o=c.getLayout());for(var d=l.length,v=c.getEnds(),g=0,p=v.length;g<p;++g)v[g]+=d;Ei(l,c.getFlatCoordinates()),u.push(v)}i=o,t=l,n=u}return i!==void 0&&n?(a.setFlatCoordinates(i,t),a.endss_=n):a.setCoordinates(t,i),a}return r.prototype.appendPolygon=function(t){var i;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),i=t.getEnds().slice(),this.endss_.push();else{var n=this.flatCoordinates.length;Ei(this.flatCoordinates,t.getFlatCoordinates()),i=t.getEnds().slice();for(var a=0,o=i.length;a<o;++a)i[a]+=n}this.endss_.push(i),this.changed()},r.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();var a=new r(this.flatCoordinates.slice(),this.layout,i);return a.applyProperties(this),a},r.prototype.closestPointXY=function(t,i,n,a){return a<ra(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(oI(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),sI(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,i,n,a))},r.prototype.containsXY=function(t,i){return _I(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,i)},r.prototype.getArea=function(){return dI(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},r.prototype.getCoordinates=function(t){var i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),uy(i,0,this.endss_,this.stride,t)):i=this.flatCoordinates,_d(i,0,this.endss_,this.stride)},r.prototype.getEndss=function(){return this.endss_},r.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=qP(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=wI(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},r.prototype.getInteriorPoints=function(){return new by(this.getFlatInteriorPoints().slice(),Kt.XYM)},r.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;xI(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=uy(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},r.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=cI(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new r(i,Kt.XY,n)},r.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var i;if(t===0)i=0;else{var n=this.endss_[t-1];i=n[n.length-1]}var a=this.endss_[t].slice(),o=a[a.length-1];if(i!==0)for(var s=0,l=a.length;s<l;++s)a[s]-=i;return new wh(this.flatCoordinates.slice(i,o),this.layout,a)},r.prototype.getPolygons=function(){for(var t=this.layout,i=this.flatCoordinates,n=this.endss_,a=[],o=0,s=0,l=n.length;s<l;++s){var u=n[s].slice(),h=u[u.length-1];if(o!==0)for(var f=0,c=u.length;f<c;++f)u[f]-=o;var d=new wh(i.slice(o,h),t,u);a.push(d),o=h}return a},r.prototype.getType=function(){return H.MULTI_POLYGON},r.prototype.intersectsExtent=function(t){return EI(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},r.prototype.setCoordinates=function(t,i){this.setLayout(i,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var n=uI(this.flatCoordinates,0,t,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{var a=n[n.length-1];this.flatCoordinates.length=a.length===0?0:a[a.length-1]}this.changed()},r}(va),tk=QP;function ek(e,r,t,i,n){Ty(e,r,t||0,i||e.length-1,n||rk)}function Ty(e,r,t,i,n){for(;i>t;){if(i-t>600){var a=i-t+1,o=r-t+1,s=Math.log(a),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1),h=Math.max(t,Math.floor(r-o*l/a+u)),f=Math.min(i,Math.floor(r+(a-o)*l/a+u));Ty(e,r,h,f,n)}var c=e[r],d=t,v=i;for(ll(e,t,r),n(e[i],c)>0&&ll(e,t,i);d<v;){for(ll(e,d,v),d++,v--;n(e[d],c)<0;)d++;for(;n(e[v],c)>0;)v--}n(e[t],c)===0?ll(e,t,v):(v++,ll(e,v,i)),v<=r&&(t=v+1),r<=v&&(i=v-1)}}function ll(e,r,t){var i=e[r];e[r]=e[t],e[t]=i}function rk(e,r){return e<r?-1:e>r?1:0}class Ey{constructor(r=9){this._maxEntries=Math.max(4,r),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(r){let t=this.data;const i=[];if(!Sh(r,t))return i;const n=this.toBBox,a=[];for(;t;){for(let o=0;o<t.children.length;o++){const s=t.children[o],l=t.leaf?n(s):s;Sh(r,l)&&(t.leaf?i.push(s):Md(r,l)?this._all(s,i):a.push(s))}t=a.pop()}return i}collides(r){let t=this.data;if(!Sh(r,t))return!1;const i=[];for(;t;){for(let n=0;n<t.children.length;n++){const a=t.children[n],o=t.leaf?this.toBBox(a):a;if(Sh(r,o)){if(t.leaf||Md(r,o))return!0;i.push(a)}}t=i.pop()}return!1}load(r){if(!(r&&r.length))return this;if(r.length<this._minEntries){for(let i=0;i<r.length;i++)this.insert(r[i]);return this}let t=this._build(r.slice(),0,r.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(r){return r&&this._insert(r,this.data.height-1),this}clear(){return this.data=Ao([]),this}remove(r,t){if(!r)return this;let i=this.data;const n=this.toBBox(r),a=[],o=[];let s,l,u;for(;i||a.length;){if(i||(i=a.pop(),l=a[a.length-1],s=o.pop(),u=!0),i.leaf){const h=ik(r,i.children,t);if(h!==-1)return i.children.splice(h,1),a.push(i),this._condense(a),this}!u&&!i.leaf&&Md(i,n)?(a.push(i),o.push(s),s=0,l=i,i=i.children[0]):l?(s++,i=l.children[s],u=!1):i=null}return this}toBBox(r){return r}compareMinX(r,t){return r.minX-t.minX}compareMinY(r,t){return r.minY-t.minY}toJSON(){return this.data}fromJSON(r){return this.data=r,this}_all(r,t){const i=[];for(;r;)r.leaf?t.push(...r.children):i.push(...r.children),r=i.pop();return t}_build(r,t,i,n){const a=i-t+1;let o=this._maxEntries,s;if(a<=o)return s=Ao(r.slice(t,i+1)),Do(s,this.toBBox),s;n||(n=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,n-1))),s=Ao([]),s.leaf=!1,s.height=n;const l=Math.ceil(a/o),u=l*Math.ceil(Math.sqrt(o));Sy(r,t,i,u,this.compareMinX);for(let h=t;h<=i;h+=u){const f=Math.min(h+u-1,i);Sy(r,h,f,l,this.compareMinY);for(let c=h;c<=f;c+=l){const d=Math.min(c+l-1,f);s.children.push(this._build(r,c,d,n-1))}}return Do(s,this.toBBox),s}_chooseSubtree(r,t,i,n){for(;n.push(t),!(t.leaf||n.length-1===i);){let a=1/0,o=1/0,s;for(let l=0;l<t.children.length;l++){const u=t.children[l],h=Ad(u),f=ok(r,u)-h;f<o?(o=f,a=h<a?h:a,s=u):f===o&&h<a&&(a=h,s=u)}t=s||t.children[0]}return t}_insert(r,t,i){const n=i?r:this.toBBox(r),a=[],o=this._chooseSubtree(n,this.data,t,a);for(o.children.push(r),hl(o,n);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(n,a,t)}_split(r,t){const i=r[t],n=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,n);const o=this._chooseSplitIndex(i,a,n),s=Ao(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,Do(i,this.toBBox),Do(s,this.toBBox),t?r[t-1].children.push(s):this._splitRoot(i,s)}_splitRoot(r,t){this.data=Ao([r,t]),this.data.height=r.height+1,this.data.leaf=!1,Do(this.data,this.toBBox)}_chooseSplitIndex(r,t,i){let n,a=1/0,o=1/0;for(let s=t;s<=i-t;s++){const l=ul(r,0,s,this.toBBox),u=ul(r,s,i,this.toBBox),h=sk(l,u),f=Ad(l)+Ad(u);h<a?(a=h,n=s,o=f<o?f:o):h===a&&f<o&&(o=f,n=s)}return n||i-t}_chooseSplitAxis(r,t,i){const n=r.leaf?this.compareMinX:nk,a=r.leaf?this.compareMinY:ak,o=this._allDistMargin(r,t,i,n),s=this._allDistMargin(r,t,i,a);o<s&&r.children.sort(n)}_allDistMargin(r,t,i,n){r.children.sort(n);const a=this.toBBox,o=ul(r,0,t,a),s=ul(r,i-t,i,a);let l=Eh(o)+Eh(s);for(let u=t;u<i-t;u++){const h=r.children[u];hl(o,r.leaf?a(h):h),l+=Eh(o)}for(let u=i-t-1;u>=t;u--){const h=r.children[u];hl(s,r.leaf?a(h):h),l+=Eh(s)}return l}_adjustParentBBoxes(r,t,i){for(let n=i;n>=0;n--)hl(t[n],r)}_condense(r){for(let t=r.length-1,i;t>=0;t--)r[t].children.length===0?t>0?(i=r[t-1].children,i.splice(i.indexOf(r[t]),1)):this.clear():Do(r[t],this.toBBox)}}function ik(e,r,t){if(!t)return r.indexOf(e);for(let i=0;i<r.length;i++)if(t(e,r[i]))return i;return-1}function Do(e,r){ul(e,0,e.children.length,r,e)}function ul(e,r,t,i,n){n||(n=Ao(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let a=r;a<t;a++){const o=e.children[a];hl(n,e.leaf?i(o):o)}return n}function hl(e,r){return e.minX=Math.min(e.minX,r.minX),e.minY=Math.min(e.minY,r.minY),e.maxX=Math.max(e.maxX,r.maxX),e.maxY=Math.max(e.maxY,r.maxY),e}function nk(e,r){return e.minX-r.minX}function ak(e,r){return e.minY-r.minY}function Ad(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Eh(e){return e.maxX-e.minX+(e.maxY-e.minY)}function ok(e,r){return(Math.max(r.maxX,e.maxX)-Math.min(r.minX,e.minX))*(Math.max(r.maxY,e.maxY)-Math.min(r.minY,e.minY))}function sk(e,r){const t=Math.max(e.minX,r.minX),i=Math.max(e.minY,r.minY),n=Math.min(e.maxX,r.maxX),a=Math.min(e.maxY,r.maxY);return Math.max(0,n-t)*Math.max(0,a-i)}function Md(e,r){return e.minX<=r.minX&&e.minY<=r.minY&&r.maxX<=e.maxX&&r.maxY<=e.maxY}function Sh(e,r){return r.minX<=e.maxX&&r.minY<=e.maxY&&r.maxX>=e.minX&&r.maxY>=e.minY}function Ao(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Sy(e,r,t,i,n){const a=[r,t];for(;a.length;){if(t=a.pop(),r=a.pop(),t-r<=i)continue;const o=r+Math.ceil((t-r)/i/2)*i;ek(e,o,r,t,n),a.push(r,o,o,t)}}var Lt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},lk=function(){function e(r){this.opacity_=r.opacity,this.rotateWithView_=r.rotateWithView,this.rotation_=r.rotation,this.scale_=r.scale,this.scaleArray_=ti(r.scale),this.displacement_=r.displacement}return e.prototype.clone=function(){var r=this.getScale();return new e({opacity:this.getOpacity(),scale:Array.isArray(r)?r.slice():r,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},e.prototype.getOpacity=function(){return this.opacity_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.getRotation=function(){return this.rotation_},e.prototype.getScale=function(){return this.scale_},e.prototype.getScaleArray=function(){return this.scaleArray_},e.prototype.getDisplacement=function(){return this.displacement_},e.prototype.getAnchor=function(){return K()},e.prototype.getImage=function(r){return K()},e.prototype.getHitDetectionImage=function(){return K()},e.prototype.getPixelRatio=function(r){return 1},e.prototype.getImageState=function(){return K()},e.prototype.getImageSize=function(){return K()},e.prototype.getOrigin=function(){return K()},e.prototype.getSize=function(){return K()},e.prototype.setOpacity=function(r){this.opacity_=r},e.prototype.setRotateWithView=function(r){this.rotateWithView_=r},e.prototype.setRotation=function(r){this.rotation_=r},e.prototype.setScale=function(r){this.scale_=r,this.scaleArray_=ti(r)},e.prototype.listenImageChange=function(r){K()},e.prototype.load=function(){K()},e.prototype.unlistenImageChange=function(r){K()},e}(),xy=lk;function ei(e){return Array.isArray(e)?mm(e):e}var uk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),hk=function(e){uk(r,e);function r(t){var i=this,n=t.rotateWithView!==void 0?t.rotateWithView:!1;return i=e.call(this,{opacity:1,rotateWithView:n,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0]})||this,i.canvas_=void 0,i.hitDetectionCanvas_=null,i.fill_=t.fill!==void 0?t.fill:null,i.origin_=[0,0],i.points_=t.points,i.radius_=t.radius!==void 0?t.radius:t.radius1,i.radius2_=t.radius2,i.angle_=t.angle!==void 0?t.angle:0,i.stroke_=t.stroke!==void 0?t.stroke:null,i.anchor_=null,i.size_=null,i.renderOptions_=null,i.render(),i}return r.prototype.clone=function(){var t=this.getScale(),i=new r({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},r.prototype.getAnchor=function(){return this.anchor_},r.prototype.getAngle=function(){return this.angle_},r.prototype.getFill=function(){return this.fill_},r.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},r.prototype.getImage=function(t){var i=this.canvas_[t];if(!i){var n=this.renderOptions_,a=mr(n.size*t,n.size*t);this.draw_(n,a,t),i=a.canvas,this.canvas_[t]=i}return i},r.prototype.getPixelRatio=function(t){return t},r.prototype.getImageSize=function(){return this.size_},r.prototype.getImageState=function(){return Lt.LOADED},r.prototype.getOrigin=function(){return this.origin_},r.prototype.getPoints=function(){return this.points_},r.prototype.getRadius=function(){return this.radius_},r.prototype.getRadius2=function(){return this.radius2_},r.prototype.getSize=function(){return this.size_},r.prototype.getStroke=function(){return this.stroke_},r.prototype.listenImageChange=function(t){},r.prototype.load=function(){},r.prototype.unlistenImageChange=function(t){},r.prototype.calculateLineJoinSize_=function(t,i,n){if(i===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return i;var a=this.radius_,o=this.radius2_===void 0?a:this.radius2_;if(a<o){var s=a;a=o,o=s}var l=this.radius2_===void 0?this.points_:this.points_*2,u=2*Math.PI/l,h=o*Math.sin(u),f=Math.sqrt(o*o-h*h),c=a-f,d=Math.sqrt(h*h+c*c),v=d/h;if(t==="miter"&&v<=n)return v*i;var g=i/2/v,p=i/2*(c/d),m=Math.sqrt((a+g)*(a+g)+p*p),_=m-a;if(this.radius2_===void 0||t==="bevel")return _*2;var y=a*Math.sin(u),w=Math.sqrt(a*a-y*y),T=o-w,S=Math.sqrt(y*y+T*T),x=S/y;if(x<=n){var E=x*i/2-o-a;return 2*Math.max(_,E)}return _*2},r.prototype.createRenderOptions=function(){var t=So,i=0,n=null,a=0,o,s=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=tl),o=ei(o),s=this.stroke_.getWidth(),s===void 0&&(s=rl),n=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=So),i=this.stroke_.getMiterLimit(),i===void 0&&(i=Qs));var l=this.calculateLineJoinSize_(t,s,i),u=Math.max(this.radius_,this.radius2_||0),h=Math.ceil(2*u+l);return{strokeStyle:o,strokeWidth:s,size:h,lineDash:n,lineDashOffset:a,lineJoin:t,miterLimit:i}},r.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size,i=this.getDisplacement();this.canvas_={},this.anchor_=[t/2-i[0],t/2+i[1]],this.size_=[t,t]},r.prototype.draw_=function(t,i,n){if(i.scale(n,n),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){var a=this.fill_.getColor();a===null&&(a=Oi),i.fillStyle=ei(a),i.fill()}this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.setLineDash&&t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())},r.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var i=this.fill_.getColor(),n=0;if(typeof i=="string"&&(i=pm(i)),i===null?n=1:Array.isArray(i)&&(n=i.length===4?i[3]:1),n===0){var a=mr(t.size,t.size);this.hitDetectionCanvas_=a.canvas,this.drawHitDetectionCanvas_(t,a)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},r.prototype.createPath_=function(t){var i=this.points_,n=this.radius_;if(i===1/0)t.arc(0,0,n,0,2*Math.PI);else{var a=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(i*=2);for(var o=this.angle_-Math.PI/2,s=2*Math.PI/i,l=0;l<i;l++){var u=o+l*s,h=l%2==0?n:a;t.lineTo(h*Math.cos(u),h*Math.sin(u))}t.closePath()}},r.prototype.drawHitDetectionCanvas_=function(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=Oi,i.fill(),this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())},r}(xy),fk=hk,ck=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),dk=function(e){ck(r,e);function r(t){var i=this,n=t||{};return i=e.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:n.scale!==void 0?n.scale:1,rotation:n.rotation!==void 0?n.rotation:0,rotateWithView:n.rotateWithView!==void 0?n.rotateWithView:!1,displacement:n.displacement!==void 0?n.displacement:[0,0]})||this,i}return r.prototype.clone=function(){var t=this.getScale(),i=new r({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},r.prototype.setRadius=function(t){this.radius_=t,this.render()},r}(fk),vk=dk,pk=function(){function e(r){var t=r||{};this.color_=t.color!==void 0?t.color:null}return e.prototype.clone=function(){var r=this.getColor();return new e({color:Array.isArray(r)?r.slice():r||void 0})},e.prototype.getColor=function(){return this.color_},e.prototype.setColor=function(r){this.color_=r},e}(),gk=pk,mk=function(){function e(r){var t=r||{};this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return e.prototype.clone=function(){var r=this.getColor();return new e({color:Array.isArray(r)?r.slice():r||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},e.prototype.getColor=function(){return this.color_},e.prototype.getLineCap=function(){return this.lineCap_},e.prototype.getLineDash=function(){return this.lineDash_},e.prototype.getLineDashOffset=function(){return this.lineDashOffset_},e.prototype.getLineJoin=function(){return this.lineJoin_},e.prototype.getMiterLimit=function(){return this.miterLimit_},e.prototype.getWidth=function(){return this.width_},e.prototype.setColor=function(r){this.color_=r},e.prototype.setLineCap=function(r){this.lineCap_=r},e.prototype.setLineDash=function(r){this.lineDash_=r},e.prototype.setLineDashOffset=function(r){this.lineDashOffset_=r},e.prototype.setLineJoin=function(r){this.lineJoin_=r},e.prototype.setMiterLimit=function(r){this.miterLimit_=r},e.prototype.setWidth=function(r){this.width_=r},e}(),yk=mk,Cy=function(){function e(r){var t=r||{};this.geometry_=null,this.geometryFunction_=Oy,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}return e.prototype.clone=function(){var r=this.getGeometry();return r&&typeof r=="object"&&(r=r.clone()),new e({geometry:r,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.setRenderer=function(r){this.renderer_=r},e.prototype.setHitDetectionRenderer=function(r){this.hitDetectionRenderer_=r},e.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},e.prototype.getGeometry=function(){return this.geometry_},e.prototype.getGeometryFunction=function(){return this.geometryFunction_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(r){this.fill_=r},e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(r){this.image_=r},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(r){this.stroke_=r},e.prototype.getText=function(){return this.text_},e.prototype.setText=function(r){this.text_=r},e.prototype.getZIndex=function(){return this.zIndex_},e.prototype.setGeometry=function(r){typeof r=="function"?this.geometryFunction_=r:typeof r=="string"?this.geometryFunction_=function(t){return t.get(r)}:r?r!==void 0&&(this.geometryFunction_=function(){return r}):this.geometryFunction_=Oy,this.geometry_=r},e.prototype.setZIndex=function(r){this.zIndex_=r},e}();function _k(e){var r;if(typeof e=="function")r=e;else{var t;if(Array.isArray(e))t=e;else{ut(typeof e.getZIndex=="function",41);var i=e;t=[i]}r=function(){return t}}return r}var Ld=null;function wk(e,r){if(!Ld){var t=new gk({color:"rgba(255,255,255,0.4)"}),i=new yk({color:"#3399CC",width:1.25});Ld=[new Cy({image:new vk({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return Ld}function Oy(e){return e.getGeometry()}var q6=Cy,bk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Iy={RENDER_ORDER:"renderOrder"},Tk=function(e){bk(r,e);function r(t){var i=this,n=t||{},a=ae({},n);return delete a.style,delete a.renderBuffer,delete a.updateWhileAnimating,delete a.updateWhileInteracting,i=e.call(this,a)||this,i.declutter_=n.declutter!==void 0?n.declutter:!1,i.renderBuffer_=n.renderBuffer!==void 0?n.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(n.style),i.updateWhileAnimating_=n.updateWhileAnimating!==void 0?n.updateWhileAnimating:!1,i.updateWhileInteracting_=n.updateWhileInteracting!==void 0?n.updateWhileInteracting:!1,i}return r.prototype.getDeclutter=function(){return this.declutter_},r.prototype.getFeatures=function(t){return e.prototype.getFeatures.call(this,t)},r.prototype.getRenderBuffer=function(){return this.renderBuffer_},r.prototype.getRenderOrder=function(){return this.get(Iy.RENDER_ORDER)},r.prototype.getStyle=function(){return this.style_},r.prototype.getStyleFunction=function(){return this.styleFunction_},r.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},r.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},r.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new Ey(9)),this.getRenderer().renderDeclutter(t)},r.prototype.setRenderOrder=function(t){this.set(Iy.RENDER_ORDER,t)},r.prototype.setStyle=function(t){this.style_=t!==void 0?t:wk,this.styleFunction_=t===null?void 0:_k(this.style_),this.changed()},r}(wm),Ek=Tk,fl={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},xh=[fl.FILL],_n=[fl.STROKE],_a=[fl.BEGIN_PATH],Py=[fl.CLOSE_PATH],Z=fl,Sk=function(){function e(){}return e.prototype.drawCustom=function(r,t,i,n){},e.prototype.drawGeometry=function(r){},e.prototype.setStyle=function(r){},e.prototype.drawCircle=function(r,t){},e.prototype.drawFeature=function(r,t){},e.prototype.drawGeometryCollection=function(r,t){},e.prototype.drawLineString=function(r,t){},e.prototype.drawMultiLineString=function(r,t){},e.prototype.drawMultiPoint=function(r,t){},e.prototype.drawMultiPolygon=function(r,t){},e.prototype.drawPoint=function(r,t){},e.prototype.drawPolygon=function(r,t){},e.prototype.drawText=function(r,t){},e.prototype.setFillStrokeStyle=function(r,t){},e.prototype.setImageStyle=function(r,t){},e.prototype.setTextStyle=function(r,t){},e}(),ky=Sk,xk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ck=function(e){xk(r,e);function r(t,i,n,a){var o=e.call(this)||this;return o.tolerance=t,o.maxExtent=i,o.pixelRatio=a,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return r.prototype.applyPixelRatio=function(t){var i=this.pixelRatio;return i==1?t:t.map(function(n){return n*i})},r.prototype.appendFlatPointCoordinates=function(t,i){for(var n=this.getBufferedMaxExtent(),a=this.tmpCoordinate_,o=this.coordinates,s=o.length,l=0,u=t.length;l<u;l+=i)a[0]=t[l],a[1]=t[l+1],Ju(n,a)&&(o[s++]=a[0],o[s++]=a[1]);return s},r.prototype.appendFlatLineCoordinates=function(t,i,n,a,o,s){var l=this.coordinates,u=l.length,h=this.getBufferedMaxExtent();s&&(i+=a);var f=t[i],c=t[i+1],d=this.tmpCoordinate_,v=!0,g,p,m;for(g=i+a;g<n;g+=a)d[0]=t[g],d[1]=t[g+1],m=zc(h,d),m!==p?(v&&(l[u++]=f,l[u++]=c,v=!1),l[u++]=d[0],l[u++]=d[1]):m===pe.INTERSECTING?(l[u++]=d[0],l[u++]=d[1],v=!1):v=!0,f=d[0],c=d[1],p=m;return(o&&v||g===i+a)&&(l[u++]=f,l[u++]=c),u},r.prototype.drawCustomCoordinates_=function(t,i,n,a,o){for(var s=0,l=n.length;s<l;++s){var u=n[s],h=this.appendFlatLineCoordinates(t,i,u,a,!1,!1);o.push(h),i=u}return i},r.prototype.drawCustom=function(t,i,n,a){this.beginGeometry(t,i);var o=t.getType(),s=t.getStride(),l=this.coordinates.length,u,h,f,c,d;switch(o){case H.MULTI_POLYGON:u=t.getOrientedFlatCoordinates(),c=[];var v=t.getEndss();d=0;for(var g=0,p=v.length;g<p;++g){var m=[];d=this.drawCustomCoordinates_(u,d,v[g],s,m),c.push(m)}this.instructions.push([Z.CUSTOM,l,c,t,n,_d]),this.hitDetectionInstructions.push([Z.CUSTOM,l,c,t,a||n,_d]);break;case H.POLYGON:case H.MULTI_LINE_STRING:f=[],u=o==H.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(u,0,t.getEnds(),s,f),this.instructions.push([Z.CUSTOM,l,f,t,n,al]),this.hitDetectionInstructions.push([Z.CUSTOM,l,f,t,a||n,al]);break;case H.LINE_STRING:case H.CIRCLE:u=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(u,0,u.length,s,!1,!1),this.instructions.push([Z.CUSTOM,l,h,t,n,yn]),this.hitDetectionInstructions.push([Z.CUSTOM,l,h,t,a||n,yn]);break;case H.MULTI_POINT:u=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(u,s),h>l&&(this.instructions.push([Z.CUSTOM,l,h,t,n,yn]),this.hitDetectionInstructions.push([Z.CUSTOM,l,h,t,a||n,yn]));break;case H.POINT:u=t.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),h=this.coordinates.length,this.instructions.push([Z.CUSTOM,l,h,t,n]),this.hitDetectionInstructions.push([Z.CUSTOM,l,h,t,a||n]);break}this.endGeometry(i)},r.prototype.beginGeometry=function(t,i){this.beginGeometryInstruction1_=[Z.BEGIN_GEOMETRY,i,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Z.BEGIN_GEOMETRY,i,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},r.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},r.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var i,n=t.length,a,o,s=-1;for(i=0;i<n;++i)a=t[i],o=a[0],o==Z.END_GEOMETRY?s=i:o==Z.BEGIN_GEOMETRY&&(a[2]=i,Xx(this.hitDetectionInstructions,s,i),s=-1)},r.prototype.setFillStrokeStyle=function(t,i){var n=this.state;if(t){var a=t.getColor();n.fillStyle=ei(a||Oi)}else n.fillStyle=void 0;if(i){var o=i.getColor();n.strokeStyle=ei(o||tl);var s=i.getLineCap();n.lineCap=s!==void 0?s:lh;var l=i.getLineDash();n.lineDash=l?l.slice():qs;var u=i.getLineDashOffset();n.lineDashOffset=u||Js;var h=i.getLineJoin();n.lineJoin=h!==void 0?h:So;var f=i.getWidth();n.lineWidth=f!==void 0?f:rl;var c=i.getMiterLimit();n.miterLimit=c!==void 0?c:Qs,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},r.prototype.createFill=function(t){var i=t.fillStyle,n=[Z.SET_FILL_STYLE,i];return typeof i!="string"&&n.push(!0),n},r.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},r.prototype.createStroke=function(t){return[Z.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},r.prototype.updateFillStyle=function(t,i){var n=t.fillStyle;(typeof n!="string"||t.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(i.call(this,t)),t.currentFillStyle=n)},r.prototype.updateStrokeStyle=function(t,i){var n=t.strokeStyle,a=t.lineCap,o=t.lineDash,s=t.lineDashOffset,l=t.lineJoin,u=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=a||o!=t.currentLineDash&&!_o(t.currentLineDash,o)||t.currentLineDashOffset!=s||t.currentLineJoin!=l||t.currentLineWidth!=u||t.currentMiterLimit!=h)&&(n!==void 0&&i.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=a,t.currentLineDash=o,t.currentLineDashOffset=s,t.currentLineJoin=l,t.currentLineWidth=u,t.currentMiterLimit=h)},r.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[Z.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)},r.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=um(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Bc(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},r}(ky),cl=Ck,Ok=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ik=function(e){Ok(r,e);function r(t,i,n,a){var o=e.call(this,t,i,n,a)||this;return o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterImageWithText_=void 0,o}return r.prototype.drawPoint=function(t,i){if(!!this.image_){this.beginGeometry(t,i);var n=t.getFlatCoordinates(),a=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(n,a);this.instructions.push([Z.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Z.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(i)}},r.prototype.drawMultiPoint=function(t,i){if(!!this.image_){this.beginGeometry(t,i);var n=t.getFlatCoordinates(),a=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(n,a);this.instructions.push([Z.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Z.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(i)}},r.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,e.prototype.finish.call(this)},r.prototype.setImageStyle=function(t,i){var n=t.getAnchor(),a=t.getSize(),o=t.getHitDetectionImage(),s=t.getImage(this.pixelRatio),l=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=o,this.image_=s,this.height_=a[1],this.opacity_=t.getOpacity(),this.originX_=l[0]*this.imagePixelRatio_,this.originY_=l[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=a[0],this.declutterImageWithText_=i},r}(cl),Pk=Ik,kk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Rk=function(e){kk(r,e);function r(t,i,n,a){return e.call(this,t,i,n,a)||this}return r.prototype.drawFlatCoordinates_=function(t,i,n,a){var o=this.coordinates.length,s=this.appendFlatLineCoordinates(t,i,n,a,!1,!1),l=[Z.MOVE_TO_LINE_TO,o,s];return this.instructions.push(l),this.hitDetectionInstructions.push(l),n},r.prototype.drawLineString=function(t,i){var n=this.state,a=n.strokeStyle,o=n.lineWidth;if(!(a===void 0||o===void 0)){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([Z.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,qs,Js],_a);var s=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(s,0,s.length,l),this.hitDetectionInstructions.push(_n),this.endGeometry(i)}},r.prototype.drawMultiLineString=function(t,i){var n=this.state,a=n.strokeStyle,o=n.lineWidth;if(!(a===void 0||o===void 0)){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([Z.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],_a);for(var s=t.getEnds(),l=t.getFlatCoordinates(),u=t.getStride(),h=0,f=0,c=s.length;f<c;++f)h=this.drawFlatCoordinates_(l,h,s[f],u);this.hitDetectionInstructions.push(_n),this.endGeometry(i)}},r.prototype.finish=function(){var t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(_n),this.reverseHitDetectionInstructions(),this.state=null,e.prototype.finish.call(this)},r.prototype.applyStroke=function(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(_n),t.lastStroke=this.coordinates.length),t.lastStroke=0,e.prototype.applyStroke.call(this,t),this.instructions.push(_a)},r}(cl),Dk=Rk,Ak=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Mk=function(e){Ak(r,e);function r(t,i,n,a){return e.call(this,t,i,n,a)||this}return r.prototype.drawFlatCoordinatess_=function(t,i,n,a){var o=this.state,s=o.fillStyle!==void 0,l=o.strokeStyle!==void 0,u=n.length;this.instructions.push(_a),this.hitDetectionInstructions.push(_a);for(var h=0;h<u;++h){var f=n[h],c=this.coordinates.length,d=this.appendFlatLineCoordinates(t,i,f,a,!0,!l),v=[Z.MOVE_TO_LINE_TO,c,d];this.instructions.push(v),this.hitDetectionInstructions.push(v),l&&(this.instructions.push(Py),this.hitDetectionInstructions.push(Py)),i=f}return s&&(this.instructions.push(xh),this.hitDetectionInstructions.push(xh)),l&&(this.instructions.push(_n),this.hitDetectionInstructions.push(_n)),i},r.prototype.drawCircle=function(t,i){var n=this.state,a=n.fillStyle,o=n.strokeStyle;if(!(a===void 0&&o===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Z.SET_FILL_STYLE,Oi]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Z.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var s=t.getFlatCoordinates(),l=t.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,l,!1,!1);var h=[Z.CIRCLE,u];this.instructions.push(_a,h),this.hitDetectionInstructions.push(_a,h),n.fillStyle!==void 0&&(this.instructions.push(xh),this.hitDetectionInstructions.push(xh)),n.strokeStyle!==void 0&&(this.instructions.push(_n),this.hitDetectionInstructions.push(_n)),this.endGeometry(i)}},r.prototype.drawPolygon=function(t,i){var n=this.state,a=n.fillStyle,o=n.strokeStyle;if(!(a===void 0&&o===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Z.SET_FILL_STYLE,Oi]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Z.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var s=t.getEnds(),l=t.getOrientedFlatCoordinates(),u=t.getStride();this.drawFlatCoordinatess_(l,0,s,u),this.endGeometry(i)}},r.prototype.drawMultiPolygon=function(t,i){var n=this.state,a=n.fillStyle,o=n.strokeStyle;if(!(a===void 0&&o===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Z.SET_FILL_STYLE,Oi]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Z.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var s=t.getEndss(),l=t.getOrientedFlatCoordinates(),u=t.getStride(),h=0,f=0,c=s.length;f<c;++f)h=this.drawFlatCoordinatess_(l,h,s[f],u);this.endGeometry(i)}},r.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(t!==0)for(var i=this.coordinates,n=0,a=i.length;n<a;++n)i[n]=pa(i[n],t);return e.prototype.finish.call(this)},r.prototype.setFillStrokeStyles_=function(){var t=this.state,i=t.fillStyle;i!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)},r}(cl),Ry=Mk,Lk={POINT:"point",LINE:"line"};function Fk(e,r,t,i,n){var a=t,o=t,s=0,l=0,u=t,h,f,c,d,v,g,p,m,_,y;for(f=t;f<i;f+=n){var w=r[f],T=r[f+1];v!==void 0&&(_=w-v,y=T-g,d=Math.sqrt(_*_+y*y),p!==void 0&&(l+=c,h=Math.acos((p*_+m*y)/(c*d)),h>e&&(l>s&&(s=l,a=u,o=f),l=0,u=f-n)),c=d,p=_,m=y),v=w,g=T}return l+=d,l>s?[u,f]:[a,o]}var Nk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ch={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},$k=function(e){Nk(r,e);function r(t,i,n,a){var o=e.call(this,t,i,n,a)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return r.prototype.finish=function(){var t=e.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},r.prototype.drawText=function(t,i){var n=this.textFillState_,a=this.textStrokeState_,o=this.textState_;if(!(this.text_===""||!o||!n&&!a)){var s=this.coordinates,l=s.length,u=t.getType(),h=null,f=t.getStride();if(o.placement===Lk.LINE&&(u==H.LINE_STRING||u==H.MULTI_LINE_STRING||u==H.POLYGON||u==H.MULTI_POLYGON)){if(!Je(this.getBufferedMaxExtent(),t.getExtent()))return;var c=void 0;if(h=t.getFlatCoordinates(),u==H.LINE_STRING)c=[h.length];else if(u==H.MULTI_LINE_STRING)c=t.getEnds();else if(u==H.POLYGON)c=t.getEnds().slice(0,1);else if(u==H.MULTI_POLYGON){var d=t.getEndss();c=[];for(var v=0,g=d.length;v<g;++v)c.push(d[v][0])}this.beginGeometry(t,i);for(var p=o.textAlign,m=0,_=void 0,y=0,w=c.length;y<w;++y){if(p==null){var T=Fk(o.maxAngle,h,m,c[y],f);m=T[0],_=T[1]}else _=c[y];for(var v=m;v<_;v+=f)s.push(h[v],h[v+1]);var S=s.length;m=c[y],this.drawChars_(l,S),l=S}this.endGeometry(i)}else{var x=o.overflow?null:[];switch(u){case H.POINT:case H.MULTI_POINT:h=t.getFlatCoordinates();break;case H.LINE_STRING:h=t.getFlatMidpoint();break;case H.CIRCLE:h=t.getCenter();break;case H.MULTI_LINE_STRING:h=t.getFlatMidpoints(),f=2;break;case H.POLYGON:h=t.getFlatInteriorPoint(),o.overflow||x.push(h[2]/this.resolution),f=3;break;case H.MULTI_POLYGON:var E=t.getFlatInteriorPoints();h=[];for(var v=0,g=E.length;v<g;v+=3)o.overflow||x.push(E[v+2]/this.resolution),h.push(E[v],E[v+1]);if(h.length===0)return;f=2;break}var S=this.appendFlatPointCoordinates(h,f);if(S===l)return;if(x&&(S-l)/2!=h.length/f){var I=l/2;x=x.filter(function(k,O){var M=s[(I+O)*2]===h[O*f]&&s[(I+O)*2+1]===h[O*f+1];return M||--I,M})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i);var A=o.padding;if(A!=ua&&(o.scale[0]<0||o.scale[1]<0)){var P=o.padding[0],D=o.padding[1],N=o.padding[2],j=o.padding[3];o.scale[0]<0&&(D=-D,j=-j),o.scale[1]<0&&(P=-P,N=-N),A=[P,D,N,j]}var W=this.pixelRatio;this.instructions.push([Z.DRAW_IMAGE,l,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,A==ua?ua:A.map(function(k){return k*W}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]);var z=1/W;this.hitDetectionInstructions.push([Z.DRAW_IMAGE,l,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[z,z],NaN,this.declutterImageWithText_,A,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]),this.endGeometry(i)}}},r.prototype.saveTextStates_=function(){var t=this.textStrokeState_,i=this.textState_,n=this.textFillState_,a=this.strokeKey_;t&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var o=this.textKey_;o in this.textStates||(this.textStates[o]={font:i.font,textAlign:i.textAlign||el,textBaseline:i.textBaseline||uh,scale:i.scale});var s=this.fillKey_;n&&(s in this.fillStates||(this.fillStates[s]={fillStyle:n.fillStyle}))},r.prototype.drawChars_=function(t,i){var n=this.textStrokeState_,a=this.textState_,o=this.strokeKey_,s=this.textKey_,l=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,h=Ch[a.textBaseline],f=this.textOffsetY_*u,c=this.text_,d=n?n.lineWidth*Math.abs(a.scale[0])/2:0;this.instructions.push([Z.DRAW_CHARS,t,i,h,a.overflow,l,a.maxAngle,u,f,o,d*u,c,s,1]),this.hitDetectionInstructions.push([Z.DRAW_CHARS,t,i,h,a.overflow,l,a.maxAngle,1,f,o,d,c,s,1/u])},r.prototype.setTextStyle=function(t,i){var n,a,o;if(!t)this.text_="";else{var s=t.getFill();s?(a=this.textFillState_,a||(a={},this.textFillState_=a),a.fillStyle=ei(s.getColor()||Oi)):(a=null,this.textFillState_=a);var l=t.getStroke();if(!l)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);var u=l.getLineDash(),h=l.getLineDashOffset(),f=l.getWidth(),c=l.getMiterLimit();o.lineCap=l.getLineCap()||lh,o.lineDash=u?u.slice():qs,o.lineDashOffset=h===void 0?Js:h,o.lineJoin=l.getLineJoin()||So,o.lineWidth=f===void 0?rl:f,o.miterLimit=c===void 0?Qs:c,o.strokeStyle=ei(l.getColor()||tl)}n=this.textState_;var d=t.getFont()||km;tO(d);var v=t.getScaleArray();n.overflow=t.getOverflow(),n.font=d,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||uh,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||ua,n.scale=v===void 0?[1,1]:v;var g=t.getOffsetX(),p=t.getOffsetY(),m=t.getRotateWithView(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=g===void 0?0:g,this.textOffsetY_=p===void 0?0:p,this.textRotateWithView_=m===void 0?!1:m,this.textRotation_=_===void 0?0:_,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:bt(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.textBaseline||"?"),this.fillKey_=a?typeof a.fillStyle=="string"?a.fillStyle:"|"+bt(a.fillStyle):""}this.declutterImageWithText_=i},r}(cl),Gk=$k,Yk={Circle:Ry,Default:cl,Image:Pk,LineString:Dk,Polygon:Ry,Text:Gk},jk=function(){function e(r,t,i,n){this.tolerance_=r,this.maxExtent_=t,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return e.prototype.finish=function(){var r={};for(var t in this.buildersByZIndex_){r[t]=r[t]||{};var i=this.buildersByZIndex_[t];for(var n in i){var a=i[n].finish();r[t][n]=a}}return r},e.prototype.getBuilder=function(r,t){var i=r!==void 0?r.toString():"0",n=this.buildersByZIndex_[i];n===void 0&&(n={},this.buildersByZIndex_[i]=n);var a=n[t];if(a===void 0){var o=Yk[t];a=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[t]=a}return a},e}(),Dy=jk,Wk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Hk=function(e){Wk(r,e);function r(t){var i=e.call(this)||this;return i.boundHandleImageChange_=i.handleImageChange_.bind(i),i.layer_=t,i.declutterExecutorGroup=null,i}return r.prototype.getFeatures=function(t){return K()},r.prototype.prepareFrame=function(t){return K()},r.prototype.renderFrame=function(t,i){return K()},r.prototype.loadedTileCallback=function(t,i,n){t[i]||(t[i]={}),t[i][n.tileCoord.toString()]=n},r.prototype.createLoadedTileFinder=function(t,i,n){return function(a,o){var s=this.loadedTileCallback.bind(this,n,a);return t.forEachLoadedTile(i,a,o,s)}.bind(this)},r.prototype.forEachFeatureAtCoordinate=function(t,i,n,a,o){},r.prototype.getDataAtPixel=function(t,i,n){return null},r.prototype.getLayer=function(){return this.layer_},r.prototype.handleFontsChanged=function(){},r.prototype.handleImageChange_=function(t){var i=t.target;i.getState()===Lt.LOADED&&this.renderIfReadyAndVisible()},r.prototype.loadImage=function(t){var i=t.getState();return i!=Lt.LOADED&&i!=Lt.ERROR&&t.addEventListener(Q.CHANGE,this.boundHandleImageChange_),i==Lt.IDLE&&(t.load(),i=t.getState()),i==Lt.LOADED},r.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==la.READY&&t.changed()},r}(tm),Bk=Hk,Uk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),zk=function(e){Uk(r,e);function r(t){var i=e.call(this,t)||this;return i.container=null,i.renderedResolution,i.tempTransform=qr(),i.pixelTransform=qr(),i.inversePixelTransform=qr(),i.context=null,i.containerReused=!1,i}return r.prototype.useContainer=function(t,i,n){var a=this.getLayer().getClassName(),o,s;if(t&&t.style.opacity===Qc(n)&&t.className===a){var l=t.firstElementChild;l instanceof HTMLCanvasElement&&(s=l.getContext("2d"))}if(s&&s.canvas.style.transform===i?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){o=document.createElement("div"),o.className=a;var u=o.style;u.position="absolute",u.width="100%",u.height="100%",s=mr();var l=s.canvas;o.appendChild(l),u=l.style,u.position="absolute",u.left="0",u.transformOrigin="top left",this.container=o,this.context=s}},r.prototype.clipUnrotated=function(t,i,n){var a=aa(n),o=eh(n),s=th(n),l=Qu(n);oe(i.coordinateToPixelTransform,a),oe(i.coordinateToPixelTransform,o),oe(i.coordinateToPixelTransform,s),oe(i.coordinateToPixelTransform,l);var u=this.inversePixelTransform;oe(u,a),oe(u,o),oe(u,s),oe(u,l),t.save(),t.beginPath(),t.moveTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()},r.prototype.dispatchRenderEvent_=function(t,i,n){var a=this.getLayer();if(a.hasListener(t)){var o=new Sm(t,this.inversePixelTransform,n,i);a.dispatchEvent(o)}},r.prototype.preRender=function(t,i){this.dispatchRenderEvent_(sa.PRERENDER,t,i)},r.prototype.postRender=function(t,i){this.dispatchRenderEvent_(sa.POSTRENDER,t,i)},r.prototype.getRenderTransform=function(t,i,n,a,o,s,l){var u=o/2,h=s/2,f=a/i,c=-f,d=-t[0]+l,v=-t[1];return Si(this.tempTransform,u,h,f,c,-n,d,v)},r.prototype.getDataAtPixel=function(t,i,n){var a=oe(this.inversePixelTransform,t.slice()),o=this.context,s=this.getLayer(),l=s.getExtent();if(l){var u=oe(i.pixelToCoordinateTransform,t.slice());if(!Ju(l,u))return null}var h;try{var f=Math.round(a[0]),c=Math.round(a[1]),d=document.createElement("canvas"),v=d.getContext("2d");d.width=1,d.height=1,v.clearRect(0,0,1,1),v.drawImage(o.canvas,f,c,1,1,0,0,1,1),h=v.getImageData(0,0,1,1).data}catch(g){return g.name==="SecurityError"?new Uint8Array:h}return h[3]===0?null:h},r}(Bk),Ay=zk,Vt={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function Vk(e,r,t,i,n,a,o,s,l,u,h,f){var c=e[r],d=e[r+1],v=0,g=0,p=0,m=0;function _(){v=c,g=d,r+=i,c=e[r],d=e[r+1],m+=p,p=Math.sqrt((c-v)*(c-v)+(d-g)*(d-g))}do _();while(r<t-i&&m+p<a);for(var y=p===0?0:(a-m)/p,w=Ci(v,c,y),T=Ci(g,d,y),S=r-i,x=m,E=a+s*l(u,n,h);r<t-i&&m+p<E;)_();y=p===0?0:(E-m)/p;var I=Ci(v,c,y),A=Ci(g,d,y),P;if(f){var D=[w,T,I,A];Km(D,0,4,2,f,D,D),P=D[0]>D[2]}else P=w>I;var N=Math.PI,j=[],W=S+i===r;r=S,p=0,m=x,c=e[r],d=e[r+1];var z;if(W){_(),z=Math.atan2(d-g,c-v),P&&(z+=z>0?-N:N);var B=(I+w)/2,k=(A+T)/2;return j[0]=[B,k,(E-a)/2,z,n],j}for(var O=0,M=n.length;O<M;){_();var $=Math.atan2(d-g,c-v);if(P&&($+=$>0?-N:N),z!==void 0){var C=$-z;if(C+=C>N?-2*N:C<-N?2*N:0,Math.abs(C)>o)return null}z=$;for(var ft=O,X=0;O<M;++O){var vt=P?M-O-1:O,At=s*l(u,n[vt],h);if(r+i<t&&m+p<a+X+At/2)break;X+=At}if(O!==ft){var St=P?n.substring(M-ft,M-O):n.substring(ft,O);y=p===0?0:(a+X/2-m)/p;var B=Ci(v,c,y),k=Ci(g,d,y);j.push([B,k,X/2,$,St]),a+=X}}return j}var Mo=gr(),wn=[],Ri=[],Di=[],bn=[];function My(e){return e[3].declutterBox}var Xk=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Ly(e,r){return(r==="start"||r==="end")&&!Xk.test(e)&&(r=r==="start"?"left":"right"),Ch[r]}var Kk=function(){function e(r,t,i,n){this.overlaps=i,this.pixelRatio=t,this.resolution=r,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=qr(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return e.prototype.createLabel=function(r,t,i,n){var a=r+t+i+n;if(this.labels_[a])return this.labels_[a];var o=n?this.strokeStates[n]:null,s=i?this.fillStates[i]:null,l=this.textStates[t],u=this.pixelRatio,h=[l.scale[0]*u,l.scale[1]*u],f=Ly(r,l.textAlign||el),c=n&&o.lineWidth?o.lineWidth:0,d=r.split(`
`),v=d.length,g=[],p=rO(l.font,d,g),m=eO(l.font),_=m*v,y=p+c,w=[],T=(y+2)*h[0],S=(_+c)*h[1],x={width:T<0?Math.floor(T):Math.ceil(T),height:S<0?Math.floor(S):Math.ceil(S),contextInstructions:w};if((h[0]!=1||h[1]!=1)&&w.push("scale",h),w.push("font",l.font),n){w.push("strokeStyle",o.strokeStyle),w.push("lineWidth",c),w.push("lineCap",o.lineCap),w.push("lineJoin",o.lineJoin),w.push("miterLimit",o.miterLimit);var E=qu?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;E.prototype.setLineDash&&(w.push("setLineDash",[o.lineDash]),w.push("lineDashOffset",o.lineDashOffset))}i&&w.push("fillStyle",s.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");var I=.5-f,A=f*y+I*c,P;if(n)for(P=0;P<v;++P)w.push("strokeText",[d[P],A+I*g[P],.5*(c+m)+P*m]);if(i)for(P=0;P<v;++P)w.push("fillText",[d[P],A+I*g[P],.5*(c+m)+P*m]);return this.labels_[a]=x,x},e.prototype.replayTextBackground_=function(r,t,i,n,a,o,s){r.beginPath(),r.moveTo.apply(r,t),r.lineTo.apply(r,i),r.lineTo.apply(r,n),r.lineTo.apply(r,a),r.lineTo.apply(r,t),o&&(this.alignFill_=o[2],this.fill_(r)),s&&(this.setStrokeStyle_(r,s),r.stroke())},e.prototype.calculateImageOrLabelDimensions_=function(r,t,i,n,a,o,s,l,u,h,f,c,d,v,g,p){s*=c[0],l*=c[1];var m=i-s,_=n-l,y=a+u>r?r-u:a,w=o+h>t?t-h:o,T=v[3]+y*c[0]+v[1],S=v[0]+w*c[1]+v[2],x=m-v[3],E=_-v[0];(g||f!==0)&&(wn[0]=x,bn[0]=x,wn[1]=E,Ri[1]=E,Ri[0]=x+T,Di[0]=Ri[0],Di[1]=E+S,bn[1]=Di[1]);var I;return f!==0?(I=Si(qr(),i,n,1,1,f,-i,-n),oe(I,wn),oe(I,Ri),oe(I,Di),oe(I,bn),xi(Math.min(wn[0],Ri[0],Di[0],bn[0]),Math.min(wn[1],Ri[1],Di[1],bn[1]),Math.max(wn[0],Ri[0],Di[0],bn[0]),Math.max(wn[1],Ri[1],Di[1],bn[1]),Mo)):xi(Math.min(x,x+T),Math.min(E,E+S),Math.max(x,x+T),Math.max(E,E+S),Mo),d&&(m=Math.round(m),_=Math.round(_)),{drawImageX:m,drawImageY:_,drawImageW:y,drawImageH:w,originX:u,originY:h,declutterBox:{minX:Mo[0],minY:Mo[1],maxX:Mo[2],maxY:Mo[3],value:p},canvasTransform:I,scale:c}},e.prototype.replayImageOrLabel_=function(r,t,i,n,a,o,s){var l=!!(o||s),u=n.declutterBox,h=r.canvas,f=s?s[2]*n.scale[0]/2:0,c=u.minX-f<=h.width/t&&u.maxX+f>=0&&u.minY-f<=h.height/t&&u.maxY+f>=0;return c&&(l&&this.replayTextBackground_(r,wn,Ri,Di,bn,o,s),iO(r,n.canvasTransform,a,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0},e.prototype.fill_=function(r){if(this.alignFill_){var t=oe(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;r.save(),r.translate(t[0]%i,t[1]%i),r.rotate(this.viewRotation_)}r.fill(),this.alignFill_&&r.restore()},e.prototype.setStrokeStyle_=function(r,t){r.strokeStyle=t[1],r.lineWidth=t[2],r.lineCap=t[3],r.lineJoin=t[4],r.miterLimit=t[5],r.setLineDash&&(r.lineDashOffset=t[7],r.setLineDash(t[6]))},e.prototype.drawLabelWithPointPlacement_=function(r,t,i,n){var a=this.textStates[t],o=this.createLabel(r,t,n,i),s=this.strokeStates[i],l=this.pixelRatio,u=Ly(r,a.textAlign||el),h=Ch[a.textBaseline||uh],f=s&&s.lineWidth?s.lineWidth:0,c=o.width/l-2*a.scale[0],d=u*c+2*(.5-u)*f,v=h*o.height/l+2*(.5-h)*f;return{label:o,anchorX:d,anchorY:v}},e.prototype.execute_=function(r,t,i,n,a,o,s,l){var u;this.pixelCoordinates_&&_o(i,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=da(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),gC(this.renderedTransform_,i));for(var h=0,f=n.length,c=0,d,v,g,p,m,_,y,w,T,S,x,E,I=0,A=0,P=null,D=null,N=this.coordinateCache_,j=this.viewRotation_,W=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,z={context:r,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:j},B=this.instructions!=n||this.overlaps?0:200,k,O,M,$;h<f;){var C=n[h],ft=C[0];switch(ft){case Z.BEGIN_GEOMETRY:k=C[1],$=C[3],k.getGeometry()?s!==void 0&&!Je(s,$.getExtent())?h=C[2]+1:++h:h=C[2];break;case Z.BEGIN_PATH:I>B&&(this.fill_(r),I=0),A>B&&(r.stroke(),A=0),!I&&!A&&(r.beginPath(),p=NaN,m=NaN),++h;break;case Z.CIRCLE:c=C[1];var X=u[c],vt=u[c+1],At=u[c+2],St=u[c+3],ve=At-X,ne=St-vt,Ne=Math.sqrt(ve*ve+ne*ne);r.moveTo(X+Ne,vt),r.arc(X,vt,Ne,0,2*Math.PI,!0),++h;break;case Z.CLOSE_PATH:r.closePath(),++h;break;case Z.CUSTOM:c=C[1],d=C[2];var Zr=C[3],Gu=C[4],Yu=C.length==6?C[5]:void 0;z.geometry=Zr,z.feature=k,h in N||(N[h]=[]);var fn=N[h];Yu?Yu(u,c,d,2,fn):(fn[0]=u[c],fn[1]=u[c+1],fn.length=2),Gu(fn,z),++h;break;case Z.DRAW_IMAGE:c=C[1],d=C[2],w=C[3],v=C[4],g=C[5];var vo=C[6],ju=C[7],Ns=C[8],Wu=C[9],Zn=C[10],$s=C[11],Hu=C[12],po=C[13],cn=C[14];if(!w&&C.length>=19){T=C[18],S=C[19],x=C[20],E=C[21];var go=this.drawLabelWithPointPlacement_(T,S,x,E);w=go.label,C[3]=w;var Fc=C[22];v=(go.anchorX-Fc)*this.pixelRatio,C[4]=v;var Bu=C[23];g=(go.anchorY-Bu)*this.pixelRatio,C[5]=g,vo=w.height,C[6]=vo,po=w.width,C[13]=po}var Gs=void 0;C.length>24&&(Gs=C[24]);var dn=void 0,Ti=void 0,qn=void 0;C.length>16?(dn=C[15],Ti=C[16],qn=C[17]):(dn=ua,Ti=!1,qn=!1),Zn&&W?$s+=j:!Zn&&!W&&($s-=j);for(var mo=0;c<d;c+=2)if(!(Gs&&Gs[mo++]<po/this.pixelRatio)){var Lr=this.calculateImageOrLabelDimensions_(w.width,w.height,u[c],u[c+1],po,vo,v,g,Ns,Wu,$s,Hu,a,dn,Ti||qn,k),Fr=[r,t,w,Lr,ju,Ti?P:null,qn?D:null],Jn=void 0,yo=void 0;if(l&&cn){var Uu=d-c;if(!cn[Uu]){cn[Uu]=Fr;continue}if(Jn=cn[Uu],delete cn[Uu],yo=My(Jn),l.collides(yo))continue}l&&l.collides(Lr.declutterBox)||(Jn&&(l&&l.insert(yo),this.replayImageOrLabel_.apply(this,Jn)),l&&l.insert(Lr.declutterBox),this.replayImageOrLabel_.apply(this,Fr))}++h;break;case Z.DRAW_CHARS:var Ug=C[1],zg=C[2],Nc=C[3],Yx=C[4];E=C[5];var jx=C[6],Vg=C[7],Xg=C[8];x=C[9];var $c=C[10];T=C[11],S=C[12];var Kg=[C[13],C[13]],Gc=this.textStates[S],Ys=Gc.font,js=[Gc.scale[0]*Vg,Gc.scale[1]*Vg],Ws=void 0;Ys in this.widths_?Ws=this.widths_[Ys]:(Ws={},this.widths_[Ys]=Ws);var Zg=wy(u,Ug,zg,2),qg=Math.abs(js[0])*Dm(Ys,T,Ws);if(Yx||qg<=Zg){var Wx=this.textStates[S].textAlign,Hx=(Zg-qg)*Ch[Wx],Hs=Vk(u,Ug,zg,2,T,Hx,jx,Math.abs(js[0]),Dm,Ys,Ws,W?0:this.viewRotation_);t:if(Hs){var Bs=[],vn=void 0,zu=void 0,Vu=void 0,$e=void 0,pr=void 0;if(x)for(vn=0,zu=Hs.length;vn<zu;++vn){pr=Hs[vn],Vu=pr[4],$e=this.createLabel(Vu,S,"",x),v=pr[2]+(js[0]<0?-$c:$c),g=Nc*$e.height+(.5-Nc)*2*$c*js[1]/js[0]-Xg;var Lr=this.calculateImageOrLabelDimensions_($e.width,$e.height,pr[0],pr[1],$e.width,$e.height,v,g,0,0,pr[3],Kg,!1,ua,!1,k);if(l&&l.collides(Lr.declutterBox))break t;Bs.push([r,t,$e,Lr,1,null,null])}if(E)for(vn=0,zu=Hs.length;vn<zu;++vn){pr=Hs[vn],Vu=pr[4],$e=this.createLabel(Vu,S,E,""),v=pr[2],g=Nc*$e.height-Xg;var Lr=this.calculateImageOrLabelDimensions_($e.width,$e.height,pr[0],pr[1],$e.width,$e.height,v,g,0,0,pr[3],Kg,!1,ua,!1,k);if(l&&l.collides(Lr.declutterBox))break t;Bs.push([r,t,$e,Lr,1,null,null])}l&&l.load(Bs.map(My));for(var Yc=0,Bx=Bs.length;Yc<Bx;++Yc)this.replayImageOrLabel_.apply(this,Bs[Yc])}}++h;break;case Z.END_GEOMETRY:if(o!==void 0){k=C[1];var Jg=o(k,$);if(Jg)return Jg}++h;break;case Z.FILL:B?I++:this.fill_(r),++h;break;case Z.MOVE_TO_LINE_TO:for(c=C[1],d=C[2],O=u[c],M=u[c+1],_=O+.5|0,y=M+.5|0,(_!==p||y!==m)&&(r.moveTo(O,M),p=_,m=y),c+=2;c<d;c+=2)O=u[c],M=u[c+1],_=O+.5|0,y=M+.5|0,(c==d-2||_!==p||y!==m)&&(r.lineTo(O,M),p=_,m=y);++h;break;case Z.SET_FILL_STYLE:P=C,this.alignFill_=C[2],I&&(this.fill_(r),I=0,A&&(r.stroke(),A=0)),r.fillStyle=C[1],++h;break;case Z.SET_STROKE_STYLE:D=C,A&&(r.stroke(),A=0),this.setStrokeStyle_(r,C),++h;break;case Z.STROKE:B?A++:r.stroke(),++h;break;default:++h;break}}I&&this.fill_(r),A&&r.stroke()},e.prototype.execute=function(r,t,i,n,a,o){this.viewRotation_=n,this.execute_(r,t,i,this.instructions,a,void 0,void 0,o)},e.prototype.executeHitDetection=function(r,t,i,n,a){return this.viewRotation_=i,this.execute_(r,1,t,this.hitDetectionInstructions,!0,n,a)},e}(),Zk=Kk,Fd=[Vt.POLYGON,Vt.CIRCLE,Vt.LINE_STRING,Vt.IMAGE,Vt.TEXT,Vt.DEFAULT],qk=function(){function e(r,t,i,n,a,o){this.maxExtent_=r,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=qr(),this.createExecutors_(a)}return e.prototype.clip=function(r,t){var i=this.getClipCoords(t);r.beginPath(),r.moveTo(i[0],i[1]),r.lineTo(i[2],i[3]),r.lineTo(i[4],i[5]),r.lineTo(i[6],i[7]),r.clip()},e.prototype.createExecutors_=function(r){for(var t in r){var i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);var n=r[t];for(var a in n){var o=n[a];i[a]=new Zk(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},e.prototype.hasExecutors=function(r){for(var t in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[t],n=0,a=r.length;n<a;++n)if(r[n]in i)return!0;return!1},e.prototype.forEachFeatureAtCoordinate=function(r,t,i,n,a,o){n=Math.round(n);var s=n*2+1,l=Si(this.hitDetectionTransform_,n+.5,n+.5,1/t,-1/t,-i,-r[0],-r[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=mr(s,s));var h=this.hitDetectionContext_;h.canvas.width!==s||h.canvas.height!==s?(h.canvas.width=s,h.canvas.height=s):u||h.clearRect(0,0,s,s);var f;this.renderBuffer_!==void 0&&(f=gr(),Ks(f,r),Bc(f,t*(this.renderBuffer_+n),f));var c=Jk(n),d;function v(S,x){for(var E=h.getImageData(0,0,s,s).data,I=0,A=c.length;I<A;I++)if(E[c[I]]>0){if(!o||d!==Vt.IMAGE&&d!==Vt.TEXT||o.indexOf(S)!==-1){var P=(c[I]-3)/4,D=n-P%s,N=n-(P/s|0),j=a(S,x,D*D+N*N);if(j)return j}h.clearRect(0,0,s,s);break}}var g=Object.keys(this.executorsByZIndex_).map(Number);g.sort(ta);var p,m,_,y,w;for(p=g.length-1;p>=0;--p){var T=g[p].toString();for(_=this.executorsByZIndex_[T],m=Fd.length-1;m>=0;--m)if(d=Fd[m],y=_[d],y!==void 0&&(w=y.executeHitDetection(h,l,i,v,f),w))return w}},e.prototype.getClipCoords=function(r){var t=this.maxExtent_;if(!t)return null;var i=t[0],n=t[1],a=t[2],o=t[3],s=[i,n,i,o,a,o,a,n];return da(s,0,8,2,r,s),s},e.prototype.isEmpty=function(){return bo(this.executorsByZIndex_)},e.prototype.execute=function(r,t,i,n,a,o,s){var l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(ta),this.maxExtent_&&(r.save(),this.clip(r,i));var u=o||Fd,h,f,c,d,v,g;for(s&&l.reverse(),h=0,f=l.length;h<f;++h){var p=l[h].toString();for(v=this.executorsByZIndex_[p],c=0,d=u.length;c<d;++c){var m=u[c];g=v[m],g!==void 0&&g.execute(r,t,i,n,a,s)}}this.maxExtent_&&r.restore()},e}(),Nd={};function Jk(e){if(Nd[e]!==void 0)return Nd[e];for(var r=e*2+1,t=e*e,i=new Array(t+1),n=0;n<=e;++n)for(var a=0;a<=e;++a){var o=n*n+a*a;if(o>t)break;var s=i[o];s||(s=[],i[o]=s),s.push(((e+n)*r+(e+a))*4+3),n>0&&s.push(((e-n)*r+(e+a))*4+3),a>0&&(s.push(((e+n)*r+(e-a))*4+3),n>0&&s.push(((e-n)*r+(e-a))*4+3))}for(var l=[],n=0,u=i.length;n<u;++n)i[n]&&l.push.apply(l,i[n]);return Nd[e]=l,l}var Fy=qk,Qk=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),tR=function(e){Qk(r,e);function r(t,i,n,a,o,s,l){var u=e.call(this)||this;return u.context_=t,u.pixelRatio_=i,u.extent_=n,u.transform_=a,u.viewRotation_=o,u.squaredTolerance_=s,u.userTransform_=l,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=[0,0],u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=[0,0],u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=qr(),u}return r.prototype.drawImages_=function(t,i,n,a){if(!!this.image_){var o=da(t,i,n,a,this.transform_,this.pixelCoordinates_),s=this.context_,l=this.tmpLocalTransform_,u=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=u*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var f=0,c=o.length;f<c;f+=2){var d=o[f]-this.imageAnchorX_,v=o[f+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){var g=d+this.imageAnchorX_,p=v+this.imageAnchorY_;Si(l,g,p,1,1,h,-g,-p),s.setTransform.apply(s,l),s.translate(g,p),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,v,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=u)}},r.prototype.drawText_=function(t,i,n,a){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=da(t,i,n,a,this.transform_,this.pixelCoordinates_),s=this.context_,l=this.textRotation_;for(this.textRotateWithView_&&(l+=this.viewRotation_);i<n;i+=a){var u=o[i]+this.textOffsetX_,h=o[i+1]+this.textOffsetY_;if(l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1){var f=Si(this.tmpLocalTransform_,u,h,1,1,l,-u,-h);s.setTransform.apply(s,f),s.translate(u,h),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&s.strokeText(this.text_,u,h),this.textFillState_&&s.fillText(this.text_,u,h)}}},r.prototype.moveToLineTo_=function(t,i,n,a,o){var s=this.context_,l=da(t,i,n,a,this.transform_,this.pixelCoordinates_);s.moveTo(l[0],l[1]);var u=l.length;o&&(u-=2);for(var h=2;h<u;h+=2)s.lineTo(l[h],l[h+1]);return o&&s.closePath(),n},r.prototype.drawRings_=function(t,i,n,a){for(var o=0,s=n.length;o<s;++o)i=this.moveToLineTo_(t,i,n[o],a,!0);return i},r.prototype.drawCircle=function(t){if(!!Je(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=aI(t,this.transform_,this.pixelCoordinates_),n=i[2]-i[0],a=i[3]-i[1],o=Math.sqrt(n*n+a*a),s=this.context_;s.beginPath(),s.arc(i[0],i[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}},r.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},r.prototype.setTransform=function(t){this.transform_=t},r.prototype.drawGeometry=function(t){var i=t.getType();switch(i){case H.POINT:this.drawPoint(t);break;case H.LINE_STRING:this.drawLineString(t);break;case H.POLYGON:this.drawPolygon(t);break;case H.MULTI_POINT:this.drawMultiPoint(t);break;case H.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case H.MULTI_POLYGON:this.drawMultiPolygon(t);break;case H.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case H.CIRCLE:this.drawCircle(t);break}},r.prototype.drawFeature=function(t,i){var n=i.getGeometryFunction()(t);!n||!Je(this.extent_,n.getExtent())||(this.setStyle(i),this.drawGeometry(n))},r.prototype.drawGeometryCollection=function(t){for(var i=t.getGeometriesArray(),n=0,a=i.length;n<a;++n)this.drawGeometry(i[n])},r.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(i,0,i.length,n),this.text_!==""&&this.drawText_(i,0,i.length,n)},r.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(i,0,i.length,n),this.text_!==""&&this.drawText_(i,0,i.length,n)},r.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Je(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),i.stroke()}if(this.text_!==""){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}},r.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getExtent();if(!!Je(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,a=t.getFlatCoordinates(),o=0,s=t.getEnds(),l=t.getStride();n.beginPath();for(var u=0,h=s.length;u<h;++u)o=this.moveToLineTo_(a,o,s[u],l,!1);n.stroke()}if(this.text_!==""){var f=t.getFlatMidpoints();this.drawText_(f,0,f.length,2)}}},r.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Je(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},r.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Je(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getOrientedFlatCoordinates(),a=0,o=t.getEndss(),s=t.getStride();i.beginPath();for(var l=0,u=o.length;l<u;++l){var h=o[l];a=this.drawRings_(n,a,h,s)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){var f=t.getFlatInteriorPoints();this.drawText_(f,0,f.length,2)}}},r.prototype.setContextFillState_=function(t){var i=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},r.prototype.setContextStrokeState_=function(t){var i=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,i.lineCap=t.lineCap),i.setLineDash&&(_o(n.lineDash,t.lineDash)||i.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,i.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,i.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,i.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,i.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,i.setLineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},r.prototype.setContextTextState_=function(t){var i=this.context_,n=this.contextTextState_,a=t.textAlign?t.textAlign:el;n?(n.font!=t.font&&(n.font=t.font,i.font=t.font),n.textAlign!=a&&(n.textAlign=a,i.textAlign=a),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=a,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:a,textBaseline:t.textBaseline})},r.prototype.setFillStrokeStyle=function(t,i){var n=this;if(!t)this.fillState_=null;else{var a=t.getColor();this.fillState_={fillStyle:ei(a||Oi)}}if(!i)this.strokeState_=null;else{var o=i.getColor(),s=i.getLineCap(),l=i.getLineDash(),u=i.getLineDashOffset(),h=i.getLineJoin(),f=i.getWidth(),c=i.getMiterLimit(),d=l||qs;this.strokeState_={lineCap:s!==void 0?s:lh,lineDash:this.pixelRatio_===1?d:d.map(function(v){return v*n.pixelRatio_}),lineDashOffset:(u||Js)*this.pixelRatio_,lineJoin:h!==void 0?h:So,lineWidth:(f!==void 0?f:rl)*this.pixelRatio_,miterLimit:c!==void 0?c:Qs,strokeStyle:ei(o||tl)}}},r.prototype.setImageStyle=function(t){var i;if(!t||!(i=t.getSize())){this.image_=null;return}var n=t.getAnchor(),a=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*this.pixelRatio_,this.imageAnchorY_=n[1]*this.pixelRatio_,this.imageHeight_=i[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=i[0]*this.pixelRatio_},r.prototype.setTextStyle=function(t){if(!t)this.text_="";else{var i=t.getFill();if(!i)this.textFillState_=null;else{var n=i.getColor();this.textFillState_={fillStyle:ei(n||Oi)}}var a=t.getStroke();if(!a)this.textStrokeState_=null;else{var o=a.getColor(),s=a.getLineCap(),l=a.getLineDash(),u=a.getLineDashOffset(),h=a.getLineJoin(),f=a.getWidth(),c=a.getMiterLimit();this.textStrokeState_={lineCap:s!==void 0?s:lh,lineDash:l||qs,lineDashOffset:u||Js,lineJoin:h!==void 0?h:So,lineWidth:f!==void 0?f:rl,miterLimit:c!==void 0?c:Qs,strokeStyle:ei(o||tl)}}var d=t.getFont(),v=t.getOffsetX(),g=t.getOffsetY(),p=t.getRotateWithView(),m=t.getRotation(),_=t.getScaleArray(),y=t.getText(),w=t.getTextAlign(),T=t.getTextBaseline();this.textState_={font:d!==void 0?d:km,textAlign:w!==void 0?w:el,textBaseline:T!==void 0?T:uh},this.text_=y!==void 0?y:"",this.textOffsetX_=v!==void 0?this.pixelRatio_*v:0,this.textOffsetY_=g!==void 0?this.pixelRatio_*g:0,this.textRotateWithView_=p!==void 0?p:!1,this.textRotation_=m!==void 0?m:0,this.textScale_=[this.pixelRatio_*_[0],this.pixelRatio_*_[1]]}},r}(ky),Ny=tR,Tn={FRACTION:"fraction",PIXELS:"pixels"},_r={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},eR=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rR=function(e){eR(r,e);function r(t,i,n,a){var o=e.call(this)||this;return o.extent=t,o.pixelRatio_=n,o.resolution=i,o.state=a,o}return r.prototype.changed=function(){this.dispatchEvent(Q.CHANGE)},r.prototype.getExtent=function(){return this.extent},r.prototype.getImage=function(){return K()},r.prototype.getPixelRatio=function(){return this.pixelRatio_},r.prototype.getResolution=function(){return this.resolution},r.prototype.getState=function(){return this.state},r.prototype.load=function(){K()},r}(To),iR=rR,nR=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();(function(e){nR(r,e);function r(t,i,n,a,o,s){var l=e.call(this,t,i,n,Lt.IDLE)||this;return l.src_=a,l.image_=new Image,o!==null&&(l.image_.crossOrigin=o),l.unlisten_=null,l.state=Lt.IDLE,l.imageLoadFunction_=s,l}return r.prototype.getImage=function(){return this.image_},r.prototype.handleImageError_=function(){this.state=Lt.ERROR,this.unlistenImage_(),this.changed()},r.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=$r(this.extent)/this.image_.height),this.state=Lt.LOADED,this.unlistenImage_(),this.changed()},r.prototype.load=function(){(this.state==Lt.IDLE||this.state==Lt.ERROR)&&(this.state=Lt.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=$d(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},r.prototype.setImage=function(t){this.image_=t,this.resolution=$r(this.extent)/this.image_.height},r.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},r})(iR);function $d(e,r,t){var i=e;if(i.src&&dC){var n=i.decode(),a=!0,o=function(){a=!1};return n.then(function(){a&&r()}).catch(function(l){a&&(l.name==="EncodingError"&&l.message==="Invalid image type."?r():t())}),o}var s=[Ku(i,Q.LOAD,r),Ku(i,Q.ERROR,t)];return function(){s.forEach(Mt)}}var aR=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),dl=null,oR=function(e){aR(r,e);function r(t,i,n,a,o,s){var l=e.call(this)||this;return l.hitDetectionImage_=null,l.image_=t||new Image,a!==null&&(l.image_.crossOrigin=a),l.canvas_={},l.color_=s,l.unlisten_=null,l.imageState_=o,l.size_=n,l.src_=i,l.tainted_,l}return r.prototype.isTainted_=function(){if(this.tainted_===void 0&&this.imageState_===Lt.LOADED){dl||(dl=mr(1,1)),dl.drawImage(this.image_,0,0);try{dl.getImageData(0,0,1,1),this.tainted_=!1}catch(t){dl=null,this.tainted_=!0}}return this.tainted_===!0},r.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Q.CHANGE)},r.prototype.handleImageError_=function(){this.imageState_=Lt.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},r.prototype.handleImageLoad_=function(){this.imageState_=Lt.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},r.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},r.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},r.prototype.getImageState=function(){return this.imageState_},r.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],i=this.size_[1],n=mr(t,i);n.fillRect(0,0,t,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},r.prototype.getSize=function(){return this.size_},r.prototype.getSrc=function(){return this.src_},r.prototype.load=function(){if(this.imageState_==Lt.IDLE){this.imageState_=Lt.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=$d(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},r.prototype.replaceColor_=function(t){if(!(!this.color_||this.canvas_[t]||this.imageState_!==Lt.LOADED)){var i=document.createElement("canvas");this.canvas_[t]=i,i.width=Math.ceil(this.image_.width*t),i.height=Math.ceil(this.image_.height*t);var n=i.getContext("2d");if(n.scale(t,t),n.drawImage(this.image_,0,0),n.globalCompositeOperation="multiply",n.globalCompositeOperation==="multiply"||this.isTainted_())n.fillStyle=vm(this.color_),n.fillRect(0,0,i.width/t,i.height/t),n.globalCompositeOperation="destination-in",n.drawImage(this.image_,0,0);else{for(var a=n.getImageData(0,0,i.width,i.height),o=a.data,s=this.color_[0]/255,l=this.color_[1]/255,u=this.color_[2]/255,h=this.color_[3],f=0,c=o.length;f<c;f+=4)o[f]*=s,o[f+1]*=l,o[f+2]*=u,o[f+3]*=h;n.putImageData(a,0,0)}}},r.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},r}(To);function sR(e,r,t,i,n,a){var o=ih.get(r,i,a);return o||(o=new oR(e,r,t,i,n,a),ih.set(r,i,a,o)),o}var lR=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),uR=function(e){lR(r,e);function r(t){var i=this,n=t||{},a=n.opacity!==void 0?n.opacity:1,o=n.rotation!==void 0?n.rotation:0,s=n.scale!==void 0?n.scale:1,l=n.rotateWithView!==void 0?n.rotateWithView:!1;i=e.call(this,{opacity:a,rotation:o,scale:s,displacement:n.displacement!==void 0?n.displacement:[0,0],rotateWithView:l})||this,i.anchor_=n.anchor!==void 0?n.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=n.anchorOrigin!==void 0?n.anchorOrigin:_r.TOP_LEFT,i.anchorXUnits_=n.anchorXUnits!==void 0?n.anchorXUnits:Tn.FRACTION,i.anchorYUnits_=n.anchorYUnits!==void 0?n.anchorYUnits:Tn.FRACTION,i.crossOrigin_=n.crossOrigin!==void 0?n.crossOrigin:null;var u=n.img!==void 0?n.img:null,h=n.imgSize!==void 0?n.imgSize:null,f=n.src;ut(!(f!==void 0&&u),4),ut(!u||u&&h,5),(f===void 0||f.length===0)&&u&&(f=u.src||bt(u)),ut(f!==void 0&&f.length>0,6);var c=n.src!==void 0?Lt.IDLE:Lt.LOADED;return i.color_=n.color!==void 0?pm(n.color):null,i.iconImage_=sR(u,f,h,i.crossOrigin_,c,i.color_),i.offset_=n.offset!==void 0?n.offset:[0,0],i.offsetOrigin_=n.offsetOrigin!==void 0?n.offsetOrigin:_r.TOP_LEFT,i.origin_=null,i.size_=n.size!==void 0?n.size:null,i}return r.prototype.clone=function(){var t=this.getScale();return new r({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:this.size_!==null?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},r.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,i=this.getSize();if(this.anchorXUnits_==Tn.FRACTION||this.anchorYUnits_==Tn.FRACTION){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_==Tn.FRACTION&&(t[0]*=i[0]),this.anchorYUnits_==Tn.FRACTION&&(t[1]*=i[1])}if(this.anchorOrigin_!=_r.TOP_LEFT){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_==_r.TOP_RIGHT||this.anchorOrigin_==_r.BOTTOM_RIGHT)&&(t[0]=-t[0]+i[0]),(this.anchorOrigin_==_r.BOTTOM_LEFT||this.anchorOrigin_==_r.BOTTOM_RIGHT)&&(t[1]=-t[1]+i[1])}var n=this.getDisplacement();return t[0]-=n[0],t[1]+=n[1],this.normalizedAnchor_=t,this.normalizedAnchor_},r.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},r.prototype.getColor=function(){return this.color_},r.prototype.getImage=function(t){return this.iconImage_.getImage(t)},r.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},r.prototype.getImageSize=function(){return this.iconImage_.getSize()},r.prototype.getImageState=function(){return this.iconImage_.getImageState()},r.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},r.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=_r.TOP_LEFT){var i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),(this.offsetOrigin_==_r.TOP_RIGHT||this.offsetOrigin_==_r.BOTTOM_RIGHT)&&(t[0]=n[0]-i[0]-t[0]),(this.offsetOrigin_==_r.BOTTOM_LEFT||this.offsetOrigin_==_r.BOTTOM_RIGHT)&&(t[1]=n[1]-i[1]-t[1])}return this.origin_=t,this.origin_},r.prototype.getSrc=function(){return this.iconImage_.getSrc()},r.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},r.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Q.CHANGE,t)},r.prototype.load=function(){this.iconImage_.load()},r.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Q.CHANGE,t)},r}(xy),hR=uR,ri=.5;function fR(e,r,t,i,n,a,o){var s=e[0]*ri,l=e[1]*ri,u=mr(s,l);u.imageSmoothingEnabled=!1;for(var h=u.canvas,f=new Ny(u,ri,n,null,o),c=t.length,d=Math.floor((256*256*256-1)/c),v={},g=1;g<=c;++g){var p=t[g-1],m=p.getStyleFunction()||i;if(!!i){var _=m(p,a);if(!!_){Array.isArray(_)||(_=[_]);for(var y=g*d,w="#"+("000000"+y.toString(16)).slice(-6),T=0,S=_.length;T<S;++T){var x=_[T],E=x.getGeometryFunction()(p);if(!(!E||!Je(n,E.getExtent()))){var I=x.clone(),A=I.getFill();A&&A.setColor(w);var P=I.getStroke();P&&(P.setColor(w),P.setLineDash(null)),I.setText(void 0);var D=x.getImage();if(D&&D.getOpacity()!==0){var N=D.getImageSize();if(!N)continue;var j=mr(N[0],N[1],void 0,{alpha:!1}),W=j.canvas;j.fillStyle=w,j.fillRect(0,0,W.width,W.height),I.setImage(new hR({img:W,imgSize:N,anchor:D.getAnchor(),anchorXUnits:Tn.PIXELS,anchorYUnits:Tn.PIXELS,offset:D.getOrigin(),opacity:1,size:D.getSize(),scale:D.getScale(),rotation:D.getRotation(),rotateWithView:D.getRotateWithView()}))}var z=I.getZIndex()||0,B=v[z];B||(B={},v[z]=B,B[H.POLYGON]=[],B[H.CIRCLE]=[],B[H.LINE_STRING]=[],B[H.POINT]=[]),B[E.getType().replace("Multi","")].push(E,I)}}}}}for(var k=Object.keys(v).map(Number).sort(ta),g=0,O=k.length;g<O;++g){var B=v[k[g]];for(var M in B)for(var $=B[M],T=0,S=$.length;T<S;T+=2){f.setStyle($[T+1]);for(var C=0,ft=r.length;C<ft;++C)f.setTransform(r[C]),f.drawGeometry($[T])}}return u.getImageData(0,0,h.width,h.height)}function cR(e,r,t){var i=[];if(t){var n=Math.floor(Math.round(e[0])*ri),a=Math.floor(Math.round(e[1])*ri),o=(Qt(n,0,t.width-1)+Qt(a,0,t.height-1)*t.width)*4,s=t.data[o],l=t.data[o+1],u=t.data[o+2],h=u+256*(l+256*s),f=Math.floor((256*256*256-1)/r.length);h&&h%f==0&&i.push(r[h/f-1])}return i}var dR=.5,$y={Point:bR,LineString:yR,Polygon:ER,MultiPoint:TR,MultiLineString:_R,MultiPolygon:wR,GeometryCollection:mR,Circle:pR};function vR(e,r){return parseInt(bt(e),10)-parseInt(bt(r),10)}function Gy(e,r){var t=Gd(e,r);return t*t}function Gd(e,r){return dR*e/r}function pR(e,r,t,i,n){var a=t.getFill(),o=t.getStroke();if(a||o){var s=e.getBuilder(t.getZIndex(),Vt.CIRCLE);s.setFillStrokeStyle(a,o),s.drawCircle(r,i)}var l=t.getText();if(l&&l.getText()){var u=(n||e).getBuilder(t.getZIndex(),Vt.TEXT);u.setTextStyle(l),u.drawText(r,i)}}function Yy(e,r,t,i,n,a,o){var s=!1,l=t.getImage();if(l){var u=l.getImageState();u==Lt.LOADED||u==Lt.ERROR?l.unlistenImageChange(n):(u==Lt.IDLE&&l.load(),u=l.getImageState(),l.listenImageChange(n),s=!0)}return gR(e,r,t,i,a,o),s}function gR(e,r,t,i,n,a){var o=t.getGeometryFunction()(r);if(!!o){var s=o.simplifyTransformed(i,n),l=t.getRenderer();if(l)jy(e,s,t,r);else{var u=$y[s.getType()];u(e,s,t,r,a)}}}function jy(e,r,t,i){if(r.getType()==H.GEOMETRY_COLLECTION){for(var n=r.getGeometries(),a=0,o=n.length;a<o;++a)jy(e,n[a],t,i);return}var s=e.getBuilder(t.getZIndex(),Vt.DEFAULT);s.drawCustom(r,i,t.getRenderer(),t.getHitDetectionRenderer())}function mR(e,r,t,i,n){var a=r.getGeometriesArray(),o,s;for(o=0,s=a.length;o<s;++o){var l=$y[a[o].getType()];l(e,a[o],t,i,n)}}function yR(e,r,t,i,n){var a=t.getStroke();if(a){var o=e.getBuilder(t.getZIndex(),Vt.LINE_STRING);o.setFillStrokeStyle(null,a),o.drawLineString(r,i)}var s=t.getText();if(s&&s.getText()){var l=(n||e).getBuilder(t.getZIndex(),Vt.TEXT);l.setTextStyle(s),l.drawText(r,i)}}function _R(e,r,t,i,n){var a=t.getStroke();if(a){var o=e.getBuilder(t.getZIndex(),Vt.LINE_STRING);o.setFillStrokeStyle(null,a),o.drawMultiLineString(r,i)}var s=t.getText();if(s&&s.getText()){var l=(n||e).getBuilder(t.getZIndex(),Vt.TEXT);l.setTextStyle(s),l.drawText(r,i)}}function wR(e,r,t,i,n){var a=t.getFill(),o=t.getStroke();if(o||a){var s=e.getBuilder(t.getZIndex(),Vt.POLYGON);s.setFillStrokeStyle(a,o),s.drawMultiPolygon(r,i)}var l=t.getText();if(l&&l.getText()){var u=(n||e).getBuilder(t.getZIndex(),Vt.TEXT);u.setTextStyle(l),u.drawText(r,i)}}function bR(e,r,t,i,n){var a=t.getImage(),o=t.getText(),s;if(n&&(e=n,s=a&&o&&o.getText()?{}:void 0),a){if(a.getImageState()!=Lt.LOADED)return;var l=e.getBuilder(t.getZIndex(),Vt.IMAGE);l.setImageStyle(a,s),l.drawPoint(r,i)}if(o&&o.getText()){var u=e.getBuilder(t.getZIndex(),Vt.TEXT);u.setTextStyle(o,s),u.drawText(r,i)}}function TR(e,r,t,i,n){var a=t.getImage(),o=t.getText(),s;if(n&&(e=n,s=a&&o&&o.getText()?{}:void 0),a){if(a.getImageState()!=Lt.LOADED)return;var l=e.getBuilder(t.getZIndex(),Vt.IMAGE);l.setImageStyle(a,s),l.drawMultiPoint(r,i)}if(o&&o.getText()){var u=(n||e).getBuilder(t.getZIndex(),Vt.TEXT);u.setTextStyle(o,s),u.drawText(r,i)}}function ER(e,r,t,i,n){var a=t.getFill(),o=t.getStroke();if(a||o){var s=e.getBuilder(t.getZIndex(),Vt.POLYGON);s.setFillStrokeStyle(a,o),s.drawPolygon(r,i)}var l=t.getText();if(l&&l.getText()){var u=(n||e).getBuilder(t.getZIndex(),Vt.TEXT);u.setTextStyle(l),u.drawText(r,i)}}var SR=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),xR=function(e){SR(r,e);function r(t){var i=e.call(this,t)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=gr(),i.wrappedRenderedExtent_=gr(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return r.prototype.useContainer=function(t,i,n){n<1&&(t=null),e.prototype.useContainer.call(this,t,i,n)},r.prototype.renderWorlds=function(t,i,n){var a=i.extent,o=i.viewState,s=o.center,l=o.resolution,u=o.projection,h=o.rotation,f=u.getExtent(),c=this.getLayer().getSource(),d=i.pixelRatio,v=i.viewHints,g=!(v[Te.ANIMATING]||v[Te.INTERACTING]),p=this.context,m=Math.round(i.size[0]*d),_=Math.round(i.size[1]*d),y=c.getWrapX()&&u.canWrapX(),w=y?Xt(f):null,T=y?Math.ceil((a[2]-f[2])/w)+1:1,S=y?Math.floor((a[0]-f[0])/w):0;do{var x=this.getRenderTransform(s,l,h,d,m,_,S*w);t.execute(p,1,x,h,g,void 0,n)}while(++S<T)},r.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},r.prototype.renderFrame=function(t,i){var n=t.pixelRatio,a=t.layerStatesArray[t.layerIndex];mC(this.pixelTransform,1/n,1/n),Hc(this.inversePixelTransform,this.pixelTransform);var o=sm(this.pixelTransform);this.useContainer(i,o,a.opacity);var s=this.context,l=s.canvas,u=this.replayGroup_,h=this.declutterExecutorGroup;if((!u||u.isEmpty())&&(!h||h.isEmpty()))return null;var f=Math.round(t.size[0]*n),c=Math.round(t.size[1]*n);l.width!=f||l.height!=c?(l.width=f,l.height=c,l.style.transform!==o&&(l.style.transform=o)):this.containerReused||s.clearRect(0,0,f,c),this.preRender(s,t);var d=t.viewState;d.projection;var v=!1,g=!0;if(a.extent&&this.clipping){var p=ca(a.extent);g=Je(p,t.extent),v=g&&!ia(p,t.extent),v&&this.clipUnrotated(s,t,p)}g&&this.renderWorlds(u,t),v&&s.restore(),this.postRender(s,t);var m=Qc(a.opacity),_=this.container;return m!==_.style.opacity&&(_.style.opacity=m),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container},r.prototype.getFeatures=function(t){return new Promise(function(i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];oe(this.pixelTransform,n);var a=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,l=this.renderedProjection_,u=this.wrappedRenderedExtent_,h=this.getLayer(),f=[],c=n[0]*ri,d=n[1]*ri;f.push(this.getRenderTransform(a,o,s,ri,c,d,0).slice());var v=h.getSource(),g=l.getExtent();if(v.getWrapX()&&l.canWrapX()&&!ia(g,u)){for(var p=u[0],m=Xt(g),_=0,y=void 0;p<g[0];)--_,y=m*_,f.push(this.getRenderTransform(a,o,s,ri,c,d,y).slice()),p+=m;for(_=0,p=u[2];p>g[2];)++_,y=m*_,f.push(this.getRenderTransform(a,o,s,ri,c,d,y).slice()),p-=m}this.hitDetectionImageData_=fR(n,f,this.renderedFeatures_,h.getStyleFunction(),u,o,s)}i(cR(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},r.prototype.forEachFeatureAtCoordinate=function(t,i,n,a,o){var s=this;if(!!this.replayGroup_){var l=i.viewState.resolution,u=i.viewState.rotation,h=this.getLayer(),f={},c=function(g,p,m){var _=bt(g),y=f[_];if(y){if(y!==!0&&m<y.distanceSq){if(m===0)return f[_]=!0,o.splice(o.lastIndexOf(y),1),a(g,h,p);y.geometry=p,y.distanceSq=m}}else{if(m===0)return f[_]=!0,a(g,h,p);o.push(f[_]={feature:g,layer:h,geometry:p,distanceSq:m,callback:a})}},d,v=[this.replayGroup_];return this.declutterExecutorGroup&&v.push(this.declutterExecutorGroup),v.some(function(g){return d=g.forEachFeatureAtCoordinate(t,l,u,n,c,g===s.declutterExecutorGroup?i.declutterTree.all().map(function(p){return p.value}):null)}),d}},r.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},r.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},r.prototype.prepareFrame=function(t){var i=this.getLayer(),n=i.getSource();if(!n)return!1;var a=t.viewHints[Te.ANIMATING],o=t.viewHints[Te.INTERACTING],s=i.getUpdateWhileAnimating(),l=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&a||!l&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var u=t.extent,h=t.viewState,f=h.projection,c=h.resolution,d=t.pixelRatio,v=i.getRevision(),g=i.getRenderBuffer(),p=i.getRenderOrder();p===void 0&&(p=vR);var m=h.center.slice(),_=Bc(u,g*c),y=_.slice(),w=[_.slice()],T=f.getExtent();if(n.getWrapX()&&f.canWrapX()&&!ia(T,t.extent)){var S=Xt(T),x=Math.max(Xt(_)/2,S);_[0]=T[0]-x,_[2]=T[2]+x,Em(m,f);var E=SC(w[0],f);E[0]<T[0]&&E[2]<T[2]?w.push([E[0]+S,E[1],E[2]+S,E[3]]):E[0]>T[0]&&E[2]>T[2]&&w.push([E[0]-S,E[1],E[2]-S,E[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==v&&this.renderedRenderOrder_==p&&ia(this.wrappedRenderedExtent_,_))return _o(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var I=new Dy(Gd(c,d),_,c,d),A;this.getLayer().getDeclutter()&&(A=new Dy(Gd(c,d),_,c,d));for(var P,D,N,D=0,N=w.length;D<N;++D)n.loadFeatures(w[D],c,f);var j=Gy(c,d),W=function(M){var $,C=M.getStyleFunction()||i.getStyleFunction();if(C&&($=C(M,c)),$){var ft=this.renderFeature(M,j,$,I,P,A);this.dirty_=this.dirty_||ft}}.bind(this),z=Bm(_),B=n.getFeaturesInExtent(z);p&&B.sort(p);for(var D=0,N=B.length;D<N;++D)W(B[D]);this.renderedFeatures_=B;var k=I.finish(),O=new Fy(_,c,d,n.getOverlaps(),k,i.getRenderBuffer());return A&&(this.declutterExecutorGroup=new Fy(_,c,d,n.getOverlaps(),A.finish(),i.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=v,this.renderedRenderOrder_=p,this.renderedExtent_=y,this.wrappedRenderedExtent_=_,this.renderedCenter_=m,this.renderedProjection_=f,this.replayGroup_=O,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},r.prototype.renderFeature=function(t,i,n,a,o,s){if(!n)return!1;var l=!1;if(Array.isArray(n))for(var u=0,h=n.length;u<h;++u)l=Yy(a,t,n[u],i,this.boundHandleStyleImageChange_,o,s)||l;else l=Yy(a,t,n,i,this.boundHandleStyleImageChange_,o,s);return l},r}(Ay),CR=xR,OR=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),IR=function(e){OR(r,e);function r(t){return e.call(this,t)||this}return r.prototype.createRenderer=function(){return new CR(this)},r}(Ek),J6=IR,PR=function(){function e(r){this.rbush_=new Ey(r),this.items_={}}return e.prototype.insert=function(r,t){var i={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:t};this.rbush_.insert(i),this.items_[bt(t)]=i},e.prototype.load=function(r,t){for(var i=new Array(t.length),n=0,a=t.length;n<a;n++){var o=r[n],s=t[n],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[n]=l,this.items_[bt(s)]=l}this.rbush_.load(i)},e.prototype.remove=function(r){var t=bt(r),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null},e.prototype.update=function(r,t){var i=this.items_[bt(t)],n=[i.minX,i.minY,i.maxX,i.maxY];Xs(n,r)||(this.remove(t),this.insert(r,t))},e.prototype.getAll=function(){var r=this.rbush_.all();return r.map(function(t){return t.value})},e.prototype.getInExtent=function(r){var t={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]},i=this.rbush_.search(t);return i.map(function(n){return n.value})},e.prototype.forEach=function(r){return this.forEach_(this.getAll(),r)},e.prototype.forEachInExtent=function(r,t){return this.forEach_(this.getInExtent(r),t)},e.prototype.forEach_=function(r,t){for(var i,n=0,a=r.length;n<a;n++)if(i=t(r[n]),i)return i;return i},e.prototype.isEmpty=function(){return bo(this.items_)},e.prototype.clear=function(){this.rbush_.clear(),this.items_={}},e.prototype.getExtent=function(r){var t=this.rbush_.toJSON();return xi(t.minX,t.minY,t.maxX,t.maxY,r)},e.prototype.concat=function(r){this.rbush_.load(r.rbush_.all());for(var t in r.items_)this.items_[t]=r.items_[t]},e}(),Wy=PR,kR=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),RR=function(e){kR(r,e);function r(t){var i=e.call(this)||this;i.projection=se(t.projection),i.attributions_=Hy(t.attributions),i.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,i.loading=!1,i.state_=t.state!==void 0?t.state:la.READY,i.wrapX_=t.wrapX!==void 0?t.wrapX:!1,i.viewResolver=null,i.viewRejector=null;var n=i;return i.viewPromise_=new Promise(function(a,o){n.viewResolver=a,n.viewRejector=o}),i}return r.prototype.getAttributions=function(){return this.attributions_},r.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},r.prototype.getProjection=function(){return this.projection},r.prototype.getResolutions=function(){return K()},r.prototype.getView=function(){return this.viewPromise_},r.prototype.getState=function(){return this.state_},r.prototype.getWrapX=function(){return this.wrapX_},r.prototype.getContextOptions=function(){},r.prototype.refresh=function(){this.changed()},r.prototype.setAttributions=function(t){this.attributions_=Hy(t),this.changed()},r.prototype.setState=function(t){this.state_=t,this.changed()},r}(Nr);function Hy(e){return e?Array.isArray(e)?function(r){return e}:typeof e=="function"?e:function(r){return[e]}:null}var By=RR,ii={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function DR(e,r){return[[-1/0,-1/0,1/0,1/0]]}var AR=!1;function MR(e,r,t,i,n,a,o){var s=new XMLHttpRequest;s.open("GET",typeof e=="function"?e(t,i,n):e,!0),r.getType()==Ro.ARRAY_BUFFER&&(s.responseType="arraybuffer"),s.withCredentials=AR,s.onload=function(l){if(!s.status||s.status>=200&&s.status<300){var u=r.getType(),h=void 0;u==Ro.JSON||u==Ro.TEXT?h=s.responseText:u==Ro.XML?(h=s.responseXML,h||(h=new DOMParser().parseFromString(s.responseText,"application/xml"))):u==Ro.ARRAY_BUFFER&&(h=s.response),h?a(r.readFeatures(h,{extent:t,featureProjection:n}),r.readProjection(h)):o()}else o()},s.onerror=o,s.send()}function Uy(e,r){return function(t,i,n,a,o){var s=this;MR(e,r,t,i,n,function(l,u){s.addFeatures(l),a!==void 0&&a(l)},o||ea)}}var zy=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),En=function(e){zy(r,e);function r(t,i,n){var a=e.call(this,t)||this;return a.feature=i,a.features=n,a}return r}(pn),LR=function(e){zy(r,e);function r(t){var i=this,n=t||{};i=e.call(this,{attributions:n.attributions,projection:void 0,state:la.READY,wrapX:n.wrapX!==void 0?n.wrapX:!0})||this,i.on,i.once,i.un,i.loader_=ea,i.format_=n.format,i.overlaps_=n.overlaps===void 0?!0:n.overlaps,i.url_=n.url,n.loader!==void 0?i.loader_=n.loader:i.url_!==void 0&&(ut(i.format_,7),i.loader_=Uy(i.url_,i.format_)),i.strategy_=n.strategy!==void 0?n.strategy:DR;var a=n.useSpatialIndex!==void 0?n.useSpatialIndex:!0;i.featuresRtree_=a?new Wy:null,i.loadedExtentsRtree_=new Wy,i.loadingExtentsCount_=0,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null;var o,s;return Array.isArray(n.features)?s=n.features:n.features&&(o=n.features,s=o.getArray()),!a&&o===void 0&&(o=new yr(s)),s!==void 0&&i.addFeaturesInternal(s),o!==void 0&&i.bindFeaturesCollection_(o),i}return r.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},r.prototype.addFeatureInternal=function(t){var i=bt(t);if(!this.addToIndex_(i,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(i,t);var n=t.getGeometry();if(n){var a=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(a,t)}else this.nullGeometryFeatures_[i]=t;this.dispatchEvent(new En(ii.ADDFEATURE,t))},r.prototype.setupChangeEvents_=function(t,i){this.featureChangeKeys_[t]=[yt(i,Q.CHANGE,this.handleFeatureChange_,this),yt(i,Qn.PROPERTYCHANGE,this.handleFeatureChange_,this)]},r.prototype.addToIndex_=function(t,i){var n=!0,a=i.getId();return a!==void 0&&(a.toString()in this.idIndex_?n=!1:this.idIndex_[a.toString()]=i),n&&(ut(!(t in this.uidIndex_),30),this.uidIndex_[t]=i),n},r.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},r.prototype.addFeaturesInternal=function(t){for(var i=[],n=[],a=[],o=0,s=t.length;o<s;o++){var l=t[o],u=bt(l);this.addToIndex_(u,l)&&n.push(l)}for(var o=0,h=n.length;o<h;o++){var l=n[o],u=bt(l);this.setupChangeEvents_(u,l);var f=l.getGeometry();if(f){var c=f.getExtent();i.push(c),a.push(l)}else this.nullGeometryFeatures_[u]=l}this.featuresRtree_&&this.featuresRtree_.load(i,a);for(var o=0,d=n.length;o<d;o++)this.dispatchEvent(new En(ii.ADDFEATURE,n[o]))},r.prototype.bindFeaturesCollection_=function(t){var i=!1;this.addEventListener(ii.ADDFEATURE,function(n){i||(i=!0,t.push(n.feature),i=!1)}),this.addEventListener(ii.REMOVEFEATURE,function(n){i||(i=!0,t.remove(n.feature),i=!1)}),t.addEventListener(Ge.ADD,function(n){i||(i=!0,this.addFeature(n.element),i=!1)}.bind(this)),t.addEventListener(Ge.REMOVE,function(n){i||(i=!0,this.removeFeature(n.element),i=!1)}.bind(this)),this.featuresCollection_=t},r.prototype.clear=function(t){if(t){for(var i in this.featureChangeKeys_){var n=this.featureChangeKeys_[i];n.forEach(Mt)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this));for(var a in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[a])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var o=new En(ii.CLEAR);this.dispatchEvent(o),this.changed()},r.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},r.prototype.forEachFeatureAtCoordinateDirect=function(t,i){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(a){var o=a.getGeometry();if(o.intersectsCoordinate(t))return i(a)})},r.prototype.forEachFeatureInExtent=function(t,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)},r.prototype.forEachFeatureIntersectingExtent=function(t,i){return this.forEachFeatureInExtent(t,function(n){var a=n.getGeometry();if(a.intersectsExtent(t)){var o=i(n);if(o)return o}})},r.prototype.getFeaturesCollection=function(){return this.featuresCollection_},r.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),bo(this.nullGeometryFeatures_)||Ei(t,Qg(this.nullGeometryFeatures_))),t},r.prototype.getFeaturesAtCoordinate=function(t){var i=[];return this.forEachFeatureAtCoordinateDirect(t,function(n){i.push(n)}),i},r.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},r.prototype.getClosestFeatureToCoordinate=function(t,i){var n=t[0],a=t[1],o=null,s=[NaN,NaN],l=1/0,u=[-1/0,-1/0,1/0,1/0],h=i||wo;return this.featuresRtree_.forEachInExtent(u,function(f){if(h(f)){var c=f.getGeometry(),d=l;if(l=c.closestPointXY(n,a,s,l),l<d){o=f;var v=Math.sqrt(l);u[0]=n-v,u[1]=a-v,u[2]=n+v,u[3]=a+v}}}),o},r.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},r.prototype.getFeatureById=function(t){var i=this.idIndex_[t.toString()];return i!==void 0?i:null},r.prototype.getFeatureByUid=function(t){var i=this.uidIndex_[t];return i!==void 0?i:null},r.prototype.getFormat=function(){return this.format_},r.prototype.getOverlaps=function(){return this.overlaps_},r.prototype.getUrl=function(){return this.url_},r.prototype.handleFeatureChange_=function(t){var i=t.target,n=bt(i),a=i.getGeometry();if(!a)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[n]=i);else{var o=a.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,i)):this.featuresRtree_&&this.featuresRtree_.update(o,i)}var s=i.getId();if(s!==void 0){var l=s.toString();this.idIndex_[l]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[l]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[n]=i;this.changed(),this.dispatchEvent(new En(ii.CHANGEFEATURE,i))},r.prototype.hasFeature=function(t){var i=t.getId();return i!==void 0?i in this.idIndex_:bt(t)in this.uidIndex_},r.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&bo(this.nullGeometryFeatures_)},r.prototype.loadFeatures=function(t,i,n){for(var a=this.loadedExtentsRtree_,o=this.strategy_(t,i,n),s=function(f,c){var d=o[f],v=a.forEachInExtent(d,function(g){return ia(g.extent,d)});v||(++l.loadingExtentsCount_,l.dispatchEvent(new En(ii.FEATURESLOADSTART)),l.loader_.call(l,d,i,n,function(g){--this.loadingExtentsCount_,this.dispatchEvent(new En(ii.FEATURESLOADEND,void 0,g))}.bind(l),function(){--this.loadingExtentsCount_,this.dispatchEvent(new En(ii.FEATURESLOADERROR))}.bind(l)),a.insert(d,{extent:d.slice()}))},l=this,u=0,h=o.length;u<h;++u)s(u);this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0},r.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),e.prototype.refresh.call(this)},r.prototype.removeLoadedExtent=function(t){var i=this.loadedExtentsRtree_,n;i.forEachInExtent(t,function(a){if(Xs(a.extent,t))return n=a,!0}),n&&i.remove(n)},r.prototype.removeFeature=function(t){var i=bt(t);i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},r.prototype.removeFeatureInternal=function(t){var i=bt(t);this.featureChangeKeys_[i].forEach(Mt),delete this.featureChangeKeys_[i];var n=t.getId();n!==void 0&&delete this.idIndex_[n.toString()],delete this.uidIndex_[i],this.dispatchEvent(new En(ii.REMOVEFEATURE,t))},r.prototype.removeFromIdIndex_=function(t){var i=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],i=!0;break}return i},r.prototype.setLoader=function(t){this.loader_=t},r.prototype.setUrl=function(t){ut(this.format_,7),this.url_=t,this.setLoader(Uy(t,this.format_))},r}(By),Q6=LR;function FR(e){var r=e||{},t=new yr,i=new AP(-.005,.05,100),n=r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0;n&&t.push(new mP);var a=r.doubleClickZoom!==void 0?r.doubleClickZoom:!0;a&&t.push(new iP({delta:r.zoomDelta,duration:r.zoomDuration}));var o=r.dragPan!==void 0?r.dragPan:!0;o&&t.push(new vP({onFocusOnly:r.onFocusOnly,kinetic:i}));var s=r.pinchRotate!==void 0?r.pinchRotate:!0;s&&t.push(new GP);var l=r.pinchZoom!==void 0?r.pinchZoom:!0;l&&t.push(new WP({duration:r.zoomDuration}));var u=r.keyboard!==void 0?r.keyboard:!0;u&&(t.push(new IP),t.push(new RP({delta:r.zoomDelta,duration:r.zoomDuration})));var h=r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0;h&&t.push(new FP({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration}));var f=r.shiftDragZoom!==void 0?r.shiftDragZoom:!0;return f&&t.push(new xP({duration:r.zoomDuration})),t}var NR=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$R=function(e){NR(r,e);function r(t){var i=this;return t=ae({},t),t.controls||(t.controls=qI()),t.interactions||(t.interactions=FR({onFocusOnly:!0})),i=e.call(this,t)||this,i}return r.prototype.createRenderer=function(){return new sO(this)},r}(NI),t8=$R,GR=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),YR=function(e){GR(r,e);function r(t){var i=e.call(this)||this;return i.geometries_=t||null,i.changeEventsKeys_=[],i.listenGeometriesChange_(),i}return r.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(Mt),this.changeEventsKeys_.length=0},r.prototype.listenGeometriesChange_=function(){if(!!this.geometries_)for(var t=0,i=this.geometries_.length;t<i;++t)this.changeEventsKeys_.push(yt(this.geometries_[t],Q.CHANGE,this.changed,this))},r.prototype.clone=function(){var t=new r(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t},r.prototype.closestPointXY=function(t,i,n,a){if(a<ra(this.getExtent(),t,i))return a;for(var o=this.geometries_,s=0,l=o.length;s<l;++s)a=o[s].closestPointXY(t,i,n,a);return a},r.prototype.containsXY=function(t,i){for(var n=this.geometries_,a=0,o=n.length;a<o;++a)if(n[a].containsXY(t,i))return!0;return!1},r.prototype.computeExtent=function(t){Vs(t);for(var i=this.geometries_,n=0,a=i.length;n<a;++n)fm(t,i[n].getExtent());return t},r.prototype.getGeometries=function(){return Vy(this.geometries_)},r.prototype.getGeometriesArray=function(){return this.geometries_},r.prototype.getGeometriesArrayRecursive=function(){for(var t=[],i=this.geometries_,n=0,a=i.length;n<a;++n)i[n].getType()===this.getType()?t=t.concat(i[n].getGeometriesArrayRecursive()):t.push(i[n]);return t},r.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],n=this.geometries_,a=!1,o=0,s=n.length;o<s;++o){var l=n[o],u=l.getSimplifiedGeometry(t);i.push(u),u!==l&&(a=!0)}if(a){var h=new r(null);return h.setGeometriesArray(i),h}else return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},r.prototype.getType=function(){return H.GEOMETRY_COLLECTION},r.prototype.intersectsExtent=function(t){for(var i=this.geometries_,n=0,a=i.length;n<a;++n)if(i[n].intersectsExtent(t))return!0;return!1},r.prototype.isEmpty=function(){return this.geometries_.length===0},r.prototype.rotate=function(t,i){for(var n=this.geometries_,a=0,o=n.length;a<o;++a)n[a].rotate(t,i);this.changed()},r.prototype.scale=function(t,i,n){var a=n;a||(a=na(this.getExtent()));for(var o=this.geometries_,s=0,l=o.length;s<l;++s)o[s].scale(t,i,a);this.changed()},r.prototype.setGeometries=function(t){this.setGeometriesArray(Vy(t))},r.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},r.prototype.applyTransform=function(t){for(var i=this.geometries_,n=0,a=i.length;n<a;++n)i[n].applyTransform(t);this.changed()},r.prototype.translate=function(t,i){for(var n=this.geometries_,a=0,o=n.length;a<o;++a)n[a].translate(t,i);this.changed()},r.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),e.prototype.disposeInternal.call(this)},r}(qm);function Vy(e){for(var r=[],t=0,i=e.length;t<i;++t)r.push(e[t].clone());return r}var jR=YR,WR=function(){function e(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return e.prototype.getReadOptions=function(r,t){var i;if(t){var n=t.dataProjection?se(t.dataProjection):this.readProjection(r);t.extent&&n&&n.getUnits()===Pi.TILE_PIXELS&&(n=se(n),n.setWorldExtent(t.extent)),i={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(i)},e.prototype.adaptOptions=function(r){return ae({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},r)},e.prototype.getType=function(){return K()},e.prototype.readFeature=function(r,t){return K()},e.prototype.readFeatures=function(r,t){return K()},e.prototype.readGeometry=function(r,t){return K()},e.prototype.readProjection=function(r){return K()},e.prototype.writeFeature=function(r,t){return K()},e.prototype.writeFeatures=function(r,t){return K()},e.prototype.writeGeometry=function(r,t){return K()},e}();function Xy(e,r,t){var i=t?se(t.featureProjection):null,n=t?se(t.dataProjection):null,a;if(i&&n&&!fa(i,n)?a=(r?e.clone():e).transform(r?i:n,r?n:i):a=e,r&&t&&t.decimals!==void 0){var o=Math.pow(10,t.decimals),s=function(l){for(var u=0,h=l.length;u<h;++u)l[u]=Math.round(l[u]*o)/o;return l};a===e&&(a=e.clone()),a.applyTransform(s)}return a}var HR=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),BR=function(e){HR(r,e);function r(){return e.call(this)||this}return r.prototype.getType=function(){return Ro.JSON},r.prototype.readFeature=function(t,i){return this.readFeatureFromObject(Oh(t),this.getReadOptions(t,i))},r.prototype.readFeatures=function(t,i){return this.readFeaturesFromObject(Oh(t),this.getReadOptions(t,i))},r.prototype.readFeatureFromObject=function(t,i){return K()},r.prototype.readFeaturesFromObject=function(t,i){return K()},r.prototype.readGeometry=function(t,i){return this.readGeometryFromObject(Oh(t),this.getReadOptions(t,i))},r.prototype.readGeometryFromObject=function(t,i){return K()},r.prototype.readProjection=function(t){return this.readProjectionFromObject(Oh(t))},r.prototype.readProjectionFromObject=function(t){return K()},r.prototype.writeFeature=function(t,i){return JSON.stringify(this.writeFeatureObject(t,i))},r.prototype.writeFeatureObject=function(t,i){return K()},r.prototype.writeFeatures=function(t,i){return JSON.stringify(this.writeFeaturesObject(t,i))},r.prototype.writeFeaturesObject=function(t,i){return K()},r.prototype.writeGeometry=function(t,i){return JSON.stringify(this.writeGeometryObject(t,i))},r.prototype.writeGeometryObject=function(t,i){return K()},r}(WR);function Oh(e){if(typeof e=="string"){var r=JSON.parse(e);return r||null}else return e!==null?e:null}var UR=BR,zR=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),VR=function(e){zR(r,e);function r(t){var i=this,n=t||{};return i=e.call(this)||this,i.dataProjection=se(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(i.defaultFeatureProjection=se(n.featureProjection)),i.geometryName_=n.geometryName,i.extractGeometryName_=n.extractGeometryName,i.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],i}return r.prototype.readFeatureFromObject=function(t,i){var n=null;t.type==="Feature"?n=t:n={type:"Feature",geometry:t,properties:null};var a=Yd(n.geometry,i),o=new uC;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&o.setGeometryName(n.geometry_name),o.setGeometry(a),"id"in n&&o.setId(n.id),n.properties&&o.setProperties(n.properties,!0),o},r.prototype.readFeaturesFromObject=function(t,i){var n=t,a=null;if(n.type==="FeatureCollection"){var o=t;a=[];for(var s=o.features,l=0,u=s.length;l<u;++l)a.push(this.readFeatureFromObject(s[l],i))}else a=[this.readFeatureFromObject(t,i)];return a},r.prototype.readGeometryFromObject=function(t,i){return Yd(t,i)},r.prototype.readProjectionFromObject=function(t){var i=t.crs,n;return i?i.type=="name"?n=se(i.properties.name):i.type==="EPSG"?n=se("EPSG:"+i.properties.code):ut(!1,36):n=this.dataProjection,n},r.prototype.writeFeatureObject=function(t,i){i=this.adaptOptions(i);var n={type:"Feature",geometry:null,properties:null},a=t.getId();if(a!==void 0&&(n.id=a),!t.hasProperties())return n;var o=t.getProperties(),s=t.getGeometry();return s&&(n.geometry=jd(s,i),delete o[t.getGeometryName()]),bo(o)||(n.properties=o),n},r.prototype.writeFeaturesObject=function(t,i){i=this.adaptOptions(i);for(var n=[],a=0,o=t.length;a<o;++a)n.push(this.writeFeatureObject(t[a],i));return{type:"FeatureCollection",features:n}},r.prototype.writeGeometryObject=function(t,i){return jd(t,this.adaptOptions(i))},r}(UR);function Yd(e,r){if(!e)return null;var t;switch(e.type){case H.POINT:{t=KR(e);break}case H.LINE_STRING:{t=ZR(e);break}case H.POLYGON:{t=tD(e);break}case H.MULTI_POINT:{t=JR(e);break}case H.MULTI_LINE_STRING:{t=qR(e);break}case H.MULTI_POLYGON:{t=QR(e);break}case H.GEOMETRY_COLLECTION:{t=XR(e);break}default:throw new Error("Unsupported GeoJSON type: "+e.type)}return Xy(t,!1,r)}function XR(e,r){var t=e.geometries.map(function(i){return Yd(i,r)});return new jR(t)}function KR(e){return new yh(e.coordinates)}function ZR(e){return new Dd(e.coordinates)}function qR(e){return new XP(e.coordinates)}function JR(e){return new by(e.coordinates)}function QR(e){return new tk(e.coordinates)}function tD(e){return new wh(e.coordinates)}function jd(e,r){e=Xy(e,!0,r);var t=e.getType(),i;switch(t){case H.POINT:{i=oD(e);break}case H.LINE_STRING:{i=rD(e);break}case H.POLYGON:{i=sD(e,r);break}case H.MULTI_POINT:{i=nD(e);break}case H.MULTI_LINE_STRING:{i=iD(e);break}case H.MULTI_POLYGON:{i=aD(e,r);break}case H.GEOMETRY_COLLECTION:{i=eD(e,r);break}case H.CIRCLE:{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function eD(e,r){var t=e.getGeometriesArray().map(function(i){var n=ae({},r);return delete n.featureProjection,jd(i,n)});return{type:"GeometryCollection",geometries:t}}function rD(e,r){return{type:"LineString",coordinates:e.getCoordinates()}}function iD(e,r){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function nD(e,r){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function aD(e,r){var t;return r&&(t=r.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(t)}}function oD(e,r){return{type:"Point",coordinates:e.getCoordinates()}}function sD(e,r){var t;return r&&(t=r.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(t)}}var e8=VR,lD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),uD=function(e){lD(r,e);function r(t,i,n){var a=e.call(this)||this,o=n||{};return a.tileCoord=t,a.state=i,a.interimTile=null,a.key="",a.transition_=o.transition===void 0?250:o.transition,a.transitionStarts_={},a}return r.prototype.changed=function(){this.dispatchEvent(Q.CHANGE)},r.prototype.release=function(){},r.prototype.getKey=function(){return this.key+"/"+this.tileCoord},r.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==q.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},r.prototype.refreshInterimChain=function(){if(!!this.interimTile){var t=this.interimTile,i=this;do{if(t.getState()==q.LOADED){t.interimTile=null;break}else t.getState()==q.LOADING?i=t:t.getState()==q.IDLE?i.interimTile=t.interimTile:i=t;t=i.interimTile}while(t)}},r.prototype.getTileCoord=function(){return this.tileCoord},r.prototype.getState=function(){return this.state},r.prototype.setState=function(t){if(this.state!==q.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},r.prototype.load=function(){K()},r.prototype.getAlpha=function(t,i){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(!n)n=i,this.transitionStarts_[t]=n;else if(n===-1)return 1;var a=i-n+1e3/60;return a>=this.transition_?1:Xm(a/this.transition_)},r.prototype.inTransition=function(t){return this.transition_?this.transitionStarts_[t]!==-1:!1},r.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},r}(To),Ky=uD,hD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),fD=function(e){hD(r,e);function r(t,i,n,a,o,s){var l=e.call(this,t,i,s)||this;return l.crossOrigin_=a,l.src_=n,l.key=n,l.image_=new Image,a!==null&&(l.image_.crossOrigin=a),l.unlisten_=null,l.tileLoadFunction_=o,l}return r.prototype.getImage=function(){return this.image_},r.prototype.setImage=function(t){this.image_=t,this.state=q.LOADED,this.unlistenImage_(),this.changed()},r.prototype.handleImageError_=function(){this.state=q.ERROR,this.unlistenImage_(),this.image_=cD(),this.changed()},r.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=q.LOADED:this.state=q.EMPTY,this.unlistenImage_(),this.changed()},r.prototype.load=function(){this.state==q.ERROR&&(this.state=q.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==q.IDLE&&(this.state=q.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=$d(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},r.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},r}(Ky);function cD(){var e=mr(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}var dD=fD,vD=.5,Ai=!0,pD=10,Zy=.25,gD=function(){function e(r,t,i,n,a,o){this.sourceProj_=r,this.targetProj_=t;var s={},l=gh(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){var w=y[0]+"/"+y[1];return s[w]||(s[w]=l(y)),s[w]},this.maxSourceExtent_=n,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Xt(n)==Xt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Xt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Xt(this.targetProj_.getExtent()):null;var u=aa(i),h=eh(i),f=th(i),c=Qu(i),d=this.transformInv_(u),v=this.transformInv_(h),g=this.transformInv_(f),p=this.transformInv_(c),m=pD+(o?Math.max(0,Math.ceil(CC(Vc(i)/(o*o*256*256)))):0);if(this.addQuad_(u,h,f,c,d,v,g,p,m),this.wrapsXInSource_){var _=1/0;this.triangles_.forEach(function(y,w,T){_=Math.min(_,y.source[0][0],y.source[1][0],y.source[2][0])}),this.triangles_.forEach(function(y){if(Math.max(y.source[0][0],y.source[1][0],y.source[2][0])-_>this.sourceWorldWidth_/2){var w=[[y.source[0][0],y.source[0][1]],[y.source[1][0],y.source[1][1]],[y.source[2][0],y.source[2][1]]];w[0][0]-_>this.sourceWorldWidth_/2&&(w[0][0]-=this.sourceWorldWidth_),w[1][0]-_>this.sourceWorldWidth_/2&&(w[1][0]-=this.sourceWorldWidth_),w[2][0]-_>this.sourceWorldWidth_/2&&(w[2][0]-=this.sourceWorldWidth_);var T=Math.min(w[0][0],w[1][0],w[2][0]),S=Math.max(w[0][0],w[1][0],w[2][0]);S-T<this.sourceWorldWidth_/2&&(y.source=w)}}.bind(this))}s={}}return e.prototype.addTriangle_=function(r,t,i,n,a,o){this.triangles_.push({source:[n,a,o],target:[r,t,i]})},e.prototype.addQuad_=function(r,t,i,n,a,o,s,l,u){var h=lm([a,o,s,l]),f=this.sourceWorldWidth_?Xt(h)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&f>.5&&f<1,v=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var g=lm([r,t,i,n]),p=Xt(g)/this.targetWorldWidth_;v=p>Zy||v}!d&&this.sourceProj_.isGlobal()&&f&&(v=f>Zy||v)}if(!(!v&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Je(h,this.maxSourceExtent_))){var m=0;if(!v&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)v=!0;else if(m=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(s[0])||!isFinite(s[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(u>0){if(!v){var _=[(r[0]+i[0])/2,(r[1]+i[1])/2],y=this.transformInv_(_),w=void 0;if(d){var T=(gn(a[0],c)+gn(s[0],c))/2;w=T-gn(y[0],c)}else w=(a[0]+s[0])/2-y[0];var S=(a[1]+s[1])/2-y[1],x=w*w+S*S;v=x>this.errorThresholdSquared_}if(v){if(Math.abs(r[0]-i[0])<=Math.abs(r[1]-i[1])){var E=[(t[0]+i[0])/2,(t[1]+i[1])/2],I=this.transformInv_(E),A=[(n[0]+r[0])/2,(n[1]+r[1])/2],P=this.transformInv_(A);this.addQuad_(r,t,E,A,a,o,I,P,u-1),this.addQuad_(A,E,i,n,P,I,s,l,u-1)}else{var D=[(r[0]+t[0])/2,(r[1]+t[1])/2],N=this.transformInv_(D),j=[(i[0]+n[0])/2,(i[1]+n[1])/2],W=this.transformInv_(j);this.addQuad_(r,D,j,n,a,N,W,l,u-1),this.addQuad_(D,t,i,j,N,o,s,W,u-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(m&11)==0&&this.addTriangle_(r,i,n,a,s,l),(m&14)==0&&this.addTriangle_(r,i,t,a,s,o),m&&((m&13)==0&&this.addTriangle_(t,n,r,o,l,a),(m&7)==0&&this.addTriangle_(t,n,i,o,l,s))}},e.prototype.calculateSourceExtent=function(){var r=gr();return this.triangles_.forEach(function(t,i,n){var a=t.source;Ks(r,a[0]),Ks(r,a[1]),Ks(r,a[2])}),r},e.prototype.getTriangles=function(){return this.triangles_},e}(),mD=gD,qy={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Wd;function Jy(e,r,t,i,n){e.beginPath(),e.moveTo(0,0),e.lineTo(r,t),e.lineTo(i,n),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(r,i)+1,Math.max(t,n)),e.restore()}function Hd(e,r){return Math.abs(e[r*4]-210)>2||Math.abs(e[r*4+3]-.75*255)>2}function yD(){if(Wd===void 0){var e=document.createElement("canvas").getContext("2d");e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",Jy(e,4,5,4,0),Jy(e,4,5,0,5);var r=e.getImageData(0,0,3,3).data;Wd=Hd(r,0)||Hd(r,4)||Hd(r,8)}return Wd}function Qy(e,r,t,i){var n=Hm(t,r,e),a=jm(r,i,t),o=r.getMetersPerUnit();o!==void 0&&(a*=o);var s=e.getMetersPerUnit();s!==void 0&&(a/=s);var l=e.getExtent();if(!l||Ju(l,n)){var u=jm(e,a,n)/a;isFinite(u)&&u>0&&(a/=u)}return a}function _D(e,r,t,i){var n=na(t),a=Qy(e,r,n,i);return(!isFinite(a)||a<=0)&&dm(t,function(o){return a=Qy(e,r,o,i),isFinite(a)&&a>0}),a}function wD(e,r,t,i,n,a,o,s,l,u,h,f){var c=mr(Math.round(t*e),Math.round(t*r));if(ae(c,f),l.length===0)return c.canvas;c.scale(t,t);function d(w){return Math.round(w*t)/t}c.globalCompositeOperation="lighter";var v=gr();l.forEach(function(w,T,S){fm(v,w.extent)});var g=Xt(v),p=$r(v),m=mr(Math.round(t*g/i),Math.round(t*p/i));ae(m,f);var _=t/i;l.forEach(function(w,T,S){var x=w.extent[0]-v[0],E=-(w.extent[3]-v[3]),I=Xt(w.extent),A=$r(w.extent);w.image.width>0&&w.image.height>0&&m.drawImage(w.image,u,u,w.image.width-2*u,w.image.height-2*u,x*_,E*_,I*_,A*_)});var y=aa(o);return s.getTriangles().forEach(function(w,T,S){var x=w.source,E=w.target,I=x[0][0],A=x[0][1],P=x[1][0],D=x[1][1],N=x[2][0],j=x[2][1],W=d((E[0][0]-y[0])/a),z=d(-(E[0][1]-y[1])/a),B=d((E[1][0]-y[0])/a),k=d(-(E[1][1]-y[1])/a),O=d((E[2][0]-y[0])/a),M=d(-(E[2][1]-y[1])/a),$=I,C=A;I=0,A=0,P-=$,D-=C,N-=$,j-=C;var ft=[[P,D,0,0,B-W],[N,j,0,0,O-W],[0,0,P,D,k-z],[0,0,N,j,M-z]],X=IC(ft);if(!!X){if(c.save(),c.beginPath(),yD()||f===qy){c.moveTo(B,k);for(var vt=4,At=W-B,St=z-k,ve=0;ve<vt;ve++)c.lineTo(B+d((ve+1)*At/vt),k+d(ve*St/(vt-1))),ve!=vt-1&&c.lineTo(B+d((ve+1)*At/vt),k+d((ve+1)*St/(vt-1)));c.lineTo(O,M)}else c.moveTo(B,k),c.lineTo(W,z),c.lineTo(O,M);c.clip(),c.transform(X[0],X[2],X[1],X[3],W,z),c.translate(v[0]-$,v[3]-C),c.scale(i/t,-i/t),c.drawImage(m.canvas,0,0),c.restore()}}),h&&(c.save(),c.globalCompositeOperation="source-over",c.strokeStyle="black",c.lineWidth=1,s.getTriangles().forEach(function(w,T,S){var x=w.target,E=(x[0][0]-y[0])/a,I=-(x[0][1]-y[1])/a,A=(x[1][0]-y[0])/a,P=-(x[1][1]-y[1])/a,D=(x[2][0]-y[0])/a,N=-(x[2][1]-y[1])/a;c.beginPath(),c.moveTo(A,P),c.lineTo(E,I),c.lineTo(D,N),c.closePath(),c.stroke()}),c.restore()),c.canvas}var bD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),TD=function(e){bD(r,e);function r(t,i,n,a,o,s,l,u,h,f,c,d){var v=e.call(this,o,q.IDLE)||this;v.renderEdges_=c!==void 0?c:!1,v.contextOptions_=d,v.pixelRatio_=l,v.gutter_=u,v.canvas_=null,v.sourceTileGrid_=i,v.targetTileGrid_=a,v.wrappedTileCoord_=s||o,v.sourceTiles_=[],v.sourcesListenerKeys_=null,v.sourceZ_=0;var g=a.getTileCoordExtent(v.wrappedTileCoord_),p=v.targetTileGrid_.getExtent(),m=v.sourceTileGrid_.getExtent(),_=p?Zs(g,p):g;if(Vc(_)===0)return v.state=q.EMPTY,v;var y=t.getExtent();y&&(m?m=Zs(m,y):m=y);var w=a.getResolution(v.wrappedTileCoord_[0]),T=_D(t,n,_,w);if(!isFinite(T)||T<=0)return v.state=q.EMPTY,v;var S=f!==void 0?f:vD;if(v.triangulation_=new mD(t,n,_,m,T*S,w),v.triangulation_.getTriangles().length===0)return v.state=q.EMPTY,v;v.sourceZ_=i.getZForResolution(T);var x=v.triangulation_.calculateSourceExtent();if(m&&(t.canWrapX()?(x[1]=Qt(x[1],m[1],m[3]),x[3]=Qt(x[3],m[1],m[3])):x=Zs(x,m)),!Vc(x))v.state=q.EMPTY;else{for(var E=i.getTileRangeForExtentAndZ(x,v.sourceZ_),I=E.minX;I<=E.maxX;I++)for(var A=E.minY;A<=E.maxY;A++){var P=h(v.sourceZ_,I,A,l);P&&v.sourceTiles_.push(P)}v.sourceTiles_.length===0&&(v.state=q.EMPTY)}return v}return r.prototype.getImage=function(){return this.canvas_},r.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(h,f,c){h&&h.getState()==q.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(h.tileCoord),image:h.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=q.ERROR;else{var i=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(i),a=typeof n=="number"?n:n[0],o=typeof n=="number"?n:n[1],s=this.targetTileGrid_.getResolution(i),l=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=wD(a,o,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),s,u,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=q.LOADED}this.changed()},r.prototype.load=function(){if(this.state==q.IDLE){this.state=q.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(i,n,a){var o=i.getState();if(o==q.IDLE||o==q.LOADING){t++;var s=yt(i,Q.CHANGE,function(l){var u=i.getState();(u==q.LOADED||u==q.ERROR||u==q.EMPTY)&&(Mt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(i,n,a){var o=i.getState();o==q.IDLE&&i.load()})}},r.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Mt),this.sourcesListenerKeys_=null},r}(Ky),ED=TD,SD=function(){function e(r){this.highWaterMark=r!==void 0?r:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},e.prototype.containsKey=function(r){return this.entries_.hasOwnProperty(r)},e.prototype.forEach=function(r){for(var t=this.oldest_;t;)r(t.value_,t.key_,this),t=t.newer},e.prototype.get=function(r,t){var i=this.entries_[r];return ut(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_},e.prototype.remove=function(r){var t=this.entries_[r];return ut(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[r],--this.count_,t.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var r=new Array(this.count_),t=0,i;for(i=this.newest_;i;i=i.older)r[t++]=i.key_;return r},e.prototype.getValues=function(){var r=new Array(this.count_),t=0,i;for(i=this.newest_;i;i=i.older)r[t++]=i.value_;return r},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var r=this.oldest_;return delete this.entries_[r.key_],r.newer&&(r.newer.older=null),this.oldest_=r.newer,this.oldest_||(this.newest_=null),--this.count_,r.value_},e.prototype.replace=function(r,t){this.get(r),this.entries_[r].value_=t},e.prototype.set=function(r,t){ut(!(r in this.entries_),16);var i={key_:r,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[r]=i,++this.count_},e.prototype.setSize=function(r){this.highWaterMark=r},e}(),xD=SD;function t_(e,r,t,i){return i!==void 0?(i[0]=e,i[1]=r,i[2]=t,i):[e,r,t]}function Ih(e,r,t){return e+"/"+r+"/"+t}function e_(e){return Ih(e[0],e[1],e[2])}function CD(e){return e.split("/").map(Number)}function OD(e){return(e[1]<<e[0])+e[2]}function ID(e,r){var t=e[0],i=e[1],n=e[2];if(r.getMinZoom()>t||t>r.getMaxZoom())return!1;var a=r.getFullTileRange(t);return a?a.containsXY(i,n):!0}var PD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),kD=function(e){PD(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.expireCache=function(t){for(;this.canExpireCache();){var i=this.peekLast();if(i.getKey()in t)break;this.pop().release()}},r.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var t=this.peekFirstKey(),i=CD(t),n=i[0];this.forEach(function(a){a.tileCoord[0]!==n&&(this.remove(e_(a.tileCoord)),a.release())}.bind(this))}},r}(xD),r_=kD,Bd={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},i_=function(){function e(r,t,i,n){this.minX=r,this.maxX=t,this.minY=i,this.maxY=n}return e.prototype.contains=function(r){return this.containsXY(r[1],r[2])},e.prototype.containsTileRange=function(r){return this.minX<=r.minX&&r.maxX<=this.maxX&&this.minY<=r.minY&&r.maxY<=this.maxY},e.prototype.containsXY=function(r,t){return this.minX<=r&&r<=this.maxX&&this.minY<=t&&t<=this.maxY},e.prototype.equals=function(r){return this.minX==r.minX&&this.minY==r.minY&&this.maxX==r.maxX&&this.maxY==r.maxY},e.prototype.extend=function(r){r.minX<this.minX&&(this.minX=r.minX),r.maxX>this.maxX&&(this.maxX=r.maxX),r.minY<this.minY&&(this.minY=r.minY),r.maxY>this.maxY&&(this.maxY=r.maxY)},e.prototype.getHeight=function(){return this.maxY-this.minY+1},e.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},e.prototype.getWidth=function(){return this.maxX-this.minX+1},e.prototype.intersects=function(r){return this.minX<=r.maxX&&this.maxX>=r.minX&&this.minY<=r.maxY&&this.maxY>=r.minY},e}();function Lo(e,r,t,i,n){return n!==void 0?(n.minX=e,n.maxX=r,n.minY=t,n.maxY=i,n):new i_(e,r,t,i)}var n_=i_,RD=[0,0,0],DD=function(){function e(r){this.minZoom=r.minZoom!==void 0?r.minZoom:0,this.resolutions_=r.resolutions,ut(Kx(this.resolutions_,function(o,s){return s-o},!0),17);var t;if(!r.origins){for(var i=0,n=this.resolutions_.length-1;i<n;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=r.origin!==void 0?r.origin:null,this.origins_=null,r.origins!==void 0&&(this.origins_=r.origins,ut(this.origins_.length==this.resolutions_.length,20));var a=r.extent;a!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=aa(a)),ut(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,r.tileSizes!==void 0&&(this.tileSizes_=r.tileSizes,ut(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=r.tileSize!==void 0?r.tileSize:this.tileSizes_?null:nd,ut(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=a!==void 0?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],r.sizes!==void 0?this.fullTileRanges_=r.sizes.map(function(o,s){var l=new n_(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(a){var u=this.getTileRangeForExtentAndZ(a,s);l.minX=Math.max(u.minX,l.minX),l.maxX=Math.min(u.maxX,l.maxX),l.minY=Math.max(u.minY,l.minY),l.maxY=Math.min(u.maxY,l.maxY)}return l},this):a&&this.calculateTileRanges_(a)}return e.prototype.forEachTileCoord=function(r,t,i){for(var n=this.getTileRangeForExtentAndZ(r,t),a=n.minX,o=n.maxX;a<=o;++a)for(var s=n.minY,l=n.maxY;s<=l;++s)i([t,a,s])},e.prototype.forEachTileCoordParentTileRange=function(r,t,i,n){var a,o,s,l=null,u=r[0]-1;for(this.zoomFactor_===2?(o=r[1],s=r[2]):l=this.getTileCoordExtent(r,n);u>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),s=Math.floor(s/2),a=Lo(o,o,s,s,i)):a=this.getTileRangeForExtentAndZ(l,u,i),t(u,a))return!0;--u}return!1},e.prototype.getExtent=function(){return this.extent_},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.getMinZoom=function(){return this.minZoom},e.prototype.getOrigin=function(r){return this.origin_?this.origin_:this.origins_[r]},e.prototype.getResolution=function(r){return this.resolutions_[r]},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getTileCoordChildTileRange=function(r,t,i){if(r[0]<this.maxZoom){if(this.zoomFactor_===2){var n=r[1]*2,a=r[2]*2;return Lo(n,n+1,a,a+1,t)}var o=this.getTileCoordExtent(r,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,r[0]+1,t)}return null},e.prototype.getTileRangeForTileCoordAndZ=function(r,t,i){if(t>this.maxZoom||t<this.minZoom)return null;var n=r[0],a=r[1],o=r[2];if(t===n)return Lo(a,o,a,o,i);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,t-n),l=Math.floor(a*s),u=Math.floor(o*s);if(t<n)return Lo(l,l,u,u,i);var h=Math.floor(s*(a+1))-1,f=Math.floor(s*(o+1))-1;return Lo(l,h,u,f,i)}var c=this.getTileCoordExtent(r,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,t,i)},e.prototype.getTileRangeExtent=function(r,t,i){var n=this.getOrigin(r),a=this.getResolution(r),o=ti(this.getTileSize(r),this.tmpSize_),s=n[0]+t.minX*o[0]*a,l=n[0]+(t.maxX+1)*o[0]*a,u=n[1]+t.minY*o[1]*a,h=n[1]+(t.maxY+1)*o[1]*a;return xi(s,u,l,h,i)},e.prototype.getTileRangeForExtentAndZ=function(r,t,i){var n=RD;this.getTileCoordForXYAndZ_(r[0],r[3],t,!1,n);var a=n[1],o=n[2];return this.getTileCoordForXYAndZ_(r[2],r[1],t,!0,n),Lo(a,n[1],o,n[2],i)},e.prototype.getTileCoordCenter=function(r){var t=this.getOrigin(r[0]),i=this.getResolution(r[0]),n=ti(this.getTileSize(r[0]),this.tmpSize_);return[t[0]+(r[1]+.5)*n[0]*i,t[1]-(r[2]+.5)*n[1]*i]},e.prototype.getTileCoordExtent=function(r,t){var i=this.getOrigin(r[0]),n=this.getResolution(r[0]),a=ti(this.getTileSize(r[0]),this.tmpSize_),o=i[0]+r[1]*a[0]*n,s=i[1]-(r[2]+1)*a[1]*n,l=o+a[0]*n,u=s+a[1]*n;return xi(o,s,l,u,t)},e.prototype.getTileCoordForCoordAndResolution=function(r,t,i){return this.getTileCoordForXYAndResolution_(r[0],r[1],t,!1,i)},e.prototype.getTileCoordForXYAndResolution_=function(r,t,i,n,a){var o=this.getZForResolution(i),s=i/this.getResolution(o),l=this.getOrigin(o),u=ti(this.getTileSize(o),this.tmpSize_),h=n?.5:0,f=n?.5:0,c=Math.floor((r-l[0])/i+h),d=Math.floor((l[1]-t)/i+f),v=s*c/u[0],g=s*d/u[1];return n?(v=Math.ceil(v)-1,g=Math.ceil(g)-1):(v=Math.floor(v),g=Math.floor(g)),t_(o,v,g,a)},e.prototype.getTileCoordForXYAndZ_=function(r,t,i,n,a){var o=this.getOrigin(i),s=this.getResolution(i),l=ti(this.getTileSize(i),this.tmpSize_),u=n?.5:0,h=n?.5:0,f=Math.floor((r-o[0])/s+u),c=Math.floor((o[1]-t)/s+h),d=f/l[0],v=c/l[1];return n?(d=Math.ceil(d)-1,v=Math.ceil(v)-1):(d=Math.floor(d),v=Math.floor(v)),t_(i,d,v,a)},e.prototype.getTileCoordForCoordAndZ=function(r,t,i){return this.getTileCoordForXYAndZ_(r[0],r[1],t,!1,i)},e.prototype.getTileCoordResolution=function(r){return this.resolutions_[r[0]]},e.prototype.getTileSize=function(r){return this.tileSize_?this.tileSize_:this.tileSizes_[r]},e.prototype.getFullTileRange=function(r){return this.fullTileRanges_?this.fullTileRanges_[r]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,r):null},e.prototype.getZForResolution=function(r,t){var i=Wc(this.resolutions_,r,t||0);return Qt(i,this.minZoom,this.maxZoom)},e.prototype.calculateTileRanges_=function(r){for(var t=this.resolutions_.length,i=new Array(t),n=this.minZoom;n<t;++n)i[n]=this.getTileRangeForExtentAndZ(r,n);this.fullTileRanges_=i},e}(),a_=DD;function o_(e){var r=e.getDefaultTileGrid();return r||(r=FD(e),e.setDefaultTileGrid(r)),r}function AD(e,r,t){var i=r[0],n=e.getTileCoordCenter(r),a=Ud(t);if(Ju(a,n))return r;var o=Xt(a),s=Math.ceil((a[0]-n[0])/o);return n[0]+=o*s,e.getTileCoordForCoordAndZ(n,i)}function MD(e,r,t,i){var n=i!==void 0?i:zs.TOP_LEFT,a=s_(e,r,t);return new a_({extent:e,origin:bC(e,n),resolutions:a,tileSize:t})}function LD(e){var r=e||{},t=r.extent||se("EPSG:3857").getExtent(),i={extent:t,minZoom:r.minZoom,tileSize:r.tileSize,resolutions:s_(t,r.maxZoom,r.tileSize,r.maxResolution)};return new a_(i)}function s_(e,r,t,i){for(var n=r!==void 0?r:xO,a=$r(e),o=Xt(e),s=ti(t!==void 0?t:nd),l=i>0?i:Math.max(o/s[0],a/s[1]),u=n+1,h=new Array(u),f=0;f<u;++f)h[f]=l/Math.pow(2,f);return h}function FD(e,r,t,i){var n=Ud(e);return MD(n,r,t,i)}function Ud(e){e=se(e);var r=e.getExtent();if(!r){var t=180*Jr[Pi.DEGREES]/e.getMetersPerUnit();r=xi(-t,-t,t,t)}return r}var l_=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ND=function(e){l_(r,e);function r(t){var i=e.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX})||this;i.on,i.once,i.un,i.opaque_=t.opaque!==void 0?t.opaque:!1,i.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,i.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;var n=[256,256],a=t.tileGrid;return a&&ti(a.getTileSize(a.getMinZoom()),n),i.tileCache=new r_(t.cacheSize||0),i.tmpSize=[0,0],i.key_=t.key||"",i.tileOptions={transition:t.transition},i.zDirection=t.zDirection?t.zDirection:0,i}return r.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},r.prototype.expireCache=function(t,i){var n=this.getTileCacheForProjection(t);n&&n.expireCache(i)},r.prototype.forEachLoadedTile=function(t,i,n,a){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var s=!0,l,u,h,f=n.minX;f<=n.maxX;++f)for(var c=n.minY;c<=n.maxY;++c)u=Ih(i,f,c),h=!1,o.containsKey(u)&&(l=o.get(u),h=l.getState()===q.LOADED,h&&(h=a(l)!==!1)),h||(s=!1);return s},r.prototype.getGutterForProjection=function(t){return 0},r.prototype.getKey=function(){return this.key_},r.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},r.prototype.getOpaque=function(t){return this.opaque_},r.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},r.prototype.getTile=function(t,i,n,a,o){return K()},r.prototype.getTileGrid=function(){return this.tileGrid},r.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:o_(t)},r.prototype.getTileCacheForProjection=function(t){return ut(fa(this.getProjection(),t),68),this.tileCache},r.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},r.prototype.getTilePixelSize=function(t,i,n){var a=this.getTileGridForProjection(n),o=this.getTilePixelRatio(i),s=ti(a.getTileSize(t),this.tmpSize);return o==1?s:AI(s,o,this.tmpSize)},r.prototype.getTileCoordForTileUrlFunction=function(t,i){var n=i!==void 0?i:this.getProjection(),a=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=AD(a,t,n)),ID(t,a)?t:null},r.prototype.clear=function(){this.tileCache.clear()},r.prototype.refresh=function(){this.clear(),e.prototype.refresh.call(this)},r.prototype.updateCacheSize=function(t,i){var n=this.getTileCacheForProjection(i);t>n.highWaterMark&&(n.highWaterMark=t)},r.prototype.useTile=function(t,i,n,a){},r}(By),$D=function(e){l_(r,e);function r(t,i){var n=e.call(this,t)||this;return n.tile=i,n}return r}(pn),GD=ND;function YD(e,r){var t=/\{z\}/g,i=/\{x\}/g,n=/\{y\}/g,a=/\{-y\}/g;return function(o,s,l){if(o)return e.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(n,o[2].toString()).replace(a,function(){var u=o[0],h=r.getFullTileRange(u);ut(h,55);var f=h.getHeight()-o[2]-1;return f.toString()})}}function jD(e,r){for(var t=e.length,i=new Array(t),n=0;n<t;++n)i[n]=YD(e[n],r);return WD(i)}function WD(e){return e.length===1?e[0]:function(r,t,i){if(r){var n=OD(r),a=gn(n,e.length);return e[a](r,t,i)}else return}}function HD(e){var r=[],t=/\{([a-z])-([a-z])\}/.exec(e);if(t){var i=t[1].charCodeAt(0),n=t[2].charCodeAt(0),a=void 0;for(a=i;a<=n;++a)r.push(e.replace(t[0],String.fromCharCode(a)));return r}if(t=/\{(\d+)-(\d+)\}/.exec(e),t){for(var o=parseInt(t[2],10),s=parseInt(t[1],10);s<=o;s++)r.push(e.replace(t[0],s.toString()));return r}return r.push(e),r}var BD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),UD=function(e){BD(r,e);function r(t){var i=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return i.generateTileUrlFunction_=i.tileUrlFunction===r.prototype.tileUrlFunction,i.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(i.tileUrlFunction=t.tileUrlFunction),i.urls=null,t.urls?i.setUrls(t.urls):t.url&&i.setUrl(t.url),i.tileLoadingKeys_={},i}return r.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},r.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},r.prototype.getUrls=function(){return this.urls},r.prototype.handleTileChange=function(t){var i=t.target,n=bt(i),a=i.getState(),o;a==q.LOADING?(this.tileLoadingKeys_[n]=!0,o=Bd.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],o=a==q.ERROR?Bd.TILELOADERROR:a==q.LOADED?Bd.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new $D(o,i))},r.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},r.prototype.setTileUrlFunction=function(t,i){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof i!="undefined"?this.setKey(i):this.changed()},r.prototype.setUrl=function(t){var i=HD(t);this.urls=i,this.setUrls(i)},r.prototype.setUrls=function(t){this.urls=t;var i=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(jD(t,this.tileGrid),i):this.setKey(i)},r.prototype.tileUrlFunction=function(t,i,n){},r.prototype.useTile=function(t,i,n){var a=Ih(t,i,n);this.tileCache.containsKey(a)&&this.tileCache.get(a)},r}(GD),zD=UD,VD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),XD=function(e){VD(r,e);function r(t){var i=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:KD,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return i.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,i.tileClass=t.tileClass!==void 0?t.tileClass:dD,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,i.contextOptions_=t.imageSmoothing===!1?qy:void 0,i.renderReprojectionEdges_=!1,i}return r.prototype.canExpireCache=function(){if(!Ai)return e.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},r.prototype.expireCache=function(t,i){if(!Ai){e.prototype.expireCache.call(this,t,i);return}var n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?i:{});for(var a in this.tileCacheForProjection){var o=this.tileCacheForProjection[a];o.expireCache(o==n?i:{})}},r.prototype.getContextOptions=function(){return this.contextOptions_},r.prototype.getGutterForProjection=function(t){return Ai&&this.getProjection()&&t&&!fa(this.getProjection(),t)?0:this.getGutter()},r.prototype.getGutter=function(){return 0},r.prototype.getKey=function(){return e.prototype.getKey.call(this)+(this.contextOptions_?`
`+JSON.stringify(this.contextOptions_):"")},r.prototype.getOpaque=function(t){return Ai&&this.getProjection()&&t&&!fa(this.getProjection(),t)?!1:e.prototype.getOpaque.call(this,t)},r.prototype.getTileGridForProjection=function(t){if(!Ai)return e.prototype.getTileGridForProjection.call(this,t);var i=this.getProjection();if(this.tileGrid&&(!i||fa(i,t)))return this.tileGrid;var n=bt(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=o_(t)),this.tileGridForProjection[n]},r.prototype.getTileCacheForProjection=function(t){if(!Ai)return e.prototype.getTileCacheForProjection.call(this,t);var i=this.getProjection();if(!i||fa(i,t))return this.tileCache;var n=bt(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new r_(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},r.prototype.createTile_=function(t,i,n,a,o,s){var l=[t,i,n],u=this.getTileCoordForTileUrlFunction(l,o),h=u?this.tileUrlFunction(u,a,o):void 0,f=new this.tileClass(l,h!==void 0?q.IDLE:q.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=s,f.addEventListener(Q.CHANGE,this.handleTileChange.bind(this)),f},r.prototype.getTile=function(t,i,n,a,o){var s=this.getProjection();if(!Ai||!s||!o||fa(s,o))return this.getTileInternal(t,i,n,a,s||o);var l=this.getTileCacheForProjection(o),u=[t,i,n],h=void 0,f=e_(u);l.containsKey(f)&&(h=l.get(f));var c=this.getKey();if(h&&h.key==c)return h;var d=this.getTileGridForProjection(s),v=this.getTileGridForProjection(o),g=this.getTileCoordForTileUrlFunction(u,o),p=new ED(s,d,o,v,u,g,this.getTilePixelRatio(a),this.getGutter(),function(m,_,y,w){return this.getTileInternal(m,_,y,w,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return p.key=c,h?(p.interimTile=h,p.refreshInterimChain(),l.replace(f,p)):l.set(f,p),p},r.prototype.getTileInternal=function(t,i,n,a,o){var s=null,l=Ih(t,i,n),u=this.getKey();if(!this.tileCache.containsKey(l))s=this.createTile_(t,i,n,a,o,u),this.tileCache.set(l,s);else if(s=this.tileCache.get(l),s.key!=u){var h=s;s=this.createTile_(t,i,n,a,o,u),h.getState()==q.IDLE?s.interimTile=h.interimTile:s.interimTile=h,s.refreshInterimChain(),this.tileCache.replace(l,s)}return s},r.prototype.setRenderReprojectionEdges=function(t){if(!(!Ai||this.renderReprojectionEdges_==t)){this.renderReprojectionEdges_=t;for(var i in this.tileCacheForProjection)this.tileCacheForProjection[i].clear();this.changed()}},r.prototype.setTileGridForProjection=function(t,i){if(Ai){var n=se(t);if(n){var a=bt(n);a in this.tileGridForProjection||(this.tileGridForProjection[a]=i)}}},r}(zD);function KD(e,r){e.getImage().src=r}var ZD=XD,qD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),JD=function(e){qD(r,e);function r(t){var i=this,n=t||{},a=n.projection!==void 0?n.projection:"EPSG:3857",o=n.tileGrid!==void 0?n.tileGrid:LD({extent:Ud(a),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return i=e.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,opaque:n.opaque,projection:a,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX!==void 0?n.wrapX:!0,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this,i}return r}(ZD),r8=JD;function i8(e){var r=e.inversePixelTransform[0],t=e.frameState,i=vC(e.inversePixelTransform.slice(),t.coordinateToPixelTransform),n=Gy(t.viewState.resolution,r),a;return new Ny(e.context,r,t.extent,i,t.viewState.rotation,n,a)}var QD=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),u_=function(e){QD(r,e);function r(t){var i=e.call(this,t)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=gr(),i.tmpTileRange_=new n_(0,0,0,0),i}return r.prototype.isDrawableTile=function(t){var i=this.getLayer(),n=t.getState(),a=i.getUseInterimTilesOnError();return n==q.LOADED||n==q.EMPTY||n==q.ERROR&&!a},r.prototype.getTile=function(t,i,n,a){var o=a.pixelRatio,s=a.viewState.projection,l=this.getLayer(),u=l.getSource(),h=u.getTile(t,i,n,o,s);return h.getState()==q.ERROR&&(l.getUseInterimTilesOnError()?l.getPreload()>0&&(this.newTiles_=!0):h.setState(q.LOADED)),this.isDrawableTile(h)||(h=h.getInterimTile()),h},r.prototype.loadedTileCallback=function(t,i,n){return this.isDrawableTile(n)?e.prototype.loadedTileCallback.call(this,t,i,n):!1},r.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},r.prototype.renderFrame=function(t,i){var n=t.layerStatesArray[t.layerIndex],a=t.viewState,o=a.projection,s=a.resolution,l=a.center,u=a.rotation,h=t.pixelRatio,f=this.getLayer(),c=f.getSource(),d=c.getRevision(),v=c.getTileGridForProjection(o),g=v.getZForResolution(s,c.zDirection),p=v.getResolution(g),m=t.extent,_=n.extent&&ca(n.extent);_&&(m=Zs(m,ca(n.extent)));var y=c.getTilePixelRatio(h),w=Math.round(t.size[0]*y),T=Math.round(t.size[1]*y);if(u){var S=Math.round(Math.sqrt(w*w+T*T));w=S,T=S}var x=p*w/2/y,E=p*T/2/y,I=[l[0]-x,l[1]-E,l[0]+x,l[1]+E],A=v.getTileRangeForExtentAndZ(m,g),P={};P[g]={};var D=this.createLoadedTileFinder(c,o,P),N=this.tmpExtent,j=this.tmpTileRange_;this.newTiles_=!1;for(var W=A.minX;W<=A.maxX;++W)for(var z=A.minY;z<=A.maxY;++z){var B=this.getTile(g,W,z,t);if(this.isDrawableTile(B)){var k=bt(this);if(B.getState()==q.LOADED){P[g][B.tileCoord.toString()]=B;var O=B.inTransition(k);!this.newTiles_&&(O||this.renderedTiles.indexOf(B)===-1)&&(this.newTiles_=!0)}if(B.getAlpha(k,t.time)===1)continue}var M=v.getTileCoordChildTileRange(B.tileCoord,j,N),$=!1;M&&($=D(g+1,M)),$||v.forEachTileCoordParentTileRange(B.tileCoord,D,j,N)}var C=p/s;Si(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/y,1/y,u,-w/2,-T/2);var ft=sm(this.pixelTransform);this.useContainer(i,ft,n.opacity);var X=this.context,vt=X.canvas;Hc(this.inversePixelTransform,this.pixelTransform),Si(this.tempTransform,w/2,T/2,C,C,0,-w/2,-T/2),vt.width!=w||vt.height!=T?(vt.width=w,vt.height=T):this.containerReused||X.clearRect(0,0,w,T),_&&this.clipUnrotated(X,t,_),ae(X,c.getContextOptions()),this.preRender(X,t),this.renderedTiles.length=0;var At=Object.keys(P).map(Number);At.sort(ta);var St,ve,ne;n.opacity===1&&(!this.containerReused||c.getOpaque(t.viewState.projection))?At=At.reverse():(St=[],ve=[]);for(var Ne=At.length-1;Ne>=0;--Ne){var Zr=At[Ne],Gu=c.getTilePixelSize(Zr,h,o),Yu=v.getResolution(Zr),fn=Yu/p,vo=Gu[0]*fn*C,ju=Gu[1]*fn*C,Ns=v.getTileCoordForCoordAndZ(aa(I),Zr),Wu=v.getTileCoordExtent(Ns),Zn=oe(this.tempTransform,[y*(Wu[0]-I[0])/p,y*(I[3]-Wu[3])/p]),$s=y*c.getGutterForProjection(o),Hu=P[Zr];for(var po in Hu){var B=Hu[po],cn=B.tileCoord,go=Ns[1]-cn[1],Fc=Math.round(Zn[0]-(go-1)*vo),Bu=Ns[2]-cn[2],Gs=Math.round(Zn[1]-(Bu-1)*ju),W=Math.round(Zn[0]-go*vo),z=Math.round(Zn[1]-Bu*ju),dn=Fc-W,Ti=Gs-z,qn=g===Zr,O=qn&&B.getAlpha(bt(this),t.time)!==1;if(!O)if(St){X.save(),ne=[W,z,W+dn,z,W+dn,z+Ti,W,z+Ti];for(var mo=0,Lr=St.length;mo<Lr;++mo)if(g!==Zr&&Zr<ve[mo]){var Fr=St[mo];X.beginPath(),X.moveTo(ne[0],ne[1]),X.lineTo(ne[2],ne[3]),X.lineTo(ne[4],ne[5]),X.lineTo(ne[6],ne[7]),X.moveTo(Fr[6],Fr[7]),X.lineTo(Fr[4],Fr[5]),X.lineTo(Fr[2],Fr[3]),X.lineTo(Fr[0],Fr[1]),X.clip()}St.push(ne),ve.push(Zr)}else X.clearRect(W,z,dn,Ti);this.drawTileImage(B,t,W,z,dn,Ti,$s,qn),St&&!O?(X.restore(),this.renderedTiles.unshift(B)):this.renderedTiles.push(B),this.updateUsedTiles(t.usedTiles,c,B)}}this.renderedRevision=d,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!Xs(this.renderedExtent_,I),this.renderedExtent_=I,this.renderedPixelRatio=h,this.renderedProjection=o,this.manageTilePyramid(t,c,v,h,o,m,g,f.getPreload()),this.scheduleExpireCache(t,c),this.postRender(X,t),n.extent&&X.restore(),ft!==vt.style.transform&&(vt.style.transform=ft);var Jn=Qc(n.opacity),yo=this.container;return Jn!==yo.style.opacity&&(yo.style.opacity=Jn),this.container},r.prototype.drawTileImage=function(t,i,n,a,o,s,l,u){var h=this.getTileImage(t);if(!!h){var f=bt(this),c=u?t.getAlpha(f,i.time):1,d=c!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(h,l,l,h.width-2*l,h.height-2*l,n,a,o,s),d&&this.context.restore(),c!==1?i.animate=!0:u&&t.endTransition(f)}},r.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},r.prototype.getTileImage=function(t){return t.getImage()},r.prototype.scheduleExpireCache=function(t,i){if(i.canExpireCache()){var n=function(a,o,s){var l=bt(a);l in s.usedTiles&&a.expireCache(s.viewState.projection,s.usedTiles[l])}.bind(null,i);t.postRenderFunctions.push(n)}},r.prototype.updateUsedTiles=function(t,i,n){var a=bt(i);a in t||(t[a]={}),t[a][n.getKey()]=!0},r.prototype.manageTilePyramid=function(t,i,n,a,o,s,l,u,h){var f=bt(i);f in t.wantedTiles||(t.wantedTiles[f]={});var c=t.wantedTiles[f],d=t.tileQueue,v=n.getMinZoom(),g=0,p,m,_,y,w,T;for(T=v;T<=l;++T)for(m=n.getTileRangeForExtentAndZ(s,T,m),_=n.getResolution(T),y=m.minX;y<=m.maxX;++y)for(w=m.minY;w<=m.maxY;++w)l-T<=u?(++g,p=i.getTile(T,y,w,a,o),p.getState()==q.IDLE&&(c[p.getKey()]=!0,d.isKeyQueued(p.getKey())||d.enqueue([p,f,n.getTileCoordCenter(p.tileCoord),_])),h!==void 0&&h(p)):i.useTile(T,y,w,o);i.updateCacheSize(g,o)},r}(Ay);u_.prototype.getLayer;var tA=u_,Ph={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"},eA=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rA=function(e){eA(r,e);function r(t){var i=this,n=t||{},a=ae({},n);return delete a.preload,delete a.useInterimTilesOnError,i=e.call(this,a)||this,i.on,i.once,i.un,i.setPreload(n.preload!==void 0?n.preload:0),i.setUseInterimTilesOnError(n.useInterimTilesOnError!==void 0?n.useInterimTilesOnError:!0),i}return r.prototype.getPreload=function(){return this.get(Ph.PRELOAD)},r.prototype.setPreload=function(t){this.set(Ph.PRELOAD,t)},r.prototype.getUseInterimTilesOnError=function(){return this.get(Ph.USE_INTERIM_TILES_ON_ERROR)},r.prototype.setUseInterimTilesOnError=function(t){this.set(Ph.USE_INTERIM_TILES_ON_ERROR,t)},r}(wm),iA=rA,nA=function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),aA=function(e){nA(r,e);function r(t){return e.call(this,t)||this}return r.prototype.createRenderer=function(){return new tA(this)},r}(iA),n8=aA;/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 7.1.2
 * @date    2021-01-08T20:37:11.601Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var h_=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ni(e){var r={exports:{}};return e(r,r.exports),r.exports}var kh=function(e){return e&&e.Math==Math&&e},Ht=kh(typeof globalThis=="object"&&globalThis)||kh(typeof window=="object"&&window)||kh(typeof self=="object"&&self)||kh(typeof h_=="object"&&h_)||function(){return this}()||Function("return this")(),Gt=function(e){try{return!!e()}catch(r){return!0}},Tt=!Gt(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),f_={}.propertyIsEnumerable,c_=Object.getOwnPropertyDescriptor,oA=c_&&!f_.call({1:2},1),sA=oA?function(r){var t=c_(this,r);return!!t&&t.enumerable}:f_,vl={f:sA},wa=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},lA={}.toString,Sn=function(e){return lA.call(e).slice(8,-1)},uA="".split,Rh=Gt(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return Sn(e)=="String"?uA.call(e,""):Object(e)}:Object,pl=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e},tr=function(e){return Rh(pl(e))},le=function(e){return typeof e=="object"?e!==null:typeof e=="function"},Fo=function(e,r){if(!le(e))return e;var t,i;if(r&&typeof(t=e.toString)=="function"&&!le(i=t.call(e))||typeof(t=e.valueOf)=="function"&&!le(i=t.call(e))||!r&&typeof(t=e.toString)=="function"&&!le(i=t.call(e)))return i;throw TypeError("Can't convert object to primitive value")},hA={}.hasOwnProperty,at=function(e,r){return hA.call(e,r)},zd=Ht.document,fA=le(zd)&&le(zd.createElement),d_=function(e){return fA?zd.createElement(e):{}},v_=!Tt&&!Gt(function(){return Object.defineProperty(d_("div"),"a",{get:function(){return 7}}).a!=7}),p_=Object.getOwnPropertyDescriptor,cA=Tt?p_:function(r,t){if(r=tr(r),t=Fo(t,!0),v_)try{return p_(r,t)}catch(i){}if(at(r,t))return wa(!vl.f.call(r,t),r[t])},gl={f:cA},dA=/#|\.prototype\./,ml=function(e,r){var t=pA[vA(e)];return t==mA?!0:t==gA?!1:typeof r=="function"?Gt(r):!!r},vA=ml.normalize=function(e){return String(e).replace(dA,".").toLowerCase()},pA=ml.data={},gA=ml.NATIVE="N",mA=ml.POLYFILL="P",yA=ml,dt={},ba=function(e){if(typeof e!="function")throw TypeError(String(e)+" is not a function");return e},Ta=function(e,r,t){if(ba(e),r===void 0)return e;switch(t){case 0:return function(){return e.call(r)};case 1:return function(i){return e.call(r,i)};case 2:return function(i,n){return e.call(r,i,n)};case 3:return function(i,n,a){return e.call(r,i,n,a)}}return function(){return e.apply(r,arguments)}},Ye=function(e){if(!le(e))throw TypeError(String(e)+" is not an object");return e},g_=Object.defineProperty,_A=Tt?g_:function(r,t,i){if(Ye(r),t=Fo(t,!0),Ye(i),v_)try{return g_(r,t,i)}catch(n){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(r[t]=i.value),r},wr={f:_A},Gr=Tt?function(e,r,t){return wr.f(e,r,wa(1,t))}:function(e,r,t){return e[r]=t,e},wA=gl.f,bA=function(e){var r=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return r.prototype=e.prototype,r},tt=function(e,r){var t=e.target,i=e.global,n=e.stat,a=e.proto,o=i?Ht:n?Ht[t]:(Ht[t]||{}).prototype,s=i?dt:dt[t]||(dt[t]={}),l=s.prototype,u,h,f,c,d,v,g,p,m;for(c in r)u=yA(i?c:t+(n?".":"#")+c,e.forced),h=!u&&o&&at(o,c),v=s[c],h&&(e.noTargetGet?(m=wA(o,c),g=m&&m.value):g=o[c]),d=h&&g?g:r[c],!(h&&typeof v==typeof d)&&(e.bind&&h?p=Ta(d,Ht):e.wrap&&h?p=bA(d):a&&typeof d=="function"?p=Ta(Function.call,d):p=d,(e.sham||d&&d.sham||v&&v.sham)&&Gr(p,"sham",!0),s[c]=p,a&&(f=t+"Prototype",at(dt,f)||Gr(dt,f,{}),dt[f][c]=d,e.real&&l&&!l[c]&&Gr(l,c,d)))},Mi=Array.isArray||function(r){return Sn(r)=="Array"},TA=Math.ceil,EA=Math.floor,Dh=function(e){return isNaN(e=+e)?0:(e>0?EA:TA)(e)},SA=Math.min,Yr=function(e){return e>0?SA(Dh(e),9007199254740991):0},m_=function(e,r,t,i,n,a,o,s){for(var l=n,u=0,h=o?Ta(o,s,3):!1,f;u<i;){if(u in t){if(f=h?h(t[u],u,r):t[u],a>0&&Mi(f))l=m_(e,r,f,Yr(f.length),l,a-1)-1;else{if(l>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[l]=f}l++}u++}return l},xA=m_,je=function(e){return Object(pl(e))},CA=function(e,r){try{Gr(Ht,e,r)}catch(t){Ht[e]=r}return r},y_="__core-js_shared__",OA=Ht[y_]||CA(y_,{}),Ea=OA,Sa=ni(function(e){(e.exports=function(r,t){return Ea[r]||(Ea[r]=t!==void 0?t:{})})("versions",[]).push({version:"3.7.0",mode:"pure",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})}),IA=0,PA=Math.random(),yl=function(e){return"Symbol("+String(e===void 0?"":e)+")_"+(++IA+PA).toString(36)},Li=!!Object.getOwnPropertySymbols&&!Gt(function(){return!String(Symbol())}),__=Li&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Ah=Sa("wks"),_l=Ht.Symbol,kA=__?_l:_l&&_l.withoutSetter||yl,te=function(e){return at(Ah,e)||(Li&&at(_l,e)?Ah[e]=_l[e]:Ah[e]=kA("Symbol."+e)),Ah[e]},RA=te("species"),Mh=function(e,r){var t;return Mi(e)&&(t=e.constructor,typeof t=="function"&&(t===Array||Mi(t.prototype))?t=void 0:le(t)&&(t=t[RA],t===null&&(t=void 0))),new(t===void 0?Array:t)(r===0?0:r)};tt({target:"Array",proto:!0},{flatMap:function(r){var t=je(this),i=Yr(t.length),n;return ba(r),n=Mh(t,0),n.length=xA(n,t,t,i,0,1,r,arguments.length>1?arguments[1]:void 0),n}});var ee=function(e){return dt[e+"Prototype"]},DA=ee("Array").flatMap,w_=Array.prototype,AA=function(e){var r=e.flatMap;return e===w_||e instanceof Array&&r===w_.flatMap?DA:r},MA=AA,LA=MA,FA=[].push,xa=function(e){var r=e==1,t=e==2,i=e==3,n=e==4,a=e==6,o=e==5||a;return function(s,l,u,h){for(var f=je(s),c=Rh(f),d=Ta(l,u,3),v=Yr(c.length),g=0,p=h||Mh,m=r?p(s,v):t?p(s,0):void 0,_,y;v>g;g++)if((o||g in c)&&(_=c[g],y=d(_,g,f),e)){if(r)m[g]=y;else if(y)switch(e){case 3:return!0;case 5:return _;case 6:return g;case 2:FA.call(m,_)}else if(n)return!1}return a?-1:i||n?n:m}},No={forEach:xa(0),map:xa(1),filter:xa(2),some:xa(3),every:xa(4),find:xa(5),findIndex:xa(6)},b_=function(e){return typeof e=="function"?e:void 0},Ca=function(e,r){return arguments.length<2?b_(dt[e])||b_(Ht[e]):dt[e]&&dt[e][r]||Ht[e]&&Ht[e][r]},Lh=Ca("navigator","userAgent")||"",T_=Ht.process,E_=T_&&T_.versions,S_=E_&&E_.v8,Fi,Fh;S_?(Fi=S_.split("."),Fh=Fi[0]+Fi[1]):Lh&&(Fi=Lh.match(/Edge\/(\d+)/),(!Fi||Fi[1]>=74)&&(Fi=Lh.match(/Chrome\/(\d+)/),Fi&&(Fh=Fi[1])));var Nh=Fh&&+Fh,NA=te("species"),wl=function(e){return Nh>=51||!Gt(function(){var r=[],t=r.constructor={};return t[NA]=function(){return{foo:1}},r[e](Boolean).foo!==1})},$A=Object.defineProperty,Vd={},x_=function(e){throw e},Ni=function(e,r){if(at(Vd,e))return Vd[e];r||(r={});var t=[][e],i=at(r,"ACCESSORS")?r.ACCESSORS:!1,n=at(r,0)?r[0]:x_,a=at(r,1)?r[1]:void 0;return Vd[e]=!!t&&!Gt(function(){if(i&&!Tt)return!0;var o={length:-1};i?$A(o,1,{enumerable:!0,get:x_}):o[1]=1,t.call(o,n,a)})},GA=No.map,YA=wl("map"),jA=Ni("map");tt({target:"Array",proto:!0,forced:!YA||!jA},{map:function(r){return GA(this,r,arguments.length>1?arguments[1]:void 0)}});var WA=ee("Array").map,C_=Array.prototype,HA=function(e){var r=e.map;return e===C_||e instanceof Array&&r===C_.map?WA:r},BA=HA,er=BA,UA=No.filter,zA=wl("filter"),VA=Ni("filter");tt({target:"Array",proto:!0,forced:!zA||!VA},{filter:function(r){return UA(this,r,arguments.length>1?arguments[1]:void 0)}});var XA=ee("Array").filter,O_=Array.prototype,KA=function(e){var r=e.filter;return e===O_||e instanceof Array&&r===O_.filter?XA:r},ZA=KA,ge=ZA,I_=function(e){return function(r,t,i,n){ba(t);var a=je(r),o=Rh(a),s=Yr(a.length),l=e?s-1:0,u=e?-1:1;if(i<2)for(;;){if(l in o){n=o[l],l+=u;break}if(l+=u,e?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=u)l in o&&(n=t(n,o[l],l,a));return n}},qA={left:I_(!1),right:I_(!0)},bl=function(e,r){var t=[][e];return!!t&&Gt(function(){t.call(null,r||function(){throw 1},1)})},JA=Sn(Ht.process)=="process",QA=qA.left,tM=bl("reduce"),eM=Ni("reduce",{1:0}),rM=!JA&&Nh>79&&Nh<83;tt({target:"Array",proto:!0,forced:!tM||!eM||rM},{reduce:function(r){return QA(this,r,arguments.length,arguments.length>1?arguments[1]:void 0)}});var iM=ee("Array").reduce,P_=Array.prototype,nM=function(e){var r=e.reduce;return e===P_||e instanceof Array&&r===P_.reduce?iM:r},aM=nM,k_=aM,R_=[].slice,Xd={},oM=function(e,r,t){if(!(r in Xd)){for(var i=[],n=0;n<r;n++)i[n]="a["+n+"]";Xd[r]=Function("C,a","return new C("+i.join(",")+")")}return Xd[r](e,t)},D_=Function.bind||function(r){var t=ba(this),i=R_.call(arguments,1),n=function(){var o=i.concat(R_.call(arguments));return this instanceof n?oM(t,o.length,o):t.apply(r,o)};return le(t.prototype)&&(n.prototype=t.prototype),n};tt({target:"Function",proto:!0},{bind:D_});var sM=ee("Function").bind,A_=Function.prototype,lM=function(e){var r=e.bind;return e===A_||e instanceof Function&&r===A_.bind?sM:r},uM=lM,Oa=uM;function hM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Ia=hM;tt({target:"Object",stat:!0,forced:!Tt,sham:!Tt},{defineProperty:wr.f});var M_=ni(function(e){var r=dt.Object,t=e.exports=function(n,a,o){return r.defineProperty(n,a,o)};r.defineProperty.sham&&(t.sham=!0)}),fM=M_,L_=fM;function F_(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),L_(e,i.key,i)}}function cM(e,r,t){return r&&F_(e.prototype,r),t&&F_(e,t),e}var Pa=cM;function dM(e){return new pM(e)}var vM=function(){function e(r,t,i){var n,a,o;Ia(this,e),this._source=r,this._transformers=t,this._target=i,this._listeners={add:Oa(n=this._add).call(n,this),remove:Oa(a=this._remove).call(a,this),update:Oa(o=this._update).call(o,this)}}return Pa(e,[{key:"all",value:function(){return this._target.update(this._transformItems(this._source.get())),this}},{key:"start",value:function(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}},{key:"stop",value:function(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}},{key:"_transformItems",value:function(t){var i;return k_(i=this._transformers).call(i,function(n,a){return a(n)},t)}},{key:"_add",value:function(t,i){i!=null&&this._target.add(this._transformItems(this._source.get(i.items)))}},{key:"_update",value:function(t,i){i!=null&&this._target.update(this._transformItems(this._source.get(i.items)))}},{key:"_remove",value:function(t,i){i!=null&&this._target.remove(this._transformItems(i.oldData))}}]),e}(),pM=function(){function e(r){Ia(this,e),this._source=r,this._transformers=[]}return Pa(e,[{key:"filter",value:function(t){return this._transformers.push(function(i){return ge(i).call(i,t)}),this}},{key:"map",value:function(t){return this._transformers.push(function(i){return er(i).call(i,t)}),this}},{key:"flatMap",value:function(t){return this._transformers.push(function(i){return LA(i).call(i,t)}),this}},{key:"to",value:function(t){return new vM(this._source,this._transformers,t)}}]),e}(),gM=M_,N_=gM,mM=Math.max,yM=Math.min,$o=function(e,r){var t=Dh(e);return t<0?mM(t+r,0):yM(t,r)},$_=function(e){return function(r,t,i){var n=tr(r),a=Yr(n.length),o=$o(i,a),s;if(e&&t!=t){for(;a>o;)if(s=n[o++],s!=s)return!0}else for(;a>o;o++)if((e||o in n)&&n[o]===t)return e||o||0;return!e&&-1}},Kd={includes:$_(!0),indexOf:$_(!1)},Go={},_M=Kd.indexOf,G_=function(e,r){var t=tr(e),i=0,n=[],a;for(a in t)!at(Go,a)&&at(t,a)&&n.push(a);for(;r.length>i;)at(t,a=r[i++])&&(~_M(n,a)||n.push(a));return n},$h=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],$i=Object.keys||function(r){return G_(r,$h)},Y_=Tt?Object.defineProperties:function(r,t){Ye(r);for(var i=$i(t),n=i.length,a=0,o;n>a;)wr.f(r,o=i[a++],t[o]);return r};tt({target:"Object",stat:!0,forced:!Tt,sham:!Tt},{defineProperties:Y_});var wM=ni(function(e){var r=dt.Object,t=e.exports=function(n,a){return r.defineProperties(n,a)};r.defineProperties.sham&&(t.sham=!0)}),bM=wM,TM=bM,EM=$h.concat("length","prototype"),SM=Object.getOwnPropertyNames||function(r){return G_(r,EM)},Zd={f:SM},xM=Object.getOwnPropertySymbols,Tl={f:xM},j_=Ca("Reflect","ownKeys")||function(r){var t=Zd.f(Ye(r)),i=Tl.f;return i?t.concat(i(r)):t},ka=function(e,r,t){var i=Fo(r);i in e?wr.f(e,i,wa(0,t)):e[i]=t};tt({target:"Object",stat:!0,sham:!Tt},{getOwnPropertyDescriptors:function(r){for(var t=tr(r),i=gl.f,n=j_(t),a={},o=0,s,l;n.length>o;)l=i(t,s=n[o++]),l!==void 0&&ka(a,s,l);return a}});var CM=dt.Object.getOwnPropertyDescriptors,OM=CM,W_=OM,H_=gl.f,IM=Gt(function(){H_(1)}),PM=!Tt||IM;tt({target:"Object",stat:!0,forced:PM,sham:!Tt},{getOwnPropertyDescriptor:function(r,t){return H_(tr(r),t)}});var kM=ni(function(e){var r=dt.Object,t=e.exports=function(n,a){return r.getOwnPropertyDescriptor(n,a)};r.getOwnPropertyDescriptor.sham&&(t.sham=!0)}),RM=kM,B_=RM,DM=Ca("document","documentElement"),U_=Sa("keys"),Gh=function(e){return U_[e]||(U_[e]=yl(e))},z_=">",V_="<",qd="prototype",Jd="script",X_=Gh("IE_PROTO"),Qd=function(){},K_=function(e){return V_+Jd+z_+e+V_+"/"+Jd+z_},AM=function(e){e.write(K_("")),e.close();var r=e.parentWindow.Object;return e=null,r},MM=function(){var e=d_("iframe"),r="java"+Jd+":",t;return e.style.display="none",DM.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(K_("document.F=Object")),t.close(),t.F},tv,Yh=function(){try{tv=document.domain&&new ActiveXObject("htmlfile")}catch(r){}Yh=tv?AM(tv):MM();for(var e=$h.length;e--;)delete Yh[qd][$h[e]];return Yh()};Go[X_]=!0;var Gi=Object.create||function(r,t){var i;return r!==null?(Qd[qd]=Ye(r),i=new Qd,Qd[qd]=null,i[X_]=r):i=Yh(),t===void 0?i:Y_(i,t)},Z_=Zd.f,LM={}.toString,q_=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],FM=function(e){try{return Z_(e)}catch(r){return q_.slice()}},NM=function(r){return q_&&LM.call(r)=="[object Window]"?FM(r):Z_(tr(r))},J_={f:NM},jh=function(e,r,t,i){i&&i.enumerable?e[r]=t:Gr(e,r,t)},$M=te,ev={f:$M},GM=wr.f,ue=function(e){var r=dt.Symbol||(dt.Symbol={});at(r,e)||GM(r,e,{value:ev.f(e)})},YM=te("toStringTag"),Q_={};Q_[YM]="z";var rv=String(Q_)==="[object z]",jM=te("toStringTag"),WM=Sn(function(){return arguments}())=="Arguments",HM=function(e,r){try{return e[r]}catch(t){}},xn=rv?Sn:function(e){var r,t,i;return e===void 0?"Undefined":e===null?"Null":typeof(t=HM(r=Object(e),jM))=="string"?t:WM?Sn(r):(i=Sn(r))=="Object"&&typeof r.callee=="function"?"Arguments":i},BM=rv?{}.toString:function(){return"[object "+xn(this)+"]"},UM=wr.f,t0=te("toStringTag"),El=function(e,r,t,i){if(e){var n=t?e:e.prototype;at(n,t0)||UM(n,t0,{configurable:!0,value:r}),i&&!rv&&Gr(n,"toString",BM)}},zM=Function.toString;typeof Ea.inspectSource!="function"&&(Ea.inspectSource=function(e){return zM.call(e)});var VM=Ea.inspectSource,e0=Ht.WeakMap,XM=typeof e0=="function"&&/native code/.test(VM(e0)),KM=Ht.WeakMap,Wh,Sl,Hh,ZM=function(e){return Hh(e)?Sl(e):Wh(e,{})},qM=function(e){return function(r){var t;if(!le(r)||(t=Sl(r)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return t}};if(XM){var Yo=Ea.state||(Ea.state=new KM),JM=Yo.get,QM=Yo.has,tL=Yo.set;Wh=function(e,r){return r.facade=e,tL.call(Yo,e,r),r},Sl=function(e){return JM.call(Yo,e)||{}},Hh=function(e){return QM.call(Yo,e)}}else{var xl=Gh("state");Go[xl]=!0,Wh=function(e,r){return r.facade=e,Gr(e,xl,r),r},Sl=function(e){return at(e,xl)?e[xl]:{}},Hh=function(e){return at(e,xl)}}var ai={set:Wh,get:Sl,has:Hh,enforce:ZM,getterFor:qM},Bh=No.forEach,We=Gh("hidden"),Uh="Symbol",Yi="prototype",r0=te("toPrimitive"),eL=ai.set,i0=ai.getterFor(Uh),jr=Object[Yi],He=Ht.Symbol,Cl=Ca("JSON","stringify"),n0=gl.f,Cn=wr.f,a0=J_.f,rL=vl.f,ji=Sa("symbols"),Ol=Sa("op-symbols"),iv=Sa("string-to-symbol-registry"),nv=Sa("symbol-to-string-registry"),iL=Sa("wks"),av=Ht.QObject,ov=!av||!av[Yi]||!av[Yi].findChild,sv=Tt&&Gt(function(){return Gi(Cn({},"a",{get:function(){return Cn(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var i=n0(jr,r);i&&delete jr[r],Cn(e,r,t),i&&e!==jr&&Cn(jr,r,i)}:Cn,lv=function(e,r){var t=ji[e]=Gi(He[Yi]);return eL(t,{type:Uh,tag:e,description:r}),Tt||(t.description=r),t},uv=__?function(e){return typeof e=="symbol"}:function(e){return Object(e)instanceof He},zh=function(r,t,i){r===jr&&zh(Ol,t,i),Ye(r);var n=Fo(t,!0);return Ye(i),at(ji,n)?(i.enumerable?(at(r,We)&&r[We][n]&&(r[We][n]=!1),i=Gi(i,{enumerable:wa(0,!1)})):(at(r,We)||Cn(r,We,wa(1,{})),r[We][n]=!0),sv(r,n,i)):Cn(r,n,i)},o0=function(r,t){Ye(r);var i=tr(t),n=$i(i).concat(hv(i));return Bh(n,function(a){(!Tt||s0.call(i,a))&&zh(r,a,i[a])}),r},nL=function(r,t){return t===void 0?Gi(r):o0(Gi(r),t)},s0=function(r){var t=Fo(r,!0),i=rL.call(this,t);return this===jr&&at(ji,t)&&!at(Ol,t)?!1:i||!at(this,t)||!at(ji,t)||at(this,We)&&this[We][t]?i:!0},l0=function(r,t){var i=tr(r),n=Fo(t,!0);if(!(i===jr&&at(ji,n)&&!at(Ol,n))){var a=n0(i,n);return a&&at(ji,n)&&!(at(i,We)&&i[We][n])&&(a.enumerable=!0),a}},u0=function(r){var t=a0(tr(r)),i=[];return Bh(t,function(n){!at(ji,n)&&!at(Go,n)&&i.push(n)}),i},hv=function(r){var t=r===jr,i=a0(t?Ol:tr(r)),n=[];return Bh(i,function(a){at(ji,a)&&(!t||at(jr,a))&&n.push(ji[a])}),n};Li||(He=function(){if(this instanceof He)throw TypeError("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),t=yl(r),i=function(n){this===jr&&i.call(Ol,n),at(this,We)&&at(this[We],t)&&(this[We][t]=!1),sv(this,t,wa(1,n))};return Tt&&ov&&sv(jr,t,{configurable:!0,set:i}),lv(t,r)},jh(He[Yi],"toString",function(){return i0(this).tag}),jh(He,"withoutSetter",function(e){return lv(yl(e),e)}),vl.f=s0,wr.f=zh,gl.f=l0,Zd.f=J_.f=u0,Tl.f=hv,ev.f=function(e){return lv(te(e),e)},Tt&&Cn(He[Yi],"description",{configurable:!0,get:function(){return i0(this).description}}));tt({global:!0,wrap:!0,forced:!Li,sham:!Li},{Symbol:He});Bh($i(iL),function(e){ue(e)});tt({target:Uh,stat:!0,forced:!Li},{for:function(e){var r=String(e);if(at(iv,r))return iv[r];var t=He(r);return iv[r]=t,nv[t]=r,t},keyFor:function(r){if(!uv(r))throw TypeError(r+" is not a symbol");if(at(nv,r))return nv[r]},useSetter:function(){ov=!0},useSimple:function(){ov=!1}});tt({target:"Object",stat:!0,forced:!Li,sham:!Tt},{create:nL,defineProperty:zh,defineProperties:o0,getOwnPropertyDescriptor:l0});tt({target:"Object",stat:!0,forced:!Li},{getOwnPropertyNames:u0,getOwnPropertySymbols:hv});tt({target:"Object",stat:!0,forced:Gt(function(){Tl.f(1)})},{getOwnPropertySymbols:function(r){return Tl.f(je(r))}});if(Cl){var aL=!Li||Gt(function(){var e=He();return Cl([e])!="[null]"||Cl({a:e})!="{}"||Cl(Object(e))!="{}"});tt({target:"JSON",stat:!0,forced:aL},{stringify:function(r,t,i){for(var n=[r],a=1,o;arguments.length>a;)n.push(arguments[a++]);if(o=t,!(!le(t)&&r===void 0||uv(r)))return Mi(t)||(t=function(s,l){if(typeof o=="function"&&(l=o.call(this,s,l)),!uv(l))return l}),n[1]=t,Cl.apply(null,n)}})}He[Yi][r0]||Gr(He[Yi],r0,He[Yi].valueOf);El(He,Uh);Go[We]=!0;var oL=dt.Object.getOwnPropertySymbols,sL=oL,h0=sL,oi={},f0=!Gt(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),c0=Gh("IE_PROTO"),lL=Object.prototype,Il=f0?Object.getPrototypeOf:function(e){return e=je(e),at(e,c0)?e[c0]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?lL:null};te("iterator");var d0=!1,Vh,fv,cv;[].keys&&(cv=[].keys(),"next"in cv?(fv=Il(Il(cv)),fv!==Object.prototype&&(Vh=fv)):d0=!0);Vh==null&&(Vh={});var dv={IteratorPrototype:Vh,BUGGY_SAFARI_ITERATORS:d0},uL=dv.IteratorPrototype,hL=function(){return this},fL=function(e,r,t){var i=r+" Iterator";return e.prototype=Gi(uL,{next:wa(1,t)}),El(e,i,!1,!0),oi[i]=hL,e},cL=function(e){if(!le(e)&&e!==null)throw TypeError("Can't set "+String(e)+" as a prototype");return e},dL=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(r,[]),e=r instanceof Array}catch(i){}return function(n,a){return Ye(n),cL(a),e?t.call(n,a):n.__proto__=a,n}}():void 0),vL=dv.IteratorPrototype,Xh=dv.BUGGY_SAFARI_ITERATORS,vv=te("iterator"),v0="keys",Kh="values",p0="entries",pL=function(){return this},pv=function(e,r,t,i,n,a,o){fL(t,r,i);var s=function(m){if(m===n&&c)return c;if(!Xh&&m in h)return h[m];switch(m){case v0:return function(){return new t(this,m)};case Kh:return function(){return new t(this,m)};case p0:return function(){return new t(this,m)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,h=e.prototype,f=h[vv]||h["@@iterator"]||n&&h[n],c=!Xh&&f||s(n),d=r=="Array"&&h.entries||f,v,g,p;if(d&&(v=Il(d.call(new e)),vL!==Object.prototype&&v.next&&(El(v,l,!0,!0),oi[l]=pL)),n==Kh&&f&&f.name!==Kh&&(u=!0,c=function(){return f.call(this)}),o&&h[vv]!==c&&Gr(h,vv,c),oi[r]=c,n)if(g={values:s(Kh),keys:a?c:s(v0),entries:s(p0)},o)for(p in g)(Xh||u||!(p in h))&&jh(h,p,g[p]);else tt({target:r,proto:!0,forced:Xh||u},g);return g},g0="Array Iterator",gL=ai.set,mL=ai.getterFor(g0);pv(Array,"Array",function(e,r){gL(this,{type:g0,target:tr(e),index:0,kind:r})},function(){var e=mL(this),r=e.target,t=e.kind,i=e.index++;return!r||i>=r.length?(e.target=void 0,{value:void 0,done:!0}):t=="keys"?{value:i,done:!1}:t=="values"?{value:r[i],done:!1}:{value:[i,r[i]],done:!1}},"values");oi.Arguments=oi.Array;var yL={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},m0=te("toStringTag");for(var gv in yL){var y0=Ht[gv],mv=y0&&y0.prototype;mv&&xn(mv)!==m0&&Gr(mv,m0,gv),oi[gv]=oi.Array}var _0=function(e){return function(r,t){var i=String(pl(r)),n=Dh(t),a=i.length,o,s;return n<0||n>=a?e?"":void 0:(o=i.charCodeAt(n),o<55296||o>56319||n+1===a||(s=i.charCodeAt(n+1))<56320||s>57343?e?i.charAt(n):o:e?i.slice(n,n+2):(o-55296<<10)+(s-56320)+65536)}},_L={codeAt:_0(!1),charAt:_0(!0)},wL=_L.charAt,w0="String Iterator",bL=ai.set,TL=ai.getterFor(w0);pv(String,"String",function(e){bL(this,{type:w0,string:String(e),index:0})},function(){var r=TL(this),t=r.string,i=r.index,n;return i>=t.length?{value:void 0,done:!0}:(n=wL(t,i),r.index+=n.length,{value:n,done:!1})});var EL=te("iterator"),Zh=function(e){if(e!=null)return e[EL]||e["@@iterator"]||oi[xn(e)]},SL=function(e){var r=Zh(e);if(typeof r!="function")throw TypeError(String(e)+" is not iterable");return Ye(r.call(e))},xL=SL,On=xL,CL=Zh,qh=CL,yv=function(e){var r=e.return;if(r!==void 0)return Ye(r.call(e)).value},OL=function(e,r,t,i){try{return i?r(Ye(t)[0],t[1]):r(t)}catch(n){throw yv(e),n}},IL=te("iterator"),PL=Array.prototype,b0=function(e){return e!==void 0&&(oi.Array===e||PL[IL]===e)},kL=function(r){var t=je(r),i=typeof this=="function"?this:Array,n=arguments.length,a=n>1?arguments[1]:void 0,o=a!==void 0,s=Zh(t),l=0,u,h,f,c,d,v;if(o&&(a=Ta(a,n>2?arguments[2]:void 0,2)),s!=null&&!(i==Array&&b0(s)))for(c=s.call(t),d=c.next,h=new i;!(f=d.call(c)).done;l++)v=o?OL(c,a,[f.value,l],!0):f.value,ka(h,l,v);else for(u=Yr(t.length),h=new i(u);u>l;l++)v=o?a(t[l],l):t[l],ka(h,l,v);return h.length=l,h},T0=te("iterator"),E0=!1;try{var RL=0,S0={next:function(){return{done:!!RL++}},return:function(){E0=!0}};S0[T0]=function(){return this},Array.from(S0,function(){throw 2})}catch(e){}var DL=function(e,r){if(!r&&!E0)return!1;var t=!1;try{var i={};i[T0]=function(){return{next:function(){return{done:t=!0}}}},e(i)}catch(n){}return t},AL=!DL(function(e){Array.from(e)});tt({target:"Array",stat:!0,forced:AL},{from:kL});var x0=dt.Array.from,ML=x0,Jh=ML,LL=function(r){for(var t=je(this),i=Yr(t.length),n=arguments.length,a=$o(n>1?arguments[1]:void 0,i),o=n>2?arguments[2]:void 0,s=o===void 0?i:$o(o,i);s>a;)t[a++]=r;return t};tt({target:"Array",proto:!0},{fill:LL});ee("Array").fill;var FL=[].slice,NL=/MSIE .\./.test(Lh),C0=function(e){return function(r,t){var i=arguments.length>2,n=i?FL.call(arguments,2):void 0;return e(i?function(){(typeof r=="function"?r:Function(r)).apply(this,n)}:r,t)}};tt({global:!0,bind:!0,forced:NL},{setTimeout:C0(Ht.setTimeout),setInterval:C0(Ht.setInterval)});var $L=dt.setTimeout,GL=$L,Qh=Ca("JSON","stringify"),YL=/[\uD800-\uDFFF]/g,O0=/^[\uD800-\uDBFF]$/,I0=/^[\uDC00-\uDFFF]$/,jL=function(e,r,t){var i=t.charAt(r-1),n=t.charAt(r+1);return O0.test(e)&&!I0.test(n)||I0.test(e)&&!O0.test(i)?"\\u"+e.charCodeAt(0).toString(16):e},WL=Gt(function(){return Qh("\uDF06\uD834")!=='"\\udf06\\ud834"'||Qh("\uDEAD")!=='"\\udead"'});Qh&&tt({target:"JSON",stat:!0,forced:WL},{stringify:function(r,t,i){var n=Qh.apply(null,arguments);return typeof n=="string"?n.replace(YL,jL):n}});dt.JSON||(dt.JSON={stringify:JSON.stringify});var HL=function(r,t,i){return dt.JSON.stringify.apply(null,arguments)},BL=HL,UL=BL;tt({target:"Object",stat:!0,sham:!Tt},{create:Gi});var zL=dt.Object,P0=function(r,t){return zL.create(r,t)},VL=P0,XL=VL;function KL(e,r,t){return r in e?L_(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Ra=KL,Pl=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,tf="["+Pl+"]",ZL=RegExp("^"+tf+tf+"*"),qL=RegExp(tf+tf+"*$"),_v=function(e){return function(r){var t=String(pl(r));return e&1&&(t=t.replace(ZL,"")),e&2&&(t=t.replace(qL,"")),t}},k0={start:_v(1),end:_v(2),trim:_v(3)},R0="\u200B\x85\u180E",JL=function(e){return Gt(function(){return!!Pl[e]()||R0[e]()!=R0||Pl[e].name!==e})},QL=k0.trim;tt({target:"String",proto:!0,forced:JL("trim")},{trim:function(){return QL(this)}});ee("String").trim;var tF=Kd.indexOf,D0=[].indexOf,A0=!!D0&&1/[1].indexOf(1,-0)<0,eF=bl("indexOf"),rF=Ni("indexOf",{ACCESSORS:!0,1:0});tt({target:"Array",proto:!0,forced:A0||!eF||!rF},{indexOf:function(r){return A0?D0.apply(this,arguments)||0:tF(this,r,arguments.length>1?arguments[1]:void 0)}});ee("Array").indexOf;var iF=k0.trim,ef=Ht.parseInt,nF=/^[+-]?0[Xx]/,aF=ef(Pl+"08")!==8||ef(Pl+"0x16")!==22,M0=aF?function(r,t){var i=iF(String(r));return ef(i,t>>>0||(nF.test(i)?16:10))}:ef;tt({global:!0,forced:parseInt!=M0},{parseInt:M0});var oF=vl.f,L0=function(e){return function(r){for(var t=tr(r),i=$i(t),n=i.length,a=0,o=[],s;n>a;)s=i[a++],(!Tt||oF.call(t,s))&&o.push(e?[s,t[s]]:t[s]);return o}},sF={entries:L0(!0),values:L0(!1)},lF=sF.values;tt({target:"Object",stat:!0},{values:function(r){return lF(r)}});dt.Object.values;var uF=Gt(function(){Il(1)});tt({target:"Object",stat:!0,forced:uF,sham:!f0},{getPrototypeOf:function(r){return Il(je(r))}});var hF=dt.Object.getPrototypeOf,fF=Kd.includes,cF=Ni("indexOf",{ACCESSORS:!0,1:0});tt({target:"Array",proto:!0,forced:!cF},{includes:function(r){return fF(this,r,arguments.length>1?arguments[1]:void 0)}});ee("Array").includes;var dF=te("match"),vF=function(e){var r;return le(e)&&((r=e[dF])!==void 0?!!r:Sn(e)=="RegExp")},pF=function(e){if(vF(e))throw TypeError("The method doesn't accept regular expressions");return e},gF=te("match"),mF=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[gF]=!1,"/./"[e](r)}catch(i){}}return!1};tt({target:"String",proto:!0,forced:!mF("includes")},{includes:function(r){return!!~String(pl(this)).indexOf(pF(r),arguments.length>1?arguments[1]:void 0)}});ee("String").includes;var jo=Object.assign,F0=Object.defineProperty,N0=!jo||Gt(function(){if(Tt&&jo({b:1},jo(F0({},"a",{enumerable:!0,get:function(){F0(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),i="abcdefghijklmnopqrst";return e[t]=7,i.split("").forEach(function(n){r[n]=n}),jo({},e)[t]!=7||$i(jo({},r)).join("")!=i})?function(r,t){for(var i=je(r),n=arguments.length,a=1,o=Tl.f,s=vl.f;n>a;)for(var l=Rh(arguments[a++]),u=o?$i(l).concat(o(l)):$i(l),h=u.length,f=0,c;h>f;)c=u[f++],(!Tt||s.call(l,c))&&(i[c]=l[c]);return i}:jo;tt({target:"Object",stat:!0,forced:Object.assign!==N0},{assign:N0});var yF=dt.Object.assign,_F=yF,$0=_F,wF=wl("splice"),bF=Ni("splice",{ACCESSORS:!0,0:0,1:2}),TF=Math.max,EF=Math.min,SF=9007199254740991,xF="Maximum allowed length exceeded";tt({target:"Array",proto:!0,forced:!wF||!bF},{splice:function(r,t){var i=je(this),n=Yr(i.length),a=$o(r,n),o=arguments.length,s,l,u,h,f,c;if(o===0?s=l=0:o===1?(s=0,l=n-a):(s=o-2,l=EF(TF(Dh(t),0),n-a)),n+s-l>SF)throw TypeError(xF);for(u=Mh(i,l),h=0;h<l;h++)f=a+h,f in i&&ka(u,h,i[f]);if(u.length=l,s<l){for(h=a;h<n-l;h++)f=h+l,c=h+s,f in i?i[c]=i[f]:delete i[c];for(h=n;h>n-l+s;h--)delete i[h-1]}else if(s>l)for(h=n-l;h>a;h--)f=h+l-1,c=h+s-1,f in i?i[c]=i[f]:delete i[c];for(h=0;h<s;h++)i[h+a]=arguments[h+2];return i.length=n-l+s,u}});var CF=ee("Array").splice,G0=Array.prototype,OF=function(e){var r=e.splice;return e===G0||e instanceof Array&&r===G0.splice?CF:r},IF=OF,Y0=IF,PF=[].reverse,j0=[1,2];tt({target:"Array",proto:!0,forced:String(j0)===String(j0.reverse())},{reverse:function(){return Mi(this)&&(this.length=this.length),PF.call(this)}});var kF=ee("Array").reverse,W0=Array.prototype,RF=function(e){var r=e.reverse;return e===W0||e instanceof Array&&r===W0.reverse?kF:r},DF=RF,AF=DF,MF=No.forEach,LF=bl("forEach"),FF=Ni("forEach"),H0=!LF||!FF?function(r){return MF(this,r,arguments.length>1?arguments[1]:void 0)}:[].forEach;tt({target:"Array",proto:!0,forced:[].forEach!=H0},{forEach:H0});var NF=ee("Array").forEach,$F=NF,B0=Array.prototype,GF={DOMTokenList:!0,NodeList:!0},YF=function(e){var r=e.forEach;return e===B0||e instanceof Array&&r===B0.forEach||GF.hasOwnProperty(xn(e))?$F:r},In=YF;tt({target:"Array",stat:!0},{isArray:Mi});var U0=dt.Array.isArray,jF=U0,z0=jF;function WF(e){if(z0(e))return e}var HF=WF,BF=te("iterator"),UF=function(e){var r=Object(e);return r[BF]!==void 0||"@@iterator"in r||oi.hasOwnProperty(xn(r))},zF=UF,V0=zF,X0=te("isConcatSpreadable"),K0=9007199254740991,Z0="Maximum allowed index exceeded",VF=Nh>=51||!Gt(function(){var e=[];return e[X0]=!1,e.concat()[0]!==e}),XF=wl("concat"),KF=function(e){if(!le(e))return!1;var r=e[X0];return r!==void 0?!!r:Mi(e)},ZF=!VF||!XF;tt({target:"Array",proto:!0,forced:ZF},{concat:function(r){var t=je(this),i=Mh(t,0),n=0,a,o,s,l,u;for(a=-1,s=arguments.length;a<s;a++)if(u=a===-1?t:arguments[a],KF(u)){if(l=Yr(u.length),n+l>K0)throw TypeError(Z0);for(o=0;o<l;o++,n++)o in u&&ka(i,n,u[o])}else{if(n>=K0)throw TypeError(Z0);ka(i,n++,u)}return i.length=n,i}});ue("asyncIterator");ue("hasInstance");ue("isConcatSpreadable");ue("iterator");ue("match");ue("matchAll");ue("replace");ue("search");ue("species");ue("split");ue("toPrimitive");ue("toStringTag");ue("unscopables");El(Ht.JSON,"JSON",!0);var q0=dt.Symbol;ue("asyncDispose");ue("dispose");ue("observable");ue("patternMatch");ue("replaceAll");var qF=q0,Wo=qF;function JF(e,r){if(!(typeof Wo=="undefined"||!V0(Object(e)))){var t=[],i=!0,n=!1,a=void 0;try{for(var o=On(e),s;!(i=(s=o.next()).done)&&(t.push(s.value),!(r&&t.length===r));i=!0);}catch(l){n=!0,a=l}finally{try{!i&&o.return!=null&&o.return()}finally{if(n)throw a}}return t}}var QF=JF,tN=x0,J0=tN,eN=wl("slice"),rN=Ni("slice",{ACCESSORS:!0,0:0,1:2}),iN=te("species"),nN=[].slice,aN=Math.max;tt({target:"Array",proto:!0,forced:!eN||!rN},{slice:function(r,t){var i=tr(this),n=Yr(i.length),a=$o(r,n),o=$o(t===void 0?n:t,n),s,l,u;if(Mi(i)&&(s=i.constructor,typeof s=="function"&&(s===Array||Mi(s.prototype))?s=void 0:le(s)&&(s=s[iN],s===null&&(s=void 0)),s===Array||s===void 0))return nN.call(i,a,o);for(l=new(s===void 0?Array:s)(aN(o-a,0)),u=0;a<o;a++,u++)a in i&&ka(l,u,i[a]);return l.length=u,l}});var oN=ee("Array").slice,Q0=Array.prototype,tw=function(e){var r=e.slice;return e===Q0||e instanceof Array&&r===Q0.slice?oN:r},sN=tw,lN=sN;function uN(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var wv=uN;function hN(e,r){var t;if(!!e){if(typeof e=="string")return wv(e,r);var i=lN(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return J0(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return wv(e,r)}}var ew=hN;function fN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var cN=fN;function dN(e,r){return HF(e)||QF(e,r)||ew(e,r)||cN()}var Be=dN;tt({target:"Date",stat:!0},{now:function(){return new Date().getTime()}});dt.Date.now;var vN=Gt(function(){$i(1)});tt({target:"Object",stat:!0,forced:vN},{keys:function(r){return $i(je(r))}});var pN=dt.Object.keys,gN=pN,bv=gN,mN=U0,ke=mN,rw=ev.f("iterator"),yN=rw,_N=yN,br=ni(function(e){function r(t){return typeof Wo=="function"&&typeof _N=="symbol"?e.exports=r=function(n){return typeof n}:e.exports=r=function(n){return n&&typeof Wo=="function"&&n.constructor===Wo&&n!==Wo.prototype?"symbol":typeof n},r(t)}e.exports=r});tt({target:"Reflect",stat:!0},{ownKeys:j_});var wN=dt.Reflect.ownKeys,bN=wN,iw=bN,TN=tw,kl=TN;function EN(e){if(z0(e))return wv(e)}var SN=EN;function xN(e){if(typeof Wo!="undefined"&&V0(Object(e)))return J0(e)}var CN=xN;function ON(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var IN=ON;function PN(e){return SN(e)||CN(e)||ew(e)||IN()}var Re=PN,kN=ee("Array").concat,nw=Array.prototype,RN=function(e){var r=e.concat;return e===nw||e instanceof Array&&r===nw.concat?kN:r},DN=RN,rf=DN,AN=q0,Rl=AN,MN=ni(function(e){e.exports=r;function r(i){if(i)return t(i)}function t(i){for(var n in r.prototype)i[n]=r.prototype[n];return i}r.prototype.on=r.prototype.addEventListener=function(i,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(n),this},r.prototype.once=function(i,n){function a(){this.off(i,a),n.apply(this,arguments)}return a.fn=n,this.on(i,a),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(i,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+i];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var o,s=0;s<a.length;s++)if(o=a[s],o===n||o.fn===n){a.splice(s,1);break}return a.length===0&&delete this._callbacks["$"+i],this},r.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),a=this._callbacks["$"+i],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(a){a=a.slice(0);for(var o=0,s=a.length;o<s;++o)a[o].apply(this,n)}return this},r.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},r.prototype.hasListeners=function(i){return!!this.listeners(i).length}});/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Wr(){return Wr=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Wr.apply(this,arguments)}function Tr(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function nf(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Tv;typeof Object.assign!="function"?Tv=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),i=1;i<arguments.length;i++){var n=arguments[i];if(n!=null)for(var a in n)n.hasOwnProperty(a)&&(t[a]=n[a])}return t}:Tv=Object.assign;var Da=Tv,aw=["","webkit","Moz","MS","ms","o"],LN=typeof document=="undefined"?{style:{}}:document.createElement("div"),FN="function",Ho=Math.round,Aa=Math.abs,Ev=Date.now;function af(e,r){for(var t,i,n=r[0].toUpperCase()+r.slice(1),a=0;a<aw.length;){if(t=aw[a],i=t?t+n:r,i in e)return i;a++}}var Wi;typeof window=="undefined"?Wi={}:Wi=window;var ow=af(LN.style,"touchAction"),sw=ow!==void 0;function NN(){if(!sw)return!1;var e={},r=Wi.CSS&&Wi.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?Wi.CSS.supports("touch-action",t):!0}),e}var lw="compute",uw="auto",Sv="manipulation",Ma="none",Dl="pan-x",Al="pan-y",of=NN(),$N=/mobile|tablet|ip(ad|hone|od)|android/i,hw="ontouchstart"in Wi,GN=af(Wi,"PointerEvent")!==void 0,YN=hw&&$N.test(navigator.userAgent),Ml="touch",jN="pen",xv="mouse",WN="kinect",HN=25,De=1,La=2,re=4,Ue=8,sf=1,Ll=2,Fl=4,Nl=8,Bo=16,si=Ll|Fl,Fa=Nl|Bo,fw=si|Fa,cw=["x","y"],lf=["clientX","clientY"];function Hi(e,r,t){var i;if(!!e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(i=0;i<e.length;)r.call(t,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&r.call(t,e[i],i,e)}function uf(e,r){return typeof e===FN?e.apply(r&&r[0]||void 0,r):e}function Na(e,r){return e.indexOf(r)>-1}function BN(e){if(Na(e,Ma))return Ma;var r=Na(e,Dl),t=Na(e,Al);return r&&t?Ma:r||t?r?Dl:Al:Na(e,Sv)?Sv:uw}var dw=function(){function e(t,i){this.manager=t,this.set(i)}var r=e.prototype;return r.set=function(i){i===lw&&(i=this.compute()),sw&&this.manager.element.style&&of[i]&&(this.manager.element.style[ow]=i),this.actions=i.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var i=[];return Hi(this.manager.recognizers,function(n){uf(n.options.enable,[n])&&(i=i.concat(n.getTouchAction()))}),BN(i.join(" "))},r.preventDefaults=function(i){var n=i.srcEvent,a=i.offsetDirection;if(this.manager.session.prevented){n.preventDefault();return}var o=this.actions,s=Na(o,Ma)&&!of[Ma],l=Na(o,Al)&&!of[Al],u=Na(o,Dl)&&!of[Dl];if(s){var h=i.pointers.length===1,f=i.distance<2,c=i.deltaTime<250;if(h&&f&&c)return}if(!(u&&l)&&(s||l&&a&si||u&&a&Fa))return this.preventSrc(n)},r.preventSrc=function(i){this.manager.session.prevented=!0,i.preventDefault()},e}();function Cv(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function vw(e){var r=e.length;if(r===1)return{x:Ho(e[0].clientX),y:Ho(e[0].clientY)};for(var t=0,i=0,n=0;n<r;)t+=e[n].clientX,i+=e[n].clientY,n++;return{x:Ho(t/r),y:Ho(i/r)}}function pw(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:Ho(e.pointers[t].clientX),clientY:Ho(e.pointers[t].clientY)},t++;return{timeStamp:Ev(),pointers:r,center:vw(r),deltaX:e.deltaX,deltaY:e.deltaY}}function hf(e,r,t){t||(t=cw);var i=r[t[0]]-e[t[0]],n=r[t[1]]-e[t[1]];return Math.sqrt(i*i+n*n)}function Ov(e,r,t){t||(t=cw);var i=r[t[0]]-e[t[0]],n=r[t[1]]-e[t[1]];return Math.atan2(n,i)*180/Math.PI}function gw(e,r){return e===r?sf:Aa(e)>=Aa(r)?e<0?Ll:Fl:r<0?Nl:Bo}function UN(e,r){var t=r.center,i=e.offsetDelta||{},n=e.prevDelta||{},a=e.prevInput||{};(r.eventType===De||a.eventType===re)&&(n=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=n.x+(t.x-i.x),r.deltaY=n.y+(t.y-i.y)}function mw(e,r,t){return{x:r/e||0,y:t/e||0}}function zN(e,r){return hf(r[0],r[1],lf)/hf(e[0],e[1],lf)}function VN(e,r){return Ov(r[1],r[0],lf)+Ov(e[1],e[0],lf)}function XN(e,r){var t=e.lastInterval||r,i=r.timeStamp-t.timeStamp,n,a,o,s;if(r.eventType!==Ue&&(i>HN||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,h=mw(i,l,u);a=h.x,o=h.y,n=Aa(h.x)>Aa(h.y)?h.x:h.y,s=gw(l,u),e.lastInterval=r}else n=t.velocity,a=t.velocityX,o=t.velocityY,s=t.direction;r.velocity=n,r.velocityX=a,r.velocityY=o,r.direction=s}function KN(e,r){var t=e.session,i=r.pointers,n=i.length;t.firstInput||(t.firstInput=pw(r)),n>1&&!t.firstMultiple?t.firstMultiple=pw(r):n===1&&(t.firstMultiple=!1);var a=t.firstInput,o=t.firstMultiple,s=o?o.center:a.center,l=r.center=vw(i);r.timeStamp=Ev(),r.deltaTime=r.timeStamp-a.timeStamp,r.angle=Ov(s,l),r.distance=hf(s,l),UN(t,r),r.offsetDirection=gw(r.deltaX,r.deltaY);var u=mw(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=Aa(u.x)>Aa(u.y)?u.x:u.y,r.scale=o?zN(o.pointers,i):1,r.rotation=o?VN(o.pointers,i):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,XN(t,r);var h=e.element,f=r.srcEvent,c;f.composedPath?c=f.composedPath()[0]:f.path?c=f.path[0]:c=f.target,Cv(c,h)&&(h=c),r.target=h}function ZN(e,r,t){var i=t.pointers.length,n=t.changedPointers.length,a=r&De&&i-n==0,o=r&(re|Ue)&&i-n==0;t.isFirst=!!a,t.isFinal=!!o,a&&(e.session={}),t.eventType=r,KN(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function $l(e){return e.trim().split(/\s+/g)}function Gl(e,r,t){Hi($l(r),function(i){e.addEventListener(i,t,!1)})}function Yl(e,r,t){Hi($l(r),function(i){e.removeEventListener(i,t,!1)})}function yw(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var Uo=function(){function e(t,i){var n=this;this.manager=t,this.callback=i,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(a){uf(t.options.enable,[t])&&n.handler(a)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&Gl(this.element,this.evEl,this.domHandler),this.evTarget&&Gl(this.target,this.evTarget,this.domHandler),this.evWin&&Gl(yw(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&Yl(this.element,this.evEl,this.domHandler),this.evTarget&&Yl(this.target,this.evTarget,this.domHandler),this.evWin&&Yl(yw(this.element),this.evWin,this.domHandler)},e}();function $a(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var i=0;i<e.length;){if(t&&e[i][t]==r||!t&&e[i]===r)return i;i++}return-1}var qN={pointerdown:De,pointermove:La,pointerup:re,pointercancel:Ue,pointerout:Ue},JN={2:Ml,3:jN,4:xv,5:WN},_w="pointerdown",ww="pointermove pointerup pointercancel";Wi.MSPointerEvent&&!Wi.PointerEvent&&(_w="MSPointerDown",ww="MSPointerMove MSPointerUp MSPointerCancel");var bw=function(e){Tr(r,e);function r(){var i,n=r.prototype;return n.evEl=_w,n.evWin=ww,i=e.apply(this,arguments)||this,i.store=i.manager.session.pointerEvents=[],i}var t=r.prototype;return t.handler=function(n){var a=this.store,o=!1,s=n.type.toLowerCase().replace("ms",""),l=qN[s],u=JN[n.pointerType]||n.pointerType,h=u===Ml,f=$a(a,n.pointerId,"pointerId");l&De&&(n.button===0||h)?f<0&&(a.push(n),f=a.length-1):l&(re|Ue)&&(o=!0),!(f<0)&&(a[f]=n,this.callback(this.manager,l,{pointers:a,changedPointers:[n],pointerType:u,srcEvent:n}),o&&a.splice(f,1))},r}(Uo);function jl(e){return Array.prototype.slice.call(e,0)}function Iv(e,r,t){for(var i=[],n=[],a=0;a<e.length;){var o=r?e[a][r]:e[a];$a(n,o)<0&&i.push(e[a]),n[a]=o,a++}return t&&(r?i=i.sort(function(s,l){return s[r]>l[r]}):i=i.sort()),i}var QN={touchstart:De,touchmove:La,touchend:re,touchcancel:Ue},t$="touchstart touchmove touchend touchcancel",Pv=function(e){Tr(r,e);function r(){var i;return r.prototype.evTarget=t$,i=e.apply(this,arguments)||this,i.targetIds={},i}var t=r.prototype;return t.handler=function(n){var a=QN[n.type],o=e$.call(this,n,a);!o||this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:Ml,srcEvent:n})},r}(Uo);function e$(e,r){var t=jl(e.touches),i=this.targetIds;if(r&(De|La)&&t.length===1)return i[t[0].identifier]=!0,[t,t];var n,a,o=jl(e.changedTouches),s=[],l=this.target;if(a=t.filter(function(u){return Cv(u.target,l)}),r===De)for(n=0;n<a.length;)i[a[n].identifier]=!0,n++;for(n=0;n<o.length;)i[o[n].identifier]&&s.push(o[n]),r&(re|Ue)&&delete i[o[n].identifier],n++;if(!!s.length)return[Iv(a.concat(s),"identifier",!0),s]}var r$={mousedown:De,mousemove:La,mouseup:re},i$="mousedown",n$="mousemove mouseup",kv=function(e){Tr(r,e);function r(){var i,n=r.prototype;return n.evEl=i$,n.evWin=n$,i=e.apply(this,arguments)||this,i.pressed=!1,i}var t=r.prototype;return t.handler=function(n){var a=r$[n.type];a&De&&n.button===0&&(this.pressed=!0),a&La&&n.which!==1&&(a=re),!!this.pressed&&(a&re&&(this.pressed=!1),this.callback(this.manager,a,{pointers:[n],changedPointers:[n],pointerType:xv,srcEvent:n}))},r}(Uo),a$=2500,Tw=25;function Ew(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY},n=this.lastTouches;this.lastTouches.push(i);var a=function(){var s=n.indexOf(i);s>-1&&n.splice(s,1)};setTimeout(a,a$)}}function o$(e,r){e&De?(this.primaryTouch=r.changedPointers[0].identifier,Ew.call(this,r)):e&(re|Ue)&&Ew.call(this,r)}function s$(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var n=this.lastTouches[i],a=Math.abs(r-n.x),o=Math.abs(t-n.y);if(a<=Tw&&o<=Tw)return!0}return!1}var Sw=function(){var e=function(r){Tr(t,r);function t(n,a){var o;return o=r.call(this,n,a)||this,o.handler=function(s,l,u){var h=u.pointerType===Ml,f=u.pointerType===xv;if(!(f&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(h)o$.call(nf(nf(o)),l,u);else if(f&&s$.call(nf(nf(o)),u))return;o.callback(s,l,u)}},o.touch=new Pv(o.manager,o.handler),o.mouse=new kv(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var i=t.prototype;return i.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(Uo);return e}();function l$(e){var r,t=e.options.inputClass;return t?r=t:GN?r=bw:YN?r=Pv:hw?r=Sw:r=kv,new r(e,ZN)}function zo(e,r,t){return Array.isArray(e)?(Hi(e,t[r],t),!0):!1}var ff=1,Er=2,Vo=4,Pn=8,Bi=Pn,Wl=16,li=32,u$=1;function h$(){return u$++}function cf(e,r){var t=r.manager;return t?t.get(e):e}function xw(e){return e&Wl?"cancel":e&Pn?"end":e&Vo?"move":e&Er?"start":""}var Hl=function(){function e(t){t===void 0&&(t={}),this.options=Wr({enable:!0},t),this.id=h$(),this.manager=null,this.state=ff,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(i){return Da(this.options,i),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(i){if(zo(i,"recognizeWith",this))return this;var n=this.simultaneous;return i=cf(i,this),n[i.id]||(n[i.id]=i,i.recognizeWith(this)),this},r.dropRecognizeWith=function(i){return zo(i,"dropRecognizeWith",this)?this:(i=cf(i,this),delete this.simultaneous[i.id],this)},r.requireFailure=function(i){if(zo(i,"requireFailure",this))return this;var n=this.requireFail;return i=cf(i,this),$a(n,i)===-1&&(n.push(i),i.requireFailure(this)),this},r.dropRequireFailure=function(i){if(zo(i,"dropRequireFailure",this))return this;i=cf(i,this);var n=$a(this.requireFail,i);return n>-1&&this.requireFail.splice(n,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(i){return!!this.simultaneous[i.id]},r.emit=function(i){var n=this,a=this.state;function o(s){n.manager.emit(s,i)}a<Pn&&o(n.options.event+xw(a)),o(n.options.event),i.additionalEvent&&o(i.additionalEvent),a>=Pn&&o(n.options.event+xw(a))},r.tryEmit=function(i){if(this.canEmit())return this.emit(i);this.state=li},r.canEmit=function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(li|ff)))return!1;i++}return!0},r.recognize=function(i){var n=Da({},i);if(!uf(this.options.enable,[this,n])){this.reset(),this.state=li;return}this.state&(Bi|Wl|li)&&(this.state=ff),this.state=this.process(n),this.state&(Er|Vo|Pn|Wl)&&this.tryEmit(n)},r.process=function(i){},r.getTouchAction=function(){},r.reset=function(){},e}(),Rv=function(e){Tr(r,e);function r(i){var n;return i===void 0&&(i={}),n=e.call(this,Wr({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},i))||this,n.pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}var t=r.prototype;return t.getTouchAction=function(){return[Sv]},t.process=function(n){var a=this,o=this.options,s=n.pointers.length===o.pointers,l=n.distance<o.threshold,u=n.deltaTime<o.time;if(this.reset(),n.eventType&De&&this.count===0)return this.failTimeout();if(l&&u&&s){if(n.eventType!==re)return this.failTimeout();var h=this.pTime?n.timeStamp-this.pTime<o.interval:!0,f=!this.pCenter||hf(this.pCenter,n.center)<o.posThreshold;this.pTime=n.timeStamp,this.pCenter=n.center,!f||!h?this.count=1:this.count+=1,this._input=n;var c=this.count%o.taps;if(c===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){a.state=Bi,a.tryEmit()},o.interval),Er):Bi}return li},t.failTimeout=function(){var n=this;return this._timer=setTimeout(function(){n.state=li},this.options.interval),li},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===Bi&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(Hl),Xo=function(e){Tr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Wr({pointers:1},i))||this}var t=r.prototype;return t.attrTest=function(n){var a=this.options.pointers;return a===0||n.pointers.length===a},t.process=function(n){var a=this.state,o=n.eventType,s=a&(Er|Vo),l=this.attrTest(n);return s&&(o&Ue||!l)?a|Wl:s||l?o&re?a|Pn:a&Er?a|Vo:Er:li},r}(Hl);function Cw(e){return e===Bo?"down":e===Nl?"up":e===Ll?"left":e===Fl?"right":""}var Dv=function(e){Tr(r,e);function r(i){var n;return i===void 0&&(i={}),n=e.call(this,Wr({event:"pan",threshold:10,pointers:1,direction:fw},i))||this,n.pX=null,n.pY=null,n}var t=r.prototype;return t.getTouchAction=function(){var n=this.options.direction,a=[];return n&si&&a.push(Al),n&Fa&&a.push(Dl),a},t.directionTest=function(n){var a=this.options,o=!0,s=n.distance,l=n.direction,u=n.deltaX,h=n.deltaY;return l&a.direction||(a.direction&si?(l=u===0?sf:u<0?Ll:Fl,o=u!==this.pX,s=Math.abs(n.deltaX)):(l=h===0?sf:h<0?Nl:Bo,o=h!==this.pY,s=Math.abs(n.deltaY))),n.direction=l,o&&s>a.threshold&&l&a.direction},t.attrTest=function(n){return Xo.prototype.attrTest.call(this,n)&&(this.state&Er||!(this.state&Er)&&this.directionTest(n))},t.emit=function(n){this.pX=n.deltaX,this.pY=n.deltaY;var a=Cw(n.direction);a&&(n.additionalEvent=this.options.event+a),e.prototype.emit.call(this,n)},r}(Xo),Ow=function(e){Tr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Wr({event:"swipe",threshold:10,velocity:.3,direction:si|Fa,pointers:1},i))||this}var t=r.prototype;return t.getTouchAction=function(){return Dv.prototype.getTouchAction.call(this)},t.attrTest=function(n){var a=this.options.direction,o;return a&(si|Fa)?o=n.overallVelocity:a&si?o=n.overallVelocityX:a&Fa&&(o=n.overallVelocityY),e.prototype.attrTest.call(this,n)&&a&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers===this.options.pointers&&Aa(o)>this.options.velocity&&n.eventType&re},t.emit=function(n){var a=Cw(n.offsetDirection);a&&this.manager.emit(this.options.event+a,n),this.manager.emit(this.options.event,n)},r}(Xo),Iw=function(e){Tr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Wr({event:"pinch",threshold:0,pointers:2},i))||this}var t=r.prototype;return t.getTouchAction=function(){return[Ma]},t.attrTest=function(n){return e.prototype.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&Er)},t.emit=function(n){if(n.scale!==1){var a=n.scale<1?"in":"out";n.additionalEvent=this.options.event+a}e.prototype.emit.call(this,n)},r}(Xo),Pw=function(e){Tr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Wr({event:"rotate",threshold:0,pointers:2},i))||this}var t=r.prototype;return t.getTouchAction=function(){return[Ma]},t.attrTest=function(n){return e.prototype.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&Er)},r}(Xo),kw=function(e){Tr(r,e);function r(i){var n;return i===void 0&&(i={}),n=e.call(this,Wr({event:"press",pointers:1,time:251,threshold:9},i))||this,n._timer=null,n._input=null,n}var t=r.prototype;return t.getTouchAction=function(){return[uw]},t.process=function(n){var a=this,o=this.options,s=n.pointers.length===o.pointers,l=n.distance<o.threshold,u=n.deltaTime>o.time;if(this._input=n,!l||!s||n.eventType&(re|Ue)&&!u)this.reset();else if(n.eventType&De)this.reset(),this._timer=setTimeout(function(){a.state=Bi,a.tryEmit()},o.time);else if(n.eventType&re)return Bi;return li},t.reset=function(){clearTimeout(this._timer)},t.emit=function(n){this.state===Bi&&(n&&n.eventType&re?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=Ev(),this.manager.emit(this.options.event,this._input)))},r}(Hl),Rw={domEvents:!1,touchAction:lw,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Dw=[[Pw,{enable:!1}],[Iw,{enable:!1},["rotate"]],[Ow,{direction:si}],[Dv,{direction:si},["swipe"]],[Rv],[Rv,{event:"doubletap",taps:2},["tap"]],[kw]],f$=1,Aw=2;function Mw(e,r){var t=e.element;if(!!t.style){var i;Hi(e.options.cssProps,function(n,a){i=af(t.style,a),r?(e.oldCssProps[i]=t.style[i],t.style[i]=n):t.style[i]=e.oldCssProps[i]||""}),r||(e.oldCssProps={})}}function c$(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var Lw=function(){function e(t,i){var n=this;this.options=Da({},Rw,i||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=l$(this),this.touchAction=new dw(this,this.options.touchAction),Mw(this,!0),Hi(this.options.recognizers,function(a){var o=n.add(new a[0](a[1]));a[2]&&o.recognizeWith(a[2]),a[3]&&o.requireFailure(a[3])},this)}var r=e.prototype;return r.set=function(i){return Da(this.options,i),i.touchAction&&this.touchAction.update(),i.inputTarget&&(this.input.destroy(),this.input.target=i.inputTarget,this.input.init()),this},r.stop=function(i){this.session.stopped=i?Aw:f$},r.recognize=function(i){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(i);var a,o=this.recognizers,s=n.curRecognizer;(!s||s&&s.state&Bi)&&(n.curRecognizer=null,s=null);for(var l=0;l<o.length;)a=o[l],n.stopped!==Aw&&(!s||a===s||a.canRecognizeWith(s))?a.recognize(i):a.reset(),!s&&a.state&(Er|Vo|Pn)&&(n.curRecognizer=a,s=a),l++}},r.get=function(i){if(i instanceof Hl)return i;for(var n=this.recognizers,a=0;a<n.length;a++)if(n[a].options.event===i)return n[a];return null},r.add=function(i){if(zo(i,"add",this))return this;var n=this.get(i.options.event);return n&&this.remove(n),this.recognizers.push(i),i.manager=this,this.touchAction.update(),i},r.remove=function(i){if(zo(i,"remove",this))return this;var n=this.get(i);if(i){var a=this.recognizers,o=$a(a,n);o!==-1&&(a.splice(o,1),this.touchAction.update())}return this},r.on=function(i,n){if(i===void 0||n===void 0)return this;var a=this.handlers;return Hi($l(i),function(o){a[o]=a[o]||[],a[o].push(n)}),this},r.off=function(i,n){if(i===void 0)return this;var a=this.handlers;return Hi($l(i),function(o){n?a[o]&&a[o].splice($a(a[o],n),1):delete a[o]}),this},r.emit=function(i,n){this.options.domEvents&&c$(i,n);var a=this.handlers[i]&&this.handlers[i].slice();if(!(!a||!a.length)){n.type=i,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](n),o++}},r.destroy=function(){this.element&&Mw(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),d$={touchstart:De,touchmove:La,touchend:re,touchcancel:Ue},v$="touchstart",p$="touchstart touchmove touchend touchcancel",g$=function(e){Tr(r,e);function r(){var i,n=r.prototype;return n.evTarget=v$,n.evWin=p$,i=e.apply(this,arguments)||this,i.started=!1,i}var t=r.prototype;return t.handler=function(n){var a=d$[n.type];if(a===De&&(this.started=!0),!!this.started){var o=m$.call(this,n,a);a&(re|Ue)&&o[0].length-o[1].length==0&&(this.started=!1),this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:Ml,srcEvent:n})}},r}(Uo);function m$(e,r){var t=jl(e.touches),i=jl(e.changedTouches);return r&(re|Ue)&&(t=Iv(t.concat(i),"identifier",!0)),[t,i]}function Fw(e,r,t){var i="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var n=new Error("get-stack-trace"),a=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,i,a),e.apply(this,arguments)}}var Nw=Fw(function(e,r,t){for(var i=Object.keys(r),n=0;n<i.length;)(!t||t&&e[i[n]]===void 0)&&(e[i[n]]=r[i[n]]),n++;return e},"extend","Use `assign`."),y$=Fw(function(e,r){return Nw(e,r,!0)},"merge","Use `assign`.");function _$(e,r,t){var i=r.prototype,n;n=e.prototype=Object.create(i),n.constructor=e,n._super=i,t&&Da(n,t)}function $w(e,r){return function(){return e.apply(r,arguments)}}var w$=function(){var e=function(t,i){return i===void 0&&(i={}),new Lw(t,Wr({recognizers:Dw.concat()},i))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=fw,e.DIRECTION_DOWN=Bo,e.DIRECTION_LEFT=Ll,e.DIRECTION_RIGHT=Fl,e.DIRECTION_UP=Nl,e.DIRECTION_HORIZONTAL=si,e.DIRECTION_VERTICAL=Fa,e.DIRECTION_NONE=sf,e.DIRECTION_DOWN=Bo,e.INPUT_START=De,e.INPUT_MOVE=La,e.INPUT_END=re,e.INPUT_CANCEL=Ue,e.STATE_POSSIBLE=ff,e.STATE_BEGAN=Er,e.STATE_CHANGED=Vo,e.STATE_ENDED=Pn,e.STATE_RECOGNIZED=Bi,e.STATE_CANCELLED=Wl,e.STATE_FAILED=li,e.Manager=Lw,e.Input=Uo,e.TouchAction=dw,e.TouchInput=Pv,e.MouseInput=kv,e.PointerEventInput=bw,e.TouchMouseInput=Sw,e.SingleTouchInput=g$,e.Recognizer=Hl,e.AttrRecognizer=Xo,e.Tap=Rv,e.Pan=Dv,e.Swipe=Ow,e.Pinch=Iw,e.Rotate=Pw,e.Press=kw,e.on=Gl,e.off=Yl,e.each=Hi,e.merge=y$,e.extend=Nw,e.bindFn=$w,e.assign=Da,e.inherit=_$,e.bindFn=$w,e.prefixed=af,e.toArray=jl,e.inArray=$a,e.uniqueArray=Iv,e.splitStr=$l,e.boolOrFn=uf,e.hasParent=Cv,e.addEventListeners=Gl,e.removeEventListeners=Yl,e.defaults=Da({},Rw,{preset:Dw}),e}();function Gw(e,r){var t;if(typeof Rl=="undefined"||qh(e)==null){if(ke(e)||(t=b$(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=On(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function b$(e,r){var t;if(!!e){if(typeof e=="string")return Yw(e,r);var i=kl(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Jh(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Yw(e,r)}}function Yw(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var jw=Rl("DELETE");function T$(e){for(var r,t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Ww.apply(void 0,rf(r=[{},e]).call(r,i))}function Ww(){var e=df.apply(void 0,arguments);return Bw(e),e}function df(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<2)return r[0];if(r.length>2){var i;return df.apply(void 0,rf(i=[Ww(r[0],r[1])]).call(i,Re(kl(r).call(r,2))))}var n=r[0],a=r[1],o=Gw(iw(a)),s;try{for(o.s();!(s=o.n()).done;){var l=s.value;Object.prototype.propertyIsEnumerable.call(a,l)&&(a[l]===jw?delete n[l]:n[l]!==null&&a[l]!==null&&br(n[l])==="object"&&br(a[l])==="object"&&!ke(n[l])&&!ke(a[l])?n[l]=df(n[l],a[l]):n[l]=Hw(a[l]))}}catch(u){o.e(u)}finally{o.f()}return n}function Hw(e){return ke(e)?er(e).call(e,function(r){return Hw(r)}):br(e)==="object"&&e!==null?df({},e):e}function Bw(e){for(var r=0,t=bv(e);r<t.length;r++){var i=t[r];e[i]===jw?delete e[i]:br(e[i])==="object"&&e[i]!==null&&Bw(e[i])}}function E$(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var S$=typeof window!="undefined"?window.Hammer||w$:function(){return E$()};function Ui(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var i=S$(this._dom.overlay);i.on("tap",Oa(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){i.destroy()});var n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];In(n).call(n,function(a){i.on(a,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(a){x$(a.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(a){("key"in a?a.key==="Escape":a.keyCode===27)&&r.deactivate()}}MN(Ui.prototype);Ui.current=null;Ui.prototype.destroy=function(){var e,r;this.deactivate();var t=Gw(AF(e=Y0(r=this._cleanupQueue).call(r,0)).call(e)),i;try{for(t.s();!(i=t.n()).done;){var n=i.value;n()}}catch(a){t.e(a)}finally{t.f()}};Ui.prototype.activate=function(){Ui.current&&Ui.current.deactivate(),Ui.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Ui.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Ui.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function x$(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var Av=Ca("Reflect","construct"),Uw=Gt(function(){function e(){}return!(Av(function(){},[],e)instanceof e)}),zw=!Gt(function(){Av(function(){})}),Vw=Uw||zw;tt({target:"Reflect",stat:!0,forced:Vw,sham:Vw},{construct:function(r,t){ba(r),Ye(t);var i=arguments.length<3?r:ba(arguments[2]);if(zw&&!Uw)return Av(r,t,i);if(r==i){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(D_.apply(r,n))}var a=i.prototype,o=Gi(le(a)?a:Object.prototype),s=Function.apply.call(r,o,t);return le(s)?s:o}});var C$=dt.Reflect.construct,O$=C$,kn=O$,I$=ee("Array").entries,P$=I$,Xw=Array.prototype,k$={DOMTokenList:!0,NodeList:!0},R$=function(e){var r=e.entries;return e===Xw||e instanceof Array&&r===Xw.entries||k$.hasOwnProperty(xn(e))?P$:r},D$=R$,A$=ni(function(e){var r=function(t){var i=Object.prototype,n=i.hasOwnProperty,a,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function h(k,O,M){return Object.defineProperty(k,O,{value:M,enumerable:!0,configurable:!0,writable:!0}),k[O]}try{h({},"")}catch(k){h=function(O,M,$){return O[M]=$}}function f(k,O,M,$){var C=O&&O.prototype instanceof _?O:_,ft=Object.create(C.prototype),X=new W($||[]);return ft._invoke=P(k,M,X),ft}t.wrap=f;function c(k,O,M){try{return{type:"normal",arg:k.call(O,M)}}catch($){return{type:"throw",arg:$}}}var d="suspendedStart",v="suspendedYield",g="executing",p="completed",m={};function _(){}function y(){}function w(){}var T={};T[s]=function(){return this};var S=Object.getPrototypeOf,x=S&&S(S(z([])));x&&x!==i&&n.call(x,s)&&(T=x);var E=w.prototype=_.prototype=Object.create(T);y.prototype=E.constructor=w,w.constructor=y,y.displayName=h(w,u,"GeneratorFunction");function I(k){["next","throw","return"].forEach(function(O){h(k,O,function(M){return this._invoke(O,M)})})}t.isGeneratorFunction=function(k){var O=typeof k=="function"&&k.constructor;return O?O===y||(O.displayName||O.name)==="GeneratorFunction":!1},t.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,w):(k.__proto__=w,h(k,u,"GeneratorFunction")),k.prototype=Object.create(E),k},t.awrap=function(k){return{__await:k}};function A(k,O){function M(ft,X,vt,At){var St=c(k[ft],k,X);if(St.type==="throw")At(St.arg);else{var ve=St.arg,ne=ve.value;return ne&&typeof ne=="object"&&n.call(ne,"__await")?O.resolve(ne.__await).then(function(Ne){M("next",Ne,vt,At)},function(Ne){M("throw",Ne,vt,At)}):O.resolve(ne).then(function(Ne){ve.value=Ne,vt(ve)},function(Ne){return M("throw",Ne,vt,At)})}}var $;function C(ft,X){function vt(){return new O(function(At,St){M(ft,X,At,St)})}return $=$?$.then(vt,vt):vt()}this._invoke=C}I(A.prototype),A.prototype[l]=function(){return this},t.AsyncIterator=A,t.async=function(k,O,M,$,C){C===void 0&&(C=Promise);var ft=new A(f(k,O,M,$),C);return t.isGeneratorFunction(O)?ft:ft.next().then(function(X){return X.done?X.value:ft.next()})};function P(k,O,M){var $=d;return function(ft,X){if($===g)throw new Error("Generator is already running");if($===p){if(ft==="throw")throw X;return B()}for(M.method=ft,M.arg=X;;){var vt=M.delegate;if(vt){var At=D(vt,M);if(At){if(At===m)continue;return At}}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if($===d)throw $=p,M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);$=g;var St=c(k,O,M);if(St.type==="normal"){if($=M.done?p:v,St.arg===m)continue;return{value:St.arg,done:M.done}}else St.type==="throw"&&($=p,M.method="throw",M.arg=St.arg)}}}function D(k,O){var M=k.iterator[O.method];if(M===a){if(O.delegate=null,O.method==="throw"){if(k.iterator.return&&(O.method="return",O.arg=a,D(k,O),O.method==="throw"))return m;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var $=c(M,k.iterator,O.arg);if($.type==="throw")return O.method="throw",O.arg=$.arg,O.delegate=null,m;var C=$.arg;if(!C)return O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,m;if(C.done)O[k.resultName]=C.value,O.next=k.nextLoc,O.method!=="return"&&(O.method="next",O.arg=a);else return C;return O.delegate=null,m}I(E),h(E,u,"Generator"),E[s]=function(){return this},E.toString=function(){return"[object Generator]"};function N(k){var O={tryLoc:k[0]};1 in k&&(O.catchLoc=k[1]),2 in k&&(O.finallyLoc=k[2],O.afterLoc=k[3]),this.tryEntries.push(O)}function j(k){var O=k.completion||{};O.type="normal",delete O.arg,k.completion=O}function W(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(N,this),this.reset(!0)}t.keys=function(k){var O=[];for(var M in k)O.push(M);return O.reverse(),function $(){for(;O.length;){var C=O.pop();if(C in k)return $.value=C,$.done=!1,$}return $.done=!0,$}};function z(k){if(k){var O=k[s];if(O)return O.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var M=-1,$=function C(){for(;++M<k.length;)if(n.call(k,M))return C.value=k[M],C.done=!1,C;return C.value=a,C.done=!0,C};return $.next=$}}return{next:B}}t.values=z;function B(){return{value:a,done:!0}}return W.prototype={constructor:W,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(j),!k)for(var O in this)O.charAt(0)==="t"&&n.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=a)},stop:function(){this.done=!0;var k=this.tryEntries[0],O=k.completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var O=this;function M(At,St){return ft.type="throw",ft.arg=k,O.next=At,St&&(O.method="next",O.arg=a),!!St}for(var $=this.tryEntries.length-1;$>=0;--$){var C=this.tryEntries[$],ft=C.completion;if(C.tryLoc==="root")return M("end");if(C.tryLoc<=this.prev){var X=n.call(C,"catchLoc"),vt=n.call(C,"finallyLoc");if(X&&vt){if(this.prev<C.catchLoc)return M(C.catchLoc,!0);if(this.prev<C.finallyLoc)return M(C.finallyLoc)}else if(X){if(this.prev<C.catchLoc)return M(C.catchLoc,!0)}else if(vt){if(this.prev<C.finallyLoc)return M(C.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(k,O){for(var M=this.tryEntries.length-1;M>=0;--M){var $=this.tryEntries[M];if($.tryLoc<=this.prev&&n.call($,"finallyLoc")&&this.prev<$.finallyLoc){var C=$;break}}C&&(k==="break"||k==="continue")&&C.tryLoc<=O&&O<=C.finallyLoc&&(C=null);var ft=C?C.completion:{};return ft.type=k,ft.arg=O,C?(this.method="next",this.next=C.finallyLoc,m):this.complete(ft)},complete:function(k,O){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&O&&(this.next=O),m},finish:function(k){for(var O=this.tryEntries.length-1;O>=0;--O){var M=this.tryEntries[O];if(M.finallyLoc===k)return this.complete(M.completion,M.afterLoc),j(M),m}},catch:function(k){for(var O=this.tryEntries.length-1;O>=0;--O){var M=this.tryEntries[O];if(M.tryLoc===k){var $=M.completion;if($.type==="throw"){var C=$.arg;j(M)}return C}}throw new Error("illegal catch attempt")},delegateYield:function(k,O,M){return this.delegate={iterator:z(k),resultName:O,nextLoc:M},this.method==="next"&&(this.arg=a),m}},t}(e.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}}),ze=A$,M$=rw,Ga=M$,L$=ee("Array").values,F$=L$,Kw=Array.prototype,N$={DOMTokenList:!0,NodeList:!0},$$=function(e){var r=e.values;return e===Kw||e instanceof Array&&r===Kw.values||N$.hasOwnProperty(xn(e))?F$:r},Zw=$$,Mv=[],qw=Mv.sort,G$=Gt(function(){Mv.sort(void 0)}),Y$=Gt(function(){Mv.sort(null)}),j$=bl("sort"),W$=G$||!Y$||!j$;tt({target:"Array",proto:!0,forced:W$},{sort:function(r){return r===void 0?qw.call(je(this)):qw.call(je(this),ba(r))}});var H$=ee("Array").sort,Jw=Array.prototype,B$=function(e){var r=e.sort;return e===Jw||e instanceof Array&&r===Jw.sort?H$:r},U$=B$,Lv=U$,z$=ee("Array").keys,V$=z$,Qw=Array.prototype,X$={DOMTokenList:!0,NodeList:!0},K$=function(e){var r=e.keys;return e===Qw||e instanceof Array&&r===Qw.keys||X$.hasOwnProperty(xn(e))?V$:r},Ya=K$,Z$=No.some,q$=bl("some"),J$=Ni("some");tt({target:"Array",proto:!0,forced:!q$||!J$},{some:function(r){return Z$(this,r,arguments.length>1?arguments[1]:void 0)}});var Q$=ee("Array").some,t1=Array.prototype,t2=function(e){var r=e.some;return e===t1||e instanceof Array&&r===t1.some?Q$:r},e2=t2,r2=e2,i2=!Gt(function(){return Object.isExtensible(Object.preventExtensions({}))}),e1=ni(function(e){var r=wr.f,t=yl("meta"),i=0,n=Object.isExtensible||function(){return!0},a=function(h){r(h,t,{value:{objectID:"O"+ ++i,weakData:{}}})},o=function(h,f){if(!le(h))return typeof h=="symbol"?h:(typeof h=="string"?"S":"P")+h;if(!at(h,t)){if(!n(h))return"F";if(!f)return"E";a(h)}return h[t].objectID},s=function(h,f){if(!at(h,t)){if(!n(h))return!0;if(!f)return!1;a(h)}return h[t].weakData},l=function(h){return i2&&u.REQUIRED&&n(h)&&!at(h,t)&&a(h),h},u=e.exports={REQUIRED:!1,fastKey:o,getWeakData:s,onFreeze:l};Go[t]=!0}),Bl=function(e,r){this.stopped=e,this.result=r},r1=function(e,r,t){var i=t&&t.that,n=!!(t&&t.AS_ENTRIES),a=!!(t&&t.IS_ITERATOR),o=!!(t&&t.INTERRUPTED),s=Ta(r,i,1+n+o),l,u,h,f,c,d,v,g=function(m){return l&&yv(l),new Bl(!0,m)},p=function(m){return n?(Ye(m),o?s(m[0],m[1],g):s(m[0],m[1])):o?s(m,g):s(m)};if(a)l=e;else{if(u=Zh(e),typeof u!="function")throw TypeError("Target is not iterable");if(b0(u)){for(h=0,f=Yr(e.length);f>h;h++)if(c=p(e[h]),c&&c instanceof Bl)return c;return new Bl(!1)}l=u.call(e)}for(d=l.next;!(v=d.call(l)).done;){try{c=p(v.value)}catch(m){throw yv(l),m}if(typeof c=="object"&&c&&c instanceof Bl)return c}return new Bl(!1)},i1=function(e,r,t){if(!(e instanceof r))throw TypeError("Incorrect "+(t?t+" ":"")+"invocation");return e},n2=wr.f,a2=No.forEach,o2=ai.set,s2=ai.getterFor,n1=function(e,r,t){var i=e.indexOf("Map")!==-1,n=e.indexOf("Weak")!==-1,a=i?"set":"add",o=Ht[e],s=o&&o.prototype,l={},u;if(!Tt||typeof o!="function"||!(n||s.forEach&&!Gt(function(){new o().entries().next()})))u=t.getConstructor(r,e,i,a),e1.REQUIRED=!0;else{u=r(function(f,c){o2(i1(f,u,e),{type:e,collection:new o}),c!=null&&r1(c,f[a],{that:f,AS_ENTRIES:i})});var h=s2(e);a2(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(f){var c=f=="add"||f=="set";f in s&&!(n&&f=="clear")&&Gr(u.prototype,f,function(d,v){var g=h(this).collection;if(!c&&n&&!le(d))return f=="get"?void 0:!1;var p=g[f](d===0?0:d,v);return c?this:p})}),n||n2(u.prototype,"size",{configurable:!0,get:function(){return h(this).collection.size}})}return El(u,e,!1,!0),l[e]=u,tt({global:!0,forced:!0},l),n||t.setStrong(u,e,i),u},a1=function(e,r,t){for(var i in r)t&&t.unsafe&&e[i]?e[i]=r[i]:jh(e,i,r[i],t);return e},o1=te("species"),l2=function(e){var r=Ca(e),t=wr.f;Tt&&r&&!r[o1]&&t(r,o1,{configurable:!0,get:function(){return this}})},u2=wr.f,s1=e1.fastKey,l1=ai.set,Fv=ai.getterFor,u1={getConstructor:function(e,r,t,i){var n=e(function(l,u){i1(l,n,r),l1(l,{type:r,index:Gi(null),first:void 0,last:void 0,size:0}),Tt||(l.size=0),u!=null&&r1(u,l[i],{that:l,AS_ENTRIES:t})}),a=Fv(r),o=function(l,u,h){var f=a(l),c=s(l,u),d,v;return c?c.value=h:(f.last=c={index:v=s1(u,!0),key:u,value:h,previous:d=f.last,next:void 0,removed:!1},f.first||(f.first=c),d&&(d.next=c),Tt?f.size++:l.size++,v!=="F"&&(f.index[v]=c)),l},s=function(l,u){var h=a(l),f=s1(u),c;if(f!=="F")return h.index[f];for(c=h.first;c;c=c.next)if(c.key==u)return c};return a1(n.prototype,{clear:function(){for(var u=this,h=a(u),f=h.index,c=h.first;c;)c.removed=!0,c.previous&&(c.previous=c.previous.next=void 0),delete f[c.index],c=c.next;h.first=h.last=void 0,Tt?h.size=0:u.size=0},delete:function(l){var u=this,h=a(u),f=s(u,l);if(f){var c=f.next,d=f.previous;delete h.index[f.index],f.removed=!0,d&&(d.next=c),c&&(c.previous=d),h.first==f&&(h.first=c),h.last==f&&(h.last=d),Tt?h.size--:u.size--}return!!f},forEach:function(u){for(var h=a(this),f=Ta(u,arguments.length>1?arguments[1]:void 0,3),c;c=c?c.next:h.first;)for(f(c.value,c.key,this);c&&c.removed;)c=c.previous},has:function(u){return!!s(this,u)}}),a1(n.prototype,t?{get:function(u){var h=s(this,u);return h&&h.value},set:function(u,h){return o(this,u===0?0:u,h)}}:{add:function(u){return o(this,u=u===0?0:u,u)}}),Tt&&u2(n.prototype,"size",{get:function(){return a(this).size}}),n},setStrong:function(e,r,t){var i=r+" Iterator",n=Fv(r),a=Fv(i);pv(e,r,function(o,s){l1(this,{type:i,target:o,state:n(o),kind:s,last:void 0})},function(){for(var o=a(this),s=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,{value:void 0,done:!0}):s=="keys"?{value:l.key,done:!1}:s=="values"?{value:l.value,done:!1}:{value:[l.key,l.value],done:!1}},t?"entries":"values",!t,!0),l2(r)}};n1("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},u1);var h2=dt.Map,f2=h2,h1=f2,c2=P0,d2=c2;tt({target:"Object",stat:!0},{setPrototypeOf:dL});var v2=dt.Object.setPrototypeOf,p2=v2,f1=p2,g2=ni(function(e){function r(t,i){return e.exports=r=f1||function(a,o){return a.__proto__=o,a},r(t,i)}e.exports=r});function m2(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=d2(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&g2(e,r)}var c1=m2;function y2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var d1=y2;function _2(e,r){return r&&(br(r)==="object"||typeof r=="function")?r:d1(e)}var v1=_2,w2=hF,p1=w2,vf=ni(function(e){function r(t){return e.exports=r=f1?p1:function(n){return n.__proto__||p1(n)},r(t)}e.exports=r}),pf,b2=new Uint8Array(16);function T2(){if(!pf&&(pf=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!pf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pf(b2)}var E2=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function S2(e){return typeof e=="string"&&E2.test(e)}var _e=[];for(var Nv=0;Nv<256;++Nv)_e.push((Nv+256).toString(16).substr(1));function x2(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(_e[e[r+0]]+_e[e[r+1]]+_e[e[r+2]]+_e[e[r+3]]+"-"+_e[e[r+4]]+_e[e[r+5]]+"-"+_e[e[r+6]]+_e[e[r+7]]+"-"+_e[e[r+8]]+_e[e[r+9]]+"-"+_e[e[r+10]]+_e[e[r+11]]+_e[e[r+12]]+_e[e[r+13]]+_e[e[r+14]]+_e[e[r+15]]).toLowerCase();if(!S2(t))throw TypeError("Stringified UUID is invalid");return t}function C2(e,r,t){e=e||{};var i=e.random||(e.rng||T2)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,r){t=t||0;for(var n=0;n<16;++n)r[t+n]=i[n];return r}return x2(i)}function $v(e){return typeof e=="string"||typeof e=="number"}var O2=function(){function e(r){Ia(this,e),this._queue=[],this._timeout=null,this._extended=null,this.delay=null,this.max=1/0,this.setOptions(r)}return Pa(e,[{key:"setOptions",value:function(t){t&&typeof t.delay!="undefined"&&(this.delay=t.delay),t&&typeof t.max!="undefined"&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,i=this._extended.methods,n=0;n<i.length;n++){var a=i[n];a.original?t[a.name]=a.original:delete t[a.name]}this._extended=null}}},{key:"replace",value:function(t,i){var n=this,a=t[i];if(!a)throw new Error("Method "+i+" undefined");t[i]=function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];n.queue({args:s,fn:a,context:this})}}},{key:"queue",value:function(t){typeof t=="function"?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=GL(function(){t.flush()},this.delay))}},{key:"flush",value:function(){var t,i;In(t=Y0(i=this._queue).call(i,0)).call(t,function(n){n.fn.apply(n.context||n.fn,n.args||[])})}}],[{key:"extend",value:function(t,i){var n=new e(i);if(t.flush!==void 0)throw new Error("Target object already has a property flush");t.flush=function(){n.flush()};var a=[{name:"flush",original:void 0}];if(i&&i.replace)for(var o=0;o<i.replace.length;o++){var s=i.replace[o];a.push({name:s,original:t[s]}),n.replace(t,s)}return n._extended={object:t,methods:a},n}}]),e}(),g1=function(){function e(){Ia(this,e),this._subscribers={"*":[],add:[],remove:[],update:[]},this.subscribe=e.prototype.on,this.unsubscribe=e.prototype.off}return Pa(e,[{key:"_trigger",value:function(t,i,n){var a,o;if(t==="*")throw new Error("Cannot trigger event *");In(a=rf(o=[]).call(o,Re(this._subscribers[t]),Re(this._subscribers["*"]))).call(a,function(s){s(t,i,n!=null?n:null)})}},{key:"on",value:function(t,i){typeof i=="function"&&this._subscribers[t].push(i)}},{key:"off",value:function(t,i){var n;this._subscribers[t]=ge(n=this._subscribers[t]).call(n,function(a){return a!==i})}}]),e}();n1("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},u1);var I2=dt.Set,P2=I2,gf=P2;function ui(e,r){var t;if(typeof Rl=="undefined"||qh(e)==null){if(ke(e)||(t=k2(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=On(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function k2(e,r){var t;if(!!e){if(typeof e=="string")return m1(e,r);var i=kl(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Jh(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return m1(e,r)}}function m1(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var y1=function(){function e(r){Ia(this,e),this._pairs=r}return Pa(e,[{key:Ga,value:ze.mark(function r(){var t,i,n,a,o;return ze.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=ui(this._pairs),l.prev=1,t.s();case 3:if((i=t.n()).done){l.next=9;break}return n=Be(i.value,2),a=n[0],o=n[1],l.next=7,[a,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"entries",value:ze.mark(function r(){var t,i,n,a,o;return ze.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=ui(this._pairs),l.prev=1,t.s();case 3:if((i=t.n()).done){l.next=9;break}return n=Be(i.value,2),a=n[0],o=n[1],l.next=7,[a,o];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),t.e(l.t0);case 14:return l.prev=14,t.f(),l.finish(14);case 17:case"end":return l.stop()}},r,this,[[1,11,14,17]])})},{key:"keys",value:ze.mark(function r(){var t,i,n,a;return ze.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t=ui(this._pairs),s.prev=1,t.s();case 3:if((i=t.n()).done){s.next=9;break}return n=Be(i.value,1),a=n[0],s.next=7,a;case 7:s.next=3;break;case 9:s.next=14;break;case 11:s.prev=11,s.t0=s.catch(1),t.e(s.t0);case 14:return s.prev=14,t.f(),s.finish(14);case 17:case"end":return s.stop()}},r,this,[[1,11,14,17]])})},{key:"values",value:ze.mark(function r(){var t,i,n,a;return ze.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t=ui(this._pairs),s.prev=1,t.s();case 3:if((i=t.n()).done){s.next=9;break}return n=Be(i.value,2),a=n[1],s.next=7,a;case 7:s.next=3;break;case 9:s.next=14;break;case 11:s.prev=11,s.t0=s.catch(1),t.e(s.t0);case 14:return s.prev=14,t.f(),s.finish(14);case 17:case"end":return s.stop()}},r,this,[[1,11,14,17]])})},{key:"toIdArray",value:function(){var t;return er(t=Re(this._pairs)).call(t,function(i){return i[0]})}},{key:"toItemArray",value:function(){var t;return er(t=Re(this._pairs)).call(t,function(i){return i[1]})}},{key:"toEntryArray",value:function(){return Re(this._pairs)}},{key:"toObjectMap",value:function(){var t=XL(null),i=ui(this._pairs),n;try{for(i.s();!(n=i.n()).done;){var a=Be(n.value,2),o=a[0],s=a[1];t[o]=s}}catch(l){i.e(l)}finally{i.f()}return t}},{key:"toMap",value:function(){return new h1(this._pairs)}},{key:"toIdSet",value:function(){return new gf(this.toIdArray())}},{key:"toItemSet",value:function(){return new gf(this.toItemArray())}},{key:"cache",value:function(){return new e(Re(this._pairs))}},{key:"distinct",value:function(t){var i=new gf,n=ui(this._pairs),a;try{for(n.s();!(a=n.n()).done;){var o=Be(a.value,2),s=o[0],l=o[1];i.add(t(l,s))}}catch(u){n.e(u)}finally{n.f()}return i}},{key:"filter",value:function(t){var i=this._pairs;return new e(Ra({},Ga,ze.mark(function n(){var a,o,s,l,u;return ze.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=ui(i),f.prev=1,a.s();case 3:if((o=a.n()).done){f.next=10;break}if(s=Be(o.value,2),l=s[0],u=s[1],!t(u,l)){f.next=8;break}return f.next=8,[l,u];case 8:f.next=3;break;case 10:f.next=15;break;case 12:f.prev=12,f.t0=f.catch(1),a.e(f.t0);case 15:return f.prev=15,a.f(),f.finish(15);case 18:case"end":return f.stop()}},n,null,[[1,12,15,18]])})))}},{key:"forEach",value:function(t){var i=ui(this._pairs),n;try{for(i.s();!(n=i.n()).done;){var a=Be(n.value,2),o=a[0],s=a[1];t(s,o)}}catch(l){i.e(l)}finally{i.f()}}},{key:"map",value:function(t){var i=this._pairs;return new e(Ra({},Ga,ze.mark(function n(){var a,o,s,l,u;return ze.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=ui(i),f.prev=1,a.s();case 3:if((o=a.n()).done){f.next=9;break}return s=Be(o.value,2),l=s[0],u=s[1],f.next=7,[l,t(u,l)];case 7:f.next=3;break;case 9:f.next=14;break;case 11:f.prev=11,f.t0=f.catch(1),a.e(f.t0);case 14:return f.prev=14,a.f(),f.finish(14);case 17:case"end":return f.stop()}},n,null,[[1,11,14,17]])})))}},{key:"max",value:function(t){var i=On(this._pairs),n=i.next();if(n.done)return null;for(var a=n.value[1],o=t(n.value[1],n.value[0]);!(n=i.next()).done;){var s=Be(n.value,2),l=s[0],u=s[1],h=t(u,l);h>o&&(o=h,a=u)}return a}},{key:"min",value:function(t){var i=On(this._pairs),n=i.next();if(n.done)return null;for(var a=n.value[1],o=t(n.value[1],n.value[0]);!(n=i.next()).done;){var s=Be(n.value,2),l=s[0],u=s[1],h=t(u,l);h<o&&(o=h,a=u)}return a}},{key:"reduce",value:function(t,i){var n=ui(this._pairs),a;try{for(n.s();!(a=n.n()).done;){var o=Be(a.value,2),s=o[0],l=o[1];i=t(i,l,s)}}catch(u){n.e(u)}finally{n.f()}return i}},{key:"sort",value:function(t){var i=this;return new e(Ra({},Ga,function(){var n;return On(Lv(n=Re(i._pairs)).call(n,function(a,o){var s=Be(a,2),l=s[0],u=s[1],h=Be(o,2),f=h[0],c=h[1];return t(u,c,l,f)}))}))}}]),e}();function _1(e,r){var t=bv(e);if(h0){var i=h0(e);r&&(i=ge(i).call(i,function(n){return B_(e,n).enumerable})),t.push.apply(t,i)}return t}function w1(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){var i;In(i=_1(Object(t),!0)).call(i,function(a){Ra(e,a,t[a])})}else if(W_)TM(e,W_(t));else{var n;In(n=_1(Object(t))).call(n,function(a){N_(e,a,B_(t,a))})}}return e}function Gv(e,r){var t;if(typeof Rl=="undefined"||qh(e)==null){if(ke(e)||(t=R2(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=On(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function R2(e,r){var t;if(!!e){if(typeof e=="string")return b1(e,r);var i=kl(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Jh(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return b1(e,r)}}function b1(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function D2(e){var r=A2();return function(){var i=vf(e),n;if(r){var a=vf(this).constructor;n=kn(i,arguments,a)}else n=i.apply(this,arguments);return v1(this,n)}}function A2(){if(typeof Reflect=="undefined"||!kn||kn.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(kn(Date,[],function(){})),!0}catch(e){return!1}}function M2(e,r){return e[r]==null&&(e[r]=C2()),e}var Ko=function(e){c1(t,e);var r=D2(t);function t(i,n){var a;return Ia(this,t),a=r.call(this),a._queue=null,i&&!ke(i)&&(n=i,i=[]),a._options=n||{},a._data=new h1,a.length=0,a._idProp=a._options.fieldId||"id",i&&i.length&&a.add(i),a.setOptions(n),a}return Pa(t,[{key:"setOptions",value:function(n){n&&n.queue!==void 0&&(n.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=O2.extend(this,{replace:["add","update","remove"]})),n.queue&&br(n.queue)==="object"&&this._queue.setOptions(n.queue)))}},{key:"add",value:function(n,a){var o=this,s=[],l;if(ke(n)){var u=er(n).call(n,function(c){return c[o._idProp]});if(r2(u).call(u,function(c){return o._data.has(c)}))throw new Error("A duplicate id was found in the parameter array.");for(var h=0,f=n.length;h<f;h++)l=this._addItem(n[h]),s.push(l)}else if(n&&br(n)==="object")l=this._addItem(n),s.push(l);else throw new Error("Unknown dataType");return s.length&&this._trigger("add",{items:s},a),s}},{key:"update",value:function(n,a){var o=this,s=[],l=[],u=[],h=[],f=this._idProp,c=function(m){var _=m[f];if(_!=null&&o._data.has(_)){var y=m,w=$0({},o._data.get(_)),T=o._updateItem(y);l.push(T),h.push(y),u.push(w)}else{var S=o._addItem(m);s.push(S)}};if(ke(n))for(var d=0,v=n.length;d<v;d++)n[d]&&br(n[d])==="object"?c(n[d]):console.warn("Ignoring input item, which is not an object at index "+d);else if(n&&br(n)==="object")c(n);else throw new Error("Unknown dataType");if(s.length&&this._trigger("add",{items:s},a),l.length){var g={items:l,oldData:u,data:h};this._trigger("update",g,a)}return rf(s).call(s,l)}},{key:"updateOnly",value:function(n,a){var o,s=this;ke(n)||(n=[n]);var l=er(o=er(n).call(n,function(h){var f=s._data.get(h[s._idProp]);if(f==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:f,update:h}})).call(o,function(h){var f=h.oldData,c=h.update,d=f[s._idProp],v=T$(f,c);return s._data.set(d,v),{id:d,oldData:f,updatedData:v}});if(l.length){var u={items:er(l).call(l,function(h){return h.id}),oldData:er(l).call(l,function(h){return h.oldData}),data:er(l).call(l,function(h){return h.updatedData})};return this._trigger("update",u,a),u.items}else return[]}},{key:"get",value:function(n,a){var o=void 0,s=void 0,l=void 0;$v(n)?(o=n,l=a):ke(n)?(s=n,l=a):l=n;var u=l&&l.returnType==="Object"?"Object":"Array",h=l&&ge(l),f=[],c=void 0,d=void 0,v=void 0;if(o!=null)c=this._data.get(o),c&&h&&!h(c)&&(c=void 0);else if(s!=null)for(var g=0,p=s.length;g<p;g++)c=this._data.get(s[g]),c!=null&&(!h||h(c))&&f.push(c);else{var m;d=Re(Ya(m=this._data).call(m));for(var _=0,y=d.length;_<y;_++)v=d[_],c=this._data.get(v),c!=null&&(!h||h(c))&&f.push(c)}if(l&&l.order&&o==null&&this._sort(f,l.order),l&&l.fields){var w=l.fields;if(o!=null&&c!=null)c=this._filterFields(c,w);else for(var T=0,S=f.length;T<S;T++)f[T]=this._filterFields(f[T],w)}if(u=="Object"){for(var x={},E=0,I=f.length;E<I;E++){var A=f[E],P=A[this._idProp];x[P]=A}return x}else if(o!=null){var D;return(D=c)!==null&&D!==void 0?D:null}else return f}},{key:"getIds",value:function(n){var a=this._data,o=n&&ge(n),s=n&&n.order,l=Re(Ya(a).call(a)),u=[];if(o)if(s){for(var h=[],f=0,c=l.length;f<c;f++){var d=l[f],v=this._data.get(d);v!=null&&o(v)&&h.push(v)}this._sort(h,s);for(var g=0,p=h.length;g<p;g++)u.push(h[g][this._idProp])}else for(var m=0,_=l.length;m<_;m++){var y=l[m],w=this._data.get(y);w!=null&&o(w)&&u.push(w[this._idProp])}else if(s){for(var T=[],S=0,x=l.length;S<x;S++){var E=l[S];T.push(a.get(E))}this._sort(T,s);for(var I=0,A=T.length;I<A;I++)u.push(T[I][this._idProp])}else for(var P=0,D=l.length;P<D;P++){var N=l[P],j=a.get(N);j!=null&&u.push(j[this._idProp])}return u}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(n,a){var o=a&&ge(a),s=this._data,l=Re(Ya(s).call(s));if(a&&a.order)for(var u=this.get(a),h=0,f=u.length;h<f;h++){var c=u[h],d=c[this._idProp];n(c,d)}else for(var v=0,g=l.length;v<g;v++){var p=l[v],m=this._data.get(p);m!=null&&(!o||o(m))&&n(m,p)}}},{key:"map",value:function(n,a){for(var o=a&&ge(a),s=[],l=this._data,u=Re(Ya(l).call(l)),h=0,f=u.length;h<f;h++){var c=u[h],d=this._data.get(c);d!=null&&(!o||o(d))&&s.push(n(d,c))}return a&&a.order&&this._sort(s,a.order),s}},{key:"_filterFields",value:function(n,a){var o;return n&&k_(o=ke(a)?a:bv(a)).call(o,function(s,l){return s[l]=n[l],s},{})}},{key:"_sort",value:function(n,a){if(typeof a=="string"){var o=a;Lv(n).call(n,function(s,l){var u=s[o],h=l[o];return u>h?1:u<h?-1:0})}else if(typeof a=="function")Lv(n).call(n,a);else throw new TypeError("Order must be a function or a string")}},{key:"remove",value:function(n,a){for(var o=[],s=[],l=ke(n)?n:[n],u=0,h=l.length;u<h;u++){var f=this._remove(l[u]);if(f){var c=f[this._idProp];c!=null&&(o.push(c),s.push(f))}}return o.length&&this._trigger("remove",{items:o,oldData:s},a),o}},{key:"_remove",value:function(n){var a;if($v(n)?a=n:n&&br(n)==="object"&&(a=n[this._idProp]),a!=null&&this._data.has(a)){var o=this._data.get(a)||null;return this._data.delete(a),--this.length,o}return null}},{key:"clear",value:function(n){for(var a,o=Re(Ya(a=this._data).call(a)),s=[],l=0,u=o.length;l<u;l++)s.push(this._data.get(o[l]));return this._data.clear(),this.length=0,this._trigger("remove",{items:o,oldData:s},n),o}},{key:"max",value:function(n){var a,o=null,s=null,l=Gv(Zw(a=this._data).call(a)),u;try{for(l.s();!(u=l.n()).done;){var h=u.value,f=h[n];typeof f=="number"&&(s==null||f>s)&&(o=h,s=f)}}catch(c){l.e(c)}finally{l.f()}return o||null}},{key:"min",value:function(n){var a,o=null,s=null,l=Gv(Zw(a=this._data).call(a)),u;try{for(l.s();!(u=l.n()).done;){var h=u.value,f=h[n];typeof f=="number"&&(s==null||f<s)&&(o=h,s=f)}}catch(c){l.e(c)}finally{l.f()}return o||null}},{key:"distinct",value:function(n){for(var a=this._data,o=Re(Ya(a).call(a)),s=[],l=0,u=0,h=o.length;u<h;u++){for(var f=o[u],c=a.get(f),d=c[n],v=!1,g=0;g<l;g++)if(s[g]==d){v=!0;break}!v&&d!==void 0&&(s[l]=d,l++)}return s}},{key:"_addItem",value:function(n){var a=M2(n,this._idProp),o=a[this._idProp];if(this._data.has(o))throw new Error("Cannot add item: item with id "+o+" already exists");return this._data.set(o,a),++this.length,o}},{key:"_updateItem",value:function(n){var a=n[this._idProp];if(a==null)throw new Error("Cannot update item: item has no id (item: "+UL(n)+")");var o=this._data.get(a);if(!o)throw new Error("Cannot update item: no item with id "+a+" found");return this._data.set(a,w1(w1({},o),n)),a}},{key:"stream",value:function(n){if(n){var a=this._data;return new y1(Ra({},Ga,ze.mark(function s(){var l,u,h,f;return ze.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:l=Gv(n),d.prev=1,l.s();case 3:if((u=l.n()).done){d.next=11;break}if(h=u.value,f=a.get(h),f==null){d.next=9;break}return d.next=9,[h,f];case 9:d.next=3;break;case 11:d.next=16;break;case 13:d.prev=13,d.t0=d.catch(1),l.e(d.t0);case 16:return d.prev=16,l.f(),d.finish(16);case 19:case"end":return d.stop()}},s,null,[[1,13,16,19]])})))}else{var o;return new y1(Ra({},Ga,Oa(o=D$(this._data)).call(o,this._data)))}}},{key:"idProp",get:function(){return this._idProp}}]),t}(g1);function L2(e,r){var t;if(typeof Rl=="undefined"||qh(e)==null){if(ke(e)||(t=F2(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=On(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function F2(e,r){var t;if(!!e){if(typeof e=="string")return T1(e,r);var i=kl(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Jh(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return T1(e,r)}}function T1(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function N2(e){var r=$2();return function(){var i=vf(e),n;if(r){var a=vf(this).constructor;n=kn(i,arguments,a)}else n=i.apply(this,arguments);return v1(this,n)}}function $2(){if(typeof Reflect=="undefined"||!kn||kn.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(kn(Date,[],function(){})),!0}catch(e){return!1}}var G2=function(e){c1(t,e);var r=N2(t);function t(i,n){var a,o;return Ia(this,t),o=r.call(this),o.length=0,o._ids=new gf,o._options=n||{},o._listener=Oa(a=o._onEvent).call(a,d1(o)),o.setData(i),o}return Pa(t,[{key:"setData",value:function(n){if(this._data){this._data.off&&this._data.off("*",this._listener);var a=this._data.getIds({filter:ge(this._options)}),o=this._data.get(a);this._ids.clear(),this.length=0,this._trigger("remove",{items:a,oldData:o})}if(n!=null){this._data=n;for(var s=this._data.getIds({filter:ge(this._options)}),l=0,u=s.length;l<u;l++){var h=s[l];this._ids.add(h)}this.length=s.length,this._trigger("add",{items:s})}else this._data=new Ko;this._data.on&&this._data.on("*",this._listener)}},{key:"refresh",value:function(){for(var n=this._data.getIds({filter:ge(this._options)}),a=Re(this._ids),o={},s=[],l=[],u=[],h=0,f=n.length;h<f;h++){var c=n[h];o[c]=!0,this._ids.has(c)||(s.push(c),this._ids.add(c))}for(var d=0,v=a.length;d<v;d++){var g=a[d],p=this._data.get(g);p==null?console.error("If you see this, report it please."):o[g]||(l.push(g),u.push(p),this._ids.delete(g))}this.length+=s.length-l.length,s.length&&this._trigger("add",{items:s}),l.length&&this._trigger("remove",{items:l,oldData:u})}},{key:"get",value:function(n,a){if(this._data==null)return null;var o=null,s;$v(n)||ke(n)?(o=n,s=a):s=n;var l=$0({},this._options,s),u=ge(this._options),h=s&&ge(s);return u&&h&&(l.filter=function(f){return u(f)&&h(f)}),o==null?this._data.get(l):this._data.get(o,l)}},{key:"getIds",value:function(n){if(this._data.length){var a=ge(this._options),o=n!=null?ge(n):null,s;return o?a?s=function(u){return a(u)&&o(u)}:s=o:s=a,this._data.getIds({filter:s,order:n&&n.order})}else return[]}},{key:"forEach",value:function(n,a){if(this._data){var o,s=ge(this._options),l=a&&ge(a),u;l?s?u=function(f){return s(f)&&l(f)}:u=l:u=s,In(o=this._data).call(o,n,{filter:u,order:a&&a.order})}}},{key:"map",value:function(n,a){if(this._data){var o,s=ge(this._options),l=a&&ge(a),u;return l?s?u=function(f){return s(f)&&l(f)}:u=l:u=s,er(o=this._data).call(o,n,{filter:u,order:a&&a.order})}else return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"stream",value:function(n){var a;return this._data.stream(n||Ra({},Ga,Oa(a=Ya(this._ids)).call(a,this._ids)))}},{key:"dispose",value:function(){var n;(n=this._data)!==null&&n!==void 0&&n.off&&this._data.off("*",this._listener);var a="This data view has already been disposed of.",o={get:function(){throw new Error(a)},set:function(){throw new Error(a)},configurable:!1},s=L2(iw(t.prototype)),l;try{for(s.s();!(l=s.n()).done;){var u=l.value;N_(this,u,o)}}catch(h){s.e(h)}finally{s.f()}}},{key:"_onEvent",value:function(n,a,o){if(!(!a||!a.items||!this._data)){var s=a.items,l=[],u=[],h=[],f=[],c=[],d=[];switch(n){case"add":for(var v=0,g=s.length;v<g;v++){var p=s[v],m=this.get(p);m&&(this._ids.add(p),l.push(p))}break;case"update":for(var _=0,y=s.length;_<y;_++){var w=s[_],T=this.get(w);T?this._ids.has(w)?(u.push(w),c.push(a.data[_]),f.push(a.oldData[_])):(this._ids.add(w),l.push(w)):this._ids.has(w)&&(this._ids.delete(w),h.push(w),d.push(a.oldData[_]))}break;case"remove":for(var S=0,x=s.length;S<x;S++){var E=s[S];this._ids.has(E)&&(this._ids.delete(E),h.push(E),d.push(a.oldData[S]))}break}this.length+=l.length-h.length,l.length&&this._trigger("add",{items:l},o),u.length&&this._trigger("update",{items:u,oldData:f,data:c},o),h.length&&this._trigger("remove",{items:h,oldData:d},o)}}},{key:"idProp",get:function(){return this.getDataSet().idProp}}]),t}(g1);function Y2(e,r){return br(r)==="object"&&r!==null&&e===r.idProp&&typeof r.add=="function"&&typeof r.clear=="function"&&typeof r.distinct=="function"&&typeof In(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof er(r)=="function"&&typeof r.max=="function"&&typeof r.min=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.remove=="function"&&typeof r.setOptions=="function"&&typeof r.stream=="function"&&typeof r.update=="function"&&typeof r.updateOnly=="function"}function zi(e,r){return br(r)==="object"&&r!==null&&e===r.idProp&&typeof In(r)=="function"&&typeof r.get=="function"&&typeof r.getDataSet=="function"&&typeof r.getIds=="function"&&typeof r.length=="number"&&typeof er(r)=="function"&&typeof r.off=="function"&&typeof r.on=="function"&&typeof r.stream=="function"&&Y2(e,r.getDataSet())}//! moment.js
//! version : 2.29.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var E1;function F(){return E1.apply(null,arguments)}function j2(e){E1=e}function Hr(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function ja(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function _t(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function Yv(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var r;for(r in e)if(_t(e,r))return!1;return!0}function Ve(e){return e===void 0}function Vi(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Ul(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function S1(e,r){var t=[],i;for(i=0;i<e.length;++i)t.push(r(e[i],i));return t}function Rn(e,r){for(var t in r)_t(r,t)&&(e[t]=r[t]);return _t(r,"toString")&&(e.toString=r.toString),_t(r,"valueOf")&&(e.valueOf=r.valueOf),e}function hi(e,r,t,i){return Z1(e,r,t,i,!0).utc()}function W2(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function nt(e){return e._pf==null&&(e._pf=W2()),e._pf}var jv;Array.prototype.some?jv=Array.prototype.some:jv=function(e){var r=Object(this),t=r.length>>>0,i;for(i=0;i<t;i++)if(i in r&&e.call(this,r[i],i,r))return!0;return!1};function Wv(e){if(e._isValid==null){var r=nt(e),t=jv.call(r.parsedDateParts,function(n){return n!=null}),i=!isNaN(e._d.getTime())&&r.overflow<0&&!r.empty&&!r.invalidEra&&!r.invalidMonth&&!r.invalidWeekday&&!r.weekdayMismatch&&!r.nullInput&&!r.invalidFormat&&!r.userInvalidated&&(!r.meridiem||r.meridiem&&t);if(e._strict&&(i=i&&r.charsLeftOver===0&&r.unusedTokens.length===0&&r.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=i;else return i}return e._isValid}function mf(e){var r=hi(NaN);return e!=null?Rn(nt(r),e):nt(r).userInvalidated=!0,r}var Hv=F.momentProperties=[],Bv=!1;function Uv(e,r){var t,i,n;if(Ve(r._isAMomentObject)||(e._isAMomentObject=r._isAMomentObject),Ve(r._i)||(e._i=r._i),Ve(r._f)||(e._f=r._f),Ve(r._l)||(e._l=r._l),Ve(r._strict)||(e._strict=r._strict),Ve(r._tzm)||(e._tzm=r._tzm),Ve(r._isUTC)||(e._isUTC=r._isUTC),Ve(r._offset)||(e._offset=r._offset),Ve(r._pf)||(e._pf=nt(r)),Ve(r._locale)||(e._locale=r._locale),Hv.length>0)for(t=0;t<Hv.length;t++)i=Hv[t],n=r[i],Ve(n)||(e[i]=n);return e}function zl(e){Uv(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Bv===!1&&(Bv=!0,F.updateOffset(this),Bv=!1)}function Br(e){return e instanceof zl||e!=null&&e._isAMomentObject!=null}function x1(e){F.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function Sr(e,r){var t=!0;return Rn(function(){if(F.deprecationHandler!=null&&F.deprecationHandler(null,e),t){var i=[],n,a,o;for(a=0;a<arguments.length;a++){if(n="",typeof arguments[a]=="object"){n+=`
[`+a+"] ";for(o in arguments[0])_t(arguments[0],o)&&(n+=o+": "+arguments[0][o]+", ");n=n.slice(0,-2)}else n=arguments[a];i.push(n)}x1(e+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),t=!1}return r.apply(this,arguments)},r)}var C1={};function O1(e,r){F.deprecationHandler!=null&&F.deprecationHandler(e,r),C1[e]||(x1(r),C1[e]=!0)}F.suppressDeprecationWarnings=!1;F.deprecationHandler=null;function fi(e){return typeof Function!="undefined"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function H2(e){var r,t;for(t in e)_t(e,t)&&(r=e[t],fi(r)?this[t]=r:this["_"+t]=r);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function zv(e,r){var t=Rn({},e),i;for(i in r)_t(r,i)&&(ja(e[i])&&ja(r[i])?(t[i]={},Rn(t[i],e[i]),Rn(t[i],r[i])):r[i]!=null?t[i]=r[i]:delete t[i]);for(i in e)_t(e,i)&&!_t(r,i)&&ja(e[i])&&(t[i]=Rn({},t[i]));return t}function Vv(e){e!=null&&this.set(e)}var Xv;Object.keys?Xv=Object.keys:Xv=function(e){var r,t=[];for(r in e)_t(e,r)&&t.push(r);return t};var B2={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function U2(e,r,t){var i=this._calendar[e]||this._calendar.sameElse;return fi(i)?i.call(r,t):i}function ci(e,r,t){var i=""+Math.abs(e),n=r-i.length,a=e>=0;return(a?t?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+i}var Kv=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,yf=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Zv={},Zo={};function U(e,r,t,i){var n=i;typeof i=="string"&&(n=function(){return this[i]()}),e&&(Zo[e]=n),r&&(Zo[r[0]]=function(){return ci(n.apply(this,arguments),r[1],r[2])}),t&&(Zo[t]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function z2(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V2(e){var r=e.match(Kv),t,i;for(t=0,i=r.length;t<i;t++)Zo[r[t]]?r[t]=Zo[r[t]]:r[t]=z2(r[t]);return function(n){var a="",o;for(o=0;o<i;o++)a+=fi(r[o])?r[o].call(n,e):r[o];return a}}function _f(e,r){return e.isValid()?(r=I1(r,e.localeData()),Zv[r]=Zv[r]||V2(r),Zv[r](e)):e.localeData().invalidDate()}function I1(e,r){var t=5;function i(n){return r.longDateFormat(n)||n}for(yf.lastIndex=0;t>=0&&yf.test(e);)e=e.replace(yf,i),yf.lastIndex=0,t-=1;return e}var X2={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function K2(e){var r=this._longDateFormat[e],t=this._longDateFormat[e.toUpperCase()];return r||!t?r:(this._longDateFormat[e]=t.match(Kv).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[e])}var Z2="Invalid date";function q2(){return this._invalidDate}var J2="%d",Q2=/\d{1,2}/;function tG(e){return this._ordinal.replace("%d",e)}var eG={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function rG(e,r,t,i){var n=this._relativeTime[t];return fi(n)?n(e,r,t,i):n.replace(/%d/i,e)}function iG(e,r){var t=this._relativeTime[e>0?"future":"past"];return fi(t)?t(r):t.replace(/%s/i,r)}var Vl={};function Se(e,r){var t=e.toLowerCase();Vl[t]=Vl[t+"s"]=Vl[r]=e}function xr(e){return typeof e=="string"?Vl[e]||Vl[e.toLowerCase()]:void 0}function qv(e){var r={},t,i;for(i in e)_t(e,i)&&(t=xr(i),t&&(r[t]=e[i]));return r}var P1={};function xe(e,r){P1[e]=r}function nG(e){var r=[],t;for(t in e)_t(e,t)&&r.push({unit:t,priority:P1[t]});return r.sort(function(i,n){return i.priority-n.priority}),r}function wf(e){return e%4==0&&e%100!=0||e%400==0}function Cr(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function st(e){var r=+e,t=0;return r!==0&&isFinite(r)&&(t=Cr(r)),t}function qo(e,r){return function(t){return t!=null?(k1(this,e,t),F.updateOffset(this,r),this):bf(this,e)}}function bf(e,r){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+r]():NaN}function k1(e,r,t){e.isValid()&&!isNaN(t)&&(r==="FullYear"&&wf(e.year())&&e.month()===1&&e.date()===29?(t=st(t),e._d["set"+(e._isUTC?"UTC":"")+r](t,e.month(),If(t,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+r](t))}function aG(e){return e=xr(e),fi(this[e])?this[e]():this}function oG(e,r){if(typeof e=="object"){e=qv(e);var t=nG(e),i;for(i=0;i<t.length;i++)this[t[i].unit](e[t[i].unit])}else if(e=xr(e),fi(this[e]))return this[e](r);return this}var R1=/\d/,rr=/\d\d/,D1=/\d{3}/,Jv=/\d{4}/,Tf=/[+-]?\d{6}/,Yt=/\d\d?/,A1=/\d\d\d\d?/,M1=/\d\d\d\d\d\d?/,Ef=/\d{1,3}/,Qv=/\d{1,4}/,Sf=/[+-]?\d{1,6}/,Jo=/\d+/,xf=/[+-]?\d+/,sG=/Z|[+-]\d\d:?\d\d/gi,Cf=/Z|[+-]\d\d(?::?\d\d)?/gi,lG=/[+-]?\d+(\.\d{1,3})?/,Xl=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Of;Of={};function Y(e,r,t){Of[e]=fi(r)?r:function(i,n){return i&&t?t:r}}function uG(e,r){return _t(Of,e)?Of[e](r._strict,r._locale):new RegExp(hG(e))}function hG(e){return ir(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(r,t,i,n,a){return t||i||n||a}))}function ir(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var tp={};function xt(e,r){var t,i=r;for(typeof e=="string"&&(e=[e]),Vi(r)&&(i=function(n,a){a[r]=st(n)}),t=0;t<e.length;t++)tp[e[t]]=i}function Kl(e,r){xt(e,function(t,i,n,a){n._w=n._w||{},r(t,n._w,n,a)})}function fG(e,r,t){r!=null&&_t(tp,e)&&tp[e](r,t._a,t,e)}var Ce=0,Xi=1,di=2,he=3,Ur=4,Ki=5,Wa=6,cG=7,dG=8;function vG(e,r){return(e%r+r)%r}var Zt;Array.prototype.indexOf?Zt=Array.prototype.indexOf:Zt=function(e){var r;for(r=0;r<this.length;++r)if(this[r]===e)return r;return-1};function If(e,r){if(isNaN(e)||isNaN(r))return NaN;var t=vG(r,12);return e+=(r-t)/12,t===1?wf(e)?29:28:31-t%7%2}U("M",["MM",2],"Mo",function(){return this.month()+1});U("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});U("MMMM",0,0,function(e){return this.localeData().months(this,e)});Se("month","M");xe("month",8);Y("M",Yt);Y("MM",Yt,rr);Y("MMM",function(e,r){return r.monthsShortRegex(e)});Y("MMMM",function(e,r){return r.monthsRegex(e)});xt(["M","MM"],function(e,r){r[Xi]=st(e)-1});xt(["MMM","MMMM"],function(e,r,t,i){var n=t._locale.monthsParse(e,i,t._strict);n!=null?r[Xi]=n:nt(t).invalidMonth=e});var pG="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),L1="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),F1=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,gG=Xl,mG=Xl;function yG(e,r){return e?Hr(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||F1).test(r)?"format":"standalone"][e.month()]:Hr(this._months)?this._months:this._months.standalone}function _G(e,r){return e?Hr(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[F1.test(r)?"format":"standalone"][e.month()]:Hr(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function wG(e,r,t){var i,n,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=hi([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return t?r==="MMM"?(n=Zt.call(this._shortMonthsParse,o),n!==-1?n:null):(n=Zt.call(this._longMonthsParse,o),n!==-1?n:null):r==="MMM"?(n=Zt.call(this._shortMonthsParse,o),n!==-1?n:(n=Zt.call(this._longMonthsParse,o),n!==-1?n:null)):(n=Zt.call(this._longMonthsParse,o),n!==-1?n:(n=Zt.call(this._shortMonthsParse,o),n!==-1?n:null))}function bG(e,r,t){var i,n,a;if(this._monthsParseExact)return wG.call(this,e,r,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(n=hi([2e3,i]),t&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!t&&!this._monthsParse[i]&&(a="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),t&&r==="MMMM"&&this._longMonthsParse[i].test(e))return i;if(t&&r==="MMM"&&this._shortMonthsParse[i].test(e))return i;if(!t&&this._monthsParse[i].test(e))return i}}function N1(e,r){var t;if(!e.isValid())return e;if(typeof r=="string"){if(/^\d+$/.test(r))r=st(r);else if(r=e.localeData().monthsParse(r),!Vi(r))return e}return t=Math.min(e.date(),If(e.year(),r)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](r,t),e}function $1(e){return e!=null?(N1(this,e),F.updateOffset(this,!0),this):bf(this,"Month")}function TG(){return If(this.year(),this.month())}function EG(e){return this._monthsParseExact?(_t(this,"_monthsRegex")||G1.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(_t(this,"_monthsShortRegex")||(this._monthsShortRegex=gG),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function SG(e){return this._monthsParseExact?(_t(this,"_monthsRegex")||G1.call(this),e?this._monthsStrictRegex:this._monthsRegex):(_t(this,"_monthsRegex")||(this._monthsRegex=mG),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function G1(){function e(o,s){return s.length-o.length}var r=[],t=[],i=[],n,a;for(n=0;n<12;n++)a=hi([2e3,n]),r.push(this.monthsShort(a,"")),t.push(this.months(a,"")),i.push(this.months(a,"")),i.push(this.monthsShort(a,""));for(r.sort(e),t.sort(e),i.sort(e),n=0;n<12;n++)r[n]=ir(r[n]),t[n]=ir(t[n]);for(n=0;n<24;n++)i[n]=ir(i[n]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}U("Y",0,0,function(){var e=this.year();return e<=9999?ci(e,4):"+"+e});U(0,["YY",2],0,function(){return this.year()%100});U(0,["YYYY",4],0,"year");U(0,["YYYYY",5],0,"year");U(0,["YYYYYY",6,!0],0,"year");Se("year","y");xe("year",1);Y("Y",xf);Y("YY",Yt,rr);Y("YYYY",Qv,Jv);Y("YYYYY",Sf,Tf);Y("YYYYYY",Sf,Tf);xt(["YYYYY","YYYYYY"],Ce);xt("YYYY",function(e,r){r[Ce]=e.length===2?F.parseTwoDigitYear(e):st(e)});xt("YY",function(e,r){r[Ce]=F.parseTwoDigitYear(e)});xt("Y",function(e,r){r[Ce]=parseInt(e,10)});function Zl(e){return wf(e)?366:365}F.parseTwoDigitYear=function(e){return st(e)+(st(e)>68?1900:2e3)};var Y1=qo("FullYear",!0);function xG(){return wf(this.year())}function CG(e,r,t,i,n,a,o){var s;return e<100&&e>=0?(s=new Date(e+400,r,t,i,n,a,o),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,r,t,i,n,a,o),s}function ql(e){var r,t;return e<100&&e>=0?(t=Array.prototype.slice.call(arguments),t[0]=e+400,r=new Date(Date.UTC.apply(null,t)),isFinite(r.getUTCFullYear())&&r.setUTCFullYear(e)):r=new Date(Date.UTC.apply(null,arguments)),r}function Pf(e,r,t){var i=7+r-t,n=(7+ql(e,0,i).getUTCDay()-r)%7;return-n+i-1}function j1(e,r,t,i,n){var a=(7+t-i)%7,o=Pf(e,i,n),s=1+7*(r-1)+a+o,l,u;return s<=0?(l=e-1,u=Zl(l)+s):s>Zl(e)?(l=e+1,u=s-Zl(e)):(l=e,u=s),{year:l,dayOfYear:u}}function Jl(e,r,t){var i=Pf(e.year(),r,t),n=Math.floor((e.dayOfYear()-i-1)/7)+1,a,o;return n<1?(o=e.year()-1,a=n+Zi(o,r,t)):n>Zi(e.year(),r,t)?(a=n-Zi(e.year(),r,t),o=e.year()+1):(o=e.year(),a=n),{week:a,year:o}}function Zi(e,r,t){var i=Pf(e,r,t),n=Pf(e+1,r,t);return(Zl(e)-i+n)/7}U("w",["ww",2],"wo","week");U("W",["WW",2],"Wo","isoWeek");Se("week","w");Se("isoWeek","W");xe("week",5);xe("isoWeek",5);Y("w",Yt);Y("ww",Yt,rr);Y("W",Yt);Y("WW",Yt,rr);Kl(["w","ww","W","WW"],function(e,r,t,i){r[i.substr(0,1)]=st(e)});function OG(e){return Jl(e,this._week.dow,this._week.doy).week}var IG={dow:0,doy:6};function PG(){return this._week.dow}function kG(){return this._week.doy}function RG(e){var r=this.localeData().week(this);return e==null?r:this.add((e-r)*7,"d")}function DG(e){var r=Jl(this,1,4).week;return e==null?r:this.add((e-r)*7,"d")}U("d",0,"do","day");U("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});U("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});U("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});U("e",0,0,"weekday");U("E",0,0,"isoWeekday");Se("day","d");Se("weekday","e");Se("isoWeekday","E");xe("day",11);xe("weekday",11);xe("isoWeekday",11);Y("d",Yt);Y("e",Yt);Y("E",Yt);Y("dd",function(e,r){return r.weekdaysMinRegex(e)});Y("ddd",function(e,r){return r.weekdaysShortRegex(e)});Y("dddd",function(e,r){return r.weekdaysRegex(e)});Kl(["dd","ddd","dddd"],function(e,r,t,i){var n=t._locale.weekdaysParse(e,i,t._strict);n!=null?r.d=n:nt(t).invalidWeekday=e});Kl(["d","e","E"],function(e,r,t,i){r[i]=st(e)});function AG(e,r){return typeof e!="string"?e:isNaN(e)?(e=r.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function MG(e,r){return typeof e=="string"?r.weekdaysParse(e)%7||7:isNaN(e)?null:e}function ep(e,r){return e.slice(r,7).concat(e.slice(0,r))}var LG="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),W1="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),FG="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),NG=Xl,$G=Xl,GG=Xl;function YG(e,r){var t=Hr(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(r)?"format":"standalone"];return e===!0?ep(t,this._week.dow):e?t[e.day()]:t}function jG(e){return e===!0?ep(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function WG(e){return e===!0?ep(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function HG(e,r,t){var i,n,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=hi([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return t?r==="dddd"?(n=Zt.call(this._weekdaysParse,o),n!==-1?n:null):r==="ddd"?(n=Zt.call(this._shortWeekdaysParse,o),n!==-1?n:null):(n=Zt.call(this._minWeekdaysParse,o),n!==-1?n:null):r==="dddd"?(n=Zt.call(this._weekdaysParse,o),n!==-1||(n=Zt.call(this._shortWeekdaysParse,o),n!==-1)?n:(n=Zt.call(this._minWeekdaysParse,o),n!==-1?n:null)):r==="ddd"?(n=Zt.call(this._shortWeekdaysParse,o),n!==-1||(n=Zt.call(this._weekdaysParse,o),n!==-1)?n:(n=Zt.call(this._minWeekdaysParse,o),n!==-1?n:null)):(n=Zt.call(this._minWeekdaysParse,o),n!==-1||(n=Zt.call(this._weekdaysParse,o),n!==-1)?n:(n=Zt.call(this._shortWeekdaysParse,o),n!==-1?n:null))}function BG(e,r,t){var i,n,a;if(this._weekdaysParseExact)return HG.call(this,e,r,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(n=hi([2e3,1]).day(i),t&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),t&&r==="dddd"&&this._fullWeekdaysParse[i].test(e))return i;if(t&&r==="ddd"&&this._shortWeekdaysParse[i].test(e))return i;if(t&&r==="dd"&&this._minWeekdaysParse[i].test(e))return i;if(!t&&this._weekdaysParse[i].test(e))return i}}function UG(e){if(!this.isValid())return e!=null?this:NaN;var r=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=AG(e,this.localeData()),this.add(e-r,"d")):r}function zG(e){if(!this.isValid())return e!=null?this:NaN;var r=(this.day()+7-this.localeData()._week.dow)%7;return e==null?r:this.add(e-r,"d")}function VG(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var r=MG(e,this.localeData());return this.day(this.day()%7?r:r-7)}else return this.day()||7}function XG(e){return this._weekdaysParseExact?(_t(this,"_weekdaysRegex")||rp.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(_t(this,"_weekdaysRegex")||(this._weekdaysRegex=NG),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function KG(e){return this._weekdaysParseExact?(_t(this,"_weekdaysRegex")||rp.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(_t(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=$G),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function ZG(e){return this._weekdaysParseExact?(_t(this,"_weekdaysRegex")||rp.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(_t(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=GG),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function rp(){function e(h,f){return f.length-h.length}var r=[],t=[],i=[],n=[],a,o,s,l,u;for(a=0;a<7;a++)o=hi([2e3,1]).day(a),s=ir(this.weekdaysMin(o,"")),l=ir(this.weekdaysShort(o,"")),u=ir(this.weekdays(o,"")),r.push(s),t.push(l),i.push(u),n.push(s),n.push(l),n.push(u);r.sort(e),t.sort(e),i.sort(e),n.sort(e),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function ip(){return this.hours()%12||12}function qG(){return this.hours()||24}U("H",["HH",2],0,"hour");U("h",["hh",2],0,ip);U("k",["kk",2],0,qG);U("hmm",0,0,function(){return""+ip.apply(this)+ci(this.minutes(),2)});U("hmmss",0,0,function(){return""+ip.apply(this)+ci(this.minutes(),2)+ci(this.seconds(),2)});U("Hmm",0,0,function(){return""+this.hours()+ci(this.minutes(),2)});U("Hmmss",0,0,function(){return""+this.hours()+ci(this.minutes(),2)+ci(this.seconds(),2)});function H1(e,r){U(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),r)})}H1("a",!0);H1("A",!1);Se("hour","h");xe("hour",13);function B1(e,r){return r._meridiemParse}Y("a",B1);Y("A",B1);Y("H",Yt);Y("h",Yt);Y("k",Yt);Y("HH",Yt,rr);Y("hh",Yt,rr);Y("kk",Yt,rr);Y("hmm",A1);Y("hmmss",M1);Y("Hmm",A1);Y("Hmmss",M1);xt(["H","HH"],he);xt(["k","kk"],function(e,r,t){var i=st(e);r[he]=i===24?0:i});xt(["a","A"],function(e,r,t){t._isPm=t._locale.isPM(e),t._meridiem=e});xt(["h","hh"],function(e,r,t){r[he]=st(e),nt(t).bigHour=!0});xt("hmm",function(e,r,t){var i=e.length-2;r[he]=st(e.substr(0,i)),r[Ur]=st(e.substr(i)),nt(t).bigHour=!0});xt("hmmss",function(e,r,t){var i=e.length-4,n=e.length-2;r[he]=st(e.substr(0,i)),r[Ur]=st(e.substr(i,2)),r[Ki]=st(e.substr(n)),nt(t).bigHour=!0});xt("Hmm",function(e,r,t){var i=e.length-2;r[he]=st(e.substr(0,i)),r[Ur]=st(e.substr(i))});xt("Hmmss",function(e,r,t){var i=e.length-4,n=e.length-2;r[he]=st(e.substr(0,i)),r[Ur]=st(e.substr(i,2)),r[Ki]=st(e.substr(n))});function JG(e){return(e+"").toLowerCase().charAt(0)==="p"}var QG=/[ap]\.?m?\.?/i,tY=qo("Hours",!0);function eY(e,r,t){return e>11?t?"pm":"PM":t?"am":"AM"}var U1={calendar:B2,longDateFormat:X2,invalidDate:Z2,ordinal:J2,dayOfMonthOrdinalParse:Q2,relativeTime:eG,months:pG,monthsShort:L1,week:IG,weekdays:LG,weekdaysMin:FG,weekdaysShort:W1,meridiemParse:QG},Bt={},Ql={},tu;function rY(e,r){var t,i=Math.min(e.length,r.length);for(t=0;t<i;t+=1)if(e[t]!==r[t])return t;return i}function z1(e){return e&&e.toLowerCase().replace("_","-")}function iY(e){for(var r=0,t,i,n,a;r<e.length;){for(a=z1(e[r]).split("-"),t=a.length,i=z1(e[r+1]),i=i?i.split("-"):null;t>0;){if(n=kf(a.slice(0,t).join("-")),n)return n;if(i&&i.length>=t&&rY(a,i)>=t-1)break;t--}r++}return tu}function kf(e){var r=null,t;if(Bt[e]===void 0&&typeof module!="undefined"&&module&&module.exports)try{r=tu._abbr,t=require,t("./locale/"+e),Dn(r)}catch(i){Bt[e]=null}return Bt[e]}function Dn(e,r){var t;return e&&(Ve(r)?t=qi(e):t=np(e,r),t?tu=t:typeof console!="undefined"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),tu._abbr}function np(e,r){if(r!==null){var t,i=U1;if(r.abbr=e,Bt[e]!=null)O1("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Bt[e]._config;else if(r.parentLocale!=null)if(Bt[r.parentLocale]!=null)i=Bt[r.parentLocale]._config;else if(t=kf(r.parentLocale),t!=null)i=t._config;else return Ql[r.parentLocale]||(Ql[r.parentLocale]=[]),Ql[r.parentLocale].push({name:e,config:r}),null;return Bt[e]=new Vv(zv(i,r)),Ql[e]&&Ql[e].forEach(function(n){np(n.name,n.config)}),Dn(e),Bt[e]}else return delete Bt[e],null}function nY(e,r){if(r!=null){var t,i,n=U1;Bt[e]!=null&&Bt[e].parentLocale!=null?Bt[e].set(zv(Bt[e]._config,r)):(i=kf(e),i!=null&&(n=i._config),r=zv(n,r),i==null&&(r.abbr=e),t=new Vv(r),t.parentLocale=Bt[e],Bt[e]=t),Dn(e)}else Bt[e]!=null&&(Bt[e].parentLocale!=null?(Bt[e]=Bt[e].parentLocale,e===Dn()&&Dn(e)):Bt[e]!=null&&delete Bt[e]);return Bt[e]}function qi(e){var r;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return tu;if(!Hr(e)){if(r=kf(e),r)return r;e=[e]}return iY(e)}function aY(){return Xv(Bt)}function ap(e){var r,t=e._a;return t&&nt(e).overflow===-2&&(r=t[Xi]<0||t[Xi]>11?Xi:t[di]<1||t[di]>If(t[Ce],t[Xi])?di:t[he]<0||t[he]>24||t[he]===24&&(t[Ur]!==0||t[Ki]!==0||t[Wa]!==0)?he:t[Ur]<0||t[Ur]>59?Ur:t[Ki]<0||t[Ki]>59?Ki:t[Wa]<0||t[Wa]>999?Wa:-1,nt(e)._overflowDayOfYear&&(r<Ce||r>di)&&(r=di),nt(e)._overflowWeeks&&r===-1&&(r=cG),nt(e)._overflowWeekday&&r===-1&&(r=dG),nt(e).overflow=r),e}var oY=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sY=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,lY=/Z|[+-]\d\d(?::?\d\d)?/,Rf=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],op=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],uY=/^\/?Date\((-?\d+)/i,hY=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,fY={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function V1(e){var r,t,i=e._i,n=oY.exec(i)||sY.exec(i),a,o,s,l;if(n){for(nt(e).iso=!0,r=0,t=Rf.length;r<t;r++)if(Rf[r][1].exec(n[1])){o=Rf[r][0],a=Rf[r][2]!==!1;break}if(o==null){e._isValid=!1;return}if(n[3]){for(r=0,t=op.length;r<t;r++)if(op[r][1].exec(n[3])){s=(n[2]||" ")+op[r][0];break}if(s==null){e._isValid=!1;return}}if(!a&&s!=null){e._isValid=!1;return}if(n[4])if(lY.exec(n[4]))l="Z";else{e._isValid=!1;return}e._f=o+(s||"")+(l||""),lp(e)}else e._isValid=!1}function cY(e,r,t,i,n,a){var o=[dY(e),L1.indexOf(r),parseInt(t,10),parseInt(i,10),parseInt(n,10)];return a&&o.push(parseInt(a,10)),o}function dY(e){var r=parseInt(e,10);return r<=49?2e3+r:r<=999?1900+r:r}function vY(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function pY(e,r,t){if(e){var i=W1.indexOf(e),n=new Date(r[0],r[1],r[2]).getDay();if(i!==n)return nt(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function gY(e,r,t){if(e)return fY[e];if(r)return 0;var i=parseInt(t,10),n=i%100,a=(i-n)/100;return a*60+n}function X1(e){var r=hY.exec(vY(e._i)),t;if(r){if(t=cY(r[4],r[3],r[2],r[5],r[6],r[7]),!pY(r[1],t,e))return;e._a=t,e._tzm=gY(r[8],r[9],r[10]),e._d=ql.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),nt(e).rfc2822=!0}else e._isValid=!1}function mY(e){var r=uY.exec(e._i);if(r!==null){e._d=new Date(+r[1]);return}if(V1(e),e._isValid===!1)delete e._isValid;else return;if(X1(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:F.createFromInputFallback(e)}F.createFromInputFallback=Sr("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Qo(e,r,t){return e!=null?e:r!=null?r:t}function yY(e){var r=new Date(F.now());return e._useUTC?[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()]:[r.getFullYear(),r.getMonth(),r.getDate()]}function sp(e){var r,t,i=[],n,a,o;if(!e._d){for(n=yY(e),e._w&&e._a[di]==null&&e._a[Xi]==null&&_Y(e),e._dayOfYear!=null&&(o=Qo(e._a[Ce],n[Ce]),(e._dayOfYear>Zl(o)||e._dayOfYear===0)&&(nt(e)._overflowDayOfYear=!0),t=ql(o,0,e._dayOfYear),e._a[Xi]=t.getUTCMonth(),e._a[di]=t.getUTCDate()),r=0;r<3&&e._a[r]==null;++r)e._a[r]=i[r]=n[r];for(;r<7;r++)e._a[r]=i[r]=e._a[r]==null?r===2?1:0:e._a[r];e._a[he]===24&&e._a[Ur]===0&&e._a[Ki]===0&&e._a[Wa]===0&&(e._nextDay=!0,e._a[he]=0),e._d=(e._useUTC?ql:CG).apply(null,i),a=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[he]=24),e._w&&typeof e._w.d!="undefined"&&e._w.d!==a&&(nt(e).weekdayMismatch=!0)}}function _Y(e){var r,t,i,n,a,o,s,l,u;r=e._w,r.GG!=null||r.W!=null||r.E!=null?(a=1,o=4,t=Qo(r.GG,e._a[Ce],Jl(jt(),1,4).year),i=Qo(r.W,1),n=Qo(r.E,1),(n<1||n>7)&&(l=!0)):(a=e._locale._week.dow,o=e._locale._week.doy,u=Jl(jt(),a,o),t=Qo(r.gg,e._a[Ce],u.year),i=Qo(r.w,u.week),r.d!=null?(n=r.d,(n<0||n>6)&&(l=!0)):r.e!=null?(n=r.e+a,(r.e<0||r.e>6)&&(l=!0)):n=a),i<1||i>Zi(t,a,o)?nt(e)._overflowWeeks=!0:l!=null?nt(e)._overflowWeekday=!0:(s=j1(t,i,n,a,o),e._a[Ce]=s.year,e._dayOfYear=s.dayOfYear)}F.ISO_8601=function(){};F.RFC_2822=function(){};function lp(e){if(e._f===F.ISO_8601){V1(e);return}if(e._f===F.RFC_2822){X1(e);return}e._a=[],nt(e).empty=!0;var r=""+e._i,t,i,n,a,o,s=r.length,l=0,u;for(n=I1(e._f,e._locale).match(Kv)||[],t=0;t<n.length;t++)a=n[t],i=(r.match(uG(a,e))||[])[0],i&&(o=r.substr(0,r.indexOf(i)),o.length>0&&nt(e).unusedInput.push(o),r=r.slice(r.indexOf(i)+i.length),l+=i.length),Zo[a]?(i?nt(e).empty=!1:nt(e).unusedTokens.push(a),fG(a,i,e)):e._strict&&!i&&nt(e).unusedTokens.push(a);nt(e).charsLeftOver=s-l,r.length>0&&nt(e).unusedInput.push(r),e._a[he]<=12&&nt(e).bigHour===!0&&e._a[he]>0&&(nt(e).bigHour=void 0),nt(e).parsedDateParts=e._a.slice(0),nt(e).meridiem=e._meridiem,e._a[he]=wY(e._locale,e._a[he],e._meridiem),u=nt(e).era,u!==null&&(e._a[Ce]=e._locale.erasConvertYear(u,e._a[Ce])),sp(e),ap(e)}function wY(e,r,t){var i;return t==null?r:e.meridiemHour!=null?e.meridiemHour(r,t):(e.isPM!=null&&(i=e.isPM(t),i&&r<12&&(r+=12),!i&&r===12&&(r=0)),r)}function bY(e){var r,t,i,n,a,o,s=!1;if(e._f.length===0){nt(e).invalidFormat=!0,e._d=new Date(NaN);return}for(n=0;n<e._f.length;n++)a=0,o=!1,r=Uv({},e),e._useUTC!=null&&(r._useUTC=e._useUTC),r._f=e._f[n],lp(r),Wv(r)&&(o=!0),a+=nt(r).charsLeftOver,a+=nt(r).unusedTokens.length*10,nt(r).score=a,s?a<i&&(i=a,t=r):(i==null||a<i||o)&&(i=a,t=r,o&&(s=!0));Rn(e,t||r)}function TY(e){if(!e._d){var r=qv(e._i),t=r.day===void 0?r.date:r.day;e._a=S1([r.year,r.month,t,r.hour,r.minute,r.second,r.millisecond],function(i){return i&&parseInt(i,10)}),sp(e)}}function EY(e){var r=new zl(ap(K1(e)));return r._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function K1(e){var r=e._i,t=e._f;return e._locale=e._locale||qi(e._l),r===null||t===void 0&&r===""?mf({nullInput:!0}):(typeof r=="string"&&(e._i=r=e._locale.preparse(r)),Br(r)?new zl(ap(r)):(Ul(r)?e._d=r:Hr(t)?bY(e):t?lp(e):SY(e),Wv(e)||(e._d=null),e))}function SY(e){var r=e._i;Ve(r)?e._d=new Date(F.now()):Ul(r)?e._d=new Date(r.valueOf()):typeof r=="string"?mY(e):Hr(r)?(e._a=S1(r.slice(0),function(t){return parseInt(t,10)}),sp(e)):ja(r)?TY(e):Vi(r)?e._d=new Date(r):F.createFromInputFallback(e)}function Z1(e,r,t,i,n){var a={};return(r===!0||r===!1)&&(i=r,r=void 0),(t===!0||t===!1)&&(i=t,t=void 0),(ja(e)&&Yv(e)||Hr(e)&&e.length===0)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=n,a._l=t,a._i=e,a._f=r,a._strict=i,EY(a)}function jt(e,r,t,i){return Z1(e,r,t,i,!1)}var xY=Sr("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=jt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:mf()}),CY=Sr("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=jt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:mf()});function q1(e,r){var t,i;if(r.length===1&&Hr(r[0])&&(r=r[0]),!r.length)return jt();for(t=r[0],i=1;i<r.length;++i)(!r[i].isValid()||r[i][e](t))&&(t=r[i]);return t}function OY(){var e=[].slice.call(arguments,0);return q1("isBefore",e)}function IY(){var e=[].slice.call(arguments,0);return q1("isAfter",e)}var PY=function(){return Date.now?Date.now():+new Date},eu=["year","quarter","month","week","day","hour","minute","second","millisecond"];function kY(e){var r,t=!1,i;for(r in e)if(_t(e,r)&&!(Zt.call(eu,r)!==-1&&(e[r]==null||!isNaN(e[r]))))return!1;for(i=0;i<eu.length;++i)if(e[eu[i]]){if(t)return!1;parseFloat(e[eu[i]])!==st(e[eu[i]])&&(t=!0)}return!0}function RY(){return this._isValid}function DY(){return zr(NaN)}function Df(e){var r=qv(e),t=r.year||0,i=r.quarter||0,n=r.month||0,a=r.week||r.isoWeek||0,o=r.day||0,s=r.hour||0,l=r.minute||0,u=r.second||0,h=r.millisecond||0;this._isValid=kY(r),this._milliseconds=+h+u*1e3+l*6e4+s*1e3*60*60,this._days=+o+a*7,this._months=+n+i*3+t*12,this._data={},this._locale=qi(),this._bubble()}function Af(e){return e instanceof Df}function up(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function AY(e,r,t){var i=Math.min(e.length,r.length),n=Math.abs(e.length-r.length),a=0,o;for(o=0;o<i;o++)(t&&e[o]!==r[o]||!t&&st(e[o])!==st(r[o]))&&a++;return a+n}function J1(e,r){U(e,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+ci(~~(t/60),2)+r+ci(~~t%60,2)})}J1("Z",":");J1("ZZ","");Y("Z",Cf);Y("ZZ",Cf);xt(["Z","ZZ"],function(e,r,t){t._useUTC=!0,t._tzm=hp(Cf,e)});var MY=/([\+\-]|\d\d)/gi;function hp(e,r){var t=(r||"").match(e),i,n,a;return t===null?null:(i=t[t.length-1]||[],n=(i+"").match(MY)||["-",0,0],a=+(n[1]*60)+st(n[2]),a===0?0:n[0]==="+"?a:-a)}function fp(e,r){var t,i;return r._isUTC?(t=r.clone(),i=(Br(e)||Ul(e)?e.valueOf():jt(e).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+i),F.updateOffset(t,!1),t):jt(e).local()}function cp(e){return-Math.round(e._d.getTimezoneOffset())}F.updateOffset=function(){};function LY(e,r,t){var i=this._offset||0,n;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=hp(Cf,e),e===null)return this}else Math.abs(e)<16&&!t&&(e=e*60);return!this._isUTC&&r&&(n=cp(this)),this._offset=e,this._isUTC=!0,n!=null&&this.add(n,"m"),i!==e&&(!r||this._changeInProgress?rb(this,zr(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,F.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:cp(this)}function FY(e,r){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,r),this):-this.utcOffset()}function NY(e){return this.utcOffset(0,e)}function $Y(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(cp(this),"m")),this}function GY(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=hp(sG,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function YY(e){return this.isValid()?(e=e?jt(e).utcOffset():0,(this.utcOffset()-e)%60==0):!1}function jY(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function WY(){if(!Ve(this._isDSTShifted))return this._isDSTShifted;var e={},r;return Uv(e,this),e=K1(e),e._a?(r=e._isUTC?hi(e._a):jt(e._a),this._isDSTShifted=this.isValid()&&AY(e._a,r.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function HY(){return this.isValid()?!this._isUTC:!1}function BY(){return this.isValid()?this._isUTC:!1}function Q1(){return this.isValid()?this._isUTC&&this._offset===0:!1}var UY=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,zY=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function zr(e,r){var t=e,i=null,n,a,o;return Af(e)?t={ms:e._milliseconds,d:e._days,M:e._months}:Vi(e)||!isNaN(+e)?(t={},r?t[r]=+e:t.milliseconds=+e):(i=UY.exec(e))?(n=i[1]==="-"?-1:1,t={y:0,d:st(i[di])*n,h:st(i[he])*n,m:st(i[Ur])*n,s:st(i[Ki])*n,ms:st(up(i[Wa]*1e3))*n}):(i=zY.exec(e))?(n=i[1]==="-"?-1:1,t={y:Ha(i[2],n),M:Ha(i[3],n),w:Ha(i[4],n),d:Ha(i[5],n),h:Ha(i[6],n),m:Ha(i[7],n),s:Ha(i[8],n)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=VY(jt(t.from),jt(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),a=new Df(t),Af(e)&&_t(e,"_locale")&&(a._locale=e._locale),Af(e)&&_t(e,"_isValid")&&(a._isValid=e._isValid),a}zr.fn=Df.prototype;zr.invalid=DY;function Ha(e,r){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*r}function tb(e,r){var t={};return t.months=r.month()-e.month()+(r.year()-e.year())*12,e.clone().add(t.months,"M").isAfter(r)&&--t.months,t.milliseconds=+r-+e.clone().add(t.months,"M"),t}function VY(e,r){var t;return e.isValid()&&r.isValid()?(r=fp(r,e),e.isBefore(r)?t=tb(e,r):(t=tb(r,e),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function eb(e,r){return function(t,i){var n,a;return i!==null&&!isNaN(+i)&&(O1(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=t,t=i,i=a),n=zr(t,i),rb(this,n,e),this}}function rb(e,r,t,i){var n=r._milliseconds,a=up(r._days),o=up(r._months);!e.isValid()||(i=i==null?!0:i,o&&N1(e,bf(e,"Month")+o*t),a&&k1(e,"Date",bf(e,"Date")+a*t),n&&e._d.setTime(e._d.valueOf()+n*t),i&&F.updateOffset(e,a||o))}var XY=eb(1,"add"),KY=eb(-1,"subtract");function ib(e){return typeof e=="string"||e instanceof String}function ZY(e){return Br(e)||Ul(e)||ib(e)||Vi(e)||JY(e)||qY(e)||e===null||e===void 0}function qY(e){var r=ja(e)&&!Yv(e),t=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,a;for(n=0;n<i.length;n+=1)a=i[n],t=t||_t(e,a);return r&&t}function JY(e){var r=Hr(e),t=!1;return r&&(t=e.filter(function(i){return!Vi(i)&&ib(e)}).length===0),r&&t}function QY(e){var r=ja(e)&&!Yv(e),t=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,a;for(n=0;n<i.length;n+=1)a=i[n],t=t||_t(e,a);return r&&t}function tj(e,r){var t=e.diff(r,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function ej(e,r){arguments.length===1&&(arguments[0]?ZY(arguments[0])?(e=arguments[0],r=void 0):QY(arguments[0])&&(r=arguments[0],e=void 0):(e=void 0,r=void 0));var t=e||jt(),i=fp(t,this).startOf("day"),n=F.calendarFormat(this,i)||"sameElse",a=r&&(fi(r[n])?r[n].call(this,t):r[n]);return this.format(a||this.localeData().calendar(n,this,jt(t)))}function rj(){return new zl(this)}function ij(e,r){var t=Br(e)?e:jt(e);return this.isValid()&&t.isValid()?(r=xr(r)||"millisecond",r==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(r).valueOf()):!1}function nj(e,r){var t=Br(e)?e:jt(e);return this.isValid()&&t.isValid()?(r=xr(r)||"millisecond",r==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(r).valueOf()<t.valueOf()):!1}function aj(e,r,t,i){var n=Br(e)?e:jt(e),a=Br(r)?r:jt(r);return this.isValid()&&n.isValid()&&a.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(n,t):!this.isBefore(n,t))&&(i[1]===")"?this.isBefore(a,t):!this.isAfter(a,t))):!1}function oj(e,r){var t=Br(e)?e:jt(e),i;return this.isValid()&&t.isValid()?(r=xr(r)||"millisecond",r==="millisecond"?this.valueOf()===t.valueOf():(i=t.valueOf(),this.clone().startOf(r).valueOf()<=i&&i<=this.clone().endOf(r).valueOf())):!1}function sj(e,r){return this.isSame(e,r)||this.isAfter(e,r)}function lj(e,r){return this.isSame(e,r)||this.isBefore(e,r)}function uj(e,r,t){var i,n,a;if(!this.isValid())return NaN;if(i=fp(e,this),!i.isValid())return NaN;switch(n=(i.utcOffset()-this.utcOffset())*6e4,r=xr(r),r){case"year":a=Mf(this,i)/12;break;case"month":a=Mf(this,i);break;case"quarter":a=Mf(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-n)/864e5;break;case"week":a=(this-i-n)/6048e5;break;default:a=this-i}return t?a:Cr(a)}function Mf(e,r){if(e.date()<r.date())return-Mf(r,e);var t=(r.year()-e.year())*12+(r.month()-e.month()),i=e.clone().add(t,"months"),n,a;return r-i<0?(n=e.clone().add(t-1,"months"),a=(r-i)/(i-n)):(n=e.clone().add(t+1,"months"),a=(r-i)/(n-i)),-(t+a)||0}F.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";F.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function hj(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fj(e){if(!this.isValid())return null;var r=e!==!0,t=r?this.clone().utc():this;return t.year()<0||t.year()>9999?_f(t,r?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):fi(Date.prototype.toISOString)?r?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",_f(t,"Z")):_f(t,r?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function cj(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",r="",t,i,n,a;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",r="Z"),t="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",a=r+'[")]',this.format(t+i+n+a)}function dj(e){e||(e=this.isUtc()?F.defaultFormatUtc:F.defaultFormat);var r=_f(this,e);return this.localeData().postformat(r)}function vj(e,r){return this.isValid()&&(Br(e)&&e.isValid()||jt(e).isValid())?zr({to:this,from:e}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function pj(e){return this.from(jt(),e)}function gj(e,r){return this.isValid()&&(Br(e)&&e.isValid()||jt(e).isValid())?zr({from:this,to:e}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function mj(e){return this.to(jt(),e)}function nb(e){var r;return e===void 0?this._locale._abbr:(r=qi(e),r!=null&&(this._locale=r),this)}var ab=Sr("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function ob(){return this._locale}var Lf=1e3,ts=60*Lf,Ff=60*ts,sb=(365*400+97)*24*Ff;function es(e,r){return(e%r+r)%r}function lb(e,r,t){return e<100&&e>=0?new Date(e+400,r,t)-sb:new Date(e,r,t).valueOf()}function ub(e,r,t){return e<100&&e>=0?Date.UTC(e+400,r,t)-sb:Date.UTC(e,r,t)}function yj(e){var r,t;if(e=xr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?ub:lb,e){case"year":r=t(this.year(),0,1);break;case"quarter":r=t(this.year(),this.month()-this.month()%3,1);break;case"month":r=t(this.year(),this.month(),1);break;case"week":r=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":r=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":r=t(this.year(),this.month(),this.date());break;case"hour":r=this._d.valueOf(),r-=es(r+(this._isUTC?0:this.utcOffset()*ts),Ff);break;case"minute":r=this._d.valueOf(),r-=es(r,ts);break;case"second":r=this._d.valueOf(),r-=es(r,Lf);break}return this._d.setTime(r),F.updateOffset(this,!0),this}function _j(e){var r,t;if(e=xr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?ub:lb,e){case"year":r=t(this.year()+1,0,1)-1;break;case"quarter":r=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":r=t(this.year(),this.month()+1,1)-1;break;case"week":r=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":r=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":r=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":r=this._d.valueOf(),r+=Ff-es(r+(this._isUTC?0:this.utcOffset()*ts),Ff)-1;break;case"minute":r=this._d.valueOf(),r+=ts-es(r,ts)-1;break;case"second":r=this._d.valueOf(),r+=Lf-es(r,Lf)-1;break}return this._d.setTime(r),F.updateOffset(this,!0),this}function wj(){return this._d.valueOf()-(this._offset||0)*6e4}function bj(){return Math.floor(this.valueOf()/1e3)}function Tj(){return new Date(this.valueOf())}function Ej(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Sj(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function xj(){return this.isValid()?this.toISOString():null}function Cj(){return Wv(this)}function Oj(){return Rn({},nt(this))}function Ij(){return nt(this).overflow}function Pj(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}U("N",0,0,"eraAbbr");U("NN",0,0,"eraAbbr");U("NNN",0,0,"eraAbbr");U("NNNN",0,0,"eraName");U("NNNNN",0,0,"eraNarrow");U("y",["y",1],"yo","eraYear");U("y",["yy",2],0,"eraYear");U("y",["yyy",3],0,"eraYear");U("y",["yyyy",4],0,"eraYear");Y("N",dp);Y("NN",dp);Y("NNN",dp);Y("NNNN",Yj);Y("NNNNN",jj);xt(["N","NN","NNN","NNNN","NNNNN"],function(e,r,t,i){var n=t._locale.erasParse(e,i,t._strict);n?nt(t).era=n:nt(t).invalidEra=e});Y("y",Jo);Y("yy",Jo);Y("yyy",Jo);Y("yyyy",Jo);Y("yo",Wj);xt(["y","yy","yyy","yyyy"],Ce);xt(["yo"],function(e,r,t,i){var n;t._locale._eraYearOrdinalRegex&&(n=e.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?r[Ce]=t._locale.eraYearOrdinalParse(e,n):r[Ce]=parseInt(e,10)});function kj(e,r){var t,i,n,a=this._eras||qi("en")._eras;for(t=0,i=a.length;t<i;++t){switch(typeof a[t].since){case"string":n=F(a[t].since).startOf("day"),a[t].since=n.valueOf();break}switch(typeof a[t].until){case"undefined":a[t].until=1/0;break;case"string":n=F(a[t].until).startOf("day").valueOf(),a[t].until=n.valueOf();break}}return a}function Rj(e,r,t){var i,n,a=this.eras(),o,s,l;for(e=e.toUpperCase(),i=0,n=a.length;i<n;++i)if(o=a[i].name.toUpperCase(),s=a[i].abbr.toUpperCase(),l=a[i].narrow.toUpperCase(),t)switch(r){case"N":case"NN":case"NNN":if(s===e)return a[i];break;case"NNNN":if(o===e)return a[i];break;case"NNNNN":if(l===e)return a[i];break}else if([o,s,l].indexOf(e)>=0)return a[i]}function Dj(e,r){var t=e.since<=e.until?1:-1;return r===void 0?F(e.since).year():F(e.since).year()+(r-e.offset)*t}function Aj(){var e,r,t,i=this.localeData().eras();for(e=0,r=i.length;e<r;++e)if(t=this.clone().startOf("day").valueOf(),i[e].since<=t&&t<=i[e].until||i[e].until<=t&&t<=i[e].since)return i[e].name;return""}function Mj(){var e,r,t,i=this.localeData().eras();for(e=0,r=i.length;e<r;++e)if(t=this.clone().startOf("day").valueOf(),i[e].since<=t&&t<=i[e].until||i[e].until<=t&&t<=i[e].since)return i[e].narrow;return""}function Lj(){var e,r,t,i=this.localeData().eras();for(e=0,r=i.length;e<r;++e)if(t=this.clone().startOf("day").valueOf(),i[e].since<=t&&t<=i[e].until||i[e].until<=t&&t<=i[e].since)return i[e].abbr;return""}function Fj(){var e,r,t,i,n=this.localeData().eras();for(e=0,r=n.length;e<r;++e)if(t=n[e].since<=n[e].until?1:-1,i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until||n[e].until<=i&&i<=n[e].since)return(this.year()-F(n[e].since).year())*t+n[e].offset;return this.year()}function Nj(e){return _t(this,"_erasNameRegex")||vp.call(this),e?this._erasNameRegex:this._erasRegex}function $j(e){return _t(this,"_erasAbbrRegex")||vp.call(this),e?this._erasAbbrRegex:this._erasRegex}function Gj(e){return _t(this,"_erasNarrowRegex")||vp.call(this),e?this._erasNarrowRegex:this._erasRegex}function dp(e,r){return r.erasAbbrRegex(e)}function Yj(e,r){return r.erasNameRegex(e)}function jj(e,r){return r.erasNarrowRegex(e)}function Wj(e,r){return r._eraYearOrdinalRegex||Jo}function vp(){var e=[],r=[],t=[],i=[],n,a,o=this.eras();for(n=0,a=o.length;n<a;++n)r.push(ir(o[n].name)),e.push(ir(o[n].abbr)),t.push(ir(o[n].narrow)),i.push(ir(o[n].name)),i.push(ir(o[n].abbr)),i.push(ir(o[n].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}U(0,["gg",2],0,function(){return this.weekYear()%100});U(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Nf(e,r){U(0,[e,e.length],0,r)}Nf("gggg","weekYear");Nf("ggggg","weekYear");Nf("GGGG","isoWeekYear");Nf("GGGGG","isoWeekYear");Se("weekYear","gg");Se("isoWeekYear","GG");xe("weekYear",1);xe("isoWeekYear",1);Y("G",xf);Y("g",xf);Y("GG",Yt,rr);Y("gg",Yt,rr);Y("GGGG",Qv,Jv);Y("gggg",Qv,Jv);Y("GGGGG",Sf,Tf);Y("ggggg",Sf,Tf);Kl(["gggg","ggggg","GGGG","GGGGG"],function(e,r,t,i){r[i.substr(0,2)]=st(e)});Kl(["gg","GG"],function(e,r,t,i){r[i]=F.parseTwoDigitYear(e)});function Hj(e){return hb.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Bj(e){return hb.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Uj(){return Zi(this.year(),1,4)}function zj(){return Zi(this.isoWeekYear(),1,4)}function Vj(){var e=this.localeData()._week;return Zi(this.year(),e.dow,e.doy)}function Xj(){var e=this.localeData()._week;return Zi(this.weekYear(),e.dow,e.doy)}function hb(e,r,t,i,n){var a;return e==null?Jl(this,i,n).year:(a=Zi(e,i,n),r>a&&(r=a),Kj.call(this,e,r,t,i,n))}function Kj(e,r,t,i,n){var a=j1(e,r,t,i,n),o=ql(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}U("Q",0,"Qo","quarter");Se("quarter","Q");xe("quarter",7);Y("Q",R1);xt("Q",function(e,r){r[Xi]=(st(e)-1)*3});function Zj(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}U("D",["DD",2],"Do","date");Se("date","D");xe("date",9);Y("D",Yt);Y("DD",Yt,rr);Y("Do",function(e,r){return e?r._dayOfMonthOrdinalParse||r._ordinalParse:r._dayOfMonthOrdinalParseLenient});xt(["D","DD"],di);xt("Do",function(e,r){r[di]=st(e.match(Yt)[0])});var fb=qo("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear");Se("dayOfYear","DDD");xe("dayOfYear",4);Y("DDD",Ef);Y("DDDD",D1);xt(["DDD","DDDD"],function(e,r,t){t._dayOfYear=st(e)});function qj(e){var r=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?r:this.add(e-r,"d")}U("m",["mm",2],0,"minute");Se("minute","m");xe("minute",14);Y("m",Yt);Y("mm",Yt,rr);xt(["m","mm"],Ur);var Jj=qo("Minutes",!1);U("s",["ss",2],0,"second");Se("second","s");xe("second",15);Y("s",Yt);Y("ss",Yt,rr);xt(["s","ss"],Ki);var Qj=qo("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)});U(0,["SS",2],0,function(){return~~(this.millisecond()/10)});U(0,["SSS",3],0,"millisecond");U(0,["SSSS",4],0,function(){return this.millisecond()*10});U(0,["SSSSS",5],0,function(){return this.millisecond()*100});U(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});U(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});U(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});U(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Se("millisecond","ms");xe("millisecond",16);Y("S",Ef,R1);Y("SS",Ef,rr);Y("SSS",Ef,D1);var An,cb;for(An="SSSS";An.length<=9;An+="S")Y(An,Jo);function tW(e,r){r[Wa]=st(("0."+e)*1e3)}for(An="S";An.length<=9;An+="S")xt(An,tW);cb=qo("Milliseconds",!1);U("z",0,0,"zoneAbbr");U("zz",0,0,"zoneName");function eW(){return this._isUTC?"UTC":""}function rW(){return this._isUTC?"Coordinated Universal Time":""}var L=zl.prototype;L.add=XY;L.calendar=ej;L.clone=rj;L.diff=uj;L.endOf=_j;L.format=dj;L.from=vj;L.fromNow=pj;L.to=gj;L.toNow=mj;L.get=aG;L.invalidAt=Ij;L.isAfter=ij;L.isBefore=nj;L.isBetween=aj;L.isSame=oj;L.isSameOrAfter=sj;L.isSameOrBefore=lj;L.isValid=Cj;L.lang=ab;L.locale=nb;L.localeData=ob;L.max=CY;L.min=xY;L.parsingFlags=Oj;L.set=oG;L.startOf=yj;L.subtract=KY;L.toArray=Ej;L.toObject=Sj;L.toDate=Tj;L.toISOString=fj;L.inspect=cj;typeof Symbol!="undefined"&&Symbol.for!=null&&(L[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});L.toJSON=xj;L.toString=hj;L.unix=bj;L.valueOf=wj;L.creationData=Pj;L.eraName=Aj;L.eraNarrow=Mj;L.eraAbbr=Lj;L.eraYear=Fj;L.year=Y1;L.isLeapYear=xG;L.weekYear=Hj;L.isoWeekYear=Bj;L.quarter=L.quarters=Zj;L.month=$1;L.daysInMonth=TG;L.week=L.weeks=RG;L.isoWeek=L.isoWeeks=DG;L.weeksInYear=Vj;L.weeksInWeekYear=Xj;L.isoWeeksInYear=Uj;L.isoWeeksInISOWeekYear=zj;L.date=fb;L.day=L.days=UG;L.weekday=zG;L.isoWeekday=VG;L.dayOfYear=qj;L.hour=L.hours=tY;L.minute=L.minutes=Jj;L.second=L.seconds=Qj;L.millisecond=L.milliseconds=cb;L.utcOffset=LY;L.utc=NY;L.local=$Y;L.parseZone=GY;L.hasAlignedHourOffset=YY;L.isDST=jY;L.isLocal=HY;L.isUtcOffset=BY;L.isUtc=Q1;L.isUTC=Q1;L.zoneAbbr=eW;L.zoneName=rW;L.dates=Sr("dates accessor is deprecated. Use date instead.",fb);L.months=Sr("months accessor is deprecated. Use month instead",$1);L.years=Sr("years accessor is deprecated. Use year instead",Y1);L.zone=Sr("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",FY);L.isDSTShifted=Sr("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",WY);function iW(e){return jt(e*1e3)}function nW(){return jt.apply(null,arguments).parseZone()}function db(e){return e}var wt=Vv.prototype;wt.calendar=U2;wt.longDateFormat=K2;wt.invalidDate=q2;wt.ordinal=tG;wt.preparse=db;wt.postformat=db;wt.relativeTime=rG;wt.pastFuture=iG;wt.set=H2;wt.eras=kj;wt.erasParse=Rj;wt.erasConvertYear=Dj;wt.erasAbbrRegex=$j;wt.erasNameRegex=Nj;wt.erasNarrowRegex=Gj;wt.months=yG;wt.monthsShort=_G;wt.monthsParse=bG;wt.monthsRegex=SG;wt.monthsShortRegex=EG;wt.week=OG;wt.firstDayOfYear=kG;wt.firstDayOfWeek=PG;wt.weekdays=YG;wt.weekdaysMin=WG;wt.weekdaysShort=jG;wt.weekdaysParse=BG;wt.weekdaysRegex=XG;wt.weekdaysShortRegex=KG;wt.weekdaysMinRegex=ZG;wt.isPM=JG;wt.meridiem=eY;function $f(e,r,t,i){var n=qi(),a=hi().set(i,r);return n[t](a,e)}function vb(e,r,t){if(Vi(e)&&(r=e,e=void 0),e=e||"",r!=null)return $f(e,r,t,"month");var i,n=[];for(i=0;i<12;i++)n[i]=$f(e,i,t,"month");return n}function pp(e,r,t,i){typeof e=="boolean"?(Vi(r)&&(t=r,r=void 0),r=r||""):(r=e,t=r,e=!1,Vi(r)&&(t=r,r=void 0),r=r||"");var n=qi(),a=e?n._week.dow:0,o,s=[];if(t!=null)return $f(r,(t+a)%7,i,"day");for(o=0;o<7;o++)s[o]=$f(r,(o+a)%7,i,"day");return s}function aW(e,r){return vb(e,r,"months")}function oW(e,r){return vb(e,r,"monthsShort")}function sW(e,r,t){return pp(e,r,t,"weekdays")}function lW(e,r,t){return pp(e,r,t,"weekdaysShort")}function uW(e,r,t){return pp(e,r,t,"weekdaysMin")}Dn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var r=e%10,t=st(e%100/10)===1?"th":r===1?"st":r===2?"nd":r===3?"rd":"th";return e+t}});F.lang=Sr("moment.lang is deprecated. Use moment.locale instead.",Dn);F.langData=Sr("moment.langData is deprecated. Use moment.localeData instead.",qi);var Ji=Math.abs;function hW(){var e=this._data;return this._milliseconds=Ji(this._milliseconds),this._days=Ji(this._days),this._months=Ji(this._months),e.milliseconds=Ji(e.milliseconds),e.seconds=Ji(e.seconds),e.minutes=Ji(e.minutes),e.hours=Ji(e.hours),e.months=Ji(e.months),e.years=Ji(e.years),this}function pb(e,r,t,i){var n=zr(r,t);return e._milliseconds+=i*n._milliseconds,e._days+=i*n._days,e._months+=i*n._months,e._bubble()}function fW(e,r){return pb(this,e,r,1)}function cW(e,r){return pb(this,e,r,-1)}function gb(e){return e<0?Math.floor(e):Math.ceil(e)}function dW(){var e=this._milliseconds,r=this._days,t=this._months,i=this._data,n,a,o,s,l;return e>=0&&r>=0&&t>=0||e<=0&&r<=0&&t<=0||(e+=gb(gp(t)+r)*864e5,r=0,t=0),i.milliseconds=e%1e3,n=Cr(e/1e3),i.seconds=n%60,a=Cr(n/60),i.minutes=a%60,o=Cr(a/60),i.hours=o%24,r+=Cr(o/24),l=Cr(mb(r)),t+=l,r-=gb(gp(l)),s=Cr(t/12),t%=12,i.days=r,i.months=t,i.years=s,this}function mb(e){return e*4800/146097}function gp(e){return e*146097/4800}function vW(e){if(!this.isValid())return NaN;var r,t,i=this._milliseconds;if(e=xr(e),e==="month"||e==="quarter"||e==="year")switch(r=this._days+i/864e5,t=this._months+mb(r),e){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(r=this._days+Math.round(gp(this._months)),e){case"week":return r/7+i/6048e5;case"day":return r+i/864e5;case"hour":return r*24+i/36e5;case"minute":return r*1440+i/6e4;case"second":return r*86400+i/1e3;case"millisecond":return Math.floor(r*864e5)+i;default:throw new Error("Unknown unit "+e)}}function pW(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+st(this._months/12)*31536e6:NaN}function Qi(e){return function(){return this.as(e)}}var gW=Qi("ms"),mW=Qi("s"),yW=Qi("m"),_W=Qi("h"),wW=Qi("d"),bW=Qi("w"),TW=Qi("M"),EW=Qi("Q"),SW=Qi("y");function xW(){return zr(this)}function CW(e){return e=xr(e),this.isValid()?this[e+"s"]():NaN}function Ba(e){return function(){return this.isValid()?this._data[e]:NaN}}var OW=Ba("milliseconds"),IW=Ba("seconds"),PW=Ba("minutes"),kW=Ba("hours"),RW=Ba("days"),DW=Ba("months"),AW=Ba("years");function MW(){return Cr(this.days()/7)}var tn=Math.round,rs={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function LW(e,r,t,i,n){return n.relativeTime(r||1,!!t,e,i)}function FW(e,r,t,i){var n=zr(e).abs(),a=tn(n.as("s")),o=tn(n.as("m")),s=tn(n.as("h")),l=tn(n.as("d")),u=tn(n.as("M")),h=tn(n.as("w")),f=tn(n.as("y")),c=a<=t.ss&&["s",a]||a<t.s&&["ss",a]||o<=1&&["m"]||o<t.m&&["mm",o]||s<=1&&["h"]||s<t.h&&["hh",s]||l<=1&&["d"]||l<t.d&&["dd",l];return t.w!=null&&(c=c||h<=1&&["w"]||h<t.w&&["ww",h]),c=c||u<=1&&["M"]||u<t.M&&["MM",u]||f<=1&&["y"]||["yy",f],c[2]=r,c[3]=+e>0,c[4]=i,LW.apply(null,c)}function NW(e){return e===void 0?tn:typeof e=="function"?(tn=e,!0):!1}function $W(e,r){return rs[e]===void 0?!1:r===void 0?rs[e]:(rs[e]=r,e==="s"&&(rs.ss=r-1),!0)}function GW(e,r){if(!this.isValid())return this.localeData().invalidDate();var t=!1,i=rs,n,a;return typeof e=="object"&&(r=e,e=!1),typeof e=="boolean"&&(t=e),typeof r=="object"&&(i=Object.assign({},rs,r),r.s!=null&&r.ss==null&&(i.ss=r.s-1)),n=this.localeData(),a=FW(this,!t,i,n),t&&(a=n.pastFuture(+this,a)),n.postformat(a)}var mp=Math.abs;function is(e){return(e>0)-(e<0)||+e}function Gf(){if(!this.isValid())return this.localeData().invalidDate();var e=mp(this._milliseconds)/1e3,r=mp(this._days),t=mp(this._months),i,n,a,o,s=this.asSeconds(),l,u,h,f;return s?(i=Cr(e/60),n=Cr(i/60),e%=60,i%=60,a=Cr(t/12),t%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",l=s<0?"-":"",u=is(this._months)!==is(s)?"-":"",h=is(this._days)!==is(s)?"-":"",f=is(this._milliseconds)!==is(s)?"-":"",l+"P"+(a?u+a+"Y":"")+(t?u+t+"M":"")+(r?h+r+"D":"")+(n||i||e?"T":"")+(n?f+n+"H":"")+(i?f+i+"M":"")+(e?f+o+"S":"")):"P0D"}var pt=Df.prototype;pt.isValid=RY;pt.abs=hW;pt.add=fW;pt.subtract=cW;pt.as=vW;pt.asMilliseconds=gW;pt.asSeconds=mW;pt.asMinutes=yW;pt.asHours=_W;pt.asDays=wW;pt.asWeeks=bW;pt.asMonths=TW;pt.asQuarters=EW;pt.asYears=SW;pt.valueOf=pW;pt._bubble=dW;pt.clone=xW;pt.get=CW;pt.milliseconds=OW;pt.seconds=IW;pt.minutes=PW;pt.hours=kW;pt.days=RW;pt.weeks=MW;pt.months=DW;pt.years=AW;pt.humanize=GW;pt.toISOString=Gf;pt.toString=Gf;pt.toJSON=Gf;pt.locale=nb;pt.localeData=ob;pt.toIsoString=Sr("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Gf);pt.lang=ab;U("X",0,0,"unix");U("x",0,0,"valueOf");Y("x",xf);Y("X",lG);xt("X",function(e,r,t){t._d=new Date(parseFloat(e)*1e3)});xt("x",function(e,r,t){t._d=new Date(st(e))});//! moment.js
F.version="2.29.1";j2(jt);F.fn=L;F.min=OY;F.max=IY;F.now=PY;F.utc=hi;F.unix=iW;F.months=aW;F.isDate=Ul;F.locale=Dn;F.invalid=mf;F.duration=zr;F.isMoment=Br;F.weekdays=sW;F.parseZone=nW;F.localeData=qi;F.isDuration=Af;F.monthsShort=oW;F.weekdaysMin=uW;F.defineLocale=np;F.updateLocale=nY;F.locales=aY;F.weekdaysShort=lW;F.normalizeUnits=xr;F.relativeTimeRounding=NW;F.relativeTimeThreshold=$W;F.calendarFormat=tj;F.prototype=L;F.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};/**
 * vis-timeline and vis-graph2d
 * https://visjs.github.io/vis-timeline/
 *
 * Create a fully customizable, interactive timeline with items and ranges.
 *
 * @version 7.4.9
 * @date    2021-06-05T17:20:46.148Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var yb=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Mn(e){var r={exports:{}};return e(r,r.exports),r.exports}var Yf=function(e){return e&&e.Math==Math&&e},Wt=Yf(typeof globalThis=="object"&&globalThis)||Yf(typeof window=="object"&&window)||Yf(typeof self=="object"&&self)||Yf(typeof yb=="object"&&yb)||function(){return this}()||Function("return this")(),Ft=function(e){try{return!!e()}catch(r){return!0}},Et=!Ft(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),_b={}.propertyIsEnumerable,wb=Object.getOwnPropertyDescriptor,YW=wb&&!_b.call({1:2},1),jW=YW?function(r){var t=wb(this,r);return!!t&&t.enumerable}:_b,ru={f:jW},Ua=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},WW={}.toString,Ln=function(e){return WW.call(e).slice(8,-1)},HW="".split,jf=Ft(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return Ln(e)=="String"?HW.call(e,""):Object(e)}:Object,ns=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e},nr=function(e){return jf(ns(e))},fe=function(e){return typeof e=="object"?e!==null:typeof e=="function"},as=function(e,r){if(!fe(e))return e;var t,i;if(r&&typeof(t=e.toString)=="function"&&!fe(i=t.call(e))||typeof(t=e.valueOf)=="function"&&!fe(i=t.call(e))||!r&&typeof(t=e.toString)=="function"&&!fe(i=t.call(e)))return i;throw TypeError("Can't convert object to primitive value")},ar=function(e){return Object(ns(e))},BW={}.hasOwnProperty,lt=Object.hasOwn||function(r,t){return BW.call(ar(r),t)},yp=Wt.document,UW=fe(yp)&&fe(yp.createElement),bb=function(e){return UW?yp.createElement(e):{}},Tb=!Et&&!Ft(function(){return Object.defineProperty(bb("div"),"a",{get:function(){return 7}}).a!=7}),Eb=Object.getOwnPropertyDescriptor,zW=Et?Eb:function(r,t){if(r=nr(r),t=as(t,!0),Tb)try{return Eb(r,t)}catch(i){}if(lt(r,t))return Ua(!ru.f.call(r,t),r[t])},iu={f:zW},VW=/#|\.prototype\./,nu=function(e,r){var t=KW[XW(e)];return t==qW?!0:t==ZW?!1:typeof r=="function"?Ft(r):!!r},XW=nu.normalize=function(e){return String(e).replace(VW,".").toLowerCase()},KW=nu.data={},ZW=nu.NATIVE="N",qW=nu.POLYFILL="P",JW=nu,ht={},os=function(e){if(typeof e!="function")throw TypeError(String(e)+" is not a function");return e},ss=function(e,r,t){if(os(e),r===void 0)return e;switch(t){case 0:return function(){return e.call(r)};case 1:return function(i){return e.call(r,i)};case 2:return function(i,n){return e.call(r,i,n)};case 3:return function(i,n,a){return e.call(r,i,n,a)}}return function(){return e.apply(r,arguments)}},or=function(e){if(!fe(e))throw TypeError(String(e)+" is not an object");return e},Sb=Object.defineProperty,QW=Et?Sb:function(r,t,i){if(or(r),t=as(t,!0),or(i),Tb)try{return Sb(r,t,i)}catch(n){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(r[t]=i.value),r},Or={f:QW},Ir=Et?function(e,r,t){return Or.f(e,r,Ua(1,t))}:function(e,r,t){return e[r]=t,e},tH=iu.f,eH=function(e){var r=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return r.prototype=e.prototype,r},J=function(e,r){var t=e.target,i=e.global,n=e.stat,a=e.proto,o=i?Wt:n?Wt[t]:(Wt[t]||{}).prototype,s=i?ht:ht[t]||(ht[t]={}),l=s.prototype,u,h,f,c,d,v,g,p,m;for(c in r)u=JW(i?c:t+(n?".":"#")+c,e.forced),h=!u&&o&&lt(o,c),v=s[c],h&&(e.noTargetGet?(m=tH(o,c),g=m&&m.value):g=o[c]),d=h&&g?g:r[c],!(h&&typeof v==typeof d)&&(e.bind&&h?p=ss(d,Wt):e.wrap&&h?p=eH(d):a&&typeof d=="function"?p=ss(Function.call,d):p=d,(e.sham||d&&d.sham||v&&v.sham)&&Ir(p,"sham",!0),s[c]=p,a&&(f=t+"Prototype",lt(ht,f)||Ir(ht,f,{}),ht[f][c]=d,e.real&&l&&!l[c]&&Ir(l,c,d)))},xb=function(e){return typeof e=="function"?e:void 0},za=function(e,r){return arguments.length<2?xb(ht[e])||xb(Wt[e]):ht[e]&&ht[e][r]||Wt[e]&&Wt[e][r]},rH=Math.ceil,iH=Math.floor,au=function(e){return isNaN(e=+e)?0:(e>0?iH:rH)(e)},nH=Math.min,vi=function(e){return e>0?nH(au(e),9007199254740991):0},aH=Math.max,oH=Math.min,ls=function(e,r){var t=au(e);return t<0?aH(t+r,0):oH(t,r)},Cb=function(e){return function(r,t,i){var n=nr(r),a=vi(n.length),o=ls(i,a),s;if(e&&t!=t){for(;a>o;)if(s=n[o++],s!=s)return!0}else for(;a>o;o++)if((e||o in n)&&n[o]===t)return e||o||0;return!e&&-1}},_p={includes:Cb(!0),indexOf:Cb(!1)},us={},sH=_p.indexOf,Ob=function(e,r){var t=nr(e),i=0,n=[],a;for(a in t)!lt(us,a)&&lt(t,a)&&n.push(a);for(;r.length>i;)lt(t,a=r[i++])&&(~sH(n,a)||n.push(a));return n},Wf=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],en=Object.keys||function(r){return Ob(r,Wf)},Ib=Et?Object.defineProperties:function(r,t){or(r);for(var i=en(t),n=i.length,a=0,o;n>a;)Or.f(r,o=i[a++],t[o]);return r},lH=za("document","documentElement"),uH=function(e,r){try{Ir(Wt,e,r)}catch(t){Wt[e]=r}return r},Pb="__core-js_shared__",hH=Wt[Pb]||uH(Pb,{}),Fn=hH,Va=Mn(function(e){(e.exports=function(r,t){return Fn[r]||(Fn[r]=t!==void 0?t:{})})("versions",[]).push({version:"3.14.0",mode:"pure",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})}),fH=0,cH=Math.random(),ou=function(e){return"Symbol("+String(e===void 0?"":e)+")_"+(++fH+cH).toString(36)},kb=Va("keys"),Hf=function(e){return kb[e]||(kb[e]=ou(e))},Rb=">",Db="<",wp="prototype",bp="script",Ab=Hf("IE_PROTO"),Tp=function(){},Mb=function(e){return Db+bp+Rb+e+Db+"/"+bp+Rb},dH=function(e){e.write(Mb("")),e.close();var r=e.parentWindow.Object;return e=null,r},vH=function(){var e=bb("iframe"),r="java"+bp+":",t;return e.style.display="none",lH.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(Mb("document.F=Object")),t.close(),t.F},Ep,Bf=function(){try{Ep=document.domain&&new ActiveXObject("htmlfile")}catch(r){}Bf=Ep?dH(Ep):vH();for(var e=Wf.length;e--;)delete Bf[wp][Wf[e]];return Bf()};us[Ab]=!0;var rn=Object.create||function(r,t){var i;return r!==null?(Tp[wp]=or(r),i=new Tp,Tp[wp]=null,i[Ab]=r):i=Bf(),t===void 0?i:Ib(i,t)},Lb=[].slice,Sp={},pH=function(e,r,t){if(!(r in Sp)){for(var i=[],n=0;n<r;n++)i[n]="a["+n+"]";Sp[r]=Function("C,a","return new C("+i.join(",")+")")}return Sp[r](e,t)},Fb=Function.bind||function(r){var t=os(this),i=Lb.call(arguments,1),n=function(){var o=i.concat(Lb.call(arguments));return this instanceof n?pH(t,o.length,o):t.apply(r,o)};return fe(t.prototype)&&(n.prototype=t.prototype),n},xp=za("Reflect","construct"),Nb=Ft(function(){function e(){}return!(xp(function(){},[],e)instanceof e)}),$b=!Ft(function(){xp(function(){})}),Gb=Nb||$b;J({target:"Reflect",stat:!0,forced:Gb,sham:Gb},{construct:function(r,t){os(r),or(t);var i=arguments.length<3?r:os(arguments[2]);if($b&&!Nb)return xp(r,t,i);if(r==i){switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(Fb.apply(r,n))}var a=i.prototype,o=rn(fe(a)?a:Object.prototype),s=Function.apply.call(r,o,t);return fe(s)?s:o}});var gH=ht.Reflect.construct,mH=gH,V=mH;function Ct(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}J({target:"Object",stat:!0,forced:!Et,sham:!Et},{defineProperty:Or.f});var Yb=Mn(function(e){var r=ht.Object,t=e.exports=function(n,a,o){return r.defineProperty(n,a,o)};r.defineProperty.sham&&(t.sham=!0)}),yH=Yb,jb=yH;function Wb(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),jb(e,i.key,i)}}function Ot(e,r,t){return r&&Wb(e.prototype,r),t&&Wb(e,t),e}function Oe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}J({target:"Object",stat:!0,sham:!Et},{create:rn});var _H=ht.Object,Hb=function(r,t){return _H.create(r,t)},wH=Hb,bH=wH,TH=function(e){if(!fe(e)&&e!==null)throw TypeError("Can't set "+String(e)+" as a prototype");return e},EH=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(r,[]),e=r instanceof Array}catch(i){}return function(n,a){return or(n),TH(a),e?t.call(n,a):n.__proto__=a,n}}():void 0);J({target:"Object",stat:!0},{setPrototypeOf:EH});var SH=ht.Object.setPrototypeOf,xH=SH,Bb=xH;function Cp(e,r){return Cp=Bb||function(i,n){return i.__proto__=n,i},Cp(e,r)}function sr(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=bH(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Cp(e,r)}var Nn=Array.isArray||function(r){return Ln(r)=="Array"},Xa=function(e,r,t){var i=as(r);i in e?Or.f(e,i,Ua(0,t)):e[i]=t},Ka=za("navigator","userAgent")||"",Ub=Wt.process,zb=Ub&&Ub.versions,Vb=zb&&zb.v8,pi,Uf;Vb?(pi=Vb.split("."),Uf=pi[0]<4?1:pi[0]+pi[1]):Ka&&(pi=Ka.match(/Edge\/(\d+)/),(!pi||pi[1]>=74)&&(pi=Ka.match(/Chrome\/(\d+)/),pi&&(Uf=pi[1])));var $n=Uf&&+Uf,gi=!!Object.getOwnPropertySymbols&&!Ft(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&$n&&$n<41}),Xb=gi&&!Symbol.sham&&typeof Symbol.iterator=="symbol",su=Va("wks"),lu=Wt.Symbol,CH=Xb?lu:lu&&lu.withoutSetter||ou,ce=function(e){return(!lt(su,e)||!(gi||typeof su[e]=="string"))&&(gi&&lt(lu,e)?su[e]=lu[e]:su[e]=CH("Symbol."+e)),su[e]},OH=ce("species"),Op=function(e,r){var t;return Nn(e)&&(t=e.constructor,typeof t=="function"&&(t===Array||Nn(t.prototype))?t=void 0:fe(t)&&(t=t[OH],t===null&&(t=void 0))),new(t===void 0?Array:t)(r===0?0:r)},IH=ce("species"),uu=function(e){return $n>=51||!Ft(function(){var r=[],t=r.constructor={};return t[IH]=function(){return{foo:1}},r[e](Boolean).foo!==1})},Kb=ce("isConcatSpreadable"),Zb=9007199254740991,qb="Maximum allowed index exceeded",PH=$n>=51||!Ft(function(){var e=[];return e[Kb]=!1,e.concat()[0]!==e}),kH=uu("concat"),RH=function(e){if(!fe(e))return!1;var r=e[Kb];return r!==void 0?!!r:Nn(e)},DH=!PH||!kH;J({target:"Array",proto:!0,forced:DH},{concat:function(r){var t=ar(this),i=Op(t,0),n=0,a,o,s,l,u;for(a=-1,s=arguments.length;a<s;a++)if(u=a===-1?t:arguments[a],RH(u)){if(l=vi(u.length),n+l>Zb)throw TypeError(qb);for(o=0;o<l;o++,n++)o in u&&Xa(i,n,u[o])}else{if(n>=Zb)throw TypeError(qb);Xa(i,n++,u)}return i.length=n,i}});var AH=Wf.concat("length","prototype"),MH=Object.getOwnPropertyNames||function(r){return Ob(r,AH)},Ip={f:MH},Jb=Ip.f,LH={}.toString,Qb=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],FH=function(e){try{return Jb(e)}catch(r){return Qb.slice()}},NH=function(r){return Qb&&LH.call(r)=="[object Window]"?FH(r):Jb(nr(r))},tT={f:NH},$H=Object.getOwnPropertySymbols,hu={f:$H},zf=function(e,r,t,i){i&&i.enumerable?e[r]=t:Ir(e,r,t)},GH=ce,Pp={f:GH},YH=Or.f,qt=function(e){var r=ht.Symbol||(ht.Symbol={});lt(r,e)||YH(r,e,{value:Pp.f(e)})},jH=ce("toStringTag"),eT={};eT[jH]="z";var kp=String(eT)==="[object z]",WH=ce("toStringTag"),HH=Ln(function(){return arguments}())=="Arguments",BH=function(e,r){try{return e[r]}catch(t){}},Vf=kp?Ln:function(e){var r,t,i;return e===void 0?"Undefined":e===null?"Null":typeof(t=BH(r=Object(e),WH))=="string"?t:HH?Ln(r):(i=Ln(r))=="Object"&&typeof r.callee=="function"?"Arguments":i},UH=kp?{}.toString:function(){return"[object "+Vf(this)+"]"},zH=Or.f,rT=ce("toStringTag"),fu=function(e,r,t,i){if(e){var n=t?e:e.prototype;lt(n,rT)||zH(n,rT,{configurable:!0,value:r}),i&&!kp&&Ir(n,"toString",UH)}},VH=Function.toString;typeof Fn.inspectSource!="function"&&(Fn.inspectSource=function(e){return VH.call(e)});var XH=Fn.inspectSource,iT=Wt.WeakMap,KH=typeof iT=="function"&&/native code/.test(XH(iT)),nT="Object already initialized",ZH=Wt.WeakMap,Xf,cu,Kf,qH=function(e){return Kf(e)?cu(e):Xf(e,{})},JH=function(e){return function(r){var t;if(!fe(r)||(t=cu(r)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return t}};if(KH||Fn.state){var Za=Fn.state||(Fn.state=new ZH),QH=Za.get,aT=Za.has,tB=Za.set;Xf=function(e,r){if(aT.call(Za,e))throw new TypeError(nT);return r.facade=e,tB.call(Za,e,r),r},cu=function(e){return QH.call(Za,e)||{}},Kf=function(e){return aT.call(Za,e)}}else{var hs=Hf("state");us[hs]=!0,Xf=function(e,r){if(lt(e,hs))throw new TypeError(nT);return r.facade=e,Ir(e,hs,r),r},cu=function(e){return lt(e,hs)?e[hs]:{}},Kf=function(e){return lt(e,hs)}}var mi={set:Xf,get:cu,has:Kf,enforce:qH,getterFor:JH},oT=[].push,Gn=function(e){var r=e==1,t=e==2,i=e==3,n=e==4,a=e==6,o=e==7,s=e==5||a;return function(l,u,h,f){for(var c=ar(l),d=jf(c),v=ss(u,h,3),g=vi(d.length),p=0,m=f||Op,_=r?m(l,g):t||o?m(l,0):void 0,y,w;g>p;p++)if((s||p in d)&&(y=d[p],w=v(y,p,c),e))if(r)_[p]=w;else if(w)switch(e){case 3:return!0;case 5:return y;case 6:return p;case 2:oT.call(_,y)}else switch(e){case 4:return!1;case 7:oT.call(_,y)}return a?-1:i||n?n:_}},Yn={forEach:Gn(0),map:Gn(1),filter:Gn(2),some:Gn(3),every:Gn(4),find:Gn(5),findIndex:Gn(6),filterOut:Gn(7)},Zf=Yn.forEach,Xe=Hf("hidden"),qf="Symbol",nn="prototype",sT=ce("toPrimitive"),eB=mi.set,lT=mi.getterFor(qf),Vr=Object[nn],Ke=Wt.Symbol,du=za("JSON","stringify"),uT=iu.f,jn=Or.f,hT=tT.f,rB=ru.f,an=Va("symbols"),vu=Va("op-symbols"),Rp=Va("string-to-symbol-registry"),Dp=Va("symbol-to-string-registry"),iB=Va("wks"),Ap=Wt.QObject,Mp=!Ap||!Ap[nn]||!Ap[nn].findChild,Lp=Et&&Ft(function(){return rn(jn({},"a",{get:function(){return jn(this,"a",{value:7}).a}})).a!=7})?function(e,r,t){var i=uT(Vr,r);i&&delete Vr[r],jn(e,r,t),i&&e!==Vr&&jn(Vr,r,i)}:jn,Fp=function(e,r){var t=an[e]=rn(Ke[nn]);return eB(t,{type:qf,tag:e,description:r}),Et||(t.description=r),t},Np=Xb?function(e){return typeof e=="symbol"}:function(e){return Object(e)instanceof Ke},Jf=function(r,t,i){r===Vr&&Jf(vu,t,i),or(r);var n=as(t,!0);return or(i),lt(an,n)?(i.enumerable?(lt(r,Xe)&&r[Xe][n]&&(r[Xe][n]=!1),i=rn(i,{enumerable:Ua(0,!1)})):(lt(r,Xe)||jn(r,Xe,Ua(1,{})),r[Xe][n]=!0),Lp(r,n,i)):jn(r,n,i)},fT=function(r,t){or(r);var i=nr(t),n=en(i).concat($p(i));return Zf(n,function(a){(!Et||cT.call(i,a))&&Jf(r,a,i[a])}),r},nB=function(r,t){return t===void 0?rn(r):fT(rn(r),t)},cT=function(r){var t=as(r,!0),i=rB.call(this,t);return this===Vr&&lt(an,t)&&!lt(vu,t)?!1:i||!lt(this,t)||!lt(an,t)||lt(this,Xe)&&this[Xe][t]?i:!0},dT=function(r,t){var i=nr(r),n=as(t,!0);if(!(i===Vr&&lt(an,n)&&!lt(vu,n))){var a=uT(i,n);return a&&lt(an,n)&&!(lt(i,Xe)&&i[Xe][n])&&(a.enumerable=!0),a}},vT=function(r){var t=hT(nr(r)),i=[];return Zf(t,function(n){!lt(an,n)&&!lt(us,n)&&i.push(n)}),i},$p=function(r){var t=r===Vr,i=hT(t?vu:nr(r)),n=[];return Zf(i,function(a){lt(an,a)&&(!t||lt(Vr,a))&&n.push(an[a])}),n};gi||(Ke=function(){if(this instanceof Ke)throw TypeError("Symbol is not a constructor");var r=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),t=ou(r),i=function(n){this===Vr&&i.call(vu,n),lt(this,Xe)&&lt(this[Xe],t)&&(this[Xe][t]=!1),Lp(this,t,Ua(1,n))};return Et&&Mp&&Lp(Vr,t,{configurable:!0,set:i}),Fp(t,r)},zf(Ke[nn],"toString",function(){return lT(this).tag}),zf(Ke,"withoutSetter",function(e){return Fp(ou(e),e)}),ru.f=cT,Or.f=Jf,iu.f=dT,Ip.f=tT.f=vT,hu.f=$p,Pp.f=function(e){return Fp(ce(e),e)},Et&&jn(Ke[nn],"description",{configurable:!0,get:function(){return lT(this).description}}));J({global:!0,wrap:!0,forced:!gi,sham:!gi},{Symbol:Ke});Zf(en(iB),function(e){qt(e)});J({target:qf,stat:!0,forced:!gi},{for:function(e){var r=String(e);if(lt(Rp,r))return Rp[r];var t=Ke(r);return Rp[r]=t,Dp[t]=r,t},keyFor:function(r){if(!Np(r))throw TypeError(r+" is not a symbol");if(lt(Dp,r))return Dp[r]},useSetter:function(){Mp=!0},useSimple:function(){Mp=!1}});J({target:"Object",stat:!0,forced:!gi,sham:!Et},{create:nB,defineProperty:Jf,defineProperties:fT,getOwnPropertyDescriptor:dT});J({target:"Object",stat:!0,forced:!gi},{getOwnPropertyNames:vT,getOwnPropertySymbols:$p});J({target:"Object",stat:!0,forced:Ft(function(){hu.f(1)})},{getOwnPropertySymbols:function(r){return hu.f(ar(r))}});if(du){var aB=!gi||Ft(function(){var e=Ke();return du([e])!="[null]"||du({a:e})!="{}"||du(Object(e))!="{}"});J({target:"JSON",stat:!0,forced:aB},{stringify:function(r,t,i){for(var n=[r],a=1,o;arguments.length>a;)n.push(arguments[a++]);if(o=t,!(!fe(t)&&r===void 0||Np(r)))return Nn(t)||(t=function(s,l){if(typeof o=="function"&&(l=o.call(this,s,l)),!Np(l))return l}),n[1]=t,du.apply(null,n)}})}Ke[nn][sT]||Ir(Ke[nn],sT,Ke[nn].valueOf);fu(Ke,qf);us[Xe]=!0;qt("asyncIterator");qt("hasInstance");qt("isConcatSpreadable");qt("iterator");qt("match");qt("matchAll");qt("replace");qt("search");qt("species");qt("split");qt("toPrimitive");qt("toStringTag");qt("unscopables");fu(Wt.JSON,"JSON",!0);var pT=ht.Symbol;qt("asyncDispose");qt("dispose");qt("matcher");qt("metadata");qt("observable");qt("patternMatch");qt("replaceAll");var oB=pT,fs=oB,gT=function(e){return function(r,t){var i=String(ns(r)),n=au(t),a=i.length,o,s;return n<0||n>=a?e?"":void 0:(o=i.charCodeAt(n),o<55296||o>56319||n+1===a||(s=i.charCodeAt(n+1))<56320||s>57343?e?i.charAt(n):o:e?i.slice(n,n+2):(o-55296<<10)+(s-56320)+65536)}},sB={codeAt:gT(!1),charAt:gT(!0)},mT=!Ft(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),yT=Hf("IE_PROTO"),lB=Object.prototype,pu=mT?Object.getPrototypeOf:function(e){return e=ar(e),lt(e,yT)?e[yT]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?lB:null},Gp=ce("iterator"),_T=!1,uB=function(){return this},qa,Yp,jp;[].keys&&(jp=[].keys(),"next"in jp?(Yp=pu(pu(jp)),Yp!==Object.prototype&&(qa=Yp)):_T=!0);var wT=qa==null||Ft(function(){var e={};return qa[Gp].call(e)!==e});wT&&(qa={});wT&&!lt(qa,Gp)&&Ir(qa,Gp,uB);var Wp={IteratorPrototype:qa,BUGGY_SAFARI_ITERATORS:_T},on={},hB=Wp.IteratorPrototype,fB=function(){return this},cB=function(e,r,t){var i=r+" Iterator";return e.prototype=rn(hB,{next:Ua(1,t)}),fu(e,i,!1,!0),on[i]=fB,e},dB=Wp.IteratorPrototype,Qf=Wp.BUGGY_SAFARI_ITERATORS,Hp=ce("iterator"),bT="keys",tc="values",TT="entries",vB=function(){return this},Bp=function(e,r,t,i,n,a,o){cB(t,r,i);var s=function(m){if(m===n&&c)return c;if(!Qf&&m in h)return h[m];switch(m){case bT:return function(){return new t(this,m)};case tc:return function(){return new t(this,m)};case TT:return function(){return new t(this,m)}}return function(){return new t(this)}},l=r+" Iterator",u=!1,h=e.prototype,f=h[Hp]||h["@@iterator"]||n&&h[n],c=!Qf&&f||s(n),d=r=="Array"&&h.entries||f,v,g,p;if(d&&(v=pu(d.call(new e)),dB!==Object.prototype&&v.next&&(fu(v,l,!0,!0),on[l]=vB)),n==tc&&f&&f.name!==tc&&(u=!0,c=function(){return f.call(this)}),o&&h[Hp]!==c&&Ir(h,Hp,c),on[r]=c,n)if(g={values:s(tc),keys:a?c:s(bT),entries:s(TT)},o)for(p in g)(Qf||u||!(p in h))&&zf(h,p,g[p]);else J({target:r,proto:!0,forced:Qf||u},g);return g},pB=sB.charAt,ET="String Iterator",gB=mi.set,mB=mi.getterFor(ET);Bp(String,"String",function(e){gB(this,{type:ET,string:String(e),index:0})},function(){var r=mB(this),t=r.string,i=r.index,n;return i>=t.length?{value:void 0,done:!0}:(n=pB(t,i),r.index+=n.length,{value:n,done:!1})});var ST="Array Iterator",yB=mi.set,_B=mi.getterFor(ST);Bp(Array,"Array",function(e,r){yB(this,{type:ST,target:nr(e),index:0,kind:r})},function(){var e=_B(this),r=e.target,t=e.kind,i=e.index++;return!r||i>=r.length?(e.target=void 0,{value:void 0,done:!0}):t=="keys"?{value:i,done:!1}:t=="values"?{value:r[i],done:!1}:{value:[i,r[i]],done:!1}},"values");on.Arguments=on.Array;var wB={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},xT=ce("toStringTag");for(var Up in wB){var CT=Wt[Up],zp=CT&&CT.prototype;zp&&Vf(zp)!==xT&&Ir(zp,xT,Up),on[Up]=on.Array}var bB=Pp.f("iterator"),TB=bB,EB=TB;function ot(e){return typeof fs=="function"&&typeof EB=="symbol"?ot=function(t){return typeof t}:ot=function(t){return t&&typeof fs=="function"&&t.constructor===fs&&t!==fs.prototype?"symbol":typeof t},ot(e)}function lr(e,r){return r&&(ot(r)==="object"||typeof r=="function")?r:Oe(e)}var SB=Ft(function(){pu(1)});J({target:"Object",stat:!0,forced:SB,sham:!mT},{getPrototypeOf:function(r){return pu(ar(r))}});var OT=ht.Object.getPrototypeOf,xB=OT,IT=xB;function It(e){return It=Bb?IT:function(t){return t.__proto__||IT(t)},It(e)}J({target:"Array",stat:!0},{isArray:Nn});var PT=ht.Array.isArray,CB=PT,ct=CB;J({target:"Function",proto:!0},{bind:Fb});var de=function(e){return ht[e+"Prototype"]},OB=de("Function").bind,kT=Function.prototype,IB=function(e){var r=e.bind;return e===kT||e instanceof Function&&r===kT.bind?OB:r},PB=IB,R=PB,kB=[].slice,RB=/MSIE .\./.test(Ka),RT=function(e){return function(r,t){var i=arguments.length>2,n=i?kB.call(arguments,2):void 0;return e(i?function(){(typeof r=="function"?r:Function(r)).apply(this,n)}:r,t)}};J({global:!0,bind:!0,forced:RB},{setTimeout:RT(Wt.setTimeout),setInterval:RT(Wt.setInterval)});var DB=ht.setTimeout,Ae=DB,cs=function(e,r){var t=[][e];return!!t&&Ft(function(){t.call(null,r||function(){throw 1},1)})},AB=Yn.forEach,MB=cs("forEach"),DT=MB?[].forEach:function(r){return AB(this,r,arguments.length>1?arguments[1]:void 0)};J({target:"Array",proto:!0,forced:[].forEach!=DT},{forEach:DT});var LB=de("Array").forEach,FB=LB,AT=Array.prototype,NB={DOMTokenList:!0,NodeList:!0},$B=function(e){var r=e.forEach;return e===AT||e instanceof Array&&r===AT.forEach||NB.hasOwnProperty(Vf(e))?FB:r},G=$B,Ze=typeof window!="undefined"&&window.moment||F,GB=ht.Object.getOwnPropertySymbols,YB=GB,ec=YB,jB=Yn.filter,WB=uu("filter");J({target:"Array",proto:!0,forced:!WB},{filter:function(r){return jB(this,r,arguments.length>1?arguments[1]:void 0)}});var HB=de("Array").filter,MT=Array.prototype,BB=function(e){var r=e.filter;return e===MT||e instanceof Array&&r===MT.filter?HB:r},UB=BB,gt=UB,LT=iu.f,zB=Ft(function(){LT(1)}),VB=!Et||zB;J({target:"Object",stat:!0,forced:VB,sham:!Et},{getOwnPropertyDescriptor:function(r,t){return LT(nr(r),t)}});var XB=Mn(function(e){var r=ht.Object,t=e.exports=function(n,a){return r.getOwnPropertyDescriptor(n,a)};r.getOwnPropertyDescriptor.sham&&(t.sham=!0)}),KB=XB,rc=KB,FT=za("Reflect","ownKeys")||function(r){var t=Ip.f(or(r)),i=hu.f;return i?t.concat(i(r)):t};J({target:"Object",stat:!0,sham:!Et},{getOwnPropertyDescriptors:function(r){for(var t=nr(r),i=iu.f,n=FT(t),a={},o=0,s,l;n.length>o;)l=i(t,s=n[o++]),l!==void 0&&Xa(a,s,l);return a}});var ZB=ht.Object.getOwnPropertyDescriptors,qB=ZB,ic=qB;J({target:"Object",stat:!0,forced:!Et,sham:!Et},{defineProperties:Ib});var JB=Mn(function(e){var r=ht.Object,t=e.exports=function(n,a){return r.defineProperties(n,a)};r.defineProperties.sham&&(t.sham=!0)}),QB=JB,NT=QB;function $T(e,r,t){return r in e?jb(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var tU=Yn.map,eU=uu("map");J({target:"Array",proto:!0,forced:!eU},{map:function(r){return tU(this,r,arguments.length>1?arguments[1]:void 0)}});var rU=de("Array").map,GT=Array.prototype,iU=function(e){var r=e.map;return e===GT||e instanceof Array&&r===GT.map?rU:r},nU=iU,me=nU,YT=function(e){return function(r,t,i,n){os(t);var a=ar(r),o=jf(a),s=vi(a.length),l=e?s-1:0,u=e?-1:1;if(i<2)for(;;){if(l in o){n=o[l],l+=u;break}if(l+=u,e?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=u)l in o&&(n=t(n,o[l],l,a));return n}},aU={left:YT(!1),right:YT(!0)},oU=Ln(Wt.process)=="process",sU=aU.left,lU=cs("reduce"),uU=!oU&&$n>79&&$n<83;J({target:"Array",proto:!0,forced:!lU||uU},{reduce:function(r){return sU(this,r,arguments.length,arguments.length>1?arguments[1]:void 0)}});var hU=de("Array").reduce,jT=Array.prototype,fU=function(e){var r=e.reduce;return e===jT||e instanceof Array&&r===jT.reduce?hU:r},cU=fU,WT=cU,dU=Ft(function(){en(1)});J({target:"Object",stat:!0,forced:dU},{keys:function(r){return en(ar(r))}});var vU=ht.Object.keys,pU=vU,ye=pU,gU=Yb,Vp=gU,Xp=function(e){var r=e.return;if(r!==void 0)return or(r.call(e)).value},mU=function(e,r,t,i){try{return i?r(or(t)[0],t[1]):r(t)}catch(n){throw Xp(e),n}},yU=ce("iterator"),_U=Array.prototype,HT=function(e){return e!==void 0&&(on.Array===e||_U[yU]===e)},wU=ce("iterator"),Kp=function(e){if(e!=null)return e[wU]||e["@@iterator"]||on[Vf(e)]},bU=function(r){var t=ar(r),i=typeof this=="function"?this:Array,n=arguments.length,a=n>1?arguments[1]:void 0,o=a!==void 0,s=Kp(t),l=0,u,h,f,c,d,v;if(o&&(a=ss(a,n>2?arguments[2]:void 0,2)),s!=null&&!(i==Array&&HT(s)))for(c=s.call(t),d=c.next,h=new i;!(f=d.call(c)).done;l++)v=o?mU(c,a,[f.value,l],!0):f.value,Xa(h,l,v);else for(u=vi(t.length),h=new i(u);u>l;l++)v=o?a(t[l],l):t[l],Xa(h,l,v);return h.length=l,h},BT=ce("iterator"),UT=!1;try{var TU=0,zT={next:function(){return{done:!!TU++}},return:function(){UT=!0}};zT[BT]=function(){return this},Array.from(zT,function(){throw 2})}catch(e){}var EU=function(e,r){if(!r&&!UT)return!1;var t=!1;try{var i={};i[BT]=function(){return{next:function(){return{done:t=!0}}}},e(i)}catch(n){}return t},SU=!EU(function(e){Array.from(e)});J({target:"Array",stat:!0,forced:SU},{from:bU});var VT=ht.Array.from,xU=VT,ds=xU,CU=Kp,Wn=CU,OU=PT,XT=OU;function IU(e){if(XT(e))return e}function PU(e,r){var t=e&&(typeof fs!="undefined"&&Wn(e)||e["@@iterator"]);if(t!=null){var i=[],n=!0,a=!1,o,s;try{for(t=t.call(e);!(n=(o=t.next()).done)&&(i.push(o.value),!(r&&i.length===r));n=!0);}catch(l){a=!0,s=l}finally{try{!n&&t.return!=null&&t.return()}finally{if(a)throw s}}return i}}var kU=uu("slice"),RU=ce("species"),DU=[].slice,AU=Math.max;J({target:"Array",proto:!0,forced:!kU},{slice:function(r,t){var i=nr(this),n=vi(i.length),a=ls(r,n),o=ls(t===void 0?n:t,n),s,l,u;if(Nn(i)&&(s=i.constructor,typeof s=="function"&&(s===Array||Nn(s.prototype))?s=void 0:fe(s)&&(s=s[RU],s===null&&(s=void 0)),s===Array||s===void 0))return DU.call(i,a,o);for(l=new(s===void 0?Array:s)(AU(o-a,0)),u=0;a<o;a++,u++)a in i&&Xa(l,u,i[a]);return l.length=u,l}});var MU=de("Array").slice,KT=Array.prototype,ZT=function(e){var r=e.slice;return e===KT||e instanceof Array&&r===KT.slice?MU:r},LU=ZT,FU=LU,NU=VT,qT=NU;function Zp(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function JT(e,r){var t;if(!!e){if(typeof e=="string")return Zp(e,r);var i=FU(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return qT(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Zp(e,r)}}function $U(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GU(e,r){return IU(e)||PU(e,r)||JT(e,r)||$U()}function YU(e){if(XT(e))return Zp(e)}function jU(e){if(typeof fs!="undefined"&&Wn(e)!=null||e["@@iterator"]!=null)return qT(e)}function WU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yi(e){return YU(e)||jU(e)||JT(e)||WU()}var HU=pT,Ja=HU,BU=de("Array").concat,QT=Array.prototype,UU=function(e){var r=e.concat;return e===QT||e instanceof Array&&r===QT.concat?BU:r},zU=UU,Ut=zU,VU=ZT,Pr=VU;J({target:"Reflect",stat:!0},{ownKeys:FT});var XU=ht.Reflect.ownKeys,KU=XU,ZU=KU;J({target:"Date",stat:!0},{now:function(){return new Date().getTime()}});var qU=ht.Date.now,JU=qU,ur=JU,QU=[].reverse,tE=[1,2];J({target:"Array",proto:!0,forced:String(tE)===String(tE.reverse())},{reverse:function(){return Nn(this)&&(this.length=this.length),QU.call(this)}});var tz=de("Array").reverse,eE=Array.prototype,ez=function(e){var r=e.reverse;return e===eE||e instanceof Array&&r===eE.reverse?tz:r},rz=ez,iz=rz,nz=uu("splice"),az=Math.max,oz=Math.min,sz=9007199254740991,lz="Maximum allowed length exceeded";J({target:"Array",proto:!0,forced:!nz},{splice:function(r,t){var i=ar(this),n=vi(i.length),a=ls(r,n),o=arguments.length,s,l,u,h,f,c;if(o===0?s=l=0:o===1?(s=0,l=n-a):(s=o-2,l=oz(az(au(t),0),n-a)),n+s-l>sz)throw TypeError(lz);for(u=Op(i,l),h=0;h<l;h++)f=a+h,f in i&&Xa(u,h,i[f]);if(u.length=l,s<l){for(h=a;h<n-l;h++)f=h+l,c=h+s,f in i?i[c]=i[f]:delete i[c];for(h=n;h>n-l+s;h--)delete i[h-1]}else if(s>l)for(h=n-l;h>a;h--)f=h+l-1,c=h+s-1,f in i?i[c]=i[f]:delete i[c];for(h=0;h<s;h++)i[h+a]=arguments[h+2];return i.length=n-l+s,u}});var uz=de("Array").splice,rE=Array.prototype,hz=function(e){var r=e.splice;return e===rE||e instanceof Array&&r===rE.splice?uz:r},fz=hz,kr=fz,vs=Object.assign,iE=Object.defineProperty,nE=!vs||Ft(function(){if(Et&&vs({b:1},vs(iE({},"a",{enumerable:!0,get:function(){iE(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol(),i="abcdefghijklmnopqrst";return e[t]=7,i.split("").forEach(function(n){r[n]=n}),vs({},e)[t]!=7||en(vs({},r)).join("")!=i})?function(r,t){for(var i=ar(r),n=arguments.length,a=1,o=hu.f,s=ru.f;n>a;)for(var l=jf(arguments[a++]),u=o?en(l).concat(o(l)):en(l),h=u.length,f=0,c;h>f;)c=u[f++],(!Et||s.call(l,c))&&(i[c]=l[c]);return i}:vs;J({target:"Object",stat:!0,forced:Object.assign!==nE},{assign:nE});var cz=ht.Object.assign,dz=cz,Qa=dz,vz=_p.includes;J({target:"Array",proto:!0},{includes:function(r){return vz(this,r,arguments.length>1?arguments[1]:void 0)}});var pz=de("Array").includes,gz=ce("match"),mz=function(e){var r;return fe(e)&&((r=e[gz])!==void 0?!!r:Ln(e)=="RegExp")},yz=function(e){if(mz(e))throw TypeError("The method doesn't accept regular expressions");return e},_z=ce("match"),wz=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[_z]=!1,"/./"[e](r)}catch(i){}}return!1};J({target:"String",proto:!0,forced:!wz("includes")},{includes:function(r){return!!~String(ns(this)).indexOf(yz(r),arguments.length>1?arguments[1]:void 0)}});var bz=de("String").includes,aE=Array.prototype,oE=String.prototype,Tz=function(e){var r=e.includes;return e===aE||e instanceof Array&&r===aE.includes?pz:typeof e=="string"||e===oE||e instanceof String&&r===oE.includes?bz:r},Ez=Tz,Hn=Ez,Sz=OT,sE=Sz,xz=ru.f,lE=function(e){return function(r){for(var t=nr(r),i=en(t),n=i.length,a=0,o=[],s;n>a;)s=i[a++],(!Et||xz.call(t,s))&&o.push(e?[s,t[s]]:t[s]);return o}},Cz={entries:lE(!0),values:lE(!1)},Oz=Cz.values;J({target:"Object",stat:!0},{values:function(r){return Oz(r)}});var Iz=ht.Object.values,Pz=Iz,uE=Pz,ps=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,nc="["+ps+"]",kz=RegExp("^"+nc+nc+"*"),Rz=RegExp(nc+nc+"*$"),qp=function(e){return function(r){var t=String(ns(r));return e&1&&(t=t.replace(kz,"")),e&2&&(t=t.replace(Rz,"")),t}},Jp={start:qp(1),end:qp(2),trim:qp(3)},Dz=Jp.trim,ac=Wt.parseInt,Az=/^[+-]?0[Xx]/,Mz=ac(ps+"08")!==8||ac(ps+"0x16")!==22,hE=Mz?function(r,t){var i=Dz(String(r));return ac(i,t>>>0||(Az.test(i)?16:10))}:ac;J({global:!0,forced:parseInt!=hE},{parseInt:hE});var Lz=ht.parseInt,Fz=Lz,hr=Fz,Nz=_p.indexOf,fE=[].indexOf,cE=!!fE&&1/[1].indexOf(1,-0)<0,$z=cs("indexOf");J({target:"Array",proto:!0,forced:cE||!$z},{indexOf:function(r){return cE?fE.apply(this,arguments)||0:Nz(this,r,arguments.length>1?arguments[1]:void 0)}});var Gz=de("Array").indexOf,dE=Array.prototype,Yz=function(e){var r=e.indexOf;return e===dE||e instanceof Array&&r===dE.indexOf?Gz:r},jz=Yz,Pt=jz,vE="\u200B\x85\u180E",Wz=function(e){return Ft(function(){return!!ps[e]()||vE[e]()!=vE||ps[e].name!==e})},Hz=Jp.trim;J({target:"String",proto:!0,forced:Wz("trim")},{trim:function(){return Hz(this)}});var Bz=de("String").trim,pE=String.prototype,Uz=function(e){var r=e.trim;return typeof e=="string"||e===pE||e instanceof String&&r===pE.trim?Bz:r},zz=Uz,Qp=zz,Vz=Hb,oc=Vz,sc=za("JSON","stringify"),Xz=/[\uD800-\uDFFF]/g,gE=/^[\uD800-\uDBFF]$/,mE=/^[\uDC00-\uDFFF]$/,Kz=function(e,r,t){var i=t.charAt(r-1),n=t.charAt(r+1);return gE.test(e)&&!mE.test(n)||mE.test(e)&&!gE.test(i)?"\\u"+e.charCodeAt(0).toString(16):e},Zz=Ft(function(){return sc("\uDF06\uD834")!=='"\\udf06\\ud834"'||sc("\uDEAD")!=='"\\udead"'});sc&&J({target:"JSON",stat:!0,forced:Zz},{stringify:function(r,t,i){var n=sc.apply(null,arguments);return typeof n=="string"?n.replace(Xz,Kz):n}});ht.JSON||(ht.JSON={stringify:JSON.stringify});var qz=function(r,t,i){return ht.JSON.stringify.apply(null,arguments)},Jz=qz,fr=Jz,Qz=function(r){for(var t=ar(this),i=vi(t.length),n=arguments.length,a=ls(n>1?arguments[1]:void 0,i),o=n>2?arguments[2]:void 0,s=o===void 0?i:ls(o,i);s>a;)t[a++]=r;return t};J({target:"Array",proto:!0},{fill:Qz});var tV=de("Array").fill,yE=Array.prototype,eV=function(e){var r=e.fill;return e===yE||e instanceof Array&&r===yE.fill?tV:r},rV=eV,_E=rV,tg=Mn(function(e){e.exports=r;function r(i){if(i)return t(i)}function t(i){for(var n in r.prototype)i[n]=r.prototype[n];return i}r.prototype.on=r.prototype.addEventListener=function(i,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(n),this},r.prototype.once=function(i,n){function a(){this.off(i,a),n.apply(this,arguments)}return a.fn=n,this.on(i,a),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(i,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+i];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var o,s=0;s<a.length;s++)if(o=a[s],o===n||o.fn===n){a.splice(s,1);break}return a.length===0&&delete this._callbacks["$"+i],this},r.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),a=this._callbacks["$"+i],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(a){a=a.slice(0);for(var o=0,s=a.length;o<s;++o)a[o].apply(this,n)}return this},r.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},r.prototype.hasListeners=function(i){return!!this.listeners(i).length}});/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Xr(){return Xr=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Xr.apply(this,arguments)}function Rr(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function lc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var eg;typeof Object.assign!="function"?eg=function(r){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),i=1;i<arguments.length;i++){var n=arguments[i];if(n!=null)for(var a in n)n.hasOwnProperty(a)&&(t[a]=n[a])}return t}:eg=Object.assign;var to=eg,wE=["","webkit","Moz","MS","ms","o"],iV=typeof document=="undefined"?{style:{}}:document.createElement("div"),nV="function",gs=Math.round,eo=Math.abs,rg=Date.now;function uc(e,r){for(var t,i,n=r[0].toUpperCase()+r.slice(1),a=0;a<wE.length;){if(t=wE[a],i=t?t+n:r,i in e)return i;a++}}var sn;typeof window=="undefined"?sn={}:sn=window;var bE=uc(iV.style,"touchAction"),TE=bE!==void 0;function aV(){if(!TE)return!1;var e={},r=sn.CSS&&sn.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=r?sn.CSS.supports("touch-action",t):!0}),e}var EE="compute",SE="auto",ig="manipulation",ro="none",gu="pan-x",mu="pan-y",hc=aV(),oV=/mobile|tablet|ip(ad|hone|od)|android/i,xE="ontouchstart"in sn,sV=uc(sn,"PointerEvent")!==void 0,lV=xE&&oV.test(navigator.userAgent),yu="touch",uV="pen",ng="mouse",hV="kinect",fV=25,Me=1,io=2,ie=4,qe=8,fc=1,_u=2,wu=4,bu=8,ms=16,_i=_u|wu,no=bu|ms,CE=_i|no,OE=["x","y"],cc=["clientX","clientY"];function ln(e,r,t){var i;if(!!e)if(e.forEach)e.forEach(r,t);else if(e.length!==void 0)for(i=0;i<e.length;)r.call(t,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&r.call(t,e[i],i,e)}function dc(e,r){return typeof e===nV?e.apply(r&&r[0]||void 0,r):e}function ao(e,r){return e.indexOf(r)>-1}function cV(e){if(ao(e,ro))return ro;var r=ao(e,gu),t=ao(e,mu);return r&&t?ro:r||t?r?gu:mu:ao(e,ig)?ig:SE}var IE=function(){function e(t,i){this.manager=t,this.set(i)}var r=e.prototype;return r.set=function(i){i===EE&&(i=this.compute()),TE&&this.manager.element.style&&hc[i]&&(this.manager.element.style[bE]=i),this.actions=i.toLowerCase().trim()},r.update=function(){this.set(this.manager.options.touchAction)},r.compute=function(){var i=[];return ln(this.manager.recognizers,function(n){dc(n.options.enable,[n])&&(i=i.concat(n.getTouchAction()))}),cV(i.join(" "))},r.preventDefaults=function(i){var n=i.srcEvent,a=i.offsetDirection;if(this.manager.session.prevented){n.preventDefault();return}var o=this.actions,s=ao(o,ro)&&!hc[ro],l=ao(o,mu)&&!hc[mu],u=ao(o,gu)&&!hc[gu];if(s){var h=i.pointers.length===1,f=i.distance<2,c=i.deltaTime<250;if(h&&f&&c)return}if(!(u&&l)&&(s||l&&a&_i||u&&a&no))return this.preventSrc(n)},r.preventSrc=function(i){this.manager.session.prevented=!0,i.preventDefault()},e}();function ag(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}function PE(e){var r=e.length;if(r===1)return{x:gs(e[0].clientX),y:gs(e[0].clientY)};for(var t=0,i=0,n=0;n<r;)t+=e[n].clientX,i+=e[n].clientY,n++;return{x:gs(t/r),y:gs(i/r)}}function kE(e){for(var r=[],t=0;t<e.pointers.length;)r[t]={clientX:gs(e.pointers[t].clientX),clientY:gs(e.pointers[t].clientY)},t++;return{timeStamp:rg(),pointers:r,center:PE(r),deltaX:e.deltaX,deltaY:e.deltaY}}function vc(e,r,t){t||(t=OE);var i=r[t[0]]-e[t[0]],n=r[t[1]]-e[t[1]];return Math.sqrt(i*i+n*n)}function og(e,r,t){t||(t=OE);var i=r[t[0]]-e[t[0]],n=r[t[1]]-e[t[1]];return Math.atan2(n,i)*180/Math.PI}function RE(e,r){return e===r?fc:eo(e)>=eo(r)?e<0?_u:wu:r<0?bu:ms}function dV(e,r){var t=r.center,i=e.offsetDelta||{},n=e.prevDelta||{},a=e.prevInput||{};(r.eventType===Me||a.eventType===ie)&&(n=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=e.offsetDelta={x:t.x,y:t.y}),r.deltaX=n.x+(t.x-i.x),r.deltaY=n.y+(t.y-i.y)}function DE(e,r,t){return{x:r/e||0,y:t/e||0}}function vV(e,r){return vc(r[0],r[1],cc)/vc(e[0],e[1],cc)}function pV(e,r){return og(r[1],r[0],cc)+og(e[1],e[0],cc)}function gV(e,r){var t=e.lastInterval||r,i=r.timeStamp-t.timeStamp,n,a,o,s;if(r.eventType!==qe&&(i>fV||t.velocity===void 0)){var l=r.deltaX-t.deltaX,u=r.deltaY-t.deltaY,h=DE(i,l,u);a=h.x,o=h.y,n=eo(h.x)>eo(h.y)?h.x:h.y,s=RE(l,u),e.lastInterval=r}else n=t.velocity,a=t.velocityX,o=t.velocityY,s=t.direction;r.velocity=n,r.velocityX=a,r.velocityY=o,r.direction=s}function mV(e,r){var t=e.session,i=r.pointers,n=i.length;t.firstInput||(t.firstInput=kE(r)),n>1&&!t.firstMultiple?t.firstMultiple=kE(r):n===1&&(t.firstMultiple=!1);var a=t.firstInput,o=t.firstMultiple,s=o?o.center:a.center,l=r.center=PE(i);r.timeStamp=rg(),r.deltaTime=r.timeStamp-a.timeStamp,r.angle=og(s,l),r.distance=vc(s,l),dV(t,r),r.offsetDirection=RE(r.deltaX,r.deltaY);var u=DE(r.deltaTime,r.deltaX,r.deltaY);r.overallVelocityX=u.x,r.overallVelocityY=u.y,r.overallVelocity=eo(u.x)>eo(u.y)?u.x:u.y,r.scale=o?vV(o.pointers,i):1,r.rotation=o?pV(o.pointers,i):0,r.maxPointers=t.prevInput?r.pointers.length>t.prevInput.maxPointers?r.pointers.length:t.prevInput.maxPointers:r.pointers.length,gV(t,r);var h=e.element,f=r.srcEvent,c;f.composedPath?c=f.composedPath()[0]:f.path?c=f.path[0]:c=f.target,ag(c,h)&&(h=c),r.target=h}function yV(e,r,t){var i=t.pointers.length,n=t.changedPointers.length,a=r&Me&&i-n==0,o=r&(ie|qe)&&i-n==0;t.isFirst=!!a,t.isFinal=!!o,a&&(e.session={}),t.eventType=r,mV(e,t),e.emit("hammer.input",t),e.recognize(t),e.session.prevInput=t}function Tu(e){return e.trim().split(/\s+/g)}function Eu(e,r,t){ln(Tu(r),function(i){e.addEventListener(i,t,!1)})}function Su(e,r,t){ln(Tu(r),function(i){e.removeEventListener(i,t,!1)})}function AE(e){var r=e.ownerDocument||e;return r.defaultView||r.parentWindow||window}var ys=function(){function e(t,i){var n=this;this.manager=t,this.callback=i,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(a){dc(t.options.enable,[t])&&n.handler(a)},this.init()}var r=e.prototype;return r.handler=function(){},r.init=function(){this.evEl&&Eu(this.element,this.evEl,this.domHandler),this.evTarget&&Eu(this.target,this.evTarget,this.domHandler),this.evWin&&Eu(AE(this.element),this.evWin,this.domHandler)},r.destroy=function(){this.evEl&&Su(this.element,this.evEl,this.domHandler),this.evTarget&&Su(this.target,this.evTarget,this.domHandler),this.evWin&&Su(AE(this.element),this.evWin,this.domHandler)},e}();function oo(e,r,t){if(e.indexOf&&!t)return e.indexOf(r);for(var i=0;i<e.length;){if(t&&e[i][t]==r||!t&&e[i]===r)return i;i++}return-1}var _V={pointerdown:Me,pointermove:io,pointerup:ie,pointercancel:qe,pointerout:qe},wV={2:yu,3:uV,4:ng,5:hV},ME="pointerdown",LE="pointermove pointerup pointercancel";sn.MSPointerEvent&&!sn.PointerEvent&&(ME="MSPointerDown",LE="MSPointerMove MSPointerUp MSPointerCancel");var FE=function(e){Rr(r,e);function r(){var i,n=r.prototype;return n.evEl=ME,n.evWin=LE,i=e.apply(this,arguments)||this,i.store=i.manager.session.pointerEvents=[],i}var t=r.prototype;return t.handler=function(n){var a=this.store,o=!1,s=n.type.toLowerCase().replace("ms",""),l=_V[s],u=wV[n.pointerType]||n.pointerType,h=u===yu,f=oo(a,n.pointerId,"pointerId");l&Me&&(n.button===0||h)?f<0&&(a.push(n),f=a.length-1):l&(ie|qe)&&(o=!0),!(f<0)&&(a[f]=n,this.callback(this.manager,l,{pointers:a,changedPointers:[n],pointerType:u,srcEvent:n}),o&&a.splice(f,1))},r}(ys);function xu(e){return Array.prototype.slice.call(e,0)}function sg(e,r,t){for(var i=[],n=[],a=0;a<e.length;){var o=r?e[a][r]:e[a];oo(n,o)<0&&i.push(e[a]),n[a]=o,a++}return t&&(r?i=i.sort(function(s,l){return s[r]>l[r]}):i=i.sort()),i}var bV={touchstart:Me,touchmove:io,touchend:ie,touchcancel:qe},TV="touchstart touchmove touchend touchcancel",lg=function(e){Rr(r,e);function r(){var i;return r.prototype.evTarget=TV,i=e.apply(this,arguments)||this,i.targetIds={},i}var t=r.prototype;return t.handler=function(n){var a=bV[n.type],o=EV.call(this,n,a);!o||this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:yu,srcEvent:n})},r}(ys);function EV(e,r){var t=xu(e.touches),i=this.targetIds;if(r&(Me|io)&&t.length===1)return i[t[0].identifier]=!0,[t,t];var n,a,o=xu(e.changedTouches),s=[],l=this.target;if(a=t.filter(function(u){return ag(u.target,l)}),r===Me)for(n=0;n<a.length;)i[a[n].identifier]=!0,n++;for(n=0;n<o.length;)i[o[n].identifier]&&s.push(o[n]),r&(ie|qe)&&delete i[o[n].identifier],n++;if(!!s.length)return[sg(a.concat(s),"identifier",!0),s]}var SV={mousedown:Me,mousemove:io,mouseup:ie},xV="mousedown",CV="mousemove mouseup",ug=function(e){Rr(r,e);function r(){var i,n=r.prototype;return n.evEl=xV,n.evWin=CV,i=e.apply(this,arguments)||this,i.pressed=!1,i}var t=r.prototype;return t.handler=function(n){var a=SV[n.type];a&Me&&n.button===0&&(this.pressed=!0),a&io&&n.which!==1&&(a=ie),!!this.pressed&&(a&ie&&(this.pressed=!1),this.callback(this.manager,a,{pointers:[n],changedPointers:[n],pointerType:ng,srcEvent:n}))},r}(ys),OV=2500,NE=25;function $E(e){var r=e.changedPointers,t=r[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY},n=this.lastTouches;this.lastTouches.push(i);var a=function(){var s=n.indexOf(i);s>-1&&n.splice(s,1)};setTimeout(a,OV)}}function IV(e,r){e&Me?(this.primaryTouch=r.changedPointers[0].identifier,$E.call(this,r)):e&(ie|qe)&&$E.call(this,r)}function PV(e){for(var r=e.srcEvent.clientX,t=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var n=this.lastTouches[i],a=Math.abs(r-n.x),o=Math.abs(t-n.y);if(a<=NE&&o<=NE)return!0}return!1}var GE=function(){var e=function(r){Rr(t,r);function t(n,a){var o;return o=r.call(this,n,a)||this,o.handler=function(s,l,u){var h=u.pointerType===yu,f=u.pointerType===ng;if(!(f&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(h)IV.call(lc(lc(o)),l,u);else if(f&&PV.call(lc(lc(o)),u))return;o.callback(s,l,u)}},o.touch=new lg(o.manager,o.handler),o.mouse=new ug(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var i=t.prototype;return i.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}(ys);return e}();function kV(e){var r,t=e.options.inputClass;return t?r=t:sV?r=FE:lV?r=lg:xE?r=GE:r=ug,new r(e,yV)}function _s(e,r,t){return Array.isArray(e)?(ln(e,t[r],t),!0):!1}var pc=1,Dr=2,ws=4,Bn=8,un=Bn,Cu=16,wi=32,RV=1;function DV(){return RV++}function gc(e,r){var t=r.manager;return t?t.get(e):e}function YE(e){return e&Cu?"cancel":e&Bn?"end":e&ws?"move":e&Dr?"start":""}var Ou=function(){function e(t){t===void 0&&(t={}),this.options=Xr({enable:!0},t),this.id=DV(),this.manager=null,this.state=pc,this.simultaneous={},this.requireFail=[]}var r=e.prototype;return r.set=function(i){return to(this.options,i),this.manager&&this.manager.touchAction.update(),this},r.recognizeWith=function(i){if(_s(i,"recognizeWith",this))return this;var n=this.simultaneous;return i=gc(i,this),n[i.id]||(n[i.id]=i,i.recognizeWith(this)),this},r.dropRecognizeWith=function(i){return _s(i,"dropRecognizeWith",this)?this:(i=gc(i,this),delete this.simultaneous[i.id],this)},r.requireFailure=function(i){if(_s(i,"requireFailure",this))return this;var n=this.requireFail;return i=gc(i,this),oo(n,i)===-1&&(n.push(i),i.requireFailure(this)),this},r.dropRequireFailure=function(i){if(_s(i,"dropRequireFailure",this))return this;i=gc(i,this);var n=oo(this.requireFail,i);return n>-1&&this.requireFail.splice(n,1),this},r.hasRequireFailures=function(){return this.requireFail.length>0},r.canRecognizeWith=function(i){return!!this.simultaneous[i.id]},r.emit=function(i){var n=this,a=this.state;function o(s){n.manager.emit(s,i)}a<Bn&&o(n.options.event+YE(a)),o(n.options.event),i.additionalEvent&&o(i.additionalEvent),a>=Bn&&o(n.options.event+YE(a))},r.tryEmit=function(i){if(this.canEmit())return this.emit(i);this.state=wi},r.canEmit=function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(wi|pc)))return!1;i++}return!0},r.recognize=function(i){var n=to({},i);if(!dc(this.options.enable,[this,n])){this.reset(),this.state=wi;return}this.state&(un|Cu|wi)&&(this.state=pc),this.state=this.process(n),this.state&(Dr|ws|Bn|Cu)&&this.tryEmit(n)},r.process=function(i){},r.getTouchAction=function(){},r.reset=function(){},e}(),hg=function(e){Rr(r,e);function r(i){var n;return i===void 0&&(i={}),n=e.call(this,Xr({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},i))||this,n.pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}var t=r.prototype;return t.getTouchAction=function(){return[ig]},t.process=function(n){var a=this,o=this.options,s=n.pointers.length===o.pointers,l=n.distance<o.threshold,u=n.deltaTime<o.time;if(this.reset(),n.eventType&Me&&this.count===0)return this.failTimeout();if(l&&u&&s){if(n.eventType!==ie)return this.failTimeout();var h=this.pTime?n.timeStamp-this.pTime<o.interval:!0,f=!this.pCenter||vc(this.pCenter,n.center)<o.posThreshold;this.pTime=n.timeStamp,this.pCenter=n.center,!f||!h?this.count=1:this.count+=1,this._input=n;var c=this.count%o.taps;if(c===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){a.state=un,a.tryEmit()},o.interval),Dr):un}return wi},t.failTimeout=function(){var n=this;return this._timer=setTimeout(function(){n.state=wi},this.options.interval),wi},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===un&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(Ou),bs=function(e){Rr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Xr({pointers:1},i))||this}var t=r.prototype;return t.attrTest=function(n){var a=this.options.pointers;return a===0||n.pointers.length===a},t.process=function(n){var a=this.state,o=n.eventType,s=a&(Dr|ws),l=this.attrTest(n);return s&&(o&qe||!l)?a|Cu:s||l?o&ie?a|Bn:a&Dr?a|ws:Dr:wi},r}(Ou);function jE(e){return e===ms?"down":e===bu?"up":e===_u?"left":e===wu?"right":""}var fg=function(e){Rr(r,e);function r(i){var n;return i===void 0&&(i={}),n=e.call(this,Xr({event:"pan",threshold:10,pointers:1,direction:CE},i))||this,n.pX=null,n.pY=null,n}var t=r.prototype;return t.getTouchAction=function(){var n=this.options.direction,a=[];return n&_i&&a.push(mu),n&no&&a.push(gu),a},t.directionTest=function(n){var a=this.options,o=!0,s=n.distance,l=n.direction,u=n.deltaX,h=n.deltaY;return l&a.direction||(a.direction&_i?(l=u===0?fc:u<0?_u:wu,o=u!==this.pX,s=Math.abs(n.deltaX)):(l=h===0?fc:h<0?bu:ms,o=h!==this.pY,s=Math.abs(n.deltaY))),n.direction=l,o&&s>a.threshold&&l&a.direction},t.attrTest=function(n){return bs.prototype.attrTest.call(this,n)&&(this.state&Dr||!(this.state&Dr)&&this.directionTest(n))},t.emit=function(n){this.pX=n.deltaX,this.pY=n.deltaY;var a=jE(n.direction);a&&(n.additionalEvent=this.options.event+a),e.prototype.emit.call(this,n)},r}(bs),WE=function(e){Rr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Xr({event:"swipe",threshold:10,velocity:.3,direction:_i|no,pointers:1},i))||this}var t=r.prototype;return t.getTouchAction=function(){return fg.prototype.getTouchAction.call(this)},t.attrTest=function(n){var a=this.options.direction,o;return a&(_i|no)?o=n.overallVelocity:a&_i?o=n.overallVelocityX:a&no&&(o=n.overallVelocityY),e.prototype.attrTest.call(this,n)&&a&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers===this.options.pointers&&eo(o)>this.options.velocity&&n.eventType&ie},t.emit=function(n){var a=jE(n.offsetDirection);a&&this.manager.emit(this.options.event+a,n),this.manager.emit(this.options.event,n)},r}(bs),HE=function(e){Rr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Xr({event:"pinch",threshold:0,pointers:2},i))||this}var t=r.prototype;return t.getTouchAction=function(){return[ro]},t.attrTest=function(n){return e.prototype.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&Dr)},t.emit=function(n){if(n.scale!==1){var a=n.scale<1?"in":"out";n.additionalEvent=this.options.event+a}e.prototype.emit.call(this,n)},r}(bs),BE=function(e){Rr(r,e);function r(i){return i===void 0&&(i={}),e.call(this,Xr({event:"rotate",threshold:0,pointers:2},i))||this}var t=r.prototype;return t.getTouchAction=function(){return[ro]},t.attrTest=function(n){return e.prototype.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&Dr)},r}(bs),UE=function(e){Rr(r,e);function r(i){var n;return i===void 0&&(i={}),n=e.call(this,Xr({event:"press",pointers:1,time:251,threshold:9},i))||this,n._timer=null,n._input=null,n}var t=r.prototype;return t.getTouchAction=function(){return[SE]},t.process=function(n){var a=this,o=this.options,s=n.pointers.length===o.pointers,l=n.distance<o.threshold,u=n.deltaTime>o.time;if(this._input=n,!l||!s||n.eventType&(ie|qe)&&!u)this.reset();else if(n.eventType&Me)this.reset(),this._timer=setTimeout(function(){a.state=un,a.tryEmit()},o.time);else if(n.eventType&ie)return un;return wi},t.reset=function(){clearTimeout(this._timer)},t.emit=function(n){this.state===un&&(n&&n.eventType&ie?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=rg(),this.manager.emit(this.options.event,this._input)))},r}(Ou),zE={domEvents:!1,touchAction:EE,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},VE=[[BE,{enable:!1}],[HE,{enable:!1},["rotate"]],[WE,{direction:_i}],[fg,{direction:_i},["swipe"]],[hg],[hg,{event:"doubletap",taps:2},["tap"]],[UE]],AV=1,XE=2;function KE(e,r){var t=e.element;if(!!t.style){var i;ln(e.options.cssProps,function(n,a){i=uc(t.style,a),r?(e.oldCssProps[i]=t.style[i],t.style[i]=n):t.style[i]=e.oldCssProps[i]||""}),r||(e.oldCssProps={})}}function MV(e,r){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.gesture=r,r.target.dispatchEvent(t)}var ZE=function(){function e(t,i){var n=this;this.options=to({},zE,i||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=kV(this),this.touchAction=new IE(this,this.options.touchAction),KE(this,!0),ln(this.options.recognizers,function(a){var o=n.add(new a[0](a[1]));a[2]&&o.recognizeWith(a[2]),a[3]&&o.requireFailure(a[3])},this)}var r=e.prototype;return r.set=function(i){return to(this.options,i),i.touchAction&&this.touchAction.update(),i.inputTarget&&(this.input.destroy(),this.input.target=i.inputTarget,this.input.init()),this},r.stop=function(i){this.session.stopped=i?XE:AV},r.recognize=function(i){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(i);var a,o=this.recognizers,s=n.curRecognizer;(!s||s&&s.state&un)&&(n.curRecognizer=null,s=null);for(var l=0;l<o.length;)a=o[l],n.stopped!==XE&&(!s||a===s||a.canRecognizeWith(s))?a.recognize(i):a.reset(),!s&&a.state&(Dr|ws|Bn)&&(n.curRecognizer=a,s=a),l++}},r.get=function(i){if(i instanceof Ou)return i;for(var n=this.recognizers,a=0;a<n.length;a++)if(n[a].options.event===i)return n[a];return null},r.add=function(i){if(_s(i,"add",this))return this;var n=this.get(i.options.event);return n&&this.remove(n),this.recognizers.push(i),i.manager=this,this.touchAction.update(),i},r.remove=function(i){if(_s(i,"remove",this))return this;var n=this.get(i);if(i){var a=this.recognizers,o=oo(a,n);o!==-1&&(a.splice(o,1),this.touchAction.update())}return this},r.on=function(i,n){if(i===void 0||n===void 0)return this;var a=this.handlers;return ln(Tu(i),function(o){a[o]=a[o]||[],a[o].push(n)}),this},r.off=function(i,n){if(i===void 0)return this;var a=this.handlers;return ln(Tu(i),function(o){n?a[o]&&a[o].splice(oo(a[o],n),1):delete a[o]}),this},r.emit=function(i,n){this.options.domEvents&&MV(i,n);var a=this.handlers[i]&&this.handlers[i].slice();if(!(!a||!a.length)){n.type=i,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](n),o++}},r.destroy=function(){this.element&&KE(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},e}(),LV={touchstart:Me,touchmove:io,touchend:ie,touchcancel:qe},FV="touchstart",NV="touchstart touchmove touchend touchcancel",$V=function(e){Rr(r,e);function r(){var i,n=r.prototype;return n.evTarget=FV,n.evWin=NV,i=e.apply(this,arguments)||this,i.started=!1,i}var t=r.prototype;return t.handler=function(n){var a=LV[n.type];if(a===Me&&(this.started=!0),!!this.started){var o=GV.call(this,n,a);a&(ie|qe)&&o[0].length-o[1].length==0&&(this.started=!1),this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:yu,srcEvent:n})}},r}(ys);function GV(e,r){var t=xu(e.touches),i=xu(e.changedTouches);return r&(ie|qe)&&(t=sg(t.concat(i),"identifier",!0)),[t,i]}function qE(e,r,t){var i="DEPRECATED METHOD: "+r+`
`+t+` AT 
`;return function(){var n=new Error("get-stack-trace"),a=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,i,a),e.apply(this,arguments)}}var JE=qE(function(e,r,t){for(var i=Object.keys(r),n=0;n<i.length;)(!t||t&&e[i[n]]===void 0)&&(e[i[n]]=r[i[n]]),n++;return e},"extend","Use `assign`."),YV=qE(function(e,r){return JE(e,r,!0)},"merge","Use `assign`.");function jV(e,r,t){var i=r.prototype,n;n=e.prototype=Object.create(i),n.constructor=e,n._super=i,t&&to(n,t)}function QE(e,r){return function(){return e.apply(r,arguments)}}var tS=function(){var e=function(t,i){return i===void 0&&(i={}),new ZE(t,Xr({recognizers:VE.concat()},i))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=CE,e.DIRECTION_DOWN=ms,e.DIRECTION_LEFT=_u,e.DIRECTION_RIGHT=wu,e.DIRECTION_UP=bu,e.DIRECTION_HORIZONTAL=_i,e.DIRECTION_VERTICAL=no,e.DIRECTION_NONE=fc,e.DIRECTION_DOWN=ms,e.INPUT_START=Me,e.INPUT_MOVE=io,e.INPUT_END=ie,e.INPUT_CANCEL=qe,e.STATE_POSSIBLE=pc,e.STATE_BEGAN=Dr,e.STATE_CHANGED=ws,e.STATE_ENDED=Bn,e.STATE_RECOGNIZED=un,e.STATE_CANCELLED=Cu,e.STATE_FAILED=wi,e.Manager=ZE,e.Input=ys,e.TouchAction=IE,e.TouchInput=lg,e.MouseInput=ug,e.PointerEventInput=FE,e.TouchMouseInput=GE,e.SingleTouchInput=$V,e.Recognizer=Ou,e.AttrRecognizer=bs,e.Tap=hg,e.Pan=fg,e.Swipe=WE,e.Pinch=HE,e.Rotate=BE,e.Press=UE,e.on=Eu,e.off=Su,e.each=ln,e.merge=YV,e.extend=JE,e.bindFn=QE,e.assign=to,e.inherit=jV,e.bindFn=QE,e.prefixed=uc,e.toArray=xu,e.inArray=oo,e.uniqueArray=sg,e.splitStr=Tu,e.boolOrFn=dc,e.hasParent=ag,e.addEventListeners=Eu,e.removeEventListeners=Su,e.defaults=to({},zE,{preset:VE}),e}();function eS(e,r){var t=ye(e);if(ec){var i=ec(e);r&&(i=gt(i).call(i,function(n){return rc(e,n).enumerable})),t.push.apply(t,i)}return t}function rS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){var i;G(i=eS(Object(t),!0)).call(i,function(a){$T(e,a,t[a])})}else if(ic)NT(e,ic(t));else{var n;G(n=eS(Object(t))).call(n,function(a){Vp(e,a,rc(t,a))})}}return e}function cg(e,r){var t=typeof Ja!="undefined"&&Wn(e)||e["@@iterator"];if(!t){if(ct(e)||(t=WV(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function WV(e,r){var t;if(!!e){if(typeof e=="string")return iS(e,r);var i=Pr(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return ds(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return iS(e,r)}}function iS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var dg=Ja("DELETE");function HV(e){for(var r,t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return vg.apply(void 0,Ut(r=[{},e]).call(r,i))}function vg(){var e=mc.apply(void 0,arguments);return aS(e),e}function mc(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<2)return r[0];if(r.length>2){var i;return mc.apply(void 0,Ut(i=[vg(r[0],r[1])]).call(i,yi(Pr(r).call(r,2))))}var n=r[0],a=r[1],o=cg(ZU(a)),s;try{for(o.s();!(s=o.n()).done;){var l=s.value;Object.prototype.propertyIsEnumerable.call(a,l)&&(a[l]===dg?delete n[l]:n[l]!==null&&a[l]!==null&&ot(n[l])==="object"&&ot(a[l])==="object"&&!ct(n[l])&&!ct(a[l])?n[l]=mc(n[l],a[l]):n[l]=nS(a[l]))}}catch(u){o.e(u)}finally{o.f()}return n}function nS(e){return ct(e)?me(e).call(e,function(r){return nS(r)}):ot(e)==="object"&&e!==null?mc({},e):e}function aS(e){for(var r=0,t=ye(e);r<t.length;r++){var i=t[r];e[i]===dg?delete e[i]:ot(e[i])==="object"&&e[i]!==null&&aS(e[i])}}function BV(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return UV(r.length?r:[ur()])}function UV(e){var r=zV(e),t=GU(r,3),i=t[0],n=t[1],a=t[2],o=1,s=function(){var u=2091639*i+o*23283064365386963e-26;return i=n,n=a,a=u-(o=u|0)};return s.uint32=function(){return s()*4294967296},s.fract53=function(){return s()+(s()*2097152|0)*11102230246251565e-32},s.algorithm="Alea",s.seed=e,s.version="0.9",s}function zV(){for(var e=VV(),r=e(" "),t=e(" "),i=e(" "),n=0;n<arguments.length;n++)r-=e(n<0||arguments.length<=n?void 0:arguments[n]),r<0&&(r+=1),t-=e(n<0||arguments.length<=n?void 0:arguments[n]),t<0&&(t+=1),i-=e(n<0||arguments.length<=n?void 0:arguments[n]),i<0&&(i+=1);return[r,t,i]}function VV(){var e=4022871197;return function(r){for(var t=r.toString(),i=0;i<t.length;i++){e+=t.charCodeAt(i);var n=.02519603282416938*e;e=n>>>0,n-=e,n*=e,e=n>>>0,n-=e,e+=n*4294967296}return(e>>>0)*23283064365386963e-26}}function XV(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(){return{set:e}}}}var pg=typeof window!="undefined"?window.Hammer||tS:function(){return XV()};function bi(e){var r=this,t;this._cleanupQueue=[],this.active=!1,this._dom={container:e,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){r._dom.overlay.parentNode.removeChild(r._dom.overlay)});var i=pg(this._dom.overlay);i.on("tap",R(t=this._onTapOverlay).call(t,this)),this._cleanupQueue.push(function(){i.destroy()});var n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];G(n).call(n,function(a){i.on(a,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(a){KV(a.target,e)||r.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",r._onClick)})),this._escListener=function(a){("key"in a?a.key==="Escape":a.keyCode===27)&&r.deactivate()}}tg(bi.prototype);bi.current=null;bi.prototype.destroy=function(){var e,r;this.deactivate();var t=cg(iz(e=kr(r=this._cleanupQueue).call(r,0)).call(e)),i;try{for(t.s();!(i=t.n()).done;){var n=i.value;n()}}catch(a){t.e(a)}finally{t.f()}};bi.prototype.activate=function(){bi.current&&bi.current.deactivate(),bi.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};bi.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};bi.prototype._onTapOverlay=function(e){this.activate(),e.srcEvent.stopPropagation()};function KV(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var ZV=/^\/?Date\((-?\d+)/i,qV=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,JV=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,QV=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,t3=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Iu(e){return e instanceof Number||typeof e=="number"}function oS(e){if(e)for(;e.hasChildNodes()===!0;){var r=e.firstChild;r&&(oS(r),e.removeChild(r))}}function cr(e){return e instanceof String||typeof e=="string"}function gg(e){return ot(e)==="object"&&e!==null}function e3(e){if(e instanceof Date)return!0;if(cr(e)){var r=ZV.exec(e);if(r)return!0;if(!isNaN(Date.parse(e)))return!0}return!1}function so(e,r,t,i){var n=!1;i===!0&&(n=r[t]===null&&e[t]!==void 0),n?delete e[t]:e[t]=r[t]}function sS(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(var i in e)if(r[i]!==void 0)if(r[i]===null||ot(r[i])!=="object")so(e,r,i,t);else{var n=e[i],a=r[i];gg(n)&&gg(a)&&sS(n,a,t)}}var r3=Qa;function i3(e,r){if(!ct(e))throw new Error("Array with property names expected as first argument");for(var t=arguments.length,i=new Array(t>2?t-2:0),n=2;n<t;n++)i[n-2]=arguments[n];for(var a=0,o=i;a<o.length;a++)for(var s=o[a],l=0;l<e.length;l++){var u=e[l];s&&Object.prototype.hasOwnProperty.call(s,u)&&(r[u]=s[u])}return r}function n3(e,r,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(ct(t))throw new TypeError("Arrays are not supported by deepExtend");for(var n=0;n<e.length;n++){var a=e[n];if(Object.prototype.hasOwnProperty.call(t,a))if(t[a]&&t[a].constructor===Object)r[a]===void 0&&(r[a]={}),r[a].constructor===Object?Pu(r[a],t[a],!1,i):so(r,t,a,i);else{if(ct(t[a]))throw new TypeError("Arrays are not supported by deepExtend");so(r,t,a,i)}}return r}function a3(e,r,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(ct(t))throw new TypeError("Arrays are not supported by deepExtend");for(var n in t)if(!!Object.prototype.hasOwnProperty.call(t,n)&&!Hn(e).call(e,n))if(t[n]&&t[n].constructor===Object)r[n]===void 0&&(r[n]={}),r[n].constructor===Object?Pu(r[n],t[n]):so(r,t,n,i);else if(ct(t[n])){r[n]=[];for(var a=0;a<t[n].length;a++)r[n].push(t[n][a])}else so(r,t,n,i);return r}function Pu(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)||t===!0)if(ot(r[n])==="object"&&r[n]!==null&&sE(r[n])===Object.prototype)e[n]===void 0?e[n]=Pu({},r[n],t):ot(e[n])==="object"&&e[n]!==null&&sE(e[n])===Object.prototype?Pu(e[n],r[n],t):so(e,r,n,i);else if(ct(r[n])){var a;e[n]=Pr(a=r[n]).call(a)}else so(e,r,n,i);return e}function o3(e,r){if(e.length!==r.length)return!1;for(var t=0,i=e.length;t<i;t++)if(e[t]!=r[t])return!1;return!0}function ku(e){var r=ot(e);return r==="object"?e===null?"null":e instanceof Boolean?"Boolean":e instanceof Number?"Number":e instanceof String?"String":ct(e)?"Array":e instanceof Date?"Date":"Object":r==="number"?"Number":r==="boolean"?"Boolean":r==="string"?"String":r===void 0?"undefined":r}function Ru(e,r){var t;return Ut(t=[]).call(t,yi(e),[r])}function lS(e){return Pr(e).call(e)}function s3(e){return e.getBoundingClientRect().left}function l3(e){return e.getBoundingClientRect().right}function u3(e){return e.getBoundingClientRect().top}function h3(e,r){var t=e.className.split(" "),i=r.split(" ");t=Ut(t).call(t,gt(i).call(i,function(n){return!Hn(t).call(t,n)})),e.className=t.join(" ")}function f3(e,r){var t=e.className.split(" "),i=r.split(" ");t=gt(t).call(t,function(n){return!Hn(i).call(i,n)}),e.className=t.join(" ")}function c3(e,r){if(ct(e))for(var t=e.length,i=0;i<t;i++)r(e[i],i,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r(e[n],n,e)}var d3=uE;function v3(e,r,t){return e[r]!==t?(e[r]=t,!0):!1}function p3(e){var r=!1;return function(){r||(r=!0,requestAnimationFrame(function(){r=!1,e()}))}}function g3(e,r,t,i){if(e.addEventListener){var n;i===void 0&&(i=!1),r==="mousewheel"&&Hn(n=navigator.userAgent).call(n,"Firefox")&&(r="DOMMouseScroll"),e.addEventListener(r,t,i)}else e.attachEvent("on"+r,t)}function m3(e,r,t,i){if(e.removeEventListener){var n;i===void 0&&(i=!1),r==="mousewheel"&&Hn(n=navigator.userAgent).call(n,"Firefox")&&(r="DOMMouseScroll"),e.removeEventListener(r,t,i)}else e.detachEvent("on"+r,t)}function y3(e){e||(e=window.event),e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}function _3(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event,r=null;return e&&(e.target?r=e.target:e.srcElement&&(r=e.srcElement)),!(r instanceof Element)||r.nodeType!=null&&r.nodeType==3&&(r=r.parentNode,!(r instanceof Element))?null:r}function w3(e,r){for(var t=e;t;){if(t===r)return!0;if(t.parentNode)t=t.parentNode;else return!1}return!1}var b3={asBoolean:function(r,t){return typeof r=="function"&&(r=r()),r!=null?r!=!1:t||null},asNumber:function(r,t){return typeof r=="function"&&(r=r()),r!=null?Number(r)||t||null:t||null},asString:function(r,t){return typeof r=="function"&&(r=r()),r!=null?String(r):t||null},asSize:function(r,t){return typeof r=="function"&&(r=r()),cr(r)?r:Iu(r)?r+"px":t||null},asElement:function(r,t){return typeof r=="function"&&(r=r()),r||t||null}};function yc(e){var r;switch(e.length){case 3:case 4:return r=JV.exec(e),r?{r:hr(r[1]+r[1],16),g:hr(r[2]+r[2],16),b:hr(r[3]+r[3],16)}:null;case 6:case 7:return r=qV.exec(e),r?{r:hr(r[1],16),g:hr(r[2],16),b:hr(r[3],16)}:null;default:return null}}function T3(e,r){if(Hn(e).call(e,"rgba"))return e;if(Hn(e).call(e,"rgb")){var t=e.substr(Pt(e).call(e,"(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+r+")"}else{var i=yc(e);return i==null?e:"rgba("+i.r+","+i.g+","+i.b+","+r+")"}}function mg(e,r,t){var i;return"#"+Pr(i=((1<<24)+(e<<16)+(r<<8)+t).toString(16)).call(i,1)}function E3(e,r){if(cr(e)){var t=e;if(wg(t)){var i,n=me(i=t.substr(4).substr(0,t.length-5).split(",")).call(i,function(c){return hr(c)});t=mg(n[0],n[1],n[2])}if(_g(t)===!0){var a=uS(t),o={h:a.h,s:a.s*.8,v:Math.min(1,a.v*1.02)},s={h:a.h,s:Math.min(1,a.s*1.25),v:a.v*.8},l=yg(s.h,s.s,s.v),u=yg(o.h,o.s,o.v);return{background:t,border:l,highlight:{background:u,border:l},hover:{background:u,border:l}}}else return{background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else if(r){var h={background:e.background||r.background,border:e.border||r.border,highlight:cr(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||r.highlight.background,border:e.highlight&&e.highlight.border||r.highlight.border},hover:cr(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||r.hover.border,background:e.hover&&e.hover.background||r.hover.background}};return h}else{var f={background:e.background||void 0,border:e.border||void 0,highlight:cr(e.highlight)?{border:e.highlight,background:e.highlight}:{background:e.highlight&&e.highlight.background||void 0,border:e.highlight&&e.highlight.border||void 0},hover:cr(e.hover)?{border:e.hover,background:e.hover}:{border:e.hover&&e.hover.border||void 0,background:e.hover&&e.hover.background||void 0}};return f}}function Ts(e,r,t){e=e/255,r=r/255,t=t/255;var i=Math.min(e,Math.min(r,t)),n=Math.max(e,Math.max(r,t));if(i===n)return{h:0,s:0,v:i};var a=e===i?r-t:t===i?e-r:t-e,o=e===i?3:t===i?1:5,s=60*(o-a/(n-i))/360,l=(n-i)/n,u=n;return{h:s,s:l,v:u}}var Es={split:function(r){var t,i={};return G(t=r.split(";")).call(t,function(n){if(Qp(n).call(n)!=""){var a,o,s=n.split(":"),l=Qp(a=s[0]).call(a),u=Qp(o=s[1]).call(o);i[l]=u}}),i},join:function(r){var t;return me(t=ye(r)).call(t,function(i){return i+": "+r[i]}).join("; ")}};function S3(e,r){var t=Es.split(e.style.cssText),i=Es.split(r),n=rS(rS({},t),i);e.style.cssText=Es.join(n)}function x3(e,r){var t=Es.split(e.style.cssText),i=Es.split(r);for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&delete t[n];e.style.cssText=Es.join(t)}function Du(e,r,t){var i,n,a,o=Math.floor(e*6),s=e*6-o,l=t*(1-r),u=t*(1-s*r),h=t*(1-(1-s)*r);switch(o%6){case 0:i=t,n=h,a=l;break;case 1:i=u,n=t,a=l;break;case 2:i=l,n=t,a=h;break;case 3:i=l,n=u,a=t;break;case 4:i=h,n=l,a=t;break;case 5:i=t,n=l,a=u;break}return{r:Math.floor(i*255),g:Math.floor(n*255),b:Math.floor(a*255)}}function yg(e,r,t){var i=Du(e,r,t);return mg(i.r,i.g,i.b)}function uS(e){var r=yc(e);if(!r)throw new TypeError("'".concat(e,"' is not a valid color."));return Ts(r.r,r.g,r.b)}function _g(e){var r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);return r}function wg(e){return QV.test(e)}function hS(e){return t3.test(e)}function C3(e,r){if(r!==null&&ot(r)==="object"){for(var t=oc(r),i=0;i<e.length;i++)Object.prototype.hasOwnProperty.call(r,e[i])&&ot(r[e[i]])=="object"&&(t[e[i]]=bg(r[e[i]]));return t}else return null}function bg(e){if(e===null||ot(e)!=="object")return null;if(e instanceof Element)return e;var r=oc(e);for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&ot(e[t])=="object"&&(r[t]=bg(e[t]));return r}function O3(e,r){for(var t=0;t<e.length;t++){var i=e[t],n=void 0;for(n=t;n>0&&r(i,e[n-1])<0;n--)e[n]=e[n-1];e[n]=i}return e}function I3(e,r,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=function(v){return v!=null},a=function(v){return v!==null&&ot(v)==="object"},o=function(v){for(var g in v)if(Object.prototype.hasOwnProperty.call(v,g))return!1;return!0};if(!a(e))throw new Error("Parameter mergeTarget must be an object");if(!a(r))throw new Error("Parameter options must be an object");if(!n(t))throw new Error("Parameter option must have a value");if(!a(i))throw new Error("Parameter globalOptions must be an object");var s=function(v,g,p){a(v[p])||(v[p]={});var m=g[p],_=v[p];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(_[y]=m[y])},l=r[t],u=a(i)&&!o(i),h=u?i[t]:void 0,f=h?h.enabled:void 0;if(l!==void 0){if(typeof l=="boolean"){a(e[t])||(e[t]={}),e[t].enabled=l;return}if(l===null&&!a(e[t]))if(n(h))e[t]=oc(h);else return;if(!!a(l)){var c=!0;l.enabled!==void 0?c=l.enabled:f!==void 0&&(c=h.enabled),s(e,r,t),e[t].enabled=c}}}function P3(e,r,t,i){for(var n=1e4,a=0,o=0,s=e.length-1;o<=s&&a<n;){var l=Math.floor((o+s)/2),u=e[l],h=i===void 0?u[t]:u[t][i],f=r(h);if(f==0)return l;f==-1?o=l+1:s=l-1,a++}return-1}function k3(e,r,t,i,n){var a=1e4,o=0,s=0,l=e.length-1,u,h,f,c;for(n=n!=null?n:function(d,v){return d==v?0:d<v?-1:1};s<=l&&o<a;){if(c=Math.floor(.5*(l+s)),u=e[Math.max(0,c-1)][t],h=e[c][t],f=e[Math.min(e.length-1,c+1)][t],n(h,r)==0)return c;if(n(u,r)<0&&n(h,r)>0)return i=="before"?Math.max(0,c-1):c;if(n(h,r)<0&&n(f,r)>0)return i=="before"?c:Math.min(e.length-1,c+1);n(h,r)<0?s=c+1:l=c-1,o++}return-1}var R3={linear:function(r){return r},easeInQuad:function(r){return r*r},easeOutQuad:function(r){return r*(2-r)},easeInOutQuad:function(r){return r<.5?2*r*r:-1+(4-2*r)*r},easeInCubic:function(r){return r*r*r},easeOutCubic:function(r){return--r*r*r+1},easeInOutCubic:function(r){return r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1},easeInQuart:function(r){return r*r*r*r},easeOutQuart:function(r){return 1- --r*r*r*r},easeInOutQuart:function(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r},easeInQuint:function(r){return r*r*r*r*r},easeOutQuint:function(r){return 1+--r*r*r*r*r},easeInOutQuint:function(r){return r<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r}};function D3(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var r=document.createElement("div");r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.visibility="hidden",r.style.width="200px",r.style.height="150px",r.style.overflow="hidden",r.appendChild(e),document.body.appendChild(r);var t=e.offsetWidth;r.style.overflow="scroll";var i=e.offsetWidth;return t==i&&(i=r.clientWidth),document.body.removeChild(r),t-i}function A3(e,r){var t;ct(r)||(r=[r]);var i=cg(e),n;try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a){t=a[r[0]];for(var o=1;o<r.length;o++)t&&(t=t[r[o]]);if(typeof t!="undefined")break}}}catch(s){i.e(s)}finally{i.f()}return t}var M3={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},fS=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;Ct(this,e),this.pixelRatio=r,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return Ot(e,[{key:"insertTo",value:function(t){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if(typeof t=="function")this.updateCallback=t;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(t){if(typeof t=="function")this.closeCallback=t;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(t){if(typeof t=="string")return M3[t]}},{key:"setColor",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t!=="none"){var n,a=this._isColorString(t);if(a!==void 0&&(t=a),cr(t)===!0){if(wg(t)===!0){var o=t.substr(4).substr(0,t.length-5).split(",");n={r:o[0],g:o[1],b:o[2],a:1}}else if(hS(t)===!0){var s=t.substr(5).substr(0,t.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(_g(t)===!0){var l=yc(t);n={r:l.r,g:l.g,b:l.b,a:1}}}else if(t instanceof Object&&t.r!==void 0&&t.g!==void 0&&t.b!==void 0){var u=t.a!==void 0?t.a:"1.0";n={r:t.r,g:t.g,b:t.b,a:u}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+fr(t));this._setColor(n,i)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i===!0&&(this.previousColor=Qa({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Ae(function(){t.closeCallback!==void 0&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i===!0&&(this.initialColor=Qa({},t)),this.color=t;var n=Ts(t.r,t.g,t.b),a=2*Math.PI,o=this.r*n.s,s=this.centerCoordinates.x+o*Math.sin(a*n.h),l=this.centerCoordinates.y+o*Math.cos(a*n.h);this.colorPickerSelector.style.left=s-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var i=Ts(this.color.r,this.color.g,this.color.b);i.v=t/100;var n=Du(i.h,i.s,i.v);n.a=this.color.a,this.color=n,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,i=Ts(t.r,t.g,t.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var a=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,a,o),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-i.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),_E(n).call(n),this.brightnessRange.value=100*i.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,i,n,a;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var s=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(u){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(u){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var l=this;this.opacityRange.onchange=function(){l._setOpacity(this.value)},this.opacityRange.oninput=function(){l._setOpacity(this.value)},this.brightnessRange.onchange=function(){l._setBrightness(this.value)},this.brightnessRange.oninput=function(){l._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=R(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=R(i=this._apply).call(i,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=R(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=R(a=this._loadLast).call(a,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new pg(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",function(i){i.isFirst&&t._moveSelector(i)}),this.hammer.on("tap",function(i){t._moveSelector(i)}),this.hammer.on("panstart",function(i){t._moveSelector(i)}),this.hammer.on("panmove",function(i){t._moveSelector(i)}),this.hammer.on("panend",function(i){t._moveSelector(i)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,i,n);var a,o,s,l;this.centerCoordinates={x:i*.5,y:n*.5},this.r=.49*i;var u=2*Math.PI/360,h=1/360,f=1/this.r,c;for(s=0;s<360;s++)for(l=0;l<this.r;l++)a=this.centerCoordinates.x+l*Math.sin(u*s),o=this.centerCoordinates.y+l*Math.cos(u*s),c=Du(s*h,l*f,1),t.fillStyle="rgb("+c.r+","+c.g+","+c.b+")",t.fillRect(a-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,i,n)}this.generated=!0}},{key:"_moveSelector",value:function(t){var i=this.colorPickerDiv.getBoundingClientRect(),n=t.center.x-i.left,a=t.center.y-i.top,o=.5*this.colorPickerDiv.clientHeight,s=.5*this.colorPickerDiv.clientWidth,l=n-s,u=a-o,h=Math.atan2(l,u),f=.98*Math.min(Math.sqrt(l*l+u*u),s),c=Math.cos(h)*f+o,d=Math.sin(h)*f+s;this.colorPickerSelector.style.top=c-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=d-.5*this.colorPickerSelector.clientWidth+"px";var v=h/(2*Math.PI);v=v<0?v+1:v;var g=f/this.r,p=Ts(this.color.r,this.color.g,this.color.b);p.h=v,p.s=g;var m=Du(p.h,p.s,p.v);m.a=this.color.a,this.color=m,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}();function Tg(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length<1)throw new TypeError("Invalid arguments.");if(r.length===1)return document.createTextNode(r[0]);var i=document.createElement(r[0]);return i.appendChild(Tg.apply(void 0,yi(Pr(r).call(r,1)))),i}var L3=function(){function e(r,t,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return!1};Ct(this,e),this.parent=r,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=a,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Qa(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new fS(n),this.wrapper=void 0}return Ot(e,[{key:"setOptions",value:function(t){if(t!==void 0){this.popupHistory={},this._removePopup();var i=!0;if(typeof t=="string")this.options.filter=t;else if(ct(t))this.options.filter=t.join();else if(ot(t)==="object"){if(t==null)throw new TypeError("options cannot be null");t.container!==void 0&&(this.options.container=t.container),gt(t)!==void 0&&(this.options.filter=gt(t)),t.showButton!==void 0&&(this.options.showButton=t.showButton),t.enabled!==void 0&&(i=t.enabled)}else typeof t=="boolean"?(this.options.filter=!0,i=t):typeof t=="function"&&(this.options.filter=t,i=!0);gt(this.options)===!1&&(i=!1),this.options.enabled=i}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=gt(this.options),i=0,n=!1;for(var a in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,a)&&(this.allowCreation=!1,n=!1,typeof t=="function"?(n=t(a,[]),n=n||this._handleObject(this.configureOptions[a],[a],!0)):(t===!0||Pt(t).call(t,a)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,i>0&&this._makeItem([]),this._makeHeader(a),this._handleObject(this.configureOptions[a],[a])),i++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var i=this.moduleOptions,n=0;n<t.length;n++)if(i[t[n]]!==void 0)i=i[t[n]];else{i=void 0;break}return i}},{key:"_makeItem",value:function(t){if(this.allowCreation===!0){var i=document.createElement("div");i.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return G(a).call(a,function(s){i.appendChild(s)}),this.domElements.push(i),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var i=document.createElement("div");i.className="vis-configuration vis-config-header",i.innerText=t,this._makeItem([],i)}},{key:"_makeLabel",value:function(t,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=document.createElement("div");if(a.className="vis-configuration vis-config-label vis-config-s"+i.length,n===!0){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(Tg("i","b",t))}else a.innerText=t+":";return a}},{key:"_makeDropdown",value:function(t,i,n){var a=document.createElement("select");a.className="vis-configuration vis-config-select";var o=0;i!==void 0&&Pt(t).call(t,i)!==-1&&(o=Pt(t).call(t,i));for(var s=0;s<t.length;s++){var l=document.createElement("option");l.value=t[s],s===o&&(l.selected="selected"),l.innerText=t[s],a.appendChild(l)}var u=this;a.onchange=function(){u._update(this.value,n)};var h=this._makeLabel(n[n.length-1],n);this._makeItem(n,h,a)}},{key:"_makeRange",value:function(t,i,n){var a=t[0],o=t[1],s=t[2],l=t[3],u=document.createElement("input");u.className="vis-configuration vis-config-range";try{u.type="range",u.min=o,u.max=s}catch(m){}u.step=l;var h="",f=0;if(i!==void 0){var c=1.2;i<0&&i*c<o?(u.min=Math.ceil(i*c),f=u.min,h="range increased"):i/c<o&&(u.min=Math.ceil(i/c),f=u.min,h="range increased"),i*c>s&&s!==1&&(u.max=Math.ceil(i*c),f=u.max,h="range increased"),u.value=i}else u.value=a;var d=document.createElement("input");d.className="vis-configuration vis-config-rangeinput",d.value=u.value;var v=this;u.onchange=function(){d.value=this.value,v._update(Number(this.value),n)},u.oninput=function(){d.value=this.value};var g=this._makeLabel(n[n.length-1],n),p=this._makeItem(n,g,u,d);h!==""&&this.popupHistory[p]!==f&&(this.popupHistory[p]=f,this._setupPopup(h,p))}},{key:"_makeButton",value:function(){var t=this;if(this.options.showButton===!0){var i=document.createElement("div");i.className="vis-configuration vis-config-button",i.innerText="generate options",i.onclick=function(){t._printOptions()},i.onmouseover=function(){i.className="vis-configuration vis-config-button hover"},i.onmouseout=function(){i.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(i)}}},{key:"_setupPopup",value:function(t,i){var n=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var a=document.createElement("div");a.id="vis-configuration-popup",a.className="vis-configuration-popup",a.innerText=t,a.onclick=function(){n._removePopup()},this.popupCounter+=1,this.popupDiv={html:a,index:i}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(this.popupDiv.html!==void 0){var i=this.domElements[this.popupDiv.index],n=i.getBoundingClientRect();this.popupDiv.html.style.left=n.left+"px",this.popupDiv.html.style.top=n.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Ae(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Ae(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,i,n){var a=document.createElement("input");a.type="checkbox",a.className="vis-configuration vis-config-checkbox",a.checked=t,i!==void 0&&(a.checked=i,i!==t&&(ot(t)==="object"?i!==t.enabled&&this.changedOptions.push({path:n,value:i}):this.changedOptions.push({path:n,value:i})));var o=this;a.onchange=function(){o._update(this.checked,n)};var s=this._makeLabel(n[n.length-1],n);this._makeItem(n,s,a)}},{key:"_makeTextInput",value:function(t,i,n){var a=document.createElement("input");a.type="text",a.className="vis-configuration vis-config-text",a.value=i,i!==t&&this.changedOptions.push({path:n,value:i});var o=this;a.onchange=function(){o._update(this.value,n)};var s=this._makeLabel(n[n.length-1],n);this._makeItem(n,s,a)}},{key:"_makeColorField",value:function(t,i,n){var a=this,o=t[1],s=document.createElement("div");i=i===void 0?o:i,i!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=i):s.className="vis-configuration vis-config-colorBlock none",i=i===void 0?o:i,s.onclick=function(){a._showColorPicker(i,s,n)};var l=this._makeLabel(n[n.length-1],n);this._makeItem(n,l,s)}},{key:"_showColorPicker",value:function(t,i,n){var a=this;i.onclick=function(){},this.colorPicker.insertTo(i),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(o){var s="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";i.style.backgroundColor=s,a._update(s,n)}),this.colorPicker.setCloseCallback(function(){i.onclick=function(){a._showColorPicker(t,i,n)}})}},{key:"_handleObject",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=!1,o=gt(this.options),s=!1;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){a=!0;var u=t[l],h=Ru(i,l);if(typeof o=="function"&&(a=o(l,i),a===!1&&!ct(u)&&typeof u!="string"&&typeof u!="boolean"&&u instanceof Object&&(this.allowCreation=!1,a=this._handleObject(u,h,!0),this.allowCreation=n===!1)),a!==!1){s=!0;var f=this._getValue(h);if(ct(u))this._handleArray(u,f,h);else if(typeof u=="string")this._makeTextInput(u,f,h);else if(typeof u=="boolean")this._makeCheckbox(u,f,h);else if(u instanceof Object){if(!this.hideOption(i,l,this.moduleOptions))if(u.enabled!==void 0){var c=Ru(h,"enabled"),d=this._getValue(c);if(d===!0){var v=this._makeLabel(l,h,!0);this._makeItem(h,v),s=this._handleObject(u,h)||s}else this._makeCheckbox(u,d,h)}else{var g=this._makeLabel(l,h,!0);this._makeItem(h,g),s=this._handleObject(u,h)||s}}else console.error("dont know how to handle",u,l,h)}}return s}},{key:"_handleArray",value:function(t,i,n){typeof t[0]=="string"&&t[0]==="color"?(this._makeColorField(t,i,n),t[1]!==i&&this.changedOptions.push({path:n,value:i})):typeof t[0]=="string"?(this._makeDropdown(t,i,n),t[0]!==i&&this.changedOptions.push({path:n,value:i})):typeof t[0]=="number"&&(this._makeRange(t,i,n),t[0]!==i&&this.changedOptions.push({path:n,value:Number(i)}))}},{key:"_update",value:function(t,i){var n=this._constructOptions(t,i);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}},{key:"_constructOptions",value:function(t,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n;t=t==="true"?!0:t,t=t==="false"?!1:t;for(var o=0;o<i.length;o++)i[o]!=="global"&&(a[i[o]]===void 0&&(a[i[o]]={}),o!==i.length-1?a=a[i[o]]:a[i[o]]=t);return n}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(Tg("pre","const options = "+fr(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},i=0;i<this.changedOptions.length;i++)this._constructOptions(this.changedOptions[i].value,this.changedOptions[i].path,t);return t}}]),e}(),F3=function(){function e(r,t){Ct(this,e),this.container=r,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return Ot(e,[{key:"setPosition",value:function(t,i){this.x=hr(t),this.y=hr(i)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(t===void 0&&(t=!0),t===!0){var i=this.frame.clientHeight,n=this.frame.clientWidth,a=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,s=0,l=0;if(this.overflowMethod=="flip"){var u=!1,h=!0;this.y-i<this.padding&&(h=!1),this.x+n>o-this.padding&&(u=!0),u?s=this.x-n:s=this.x,h?l=this.y-i:l=this.y}else l=this.y-i,l+i+this.padding>a&&(l=a-i-this.padding),l<this.padding&&(l=this.padding),s=this.x,s+n+this.padding>o&&(s=o-n-this.padding),s<this.padding&&(s=this.padding);this.frame.style.left=s+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),Au=!1,cS,Eg="background: #FFeeee; color: #dd0000",N3=function(){function e(){Ct(this,e)}return Ot(e,null,[{key:"validate",value:function(t,i,n){Au=!1,cS=i;var a=i;return n!==void 0&&(a=i[n]),e.parse(t,a,[]),Au}},{key:"parse",value:function(t,i,n){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.check(a,t,i,n)}},{key:"check",value:function(t,i,n,a){if(n[t]===void 0&&n.__any__===void 0){e.getSuggestion(t,n,a);return}var o=t,s=!0;n[t]===void 0&&n.__any__!==void 0&&(o="__any__",s=e.getType(i[t])==="object");var l=n[o];s&&l.__type__!==void 0&&(l=l.__type__),e.checkFields(t,i,n,o,l,a)}},{key:"checkFields",value:function(t,i,n,a,o,s){var l=function(c){console.error("%c"+c+e.printLocation(s,t),Eg)},u=e.getType(i[t]),h=o[u];h!==void 0?e.getType(h)==="array"&&Pt(h).call(h,i[t])===-1?(l('Invalid option detected in "'+t+'". Allowed values are:'+e.print(h)+' not "'+i[t]+'". '),Au=!0):u==="object"&&a!=="__any__"&&(s=Ru(s,t),e.parse(i[t],n[a],s)):o.any===void 0&&(l('Invalid type received for "'+t+'". Expected: '+e.print(ye(o))+". Received ["+u+'] "'+i[t]+'"'),Au=!0)}},{key:"getType",value:function(t){var i=ot(t);return i==="object"?t===null?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":ct(t)?"array":t instanceof Date?"date":t.nodeType!==void 0?"dom":t._isAMomentObject===!0?"moment":"object":i==="number"?"number":i==="boolean"?"boolean":i==="string"?"string":i===void 0?"undefined":i}},{key:"getSuggestion",value:function(t,i,n){var a=e.findInOptions(t,i,n,!1),o=e.findInOptions(t,cS,[],!0),s=8,l=4,u;a.indexMatch!==void 0?u=" in "+e.printLocation(a.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+a.indexMatch+`"?

`:o.distance<=l&&a.distance>o.distance?u=" in "+e.printLocation(a.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""):a.distance<=s?u='. Did you mean "'+a.closestMatch+'"?'+e.printLocation(a.path,t):u=". Did you mean one of these: "+e.print(ye(i))+e.printLocation(n,t),console.error('%cUnknown option detected: "'+t+'"'+u,Eg),Au=!0}},{key:"findInOptions",value:function(t,i,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,s="",l=[],u=t.toLowerCase(),h=void 0;for(var f in i){var c=void 0;if(i[f].__type__!==void 0&&a===!0){var d=e.findInOptions(t,i[f],Ru(n,f));o>d.distance&&(s=d.closestMatch,l=d.path,o=d.distance,h=d.indexMatch)}else{var v;Pt(v=f.toLowerCase()).call(v,u)!==-1&&(h=f),c=e.levenshteinDistance(t,f),o>c&&(s=f,l=lS(n),o=c)}}return{closestMatch:s,path:l,distance:o,indexMatch:h}}},{key:"printLocation",value:function(t,i){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,a=`

`+n+`options = {
`,o=0;o<t.length;o++){for(var s=0;s<o+1;s++)a+="  ";a+=t[o]+`: {
`}for(var l=0;l<t.length+1;l++)a+="  ";a+=i+`
`;for(var u=0;u<t.length+1;u++){for(var h=0;h<t.length-u;h++)a+="  ";a+=`}
`}return a+`

`}},{key:"print",value:function(t){return fr(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,i){if(t.length===0)return i.length;if(i.length===0)return t.length;var n=[],a;for(a=0;a<=i.length;a++)n[a]=[a];var o;for(o=0;o<=t.length;o++)n[0][o]=o;for(a=1;a<=i.length;a++)for(o=1;o<=t.length;o++)i.charAt(a-1)==t.charAt(o-1)?n[a][o]=n[a-1][o-1]:n[a][o]=Math.min(n[a-1][o-1]+1,Math.min(n[a][o-1]+1,n[a-1][o]+1));return n[i.length][t.length]}}]),e}(),$3=bi,G3=fS,Y3=L3,j3=pg,W3=F3,H3=Eg,B3=N3,U3=Object.freeze({__proto__:null,Activator:$3,Alea:BV,ColorPicker:G3,Configurator:Y3,DELETE:dg,HSVToHex:yg,HSVToRGB:Du,Hammer:j3,Popup:W3,RGBToHSV:Ts,RGBToHex:mg,VALIDATOR_PRINT_STYLE:H3,Validator:B3,addClassName:h3,addCssText:S3,addEventListener:g3,binarySearchCustom:P3,binarySearchValue:k3,bridgeObject:bg,copyAndExtendArray:Ru,copyArray:lS,deepExtend:Pu,deepObjectAssign:vg,easingFunctions:R3,equalArray:o3,extend:r3,fillIfDefined:sS,forEach:c3,getAbsoluteLeft:s3,getAbsoluteRight:l3,getAbsoluteTop:u3,getScrollBarWidth:D3,getTarget:_3,getType:ku,hasParent:w3,hexToHSV:uS,hexToRGB:yc,insertSort:O3,isDate:e3,isNumber:Iu,isObject:gg,isString:cr,isValidHex:_g,isValidRGB:wg,isValidRGBA:hS,mergeOptions:I3,option:b3,overrideOpacity:T3,parseColor:E3,preventDefault:y3,pureDeepObjectAssign:HV,recursiveDOMDelete:oS,removeClassName:f3,removeCssText:x3,removeEventListener:m3,selectiveBridgeObject:C3,selectiveDeepExtend:n3,selectiveExtend:i3,selectiveNotDeepExtend:a3,throttle:p3,toArray:d3,topMost:A3,updateProperty:v3});function dS(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function z3(e,r,t){}function V3(e,r,t){}var X3=/javascript\s*\:/img;function K3(e,r){return X3.test(r)?"":r}var Z3=dS(),q3=dS,J3=z3,Q3=V3,tX=K3,Ss={whiteList:Z3,getDefaultWhiteList:q3,onAttr:J3,onIgnoreAttr:Q3,safeAttrValue:tX},Mu={indexOf:function(e,r){var t,i;if(Array.prototype.indexOf)return e.indexOf(r);for(t=0,i=e.length;t<i;t++)if(e[t]===r)return t;return-1},forEach:function(e,r,t){var i,n;if(Array.prototype.forEach)return e.forEach(r,t);for(i=0,n=e.length;i<n;i++)r.call(t,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}};function eX(e,r){e=Mu.trimRight(e),e[e.length-1]!==";"&&(e+=";");var t=e.length,i=!1,n=0,a=0,o="";function s(){if(!i){var h=Mu.trim(e.slice(n,a)),f=h.indexOf(":");if(f!==-1){var c=Mu.trim(h.slice(0,f)),d=Mu.trim(h.slice(f+1));if(c){var v=r(n,o.length,c,d,h);v&&(o+=v+"; ")}}}n=a+1}for(;a<t;a++){var l=e[a];if(l==="/"&&e[a+1]==="*"){var u=e.indexOf("*/",a+2);if(u===-1)break;a=u+1,n=a+1,i=!1}else l==="("?i=!0:l===")"?i=!1:l===";"?i||s():l===`
`&&s()}return Mu.trim(o)}var rX=eX;function vS(e){return e==null}function iX(e){var r={};for(var t in e)r[t]=e[t];return r}function pS(e){e=iX(e||{}),e.whiteList=e.whiteList||Ss.whiteList,e.onAttr=e.onAttr||Ss.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Ss.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Ss.safeAttrValue,this.options=e}pS.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var r=this,t=r.options,i=t.whiteList,n=t.onAttr,a=t.onIgnoreAttr,o=t.safeAttrValue,s=rX(e,function(l,u,h,f,c){var d=i[h],v=!1;if(d===!0?v=d:typeof d=="function"?v=d(f):d instanceof RegExp&&(v=d.test(f)),v!==!0&&(v=!1),f=o(h,f),!!f){var g={position:u,sourcePosition:l,source:c,isWhite:v};if(v){var p=n(h,f,g);return vS(p)?h+":"+f:p}else{var p=a(h,f,g);if(!vS(p))return p}}});return s};var gS=pS,Sg=Mn(function(e,r){function t(n,a){var o=new gS(a);return o.process(n)}r=e.exports=t,r.FilterCSS=gS;for(var i in Ss)r[i]=Ss[i];typeof window!="undefined"&&(window.filterCSS=e.exports)}),Ie={indexOf:function(e,r){var t,i;if(Array.prototype.indexOf)return e.indexOf(r);for(t=0,i=e.length;t<i;t++)if(e[t]===r)return t;return-1},forEach:function(e,r,t){var i,n;if(Array.prototype.forEach)return e.forEach(r,t);for(i=0,n=e.length;i<n;i++)r.call(t,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var r=/\s|\n|\t/,t=r.exec(e);return t?t.index:-1}},nX=Sg.FilterCSS,aX=Sg.getDefaultWhiteList;function mS(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var yS=new nX;function oX(e,r,t){}function sX(e,r,t){}function lX(e,r,t){}function uX(e,r,t){}function _S(e){return e.replace(fX,"&lt;").replace(cX,"&gt;")}function hX(e,r,t,i){if(t=OS(t),r==="href"||r==="src"){if(t=Ie.trim(t),t==="#")return"#";if(!(t.substr(0,7)==="http://"||t.substr(0,8)==="https://"||t.substr(0,7)==="mailto:"||t.substr(0,4)==="tel:"||t.substr(0,11)==="data:image/"||t.substr(0,6)==="ftp://"||t.substr(0,2)==="./"||t.substr(0,3)==="../"||t[0]==="#"||t[0]==="/"))return""}else if(r==="background"){if(_c.lastIndex=0,_c.test(t))return""}else if(r==="style"){if(wS.lastIndex=0,wS.test(t)||(bS.lastIndex=0,bS.test(t)&&(_c.lastIndex=0,_c.test(t))))return"";i!==!1&&(i=i||yS,t=i.process(t))}return t=IS(t),t}var fX=/</g,cX=/>/g,dX=/"/g,vX=/&quot;/g,pX=/&#([a-zA-Z0-9]*);?/gim,gX=/&colon;?/gim,mX=/&newline;?/gim,_c=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,wS=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,bS=/u\s*r\s*l\s*\(.*/gi;function TS(e){return e.replace(dX,"&quot;")}function ES(e){return e.replace(vX,'"')}function SS(e){return e.replace(pX,function(t,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function xS(e){return e.replace(gX,":").replace(mX," ")}function CS(e){for(var r="",t=0,i=e.length;t<i;t++)r+=e.charCodeAt(t)<32?" ":e.charAt(t);return Ie.trim(r)}function OS(e){return e=ES(e),e=SS(e),e=xS(e),e=CS(e),e}function IS(e){return e=TS(e),e=_S(e),e}function yX(){return""}function _X(e,r){typeof r!="function"&&(r=function(){});var t=!Array.isArray(e);function i(o){return t?!0:Ie.indexOf(e,o)!==-1}var n=[],a=!1;return{onIgnoreTag:function(o,s,l){if(i(o))if(l.isClosing){var u="[/removed]",h=l.position+u.length;return n.push([a!==!1?a:l.position,h]),a=!1,u}else return a||(a=l.position),"[removed]";else return r(o,s,l)},remove:function(o){var s="",l=0;return Ie.forEach(n,function(u){s+=o.slice(l,u[0]),l=u[1]}),s+=o.slice(l),s}}}function wX(e){return e.replace(bX,"")}var bX=/<!--[\s\S]*?-->/g;function TX(e){var r=e.split("");return r=r.filter(function(t){var i=t.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),r.join("")}var EX=mS(),SX=mS,xX=oX,CX=sX,OX=lX,IX=uX,PX=hX,kX=_S,RX=TS,DX=ES,AX=SS,MX=xS,LX=CS,FX=OS,NX=IS,$X=yX,GX=_X,YX=wX,jX=TX,WX=yS,HX=aX,dr={whiteList:EX,getDefaultWhiteList:SX,onTag:xX,onIgnoreTag:CX,onTagAttr:OX,onIgnoreTagAttr:IX,safeAttrValue:PX,escapeHtml:kX,escapeQuote:RX,unescapeQuote:DX,escapeHtmlEntities:AX,escapeDangerHtml5Entities:MX,clearNonPrintableCharacter:LX,friendlyAttrValue:FX,escapeAttrValue:NX,onIgnoreTagStripAll:$X,StripTagBody:GX,stripCommentTag:YX,stripBlankChar:jX,cssFilter:WX,getDefaultCSSWhiteList:HX};function BX(e){var r=Ie.spaceIndex(e);if(r===-1)var t=e.slice(1,-1);else var t=e.slice(1,r+1);return t=Ie.trim(t).toLowerCase(),t.slice(0,1)==="/"&&(t=t.slice(1)),t.slice(-1)==="/"&&(t=t.slice(0,-1)),t}function UX(e){return e.slice(0,2)==="</"}function zX(e,r,t){var i="",n=0,a=!1,o=!1,s=0,l=e.length,u="",h="";t:for(s=0;s<l;s++){var f=e.charAt(s);if(a===!1){if(f==="<"){a=s;continue}}else if(o===!1){if(f==="<"){i+=t(e.slice(n,s)),a=s,n=s;continue}if(f===">"){i+=t(e.slice(n,a)),h=e.slice(a,s+1),u=BX(h),i+=r(a,i.length,u,h,UX(h)),n=s+1,a=!1;continue}if(f==='"'||f==="'")for(var c=1,d=e.charAt(s-c);d.trim()===""||d==="=";){if(d==="="){o=f;continue t}d=e.charAt(s-++c)}}else if(f===o){o=!1;continue}}return n<e.length&&(i+=t(e.substr(n))),i}var VX=/[^a-zA-Z0-9_:\.\-]/gim;function XX(e,r){var t=0,i=[],n=!1,a=e.length;function o(f,c){if(f=Ie.trim(f),f=f.replace(VX,"").toLowerCase(),!(f.length<1)){var d=r(f,c||"");d&&i.push(d)}}for(var s=0;s<a;s++){var l=e.charAt(s),u,h;if(n===!1&&l==="="){n=e.slice(t,s),t=s+1;continue}if(n!==!1&&s===t&&(l==='"'||l==="'")&&e.charAt(s-1)==="="){if(h=e.indexOf(l,s+1),h===-1)break;u=Ie.trim(e.slice(t+1,h)),o(n,u),n=!1,s=h,t=s+1;continue}if(/\s|\n|\t/.test(l))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(h=KX(e,s),h===-1){u=Ie.trim(e.slice(t,s)),o(u),n=!1,t=s+1;continue}else{s=h-1;continue}else if(h=ZX(e,s-1),h===-1){u=Ie.trim(e.slice(t,s)),u=PS(u),o(n,u),n=!1,t=s+1;continue}else continue}return t<e.length&&(n===!1?o(e.slice(t)):o(n,PS(Ie.trim(e.slice(t))))),Ie.trim(i.join(" "))}function KX(e,r){for(;r<e.length;r++){var t=e[r];if(t!==" ")return t==="="?r:-1}}function ZX(e,r){for(;r>0;r--){var t=e[r];if(t!==" ")return t==="="?r:-1}}function qX(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function PS(e){return qX(e)?e.substr(1,e.length-2):e}var JX=zX,QX=XX,wc={parseTag:JX,parseAttr:QX},t5=Sg.FilterCSS,e5=wc.parseTag,r5=wc.parseAttr;function bc(e){return e==null}function i5(e){var r=Ie.spaceIndex(e);if(r===-1)return{html:"",closing:e[e.length-2]==="/"};e=Ie.trim(e.slice(r+1,-1));var t=e[e.length-1]==="/";return t&&(e=Ie.trim(e.slice(0,-1))),{html:e,closing:t}}function n5(e){var r={};for(var t in e)r[t]=e[t];return r}function kS(e){e=n5(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=dr.onIgnoreTagStripAll),e.whiteList=e.whiteList||dr.whiteList,e.onTag=e.onTag||dr.onTag,e.onTagAttr=e.onTagAttr||dr.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||dr.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||dr.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||dr.safeAttrValue,e.escapeHtml=e.escapeHtml||dr.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new t5(e.css))}kS.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var r=this,t=r.options,i=t.whiteList,n=t.onTag,a=t.onIgnoreTag,o=t.onTagAttr,s=t.onIgnoreTagAttr,l=t.safeAttrValue,u=t.escapeHtml,h=r.cssFilter;t.stripBlankChar&&(e=dr.stripBlankChar(e)),t.allowCommentTag||(e=dr.stripCommentTag(e));var f=!1;if(t.stripIgnoreTagBody){var f=dr.StripTagBody(t.stripIgnoreTagBody,a);a=f.onIgnoreTag}var c=e5(e,function(d,v,g,p,m){var _={sourcePosition:d,position:v,isClosing:m,isWhite:i.hasOwnProperty(g)},y=n(g,p,_);if(!bc(y))return y;if(_.isWhite){if(_.isClosing)return"</"+g+">";var w=i5(p),T=i[g],S=r5(w.html,function(E,I){var A=Ie.indexOf(T,E)!==-1,P=o(g,E,I,A);if(!bc(P))return P;if(A)return I=l(g,E,I,h),I?E+'="'+I+'"':E;var P=s(g,E,I,A);return bc(P)?void 0:P}),p="<"+g;return S&&(p+=" "+S),w.closing&&(p+=" /"),p+=">",p}else{var y=a(g,p,_);return bc(y)?u(p):y}},u);return f&&(c=f.remove(c)),c};var RS=kS,a5=Mn(function(e,r){function t(a,o){var s=new RS(o);return s.process(a)}r=e.exports=t,r.filterXSS=t,r.FilterXSS=RS;for(var i in dr)r[i]=dr[i];for(var i in wc)r[i]=wc[i];typeof window!="undefined"&&(window.filterXSS=e.exports);function n(){return typeof self!="undefined"&&typeof DedicatedWorkerGlobalScope!="undefined"&&self instanceof DedicatedWorkerGlobalScope}n()&&(self.filterXSS=e.exports)}),DS=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),o5=new Uint8Array(16);function s5(){if(!DS)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return DS(o5)}var AS=[];for(var Tc=0;Tc<256;++Tc)AS[Tc]=(Tc+256).toString(16).substr(1);function l5(e,r){var t=r||0,i=AS;return[i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]]].join("")}function xs(e,r,t){var i=r&&t||0;typeof e=="string"&&(r=e==="binary"?new Array(16):null,e=null),e=e||{};var n=e.random||(e.rng||s5)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r)for(var a=0;a<16;++a)r[i+a]=n[a];return r||l5(n)}function MS(e,r){var t=ye(e);if(ec){var i=ec(e);r&&(i=gt(i).call(i,function(n){return rc(e,n).enumerable})),t.push.apply(t,i)}return t}function LS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};if(r%2){var i;G(i=MS(Object(t),!0)).call(i,function(a){$T(e,a,t[a])})}else if(ic)NT(e,ic(t));else{var n;G(n=MS(Object(t))).call(n,function(a){Vp(e,a,rc(t,a))})}}return e}var xg=/^\/?Date\((-?\d+)/i,u5=/^\d+$/;function Cg(e,r){var t;if(e!==void 0){if(e===null)return null;if(!r)return e;if(typeof r!="string"&&!(r instanceof String))throw new Error("Type must be a string");switch(r){case"boolean":case"Boolean":return Boolean(e);case"number":case"Number":return cr(e)&&!isNaN(Date.parse(e))?F(e).valueOf():Number(e.valueOf());case"string":case"String":return String(e);case"Date":try{return Cg(e,"Moment").toDate()}catch(n){throw n instanceof TypeError?new TypeError("Cannot convert object of type "+ku(e)+" to type "+r):n}case"Moment":if(Iu(e))return F(e);if(e instanceof Date)return F(e.valueOf());if(F.isMoment(e))return F(e);if(cr(e))return t=xg.exec(e),t?F(Number(t[1])):(t=u5.exec(e),F(t?Number(e):e));throw new TypeError("Cannot convert object of type "+ku(e)+" to type "+r);case"ISODate":if(Iu(e))return new Date(e);if(e instanceof Date)return e.toISOString();if(F.isMoment(e))return e.toDate().toISOString();if(cr(e))return t=xg.exec(e),t?new Date(Number(t[1])).toISOString():F(e).format();throw new Error("Cannot convert object of type "+ku(e)+" to type ISODate");case"ASPDate":if(Iu(e))return"/Date("+e+")/";if(e instanceof Date||F.isMoment(e))return"/Date("+e.valueOf()+")/";if(cr(e)){t=xg.exec(e);var i;return t?i=new Date(Number(t[1])).valueOf():i=new Date(e).valueOf(),"/Date("+i+")/"}else throw new Error("Cannot convert object of type "+ku(e)+" to type ASPDate");default:throw new Error("Unknown type ".concat(r))}}}function Cs(e){var r,t,i,n,a,o,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{start:"Date",end:"Date"},l=e._idProp,u=new Ko({fieldId:l}),h=me(r=dM(e)).call(r,function(f){var c;return WT(c=ye(f)).call(c,function(d,v){return d[v]=Cg(f[v],s[v]),d},{})}).to(u);return h.all().start(),{add:function(){var c;return(c=e.getDataSet()).add.apply(c,arguments)},remove:function(){var c;return(c=e.getDataSet()).remove.apply(c,arguments)},update:function(){var c;return(c=e.getDataSet()).update.apply(c,arguments)},updateOnly:function(){var c;return(c=e.getDataSet()).updateOnly.apply(c,arguments)},clear:function(){var c;return(c=e.getDataSet()).clear.apply(c,arguments)},forEach:R(t=G(u)).call(t,u),get:R(i=u.get).call(i,u),getIds:R(n=u.getIds).call(n,u),off:R(a=u.off).call(a,u),on:R(o=u.on).call(o,u),get length(){return u.length},idProp:l,type:s,rawDS:e,coercedDS:u,dispose:function(){return h.stop()}}}var FS=function(r){var t=new a5.FilterXSS(r);return function(i){return t.process(i)}},h5=function(r){return r},Og=FS(),f5=function(r){!r||(r.disabled===!0?(Og=h5,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):r.filterOptions&&(Og=FS(r.filterOptions)))},b=LS(LS({},U3),{},{convert:Cg,setupXSSProtection:f5});Vp(b,"xss",{get:function(){return Og}});var c5=Jp.trim,Ig=Wt.parseFloat,d5=1/Ig(ps+"-0")!=-1/0,NS=d5?function(r){var t=c5(String(r)),i=Ig(t);return i===0&&t.charAt(0)=="-"?-0:i}:Ig;J({global:!0,forced:parseFloat!=NS},{parseFloat:NS});var v5=ht.parseFloat,p5=v5,Ec=p5,Un=function(){function e(r,t){Ct(this,e),this.options=null,this.props=null}return Ot(e,[{key:"setOptions",value:function(t){t&&b.extend(this.options,t)}},{key:"redraw",value:function(){return!1}},{key:"destroy",value:function(){}},{key:"_isResized",value:function(){var t=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,t}}]),e}(),g5=function(r){var t=String(ns(this)),i="",n=au(r);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))n&1&&(i+=t);return i};J({target:"String",proto:!0},{repeat:g5});var m5=de("String").repeat,$S=String.prototype,y5=function(e){var r=e.repeat;return typeof e=="string"||e===$S||e instanceof String&&r===$S.repeat?m5:r},_5=y5,Os=_5,w5=Math.floor,Pg=function(e,r){var t=e.length,i=w5(t/2);return t<8?b5(e,r):T5(Pg(e.slice(0,i),r),Pg(e.slice(i),r),r)},b5=function(e,r){for(var t=e.length,i=1,n,a;i<t;){for(a=i,n=e[i];a&&r(e[a-1],n)>0;)e[a]=e[--a];a!==i++&&(e[a]=n)}return e},T5=function(e,r,t){for(var i=e.length,n=r.length,a=0,o=0,s=[];a<i||o<n;)a<i&&o<n?s.push(t(e[a],r[o])<=0?e[a++]:r[o++]):s.push(a<i?e[a++]:r[o++]);return s},E5=Pg,GS=Ka.match(/firefox\/(\d+)/i),YS=!!GS&&+GS[1],S5=/MSIE|Trident/.test(Ka),jS=Ka.match(/AppleWebKit\/(\d+)\./),WS=!!jS&&+jS[1],lo=[],HS=lo.sort,x5=Ft(function(){lo.sort(void 0)}),C5=Ft(function(){lo.sort(null)}),O5=cs("sort"),BS=!Ft(function(){if($n)return $n<70;if(!(YS&&YS>3)){if(S5)return!0;if(WS)return WS<603;var e="",r,t,i,n;for(r=65;r<76;r++){switch(t=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(n=0;n<47;n++)lo.push({k:t+n,v:i})}for(lo.sort(function(a,o){return o.v-a.v}),n=0;n<lo.length;n++)t=lo[n].k.charAt(0),e.charAt(e.length-1)!==t&&(e+=t);return e!=="DGBEFHACIJK"}}),I5=x5||!C5||!O5||!BS,P5=function(e){return function(r,t){return t===void 0?-1:r===void 0?1:e!==void 0?+e(r,t)||0:String(r)>String(t)?1:-1}};J({target:"Array",proto:!0,forced:I5},{sort:function(r){r!==void 0&&os(r);var t=ar(this);if(BS)return r===void 0?HS.call(t):HS.call(t,r);var i=[],n=vi(t.length),a,o;for(o=0;o<n;o++)o in t&&i.push(t[o]);for(i=E5(i,P5(r)),a=i.length,o=0;o<a;)t[o]=i[o++];for(;o<n;)delete t[o++];return t}});var k5=de("Array").sort,US=Array.prototype,R5=function(e){var r=e.sort;return e===US||e instanceof Array&&r===US.sort?k5:r},D5=R5,Pe=D5;function kg(e,r,t){if(t&&!ct(t))return kg(e,r,[t]);if(r.hiddenDates=[],t&&ct(t)==!0){for(var i,n=0;n<t.length;n++)if(Os(t[n])===void 0){var a={};a.start=e(t[n].start).toDate().valueOf(),a.end=e(t[n].end).toDate().valueOf(),r.hiddenDates.push(a)}Pe(i=r.hiddenDates).call(i,function(o,s){return o.start-s.start})}}function Sc(e,r,t){if(t&&!ct(t))return Sc(e,r,[t]);if(t&&r.domProps.centerContainer.width!==void 0){kg(e,r,t);for(var i=e(r.range.start),n=e(r.range.end),a=r.range.end-r.range.start,o=a/r.domProps.centerContainer.width,s=0;s<t.length;s++)if(Os(t[s])!==void 0){var l=e(t[s].start),u=e(t[s].end);if(l._d=="Invalid Date")throw new Error("Supplied start date is not valid: ".concat(t[s].start));if(u._d=="Invalid Date")throw new Error("Supplied end date is not valid: ".concat(t[s].end));var h=u-l;if(h>=4*o){var f=0,c=n.clone();switch(Os(t[s])){case"daily":l.day()!=u.day()&&(f=1),l.dayOfYear(i.dayOfYear()),l.year(i.year()),l.subtract(7,"days"),u.dayOfYear(i.dayOfYear()),u.year(i.year()),u.subtract(7-f,"days"),c.add(1,"weeks");break;case"weekly":{var d=u.diff(l,"days"),v=l.day();l.date(i.date()),l.month(i.month()),l.year(i.year()),u=l.clone(),l.day(v),u.day(v),u.add(d,"days"),l.subtract(1,"weeks"),u.subtract(1,"weeks"),c.add(1,"weeks");break}case"monthly":l.month()!=u.month()&&(f=1),l.month(i.month()),l.year(i.year()),l.subtract(1,"months"),u.month(i.month()),u.year(i.year()),u.subtract(1,"months"),u.add(f,"months"),c.add(1,"months");break;case"yearly":l.year()!=u.year()&&(f=1),l.year(i.year()),l.subtract(1,"years"),u.year(i.year()),u.subtract(1,"years"),u.add(f,"years"),c.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",Os(t[s]));return}for(;l<c;)switch(r.hiddenDates.push({start:l.valueOf(),end:u.valueOf()}),Os(t[s])){case"daily":l.add(1,"days"),u.add(1,"days");break;case"weekly":l.add(1,"weeks"),u.add(1,"weeks");break;case"monthly":l.add(1,"months"),u.add(1,"months");break;case"yearly":l.add(1,"y"),u.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",Os(t[s]));return}r.hiddenDates.push({start:l.valueOf(),end:u.valueOf()})}}A5(r);var g=Cc(r.range.start,r.hiddenDates),p=Cc(r.range.end,r.hiddenDates),m=r.range.start,_=r.range.end;g.hidden==!0&&(m=r.range.startToFront==!0?g.startDate-1:g.endDate+1),p.hidden==!0&&(_=r.range.endToFront==!0?p.startDate-1:p.endDate+1),(g.hidden==!0||p.hidden==!0)&&r.range._applyRange(m,_)}}function A5(e){for(var r,t=e.hiddenDates,i=[],n=0;n<t.length;n++)for(var a=0;a<t.length;a++)n!=a&&t[a].remove!=!0&&t[n].remove!=!0&&(t[a].start>=t[n].start&&t[a].end<=t[n].end?t[a].remove=!0:t[a].start>=t[n].start&&t[a].start<=t[n].end?(t[n].end=t[a].end,t[a].remove=!0):t[a].end>=t[n].start&&t[a].end<=t[n].end&&(t[n].start=t[a].start,t[a].remove=!0));for(n=0;n<t.length;n++)t[n].remove!==!0&&i.push(t[n]);e.hiddenDates=i,Pe(r=e.hiddenDates).call(r,function(o,s){return o.start-s.start})}function M5(e,r,t){for(var i=!1,n=r.current.valueOf(),a=0;a<r.hiddenDates.length;a++){var o=r.hiddenDates[a].start,s=r.hiddenDates[a].end;if(n>=o&&n<s){i=!0;break}}if(i==!0&&n<r._end.valueOf()&&n!=t){var l=e(t),u=e(s);l.year()!=u.year()?r.switchedYear=!0:l.month()!=u.month()?r.switchedMonth=!0:l.dayOfYear()!=u.dayOfYear()&&(r.switchedDay=!0),r.current=u}}function zS(e,r,t){var i;if(e.body.hiddenDates.length==0)return i=e.range.conversion(t),(r.valueOf()-i.offset)*i.scale;var n=Cc(r,e.body.hiddenDates);n.hidden==!0&&(r=n.startDate);var a=Lu(e.body.hiddenDates,e.range.start,e.range.end);if(r<e.range.start){i=e.range.conversion(t,a);var o=L5(e.body.hiddenDates,r,i.offset);return r=e.options.moment(r).toDate().valueOf(),r=r+o,-(i.offset-r.valueOf())*i.scale}else if(r>e.range.end){var s={start:e.range.start,end:r};return r=XS(e.options.moment,e.body.hiddenDates,s,r),i=e.range.conversion(t,a),(r.valueOf()-i.offset)*i.scale}else return r=XS(e.options.moment,e.body.hiddenDates,e.range,r),i=e.range.conversion(t,a),(r.valueOf()-i.offset)*i.scale}function VS(e,r,t){if(e.body.hiddenDates.length==0){var i=e.range.conversion(t);return new Date(r/i.scale+i.offset)}else{var n=Lu(e.body.hiddenDates,e.range.start,e.range.end),a=e.range.end-e.range.start-n,o=a*r/t,s=F5(e.body.hiddenDates,e.range,o);return new Date(s+o+e.range.start)}}function Lu(e,r,t){for(var i=0,n=0;n<e.length;n++){var a=e[n].start,o=e[n].end;a>=r&&o<t&&(i+=o-a)}return i}function L5(e,r,t){for(var i=0,n=0;n<e.length;n++){var a=e[n].start,o=e[n].end;a>=r&&o<=t&&(i+=o-a)}return i}function XS(e,r,t,i){return i=e(i).toDate().valueOf(),i-=xc(e,r,t,i),i}function xc(e,r,t,i){var n=0;i=e(i).toDate().valueOf();for(var a=0;a<r.length;a++){var o=r[a].start,s=r[a].end;o>=t.start&&s<t.end&&i>=s&&(n+=s-o)}return n}function F5(e,r,t){for(var i=0,n=0,a=r.start,o=0;o<e.length;o++){var s=e[o].start,l=e[o].end;if(s>=r.start&&l<r.end){if(n+=s-a,a=l,n>=t)break;i+=l-s}}return i}function uo(e,r,t,i){var n=Cc(r,e);return n.hidden==!0?t<0?i==!0?n.startDate-(n.endDate-r)-1:n.startDate-1:i==!0?n.endDate+(r-n.startDate)+1:n.endDate+1:r}function Cc(e,r){for(var t=0;t<r.length;t++){var i=r[t].start,n=r[t].end;if(e>=i&&e<n)return{hidden:!0,startDate:i,endDate:n}}return{hidden:!1,startDate:i,endDate:n}}function N5(e){var r=$5();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=V(i,arguments,a)}else n=i.apply(this,arguments);return lr(this,n)}}function $5(){if(typeof Reflect=="undefined"||!V||V.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(V(Boolean,[],function(){})),!0}catch(e){return!1}}var KS=function(e){sr(t,e);var r=N5(t);function t(i,n){var a,o,s,l,u,h,f,c;Ct(this,t),c=r.call(this);var d=Ze().hours(0).minutes(0).seconds(0).milliseconds(0),v=d.clone().add(-3,"days").valueOf(),g=d.clone().add(3,"days").valueOf();return c.millisecondsPerPixelCache=void 0,n===void 0?(c.start=v,c.end=g):(c.start=n.start||v,c.end=n.end||g),c.rolling=!1,c.body=i,c.deltaDifference=0,c.scaleOffset=0,c.startToFront=!1,c.endToFront=!0,c.defaultOptions={rtl:!1,start:null,end:null,moment:Ze,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4,rollingMode:{follow:!1,offset:.5}},c.options=b.extend({},c.defaultOptions),c.props={touch:{}},c.animationTimer=null,c.body.emitter.on("panstart",R(a=c._onDragStart).call(a,Oe(c))),c.body.emitter.on("panmove",R(o=c._onDrag).call(o,Oe(c))),c.body.emitter.on("panend",R(s=c._onDragEnd).call(s,Oe(c))),c.body.emitter.on("mousewheel",R(l=c._onMouseWheel).call(l,Oe(c))),c.body.emitter.on("touch",R(u=c._onTouch).call(u,Oe(c))),c.body.emitter.on("pinch",R(h=c._onPinch).call(h,Oe(c))),c.body.dom.rollingModeBtn.addEventListener("click",R(f=c.startRolling).call(f,Oe(c))),c.setOptions(n),c}return Ot(t,[{key:"setOptions",value:function(n){if(n){var a=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll"];b.selectiveExtend(a,this.options,n),n.rollingMode&&n.rollingMode.follow&&this.startRolling(),("start"in n||"end"in n)&&this.setRange(n.start,n.end)}}},{key:"startRolling",value:function(){var n=this;function a(){n.stopRolling(),n.rolling=!0;var o=n.end-n.start,s=b.convert(new Date,"Date").valueOf(),l=n.options.rollingMode&&n.options.rollingMode.offset||.5,u=s-o*l,h=s+o*(1-l),f={animation:!1};n.setRange(u,h,f);var c=n.conversion(n.body.domProps.center.width).scale;o=1/c/10,o<30&&(o=30),o>1e3&&(o=1e3),n.body.dom.rollingModeBtn.style.visibility="hidden",n.currentTimeTimer=Ae(a,o)}a()}},{key:"stopRolling",value:function(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}},{key:"setRange",value:function(n,a,o,s,l){o||(o={}),o.byUser!==!0&&(o.byUser=!1);var u=this,h=n!=null?b.convert(n,"Date").valueOf():null,f=a!=null?b.convert(a,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,o.animation){var c=this.start,d=this.end,v=ot(o.animation)==="object"&&"duration"in o.animation?o.animation.duration:500,g=ot(o.animation)==="object"&&"easingFunction"in o.animation?o.animation.easingFunction:"easeInOutQuad",p=b.easingFunctions[g];if(!p){var m;throw new Error(Ut(m="Unknown easing function ".concat(fr(g),". Choose from: ")).call(m,ye(b.easingFunctions).join(", ")))}var _=ur(),y=!1,w=function x(){if(!u.props.touch.dragging){var E=ur(),I=E-_,A=p(I/v),P=I>v,D=P||h===null?h:c+(h-c)*A,N=P||f===null?f:d+(f-d)*A;T=u._applyRange(D,N),Sc(u.options.moment,u.body,u.options.hiddenDates),y=y||T;var j={start:new Date(u.start),end:new Date(u.end),byUser:o.byUser,event:o.event};if(l&&l(A,T,P),T&&u.body.emitter.emit("rangechange",j),P){if(y&&(u.body.emitter.emit("rangechanged",j),s))return s()}else u.animationTimer=Ae(x,20)}};return w()}else{var T=this._applyRange(h,f);if(Sc(this.options.moment,this.body,this.options.hiddenDates),T){var S={start:new Date(this.start),end:new Date(this.end),byUser:o.byUser,event:o.event};if(this.body.emitter.emit("rangechange",S),clearTimeout(u.timeoutID),u.timeoutID=Ae(function(){u.body.emitter.emit("rangechanged",S)},200),s)return s()}}}},{key:"getMillisecondsPerPixel",value:function(){return this.millisecondsPerPixelCache===void 0&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}},{key:"_cancelAnimation",value:function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}},{key:"_applyRange",value:function(n,a){var o=n!=null?b.convert(n,"Date").valueOf():this.start,s=a!=null?b.convert(a,"Date").valueOf():this.end,l=this.options.max!=null?b.convert(this.options.max,"Date").valueOf():null,u=this.options.min!=null?b.convert(this.options.min,"Date").valueOf():null,h;if(isNaN(o)||o===null)throw new Error('Invalid start "'.concat(n,'"'));if(isNaN(s)||s===null)throw new Error('Invalid end "'.concat(a,'"'));if(s<o&&(s=o),u!==null&&o<u&&(h=u-o,o+=h,s+=h,l!=null&&s>l&&(s=l)),l!==null&&s>l&&(h=s-l,o-=h,s-=h,u!=null&&o<u&&(o=u)),this.options.zoomMin!==null){var f=Ec(this.options.zoomMin);if(f<0&&(f=0),s-o<f){var c=.5;this.end-this.start===f&&o>=this.start-c&&s<=this.end?(o=this.start,s=this.end):(h=f-(s-o),o-=h/2,s+=h/2)}}if(this.options.zoomMax!==null){var d=Ec(this.options.zoomMax);d<0&&(d=0),s-o>d&&(this.end-this.start===d&&o<this.start&&s>this.end?(o=this.start,s=this.end):(h=s-o-d,o+=h/2,s-=h/2))}var v=this.start!=o||this.end!=s;return!(o>=this.start&&o<=this.end||s>=this.start&&s<=this.end)&&!(this.start>=o&&this.start<=s||this.end>=o&&this.end<=s)&&this.body.emitter.emit("checkRangedItems"),this.start=o,this.end=s,v}},{key:"getRange",value:function(){return{start:this.start,end:this.end}}},{key:"conversion",value:function(n,a){return t.conversion(this.start,this.end,n,a)}},{key:"_onDragStart",value:function(n){this.deltaDifference=0,this.previousDelta=0,!!this.options.moveable&&(!this._isInsideRange(n)||!this.props.touch.allowDragging||(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move")))}},{key:"_onDrag",value:function(n){if(!!n&&!!this.props.touch.dragging&&!!this.options.moveable&&!!this.props.touch.allowDragging){var a=this.options.direction;ZS(a);var o=a=="horizontal"?n.deltaX:n.deltaY;o-=this.deltaDifference;var s=this.props.touch.end-this.props.touch.start,l=Lu(this.body.hiddenDates,this.start,this.end);s-=l;var u=a=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height,h;this.options.rtl?h=o/u*s:h=-o/u*s;var f=this.props.touch.start+h,c=this.props.touch.end+h,d=uo(this.body.hiddenDates,f,this.previousDelta-o,!0),v=uo(this.body.hiddenDates,c,this.previousDelta-o,!0);if(d!=f||v!=c){this.deltaDifference+=o,this.props.touch.start=d,this.props.touch.end=v,this._onDrag(n);return}this.previousDelta=o,this._applyRange(f,c);var g=new Date(this.start),p=new Date(this.end);this.body.emitter.emit("rangechange",{start:g,end:p,byUser:!0,event:n}),this.body.emitter.emit("panmove")}}},{key:"_onDragEnd",value:function(n){!this.props.touch.dragging||!this.options.moveable||!this.props.touch.allowDragging||(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:n}))}},{key:"_onMouseWheel",value:function(n){var a=0;if(n.wheelDelta?a=n.wheelDelta/120:n.detail?a=-n.detail/3:n.deltaY&&(a=-n.deltaY/3),!(this.options.zoomKey&&!n[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&!!(this.options.zoomable&&this.options.moveable)&&!!this._isInsideRange(n)&&a){var o=this.options.zoomFriction||5,s;a<0?s=1-a/o:s=1/(1+a/o);var l;if(this.rolling){var u=this.options.rollingMode&&this.options.rollingMode.offset||.5;l=this.start+(this.end-this.start)*u}else{var h=this.getPointer({x:n.clientX,y:n.clientY},this.body.dom.center);l=this._pointerToDate(h)}this.zoom(s,l,a,n),n.preventDefault()}}},{key:"_onTouch",value:function(n){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,b.preventDefault(n)}},{key:"_onPinch",value:function(n){if(!!(this.options.zoomable&&this.options.moveable)){b.preventDefault(n),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(n.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();var a=1/(n.scale+this.scaleOffset),o=this.props.touch.centerDate,s=Lu(this.body.hiddenDates,this.start,this.end),l=xc(this.options.moment,this.body.hiddenDates,this,o),u=s-l,h=o-l+(this.props.touch.start-(o-l))*a,f=o+u+(this.props.touch.end-(o+u))*a;this.startToFront=1-a<=0,this.endToFront=a-1<=0;var c=uo(this.body.hiddenDates,h,1-a,!0),d=uo(this.body.hiddenDates,f,a-1,!0);(c!=h||d!=f)&&(this.props.touch.start=c,this.props.touch.end=d,this.scaleOffset=1-n.scale,h=c,f=d);var v={animation:!1,byUser:!0,event:n};this.setRange(h,f,v),this.startToFront=!1,this.endToFront=!0}}},{key:"_isInsideRange",value:function(n){var a=n.center?n.center.x:n.clientX,o=this.body.dom.centerContainer.getBoundingClientRect(),s=this.options.rtl?a-o.left:o.right-a,l=this.body.util.toTime(s);return l>=this.start&&l<=this.end}},{key:"_pointerToDate",value:function(n){var a,o=this.options.direction;if(ZS(o),o=="horizontal")return this.body.util.toTime(n.x).valueOf();var s=this.body.domProps.center.height;return a=this.conversion(s),n.y/a.scale+a.offset}},{key:"getPointer",value:function(n,a){var o=a.getBoundingClientRect();return this.options.rtl?{x:o.right-n.x,y:n.y-o.top}:{x:n.x-o.left,y:n.y-o.top}}},{key:"zoom",value:function(n,a,o,s){a==null&&(a=(this.start+this.end)/2);var l=Lu(this.body.hiddenDates,this.start,this.end),u=xc(this.options.moment,this.body.hiddenDates,this,a),h=l-u,f=a-u+(this.start-(a-u))*n,c=a+h+(this.end-(a+h))*n;this.startToFront=!(o>0),this.endToFront=!(-o>0);var d=uo(this.body.hiddenDates,f,o,!0),v=uo(this.body.hiddenDates,c,-o,!0);(d!=f||v!=c)&&(f=d,c=v);var g={animation:!1,byUser:!0,event:s};this.setRange(f,c,g),this.startToFront=!1,this.endToFront=!0}},{key:"move",value:function(n){var a=this.end-this.start,o=this.start+a*n,s=this.end+a*n;this.start=o,this.end=s}},{key:"moveTo",value:function(n){var a=(this.start+this.end)/2,o=a-n,s=this.start-o,l=this.end-o,u={animation:!1,byUser:!0,event:null};this.setRange(s,l,u)}}],[{key:"conversion",value:function(n,a,o,s){return s===void 0&&(s=0),o!=0&&a-n!=0?{offset:n,scale:o/(a-n-s)}:{offset:0,scale:1}}}]),t}(Un);function ZS(e){if(e!="horizontal"&&e!="vertical")throw new TypeError('Unknown direction "'.concat(e,'". Choose "horizontal" or "vertical".'))}var G5=Yn.some,Y5=cs("some");J({target:"Array",proto:!0,forced:!Y5},{some:function(r){return G5(this,r,arguments.length>1?arguments[1]:void 0)}});var j5=de("Array").some,qS=Array.prototype,W5=function(e){var r=e.some;return e===qS||e instanceof Array&&r===qS.some?j5:r},H5=W5,JS=H5,B5=ht.setInterval,U5=B5,Oc=null;function Rg(e,r){var t=r||{preventDefault:!1};if(e.Manager){var i=e,n=function(u,h){var f=Object.create(t);return h&&i.assign(f,h),Rg(new i(u,f),f)};return i.assign(n,i),n.Manager=function(u,h){var f=Object.create(t);return h&&i.assign(f,h),Rg(new i.Manager(u,f),f)},n}var a=Object.create(e),o=e.element;o.hammer||(o.hammer=[]),o.hammer.push(a),e.on("hammer.input",function(u){(t.preventDefault===!0||t.preventDefault===u.pointerType)&&u.preventDefault(),u.isFirst&&(Oc=u.target)}),a._handlers={},a.on=function(u,h){return s(u).forEach(function(f){var c=a._handlers[f];c||(a._handlers[f]=c=[],e.on(f,l)),c.push(h)}),a},a.off=function(u,h){return s(u).forEach(function(f){var c=a._handlers[f];c&&(c=h?c.filter(function(d){return d!==h}):[],c.length>0?a._handlers[f]=c:(e.off(f,l),delete a._handlers[f]))}),a},a.emit=function(u,h){Oc=h.target,e.emit(u,h)},a.destroy=function(){var u=e.element.hammer,h=u.indexOf(a);h!==-1&&u.splice(h,1),u.length||delete e.element.hammer,a._handlers={},e.destroy()};function s(u){return u.match(/[^ ]+/g)}function l(u){if(u.type!=="hammer.input"){if(u.srcEvent._handled||(u.srcEvent._handled={}),u.srcEvent._handled[u.type])return;u.srcEvent._handled[u.type]=!0}var h=!1;u.stopPropagation=function(){h=!0};var f=u.srcEvent.stopPropagation.bind(u.srcEvent);typeof f=="function"&&(u.srcEvent.stopPropagation=function(){f(),u.stopPropagation()}),u.firstTarget=Oc;for(var c=Oc;c&&!h;){var d=c.hammer;if(d){for(var v,g=0;g<d.length;g++)if(v=d[g]._handlers[u.type],v)for(var p=0;p<v.length&&!h;p++)v[p](u)}c=c.parentNode}}return a}function z5(){var e=function(){};return{on:e,off:e,destroy:e,emit:e,get:function(t){return{set:e}}}}var Dg;if(typeof window!="undefined"){var V5=window.Hammer||tS;Dg=Rg(V5,{preventDefault:"mouse"})}else Dg=function(){return z5()};var Le=Dg;function QS(e,r){r.inputHandler=function(t){t.isFirst&&r(t)},e.on("hammer.input",r.inputHandler)}function X5(e,r){return r.inputHandler=function(t){t.isFinal&&r(t)},e.on("hammer.input",r.inputHandler)}function K5(e){var r="pan-y";return e.getTouchAction=function(){return[r]},e}var Ic=function(){function e(r,t,i,n,a){Ct(this,e),this.moment=a&&a.moment||Ze,this.options=a||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(r,t,i),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,ct(n)?this.hiddenDates=n:n!=null?this.hiddenDates=[n]:this.hiddenDates=[],this.format=e.FORMAT}return Ot(e,[{key:"setMoment",value:function(t){this.moment=t,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}},{key:"setFormat",value:function(t){var i=b.deepExtend({},e.FORMAT);this.format=b.deepExtend(i,t)}},{key:"setRange",value:function(t,i,n){if(!(t instanceof Date)||!(i instanceof Date))throw"No legal start or end date in method setRange";this._start=t!=null?this.moment(t.valueOf()):ur(),this._end=i!=null?this.moment(i.valueOf()):ur(),this.autoScale&&this.setMinimumStep(n)}},{key:"start",value:function(){this.current=this._start.clone(),this.roundToMinor()}},{key:"roundToMinor",value:function(){switch(this.scale=="week"&&this.current.weekday(0),this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"week":case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(this.step!=1){var t=this.current.clone();switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year");break}t.isSame(this.current)||(this.current=this.moment(uo(this.hiddenDates,this.current.valueOf(),-1,!0)))}}},{key:"hasNext",value:function(){return this.current.valueOf()<=this._end.valueOf()}},{key:"next",value:function(){var t=this.current.valueOf();switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.month()<6?this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!=0&&this.current.add(this.step-this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"week":if(this.current.weekday()!==0)this.current.weekday(0),this.current.add(this.step,"week");else if(this.options.showMajorLabels===!1)this.current.add(this.step,"week");else{var i=this.current.clone();i.add(1,"week"),i.isSame(this.current,"month")?this.current.add(this.step,"week"):(this.current.add(this.step,"week"),this.current.date(1))}break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year");break}if(this.step!=1)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"week":this.current.week()<this.step&&this.current.week(1);break;case"month":this.current.month()<this.step&&this.current.month(0);break}this.current.valueOf()==t&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,M5(this.moment,this,t)}},{key:"getCurrent",value:function(){return this.current.clone()}},{key:"setScale",value:function(t){t&&typeof t.scale=="string"&&(this.scale=t.scale,this.step=t.step>0?t.step:1,this.autoScale=!1)}},{key:"setAutoScale",value:function(t){this.autoScale=t}},{key:"setMinimumStep",value:function(t){if(t!=null){var i=1e3*60*60*24*30*12,n=1e3*60*60*24*30,a=1e3*60*60*24,o=1e3*60*60,s=1e3*60,l=1e3,u=1;i*1e3>t&&(this.scale="year",this.step=1e3),i*500>t&&(this.scale="year",this.step=500),i*100>t&&(this.scale="year",this.step=100),i*50>t&&(this.scale="year",this.step=50),i*10>t&&(this.scale="year",this.step=10),i*5>t&&(this.scale="year",this.step=5),i>t&&(this.scale="year",this.step=1),n*3>t&&(this.scale="month",this.step=3),n>t&&(this.scale="month",this.step=1),a*7>t&&this.options.showWeekScale&&(this.scale="week",this.step=1),a*2>t&&(this.scale="day",this.step=2),a>t&&(this.scale="day",this.step=1),a/2>t&&(this.scale="weekday",this.step=1),o*4>t&&(this.scale="hour",this.step=4),o>t&&(this.scale="hour",this.step=1),s*15>t&&(this.scale="minute",this.step=15),s*10>t&&(this.scale="minute",this.step=10),s*5>t&&(this.scale="minute",this.step=5),s>t&&(this.scale="minute",this.step=1),l*15>t&&(this.scale="second",this.step=15),l*10>t&&(this.scale="second",this.step=10),l*5>t&&(this.scale="second",this.step=5),l>t&&(this.scale="second",this.step=1),u*200>t&&(this.scale="millisecond",this.step=200),u*100>t&&(this.scale="millisecond",this.step=100),u*50>t&&(this.scale="millisecond",this.step=50),u*10>t&&(this.scale="millisecond",this.step=10),u*5>t&&(this.scale="millisecond",this.step=5),u>t&&(this.scale="millisecond",this.step=1)}}},{key:"isMajor",value:function(){if(this.switchedYear==!0)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedMonth==!0)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedDay==!0)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var t=this.moment(this.current);switch(this.scale){case"millisecond":return t.milliseconds()==0;case"second":return t.seconds()==0;case"minute":return t.hours()==0&&t.minutes()==0;case"hour":return t.hours()==0;case"weekday":case"day":return t.date()==1;case"week":return t.date()==1;case"month":return t.month()==0;case"year":return!1;default:return!1}}},{key:"getLabelMinor",value:function(t){if(t==null&&(t=this.current),t instanceof Date&&(t=this.moment(t)),typeof this.format.minorLabels=="function")return this.format.minorLabels(t,this.scale,this.step);var i=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(t.date()===1&&t.weekday()!==0)return"";default:return i&&i.length>0?this.moment(t).format(i):""}}},{key:"getLabelMajor",value:function(t){if(t==null&&(t=this.current),t instanceof Date&&(t=this.moment(t)),typeof this.format.majorLabels=="function")return this.format.majorLabels(t,this.scale,this.step);var i=this.format.majorLabels[this.scale];return i&&i.length>0?this.moment(t).format(i):""}},{key:"getClassName",value:function(){var t,i=this.moment,n=this.moment(this.current),a=n.locale?n.locale("en"):n.lang("en"),o=this.step,s=[];function l(d){return d/o%2==0?" vis-even":" vis-odd"}function u(d){return d.isSame(ur(),"day")?" vis-today":d.isSame(i().add(1,"day"),"day")?" vis-tomorrow":d.isSame(i().add(-1,"day"),"day")?" vis-yesterday":""}function h(d){return d.isSame(ur(),"week")?" vis-current-week":""}function f(d){return d.isSame(ur(),"month")?" vis-current-month":""}function c(d){return d.isSame(ur(),"year")?" vis-current-year":""}switch(this.scale){case"millisecond":s.push(u(a)),s.push(l(a.milliseconds()));break;case"second":s.push(u(a)),s.push(l(a.seconds()));break;case"minute":s.push(u(a)),s.push(l(a.minutes()));break;case"hour":s.push(Ut(t="vis-h".concat(a.hours())).call(t,this.step==4?"-h"+(a.hours()+4):"")),s.push(u(a)),s.push(l(a.hours()));break;case"weekday":s.push("vis-".concat(a.format("dddd").toLowerCase())),s.push(u(a)),s.push(h(a)),s.push(l(a.date()));break;case"day":s.push("vis-day".concat(a.date())),s.push("vis-".concat(a.format("MMMM").toLowerCase())),s.push(u(a)),s.push(f(a)),s.push(this.step<=2?u(a):""),s.push(this.step<=2?"vis-".concat(a.format("dddd").toLowerCase()):""),s.push(l(a.date()-1));break;case"week":s.push("vis-week".concat(a.format("w"))),s.push(h(a)),s.push(l(a.week()));break;case"month":s.push("vis-".concat(a.format("MMMM").toLowerCase())),s.push(f(a)),s.push(l(a.month()));break;case"year":s.push("vis-year".concat(a.year())),s.push(c(a)),s.push(l(a.year()));break}return gt(s).call(s,String).join(" ")}}],[{key:"snap",value:function(t,i,n){var a=Ze(t);if(i=="year"){var o=a.year()+Math.round(a.month()/12);a.year(Math.round(o/n)*n),a.month(0),a.date(0),a.hours(0),a.minutes(0),a.seconds(0),a.milliseconds(0)}else if(i=="month")a.date()>15?(a.date(1),a.add(1,"month")):a.date(1),a.hours(0),a.minutes(0),a.seconds(0),a.milliseconds(0);else if(i=="week")a.weekday()>2?(a.weekday(0),a.add(1,"week")):a.weekday(0),a.hours(0),a.minutes(0),a.seconds(0),a.milliseconds(0);else if(i=="day"){switch(n){case 5:case 2:a.hours(Math.round(a.hours()/24)*24);break;default:a.hours(Math.round(a.hours()/12)*12);break}a.minutes(0),a.seconds(0),a.milliseconds(0)}else if(i=="weekday"){switch(n){case 5:case 2:a.hours(Math.round(a.hours()/12)*12);break;default:a.hours(Math.round(a.hours()/6)*6);break}a.minutes(0),a.seconds(0),a.milliseconds(0)}else if(i=="hour"){switch(n){case 4:a.minutes(Math.round(a.minutes()/60)*60);break;default:a.minutes(Math.round(a.minutes()/30)*30);break}a.seconds(0),a.milliseconds(0)}else if(i=="minute"){switch(n){case 15:case 10:a.minutes(Math.round(a.minutes()/5)*5),a.seconds(0);break;case 5:a.seconds(Math.round(a.seconds()/60)*60);break;default:a.seconds(Math.round(a.seconds()/30)*30);break}a.milliseconds(0)}else if(i=="second")switch(n){case 15:case 10:a.seconds(Math.round(a.seconds()/5)*5),a.milliseconds(0);break;case 5:a.milliseconds(Math.round(a.milliseconds()/1e3)*1e3);break;default:a.milliseconds(Math.round(a.milliseconds()/500)*500);break}else if(i=="millisecond"){var s=n>5?n/2:1;a.milliseconds(Math.round(a.milliseconds()/s)*s)}return a}}]),e}();Ic.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};function Z5(e){var r=q5();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=V(i,arguments,a)}else n=i.apply(this,arguments);return lr(this,n)}}function q5(){if(typeof Reflect=="undefined"||!V||V.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(V(Boolean,[],function(){})),!0}catch(e){return!1}}var Pc=function(e){sr(t,e);var r=Z5(t);function t(i,n){var a;return Ct(this,t),a=r.call(this),a.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},a.props={range:{start:0,end:0,minimumStep:0},lineTop:0},a.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:b.extend({},Ic.FORMAT),moment:Ze,timeAxis:null},a.options=b.extend({},a.defaultOptions),a.body=i,a._create(),a.setOptions(n),a}return Ot(t,[{key:"setOptions",value:function(n){n&&(b.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,n),b.selectiveDeepExtend(["format"],this.options,n),"orientation"in n&&(typeof n.orientation=="string"?this.options.orientation.axis=n.orientation:ot(n.orientation)==="object"&&"axis"in n.orientation&&(this.options.orientation.axis=n.orientation.axis)),"locale"in n&&(typeof Ze.locale=="function"?Ze.locale(n.locale):Ze.lang(n.locale)))}},{key:"_create",value:function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}},{key:"destroy",value:function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}},{key:"redraw",value:function(){var n=this.props,a=this.dom.foreground,o=this.dom.background,s=this.options.orientation.axis=="top"?this.body.dom.top:this.body.dom.bottom,l=a.parentNode!==s;this._calculateCharSize();var u=this.options.showMinorLabels&&this.options.orientation.axis!=="none",h=this.options.showMajorLabels&&this.options.orientation.axis!=="none";n.minorLabelHeight=u?n.minorCharHeight:0,n.majorLabelHeight=h?n.majorCharHeight:0,n.height=n.minorLabelHeight+n.majorLabelHeight,n.width=a.offsetWidth,n.minorLineHeight=this.body.domProps.root.height-n.majorLabelHeight-(this.options.orientation.axis=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),n.minorLineWidth=1,n.majorLineHeight=n.minorLineHeight+n.majorLabelHeight,n.majorLineWidth=1;var f=a.nextSibling,c=o.nextSibling;return a.parentNode&&a.parentNode.removeChild(a),o.parentNode&&o.parentNode.removeChild(o),a.style.height="".concat(this.props.height,"px"),this._repaintLabels(),f?s.insertBefore(a,f):s.appendChild(a),c?this.body.dom.backgroundVertical.insertBefore(o,c):this.body.dom.backgroundVertical.appendChild(o),this._isResized()||l}},{key:"_repaintLabels",value:function(){var n=this.options.orientation.axis,a=b.convert(this.body.range.start,"Number"),o=b.convert(this.body.range.end,"Number"),s=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),l=s-xc(this.options.moment,this.body.hiddenDates,this.body.range,s);l-=this.body.util.toTime(0).valueOf();var u=new Ic(new Date(a),new Date(o),l,this.body.hiddenDates,this.options);u.setMoment(this.options.moment),this.options.format&&u.setFormat(this.options.format),this.options.timeAxis&&u.setScale(this.options.timeAxis),this.step=u;var h=this.dom;h.redundant.lines=h.lines,h.redundant.majorTexts=h.majorTexts,h.redundant.minorTexts=h.minorTexts,h.lines=[],h.majorTexts=[],h.minorTexts=[];var f,c,d,v,g,p,m=0,_,y,w=void 0,T=0,S=1e3,x;for(u.start(),c=u.getCurrent(),v=this.body.util.toScreen(c);u.hasNext()&&T<S;){switch(T++,g=u.isMajor(),x=u.getClassName(),f=c,d=v,u.next(),c=u.getCurrent(),v=this.body.util.toScreen(c),_=m,m=v-d,u.scale){case"week":p=!0;break;default:p=m>=_*.4;break}if(this.options.showMinorLabels&&p){var E=this._repaintMinorText(d,u.getLabelMinor(f),n,x);E.style.width="".concat(m,"px")}g&&this.options.showMajorLabels?(d>0&&(w==null&&(w=d),E=this._repaintMajorText(d,u.getLabelMajor(f),n,x)),y=this._repaintMajorLine(d,m,n,x)):p?y=this._repaintMinorLine(d,m,n,x):y&&(y.style.width="".concat(hr(y.style.width)+m,"px"))}if(T===S&&!tx&&(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to ".concat(S," lines.")),tx=!0),this.options.showMajorLabels){var I=this.body.util.toTime(0),A=u.getLabelMajor(I),P=A.length*(this.props.majorCharWidth||10)+10;(w==null||P<w)&&this._repaintMajorText(0,A,n,x)}G(b).call(b,this.dom.redundant,function(D){for(;D.length;){var N=D.pop();N&&N.parentNode&&N.parentNode.removeChild(N)}})}},{key:"_repaintMinorText",value:function(n,a,o,s){var l=this.dom.redundant.minorTexts.shift();if(!l){var u=document.createTextNode("");l=document.createElement("div"),l.appendChild(u),this.dom.foreground.appendChild(l)}this.dom.minorTexts.push(l),l.innerHTML=b.xss(a);var h=o=="top"?this.props.majorLabelHeight:0;return this._setXY(l,n,h),l.className="vis-text vis-minor ".concat(s),l}},{key:"_repaintMajorText",value:function(n,a,o,s){var l=this.dom.redundant.majorTexts.shift();if(!l){var u=document.createElement("div");l=document.createElement("div"),l.appendChild(u),this.dom.foreground.appendChild(l)}l.childNodes[0].innerHTML=b.xss(a),l.className="vis-text vis-major ".concat(s);var h=o=="top"?0:this.props.minorLabelHeight;return this._setXY(l,n,h),this.dom.majorTexts.push(l),l}},{key:"_setXY",value:function(n,a,o){var s,l=this.options.rtl?a*-1:a;n.style.transform=Ut(s="translate(".concat(l,"px, ")).call(s,o,"px)")}},{key:"_repaintMinorLine",value:function(n,a,o,s){var l,u=this.dom.redundant.lines.shift();u||(u=document.createElement("div"),this.dom.background.appendChild(u)),this.dom.lines.push(u);var h=this.props;u.style.width="".concat(a,"px"),u.style.height="".concat(h.minorLineHeight,"px");var f=o=="top"?h.majorLabelHeight:this.body.domProps.top.height,c=n-h.minorLineWidth/2;return this._setXY(u,c,f),u.className=Ut(l="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-minor ")).call(l,s),u}},{key:"_repaintMajorLine",value:function(n,a,o,s){var l,u=this.dom.redundant.lines.shift();u||(u=document.createElement("div"),this.dom.background.appendChild(u)),this.dom.lines.push(u);var h=this.props;u.style.width="".concat(a,"px"),u.style.height="".concat(h.majorLineHeight,"px");var f=o=="top"?0:this.body.domProps.top.height,c=n-h.majorLineWidth/2;return this._setXY(u,c,f),u.className=Ut(l="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-major ")).call(l,s),u}},{key:"_calculateCharSize",value:function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}]),t}(Un),tx=!1;function J5(e){var r=e&&e.preventDefault||!1,t=e&&e.container||window,i={},n={keydown:{},keyup:{}},a={},o;for(o=97;o<=122;o++)a[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)a[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)a[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)a["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)a["num"+o]={code:96+o,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a.delete={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var s=function(h){u(h,"keydown")},l=function(h){u(h,"keyup")},u=function(h,f){if(n[f][h.keyCode]!==void 0){for(var c=n[f][h.keyCode],d=0;d<c.length;d++)(c[d].shift===void 0||c[d].shift==!0&&h.shiftKey==!0||c[d].shift==!1&&h.shiftKey==!1)&&c[d].fn(h);r==!0&&h.preventDefault()}};return i.bind=function(h,f,c){if(c===void 0&&(c="keydown"),a[h]===void 0)throw new Error("unsupported key: "+h);n[c][a[h].code]===void 0&&(n[c][a[h].code]=[]),n[c][a[h].code].push({fn:f,shift:a[h].shift})},i.bindAll=function(h,f){f===void 0&&(f="keydown");for(var c in a)a.hasOwnProperty(c)&&i.bind(c,h,f)},i.getKey=function(h){for(var f in a)if(a.hasOwnProperty(f)){if(h.shiftKey==!0&&a[f].shift==!0&&h.keyCode==a[f].code)return f;if(h.shiftKey==!1&&a[f].shift==!1&&h.keyCode==a[f].code)return f;if(h.keyCode==a[f].code&&f=="shift")return f}return"unknown key, currently not supported"},i.unbind=function(h,f,c){if(c===void 0&&(c="keydown"),a[h]===void 0)throw new Error("unsupported key: "+h);if(f!==void 0){var d=[],v=n[c][a[h].code];if(v!==void 0)for(var g=0;g<v.length;g++)v[g].fn==f&&v[g].shift==a[h].shift||d.push(n[c][a[h].code][g]);n[c][a[h].code]=d}else n[c][a[h].code]=[]},i.reset=function(){n={keydown:{},keyup:{}}},i.destroy=function(){n={keydown:{},keyup:{}},t.removeEventListener("keydown",s,!0),t.removeEventListener("keyup",l,!0)},t.addEventListener("keydown",s,!0),t.addEventListener("keyup",l,!0),i}function Ar(e){var r,t;this.active=!1,this.dom={container:e},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=Le(this.dom.overlay),this.hammer.on("tap",R(r=this._onTapOverlay).call(r,this));var i=this,n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];G(n).call(n,function(a){i.hammer.on(a,function(o){o.stopPropagation()})}),document&&document.body&&(this.onClick=function(a){Q5(a.target,e)||i.deactivate()},document.body.addEventListener("click",this.onClick)),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=J5(),this.escListener=R(t=this.deactivate).call(t,this)}tg(Ar.prototype);Ar.current=null;Ar.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null};Ar.prototype.activate=function(){var e;Ar.current&&Ar.current.deactivate(),Ar.current=this,this.active=!0,this.dom.overlay.style.display="none",b.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),R(e=this.keycharm).call(e,"esc",this.escListener)};Ar.prototype.deactivate=function(){Ar.current===this&&(Ar.current=null),this.active=!1,this.dom.overlay.style.display="",b.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")};Ar.prototype._onTapOverlay=function(e){this.activate(),e.stopPropagation()};function Q5(e,r){for(;e;){if(e===r)return!0;e=e.parentNode}return!1}var Ag={current:"current",time:"time",deleteSelected:"Delete selected"},t4=Ag,e4=Ag,Mg={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},r4=Mg,i4=Mg,Lg={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},n4=Lg,a4=Lg,ex={current:"Aktuelle",time:"Zeit",deleteSelected:"L\xF6sche Auswahl"},o4=ex,kc={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},s4=kc,l4=kc,u4=kc,rx={current:"corriente",time:"hora",deleteSelected:"Eliminar selecci\xF3n"},h4=rx,ix={current:"\u043F\u043E\u0442\u043E\u0447\u043D\u0438\u0439",time:"\u0447\u0430\u0441",deleteSelected:"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043E\u0431\u0440\u0430\u043D\u0435"},f4=ix,nx={current:"\u0442\u0435\u043A\u0443\u0449\u0435\u0435",time:"\u0432\u0440\u0435\u043C\u044F",deleteSelected:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0435"},c4=nx,ax={current:"aktualny",time:"czas",deleteSelected:"Usu\u0144 wybrane"},d4=ax,Fg={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},v4=Fg,p4=Fg,ox={current:"\u73FE\u5728",time:"\u6642\u523B",deleteSelected:"\u9078\u629E\u3055\u308C\u305F\u3082\u306E\u3092\u524A\u9664"},g4=ox,sx={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},m4=sx,Rc={current:"n\xE5v\xE6rende",time:"tid",deleteSelected:"Slett valgte"},y4=Rc,_4=Rc,w4=Rc,Is={en:Ag,en_EN:t4,en_US:e4,it:Mg,it_IT:r4,it_CH:i4,nl:Lg,nl_NL:n4,nl_BE:a4,de:ex,de_DE:o4,fr:kc,fr_FR:s4,fr_CA:l4,fr_BE:u4,es:rx,es_ES:h4,uk:ix,uk_UA:f4,ru:nx,ru_RU:c4,pl:ax,pl_PL:d4,pt:Fg,pt_BR:v4,pt_PT:p4,ja:ox,ja_JP:g4,sv:sx,sv_SE:m4,nb:Rc,nn:_4,nb_NO:y4,nn_NO:w4};function b4(e){var r=T4();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=V(i,arguments,a)}else n=i.apply(this,arguments);return lr(this,n)}}function T4(){if(typeof Reflect=="undefined"||!V||V.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(V(Boolean,[],function(){})),!0}catch(e){return!1}}var Ng=function(e){sr(t,e);var r=b4(t);function t(i,n){var a,o;Ct(this,t),o=r.call(this),o.body=i,o.defaultOptions={moment:Ze,locales:Is,locale:"en",id:void 0,title:void 0},o.options=b.extend({},o.defaultOptions),o.setOptions(n),o.options.locales=b.extend({},Is,o.options.locales);var s=o.defaultOptions.locales[o.defaultOptions.locale];return G(a=ye(o.options.locales)).call(a,function(l){o.options.locales[l]=b.extend({},s,o.options.locales[l])}),n&&n.time!=null?o.customTime=n.time:o.customTime=new Date,o.eventParams={},o._create(),o}return Ot(t,[{key:"setOptions",value:function(n){n&&b.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,n)}},{key:"_create",value:function(){var n,a,o,s=document.createElement("div");s["custom-time"]=this,s.className="vis-custom-time ".concat(this.options.id||""),s.style.position="absolute",s.style.top="0px",s.style.height="100%",this.bar=s;var l=document.createElement("div");l.style.position="relative",l.style.top="0px",this.options.rtl?l.style.right="-10px":l.style.left="-10px",l.style.height="100%",l.style.width="20px";function u(h){this.body.range._onMouseWheel(h)}l.addEventListener?(l.addEventListener("mousewheel",R(u).call(u,this),!1),l.addEventListener("DOMMouseScroll",R(u).call(u,this),!1)):l.attachEvent("onmousewheel",R(u).call(u,this)),s.appendChild(l),this.hammer=new Le(l),this.hammer.on("panstart",R(n=this._onDragStart).call(n,this)),this.hammer.on("panmove",R(a=this._onDrag).call(a,this)),this.hammer.on("panend",R(o=this._onDragEnd).call(o,this)),this.hammer.get("pan").set({threshold:5,direction:Le.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}},{key:"destroy",value:function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}},{key:"redraw",value:function(){var n=this.body.dom.backgroundVertical;this.bar.parentNode!=n&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),n.appendChild(this.bar));var a=this.body.util.toScreen(this.customTime),o=this.options.locales[this.options.locale];o||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),o=this.options.locales.en);var s=this.options.title;if(s===void 0){var l;s=Ut(l="".concat(o.time,": ")).call(l,this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")),s=s.charAt(0).toUpperCase()+s.substring(1)}else typeof s=="function"&&(s=s.call(this,this.customTime));return this.options.rtl?this.bar.style.right="".concat(a,"px"):this.bar.style.left="".concat(a,"px"),this.bar.title=s,!1}},{key:"hide",value:function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}},{key:"setCustomTime",value:function(n){this.customTime=b.convert(n,"Date"),this.redraw()}},{key:"getCustomTime",value:function(){return new Date(this.customTime.valueOf())}},{key:"setCustomMarker",value:function(n,a){var o=document.createElement("div");if(o.className="vis-custom-time-marker",o.innerHTML=b.xss(n),o.style.position="absolute",a){var s,l;o.setAttribute("contenteditable","true"),o.addEventListener("pointerdown",function(){o.focus()}),o.addEventListener("input",R(s=this._onMarkerChange).call(s,this)),o.title=n,o.addEventListener("blur",R(l=function(h){this.title!=h.target.innerHTML&&(this._onMarkerChanged(h),this.title=h.target.innerHTML)}).call(l,this))}this.bar.appendChild(o)}},{key:"setCustomTitle",value:function(n){this.options.title=n}},{key:"_onDragStart",value:function(n){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,n.stopPropagation()}},{key:"_onDrag",value:function(n){if(!!this.eventParams.dragging){var a=this.options.rtl?-1*n.deltaX:n.deltaX,o=this.body.util.toScreen(this.eventParams.customTime)+a,s=this.body.util.toTime(o),l=this.body.util.getScale(),u=this.body.util.getStep(),h=this.options.snap,f=h?h(s,l,u):s;this.setCustomTime(f),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:n}),n.stopPropagation()}}},{key:"_onDragEnd",value:function(n){!this.eventParams.dragging||(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:n}),n.stopPropagation())}},{key:"_onMarkerChange",value:function(n){this.body.emitter.emit("markerchange",{id:this.options.id,title:n.target.innerHTML,event:n}),n.stopPropagation()}},{key:"_onMarkerChanged",value:function(n){this.body.emitter.emit("markerchanged",{id:this.options.id,title:n.target.innerHTML,event:n}),n.stopPropagation()}}],[{key:"customTimeFromTarget",value:function(n){for(var a=n.target;a;){if(a.hasOwnProperty("custom-time"))return a["custom-time"];a=a.parentNode}return null}}]),t}(Un),Ps=function(){function e(){Ct(this,e)}return Ot(e,[{key:"_create",value:function(t){var i=this,n,a,o;this.dom={},this.dom.container=t,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",function(){i.initialDrawDone===!0&&i._redraw()}),this.on("rangechanged",function(){i.initialRangeChangeDone||(i.initialRangeChangeDone=!0)}),this.on("touch",R(n=this._onTouch).call(n,this)),this.on("panmove",R(a=this._onDrag).call(a,this));var s=this;this._origRedraw=R(o=this._redraw).call(o,this),this._redraw=b.throttle(this._origRedraw),this.on("_change",function(p){s.itemSet&&s.itemSet.initialItemSetDrawn&&p&&p.queue==!0?s._redraw():s._origRedraw()}),this.hammer=new Le(this.dom.root);var l=this.hammer.get("pinch").set({enable:!0});l&&K5(l),this.hammer.get("pan").set({threshold:5,direction:Le.DIRECTION_ALL}),this.timelineListeners={};var u=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];G(u).call(u,function(p){var m=function(y){s.isActive()&&s.emit(p,y)};s.hammer.on(p,m),s.timelineListeners[p]=m}),QS(this.hammer,function(p){s.emit("touch",p)}),X5(this.hammer,function(p){s.emit("release",p)});function h(p){var m=40,_=800;this.isActive()&&this.emit("mousewheel",p);var y=0,w=0;if("detail"in p&&(w=p.detail*-1),"wheelDelta"in p&&(w=p.wheelDelta),"wheelDeltaY"in p&&(w=p.wheelDeltaY),"wheelDeltaX"in p&&(y=p.wheelDeltaX*-1),"axis"in p&&p.axis===p.HORIZONTAL_AXIS&&(y=w*-1,w=0),"deltaY"in p&&(w=p.deltaY*-1),"deltaX"in p&&(y=p.deltaX),p.deltaMode&&(p.deltaMode===1?(y*=m,w*=m):(y*=m,w*=_)),this.options.preferZoom){if(!this.options.zoomKey||p[this.options.zoomKey])return}else if(this.options.zoomKey&&p[this.options.zoomKey])return;if(!(!this.options.verticalScroll&&!this.options.horizontalScroll)){if(this.options.verticalScroll&&Math.abs(w)>=Math.abs(y)){var T=this.props.scrollTop,S=T+w;if(this.isActive()){var x=this._setScrollTop(S);x!==T&&(this._redraw(),this.emit("scroll",p),p.preventDefault())}}else if(this.options.horizontalScroll){var E=Math.abs(y)>=Math.abs(w)?y:w,I=E/120*(this.range.end-this.range.start)/20,A=this.range.start+I,P=this.range.end+I,D={animation:!1,byUser:!0,event:p};this.range.setRange(A,P,D),p.preventDefault()}}}var f="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.top.addEventListener,this.dom.bottom.addEventListener,this.dom.centerContainer.addEventListener(f,R(h).call(h,this),!1),this.dom.top.addEventListener(f,R(h).call(h,this),!1),this.dom.bottom.addEventListener(f,R(h).call(h,this),!1);function c(p){if(!!s.options.verticalScroll&&(p.preventDefault(),s.isActive())){var m=-p.target.scrollTop;s._setScrollTop(m),s._redraw(),s.emit("scrollSide",p)}}this.dom.left.parentNode.addEventListener("scroll",R(c).call(c,this)),this.dom.right.parentNode.addEventListener("scroll",R(c).call(c,this));var d=!1;function v(p){var m;if(p.preventDefault&&(s.emit("dragover",s.getEventProperties(p)),p.preventDefault()),Pt(m=p.target.className).call(m,"timeline")>-1&&!d)return p.dataTransfer.dropEffect="move",d=!0,!1}function g(p){p.preventDefault&&p.preventDefault(),p.stopPropagation&&p.stopPropagation();try{var m=JSON.parse(p.dataTransfer.getData("text"));if(!m||!m.content)return}catch(_){return!1}return d=!1,p.center={x:p.clientX,y:p.clientY},m.target!=="item"?s.itemSet._onAddItem(p):s.itemSet._onDropObjectOnItem(p),s.emit("drop",s.getEventProperties(p)),!1}if(this.dom.center.addEventListener("dragover",R(v).call(v,this),!1),this.dom.center.addEventListener("drop",R(g).call(g,this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!t)throw new Error("No container provided");t.appendChild(this.dom.root),t.appendChild(this.dom.loadingScreen)}},{key:"setOptions",value:function(t){var i;if(t){var n=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","verticalScroll","longSelectPressTime","snap"];if(b.selectiveExtend(n,this.options,t),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),ot(this.options.orientation)!=="object"&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in t&&(typeof t.orientation=="string"?this.options.orientation={item:t.orientation,axis:t.orientation}:ot(t.orientation)==="object"&&("item"in t.orientation&&(this.options.orientation.item=t.orientation.item),"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis))),this.options.orientation.axis==="both"){if(!this.timeAxis2){var a=this.timeAxis2=new Pc(this.body);a.setOptions=function(f){var c=f?b.extend({},f):{};c.orientation="top",Pc.prototype.setOptions.call(a,c)},this.components.push(a)}}else if(this.timeAxis2){var o,s=Pt(o=this.components).call(o,this.timeAxis2);if(s!==-1){var l;kr(l=this.components).call(l,s,1)}this.timeAxis2.destroy(),this.timeAxis2=null}typeof t.drawPoints=="function"&&(t.drawPoints={onRender:t.drawPoints}),"hiddenDates"in this.options&&kg(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in t&&(t.clickToUse?this.activator||(this.activator=new Ar(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(G(i=this.components).call(i,function(f){return f.setOptions(t)}),"configure"in t){var u;this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(t.configure);var h=b.deepExtend({},this.options);G(u=this.components).call(u,function(f){b.deepExtend(h,f.options)}),this.configurator.setModuleOptions({global:h})}this._redraw()}},{key:"isActive",value:function(){return!this.activator||this.activator.active}},{key:"destroy",value:function(){var t;this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(var i in this.timelineListeners)this.timelineListeners.hasOwnProperty(i)&&delete this.timelineListeners[i];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,G(t=this.components).call(t,function(n){return n.destroy()}),this.body=null}},{key:"setCustomTime",value:function(t,i){var n,a=gt(n=this.customTimes).call(n,function(o){return i===o.options.id});if(a.length===0)throw new Error("No custom time bar found with id ".concat(fr(i)));a.length>0&&a[0].setCustomTime(t)}},{key:"getCustomTime",value:function(t){var i,n=gt(i=this.customTimes).call(i,function(a){return a.options.id===t});if(n.length===0)throw new Error("No custom time bar found with id ".concat(fr(t)));return n[0].getCustomTime()}},{key:"setCustomTimeMarker",value:function(t,i,n){var a,o=gt(a=this.customTimes).call(a,function(s){return s.options.id===i});if(o.length===0)throw new Error("No custom time bar found with id ".concat(fr(i)));o.length>0&&o[0].setCustomMarker(t,n)}},{key:"setCustomTimeTitle",value:function(t,i){var n,a=gt(n=this.customTimes).call(n,function(o){return o.options.id===i});if(a.length===0)throw new Error("No custom time bar found with id ".concat(fr(i)));if(a.length>0)return a[0].setCustomTitle(t)}},{key:"getEventProperties",value:function(t){return{event:t}}},{key:"addCustomTime",value:function(t,i){var n,a=t!==void 0?b.convert(t,"Date"):new Date,o=JS(n=this.customTimes).call(n,function(l){return l.options.id===i});if(o)throw new Error("A custom time with id ".concat(fr(i)," already exists"));var s=new Ng(this.body,b.extend({},this.options,{time:a,id:i,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(s),this.components.push(s),this._redraw(),i}},{key:"removeCustomTime",value:function(t){var i,n=this,a=gt(i=this.customTimes).call(i,function(o){return o.options.id===t});if(a.length===0)throw new Error("No custom time bar found with id ".concat(fr(t)));G(a).call(a,function(o){var s,l,u,h;kr(s=n.customTimes).call(s,Pt(l=n.customTimes).call(l,o),1),kr(u=n.components).call(u,Pt(h=n.components).call(h,o),1),o.destroy()})}},{key:"getVisibleItems",value:function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}},{key:"getItemsAtCurrentTime",value:function(t){return this.time=t,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}},{key:"getVisibleGroups",value:function(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}},{key:"fit",value:function(t,i){var n=this.getDataRange();if(!(n.min===null&&n.max===null)){var a=n.max-n.min,o=new Date(n.min.valueOf()-a*.01),s=new Date(n.max.valueOf()+a*.01),l=t&&t.animation!==void 0?t.animation:!0;this.range.setRange(o,s,{animation:l},i)}}},{key:"getDataRange",value:function(){throw new Error("Cannot invoke abstract method getDataRange")}},{key:"setWindow",value:function(t,i,n,a){typeof arguments[2]=="function"&&(a=arguments[2],n={});var o,s;arguments.length==1?(s=arguments[0],o=s.animation!==void 0?s.animation:!0,this.range.setRange(s.start,s.end,{animation:o})):arguments.length==2&&typeof arguments[1]=="function"?(s=arguments[0],a=arguments[1],o=s.animation!==void 0?s.animation:!0,this.range.setRange(s.start,s.end,{animation:o},a)):(o=n&&n.animation!==void 0?n.animation:!0,this.range.setRange(t,i,{animation:o},a))}},{key:"moveTo",value:function(t,i,n){typeof arguments[1]=="function"&&(n=arguments[1],i={});var a=this.range.end-this.range.start,o=b.convert(t,"Date").valueOf(),s=o-a/2,l=o+a/2,u=i&&i.animation!==void 0?i.animation:!0;this.range.setRange(s,l,{animation:u},n)}},{key:"getWindow",value:function(){var t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}}},{key:"zoomIn",value:function(t,i,n){if(!(!t||t<0||t>1)){typeof arguments[1]=="function"&&(n=arguments[1],i={});var a=this.getWindow(),o=a.start.valueOf(),s=a.end.valueOf(),l=s-o,u=l/(1+t),h=(l-u)/2,f=o+h,c=s-h;this.setWindow(f,c,i,n)}}},{key:"zoomOut",value:function(t,i,n){if(!(!t||t<0||t>1)){typeof arguments[1]=="function"&&(n=arguments[1],i={});var a=this.getWindow(),o=a.start.valueOf(),s=a.end.valueOf(),l=s-o,u=o-l*t/2,h=s+l*t/2;this.setWindow(u,h,i,n)}}},{key:"redraw",value:function(){this._redraw()}},{key:"_redraw",value:function(){var t;this.redrawCount++;var i=this.dom;if(!(!i||!i.container||i.root.offsetWidth==0)){var n=!1,a=this.options,o=this.props;Sc(this.options.moment,this.body,this.options.hiddenDates),a.orientation=="top"?(b.addClassName(i.root,"vis-top"),b.removeClassName(i.root,"vis-bottom")):(b.removeClassName(i.root,"vis-top"),b.addClassName(i.root,"vis-bottom")),a.rtl?(b.addClassName(i.root,"vis-rtl"),b.removeClassName(i.root,"vis-ltr")):(b.addClassName(i.root,"vis-ltr"),b.removeClassName(i.root,"vis-rtl")),i.root.style.maxHeight=b.option.asSize(a.maxHeight,""),i.root.style.minHeight=b.option.asSize(a.minHeight,""),i.root.style.width=b.option.asSize(a.width,"");var s=i.root.offsetWidth;o.border.left=1,o.border.right=1,o.border.top=1,o.border.bottom=1,o.center.height=i.center.offsetHeight,o.left.height=i.left.offsetHeight,o.right.height=i.right.offsetHeight,o.top.height=i.top.clientHeight||-o.border.top,o.bottom.height=Math.round(i.bottom.getBoundingClientRect().height)||i.bottom.clientHeight||-o.border.bottom;var l=Math.max(o.left.height,o.center.height,o.right.height),u=o.top.height+l+o.bottom.height+o.border.top+o.border.bottom;i.root.style.height=b.option.asSize(a.height,"".concat(u,"px")),o.root.height=i.root.offsetHeight,o.background.height=o.root.height;var h=o.root.height-o.top.height-o.bottom.height;o.centerContainer.height=h,o.leftContainer.height=h,o.rightContainer.height=o.leftContainer.height,o.root.width=s,o.background.width=o.root.width,this.initialDrawDone||(o.scrollbarWidth=b.getScrollBarWidth());var f=i.leftContainer.clientWidth,c=i.rightContainer.clientWidth;a.verticalScroll?a.rtl?(o.left.width=f||-o.border.left,o.right.width=c+o.scrollbarWidth||-o.border.right):(o.left.width=f+o.scrollbarWidth||-o.border.left,o.right.width=c||-o.border.right):(o.left.width=f||-o.border.left,o.right.width=c||-o.border.right),this._setDOM();var d=this._updateScrollTop();a.orientation.item!="top"&&(d+=Math.max(o.centerContainer.height-o.center.height-o.border.top-o.border.bottom,0)),i.center.style.transform="translateY(".concat(d,"px)");var v=o.scrollTop==0?"hidden":"",g=o.scrollTop==o.scrollTopMin?"hidden":"";i.shadowTop.style.visibility=v,i.shadowBottom.style.visibility=g,i.shadowTopLeft.style.visibility=v,i.shadowBottomLeft.style.visibility=g,i.shadowTopRight.style.visibility=v,i.shadowBottomRight.style.visibility=g,a.verticalScroll&&(i.rightContainer.className="vis-panel vis-right vis-vertical-scroll",i.leftContainer.className="vis-panel vis-left vis-vertical-scroll",i.shadowTopRight.style.visibility="hidden",i.shadowBottomRight.style.visibility="hidden",i.shadowTopLeft.style.visibility="hidden",i.shadowBottomLeft.style.visibility="hidden",i.left.style.top="0px",i.right.style.top="0px"),(!a.verticalScroll||o.center.height<o.centerContainer.height)&&(i.left.style.top="".concat(d,"px"),i.right.style.top="".concat(d,"px"),i.rightContainer.className=i.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),i.leftContainer.className=i.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),o.left.width=f||-o.border.left,o.right.width=c||-o.border.right,this._setDOM());var p=o.center.height>o.centerContainer.height;this.hammer.get("pan").set({direction:p?Le.DIRECTION_ALL:Le.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),G(t=this.components).call(t,function(_){n=_.redraw()||n});var m=5;if(n)if(this.redrawCount<m){this.body.emitter.emit("_change");return}else console.log("WARNING: infinite loop in redraw?");else this.redrawCount=0;this.body.emitter.emit("changed")}}},{key:"_setDOM",value:function(){var t=this.props,i=this.dom;t.leftContainer.width=t.left.width,t.rightContainer.width=t.right.width;var n=t.root.width-t.left.width-t.right.width;t.center.width=n,t.centerContainer.width=n,t.top.width=n,t.bottom.width=n,i.background.style.height="".concat(t.background.height,"px"),i.backgroundVertical.style.height="".concat(t.background.height,"px"),i.backgroundHorizontal.style.height="".concat(t.centerContainer.height,"px"),i.centerContainer.style.height="".concat(t.centerContainer.height,"px"),i.leftContainer.style.height="".concat(t.leftContainer.height,"px"),i.rightContainer.style.height="".concat(t.rightContainer.height,"px"),i.background.style.width="".concat(t.background.width,"px"),i.backgroundVertical.style.width="".concat(t.centerContainer.width,"px"),i.backgroundHorizontal.style.width="".concat(t.background.width,"px"),i.centerContainer.style.width="".concat(t.center.width,"px"),i.top.style.width="".concat(t.top.width,"px"),i.bottom.style.width="".concat(t.bottom.width,"px"),i.background.style.left="0",i.background.style.top="0",i.backgroundVertical.style.left="".concat(t.left.width+t.border.left,"px"),i.backgroundVertical.style.top="0",i.backgroundHorizontal.style.left="0",i.backgroundHorizontal.style.top="".concat(t.top.height,"px"),i.centerContainer.style.left="".concat(t.left.width,"px"),i.centerContainer.style.top="".concat(t.top.height,"px"),i.leftContainer.style.left="0",i.leftContainer.style.top="".concat(t.top.height,"px"),i.rightContainer.style.left="".concat(t.left.width+t.center.width,"px"),i.rightContainer.style.top="".concat(t.top.height,"px"),i.top.style.left="".concat(t.left.width,"px"),i.top.style.top="0",i.bottom.style.left="".concat(t.left.width,"px"),i.bottom.style.top="".concat(t.top.height+t.centerContainer.height,"px"),i.center.style.left="0",i.left.style.left="0",i.right.style.left="0"}},{key:"setCurrentTime",value:function(t){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(t)}},{key:"getCurrentTime",value:function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}},{key:"_toTime",value:function(t){return VS(this,t,this.props.center.width)}},{key:"_toGlobalTime",value:function(t){return VS(this,t,this.props.root.width)}},{key:"_toScreen",value:function(t){return zS(this,t,this.props.center.width)}},{key:"_toGlobalScreen",value:function(t){return zS(this,t,this.props.root.width)}},{key:"_initAutoResize",value:function(){this.options.autoResize==!0?this._startAutoResize():this._stopAutoResize()}},{key:"_startAutoResize",value:function(){var t=this;this._stopAutoResize(),this._onResize=function(){if(t.options.autoResize!=!0){t._stopAutoResize();return}if(t.dom.root){var i=t.dom.root.offsetHeight,n=t.dom.root.offsetWidth;(n!=t.props.lastWidth||i!=t.props.lastHeight)&&(t.props.lastWidth=n,t.props.lastHeight=i,t.props.scrollbarWidth=b.getScrollBarWidth(),t.body.emitter.emit("_change"))}},b.addEventListener(window,"resize",this._onResize),t.dom.root&&(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight),this.watchTimer=U5(this._onResize,1e3)}},{key:"_stopAutoResize",value:function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(b.removeEventListener(window,"resize",this._onResize),this._onResize=null)}},{key:"_onTouch",value:function(t){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}},{key:"_onPinch",value:function(t){this.touch.allowDragging=!1}},{key:"_onDrag",value:function(t){if(!!t&&!!this.touch.allowDragging){var i=t.deltaY,n=this._getScrollTop(),a=this._setScrollTop(this.touch.initialScrollTop+i);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),a!=n&&this.emit("verticalDrag")}}},{key:"_setScrollTop",value:function(t){return this.props.scrollTop=t,this._updateScrollTop(),this.props.scrollTop}},{key:"_updateScrollTop",value:function(){var t=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return t!=this.props.scrollTopMin&&(this.options.orientation.item!="top"&&(this.props.scrollTop+=t-this.props.scrollTopMin),this.props.scrollTopMin=t),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<t&&(this.props.scrollTop=t),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}},{key:"_getScrollTop",value:function(){return this.props.scrollTop}},{key:"_createConfigurator",value:function(){throw new Error("Cannot invoke abstract method _createConfigurator")}}]),e}();tg(Ps.prototype);function E4(e){var r=S4();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=V(i,arguments,a)}else n=i.apply(this,arguments);return lr(this,n)}}function S4(){if(typeof Reflect=="undefined"||!V||V.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(V(Boolean,[],function(){})),!0}catch(e){return!1}}var lx=function(e){sr(t,e);var r=E4(t);function t(i,n){var a,o;Ct(this,t),o=r.call(this),o.body=i,o.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:Ze,locales:Is,locale:"en"},o.options=b.extend({},o.defaultOptions),o.setOptions(n),o.options.locales=b.extend({},Is,o.options.locales);var s=o.defaultOptions.locales[o.defaultOptions.locale];return G(a=ye(o.options.locales)).call(a,function(l){o.options.locales[l]=b.extend({},s,o.options.locales[l])}),o.offset=0,o._create(),o}return Ot(t,[{key:"_create",value:function(){var n=document.createElement("div");n.className="vis-current-time",n.style.position="absolute",n.style.top="0px",n.style.height="100%",this.bar=n}},{key:"destroy",value:function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}},{key:"setOptions",value:function(n){n&&b.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,n)}},{key:"redraw",value:function(){if(this.options.showCurrentTime){var n,a,o=this.body.dom.backgroundVertical;this.bar.parentNode!=o&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),o.appendChild(this.bar),this.start());var s=this.options.moment(ur()+this.offset);this.options.alignCurrentTime&&(s=s.startOf(this.options.alignCurrentTime));var l=this.body.util.toScreen(s),u=this.options.locales[this.options.locale];u||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),u=this.options.locales.en);var h=Ut(n=Ut(a="".concat(u.current," ")).call(a,u.time,": ")).call(n,s.format("dddd, MMMM Do YYYY, H:mm:ss"));h=h.charAt(0).toUpperCase()+h.substring(1),this.options.rtl?this.bar.style.transform="translateX(".concat(l*-1,"px)"):this.bar.style.transform="translateX(".concat(l,"px)"),this.bar.title=h}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}},{key:"start",value:function(){var n=this;function a(){n.stop();var o=n.body.range.conversion(n.body.domProps.center.width).scale,s=1/o/10;s<30&&(s=30),s>1e3&&(s=1e3),n.redraw(),n.body.emitter.emit("currentTimeTick"),n.currentTimeTimer=Ae(a,s)}a()}},{key:"stop",value:function(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}},{key:"setCurrentTime",value:function(n){var a=b.convert(n,"Date").valueOf(),o=ur();this.offset=a-o,this.redraw()}},{key:"getCurrentTime",value:function(){return new Date(ur()+this.offset)}}]),t}(Un),x4=Yn.find,ux="find",hx=!0;ux in[]&&Array(1)[ux](function(){hx=!1});J({target:"Array",proto:!0,forced:hx},{find:function(r){return x4(this,r,arguments.length>1?arguments[1]:void 0)}});var C4=de("Array").find,fx=Array.prototype,O4=function(e){var r=e.find;return e===fx||e instanceof Array&&r===fx.find?C4:r},I4=O4,P4=I4,k4=!Ft(function(){return Object.isExtensible(Object.preventExtensions({}))}),cx=Mn(function(e){var r=Or.f,t=ou("meta"),i=0,n=Object.isExtensible||function(){return!0},a=function(h){r(h,t,{value:{objectID:"O"+ ++i,weakData:{}}})},o=function(h,f){if(!fe(h))return typeof h=="symbol"?h:(typeof h=="string"?"S":"P")+h;if(!lt(h,t)){if(!n(h))return"F";if(!f)return"E";a(h)}return h[t].objectID},s=function(h,f){if(!lt(h,t)){if(!n(h))return!0;if(!f)return!1;a(h)}return h[t].weakData},l=function(h){return k4&&u.REQUIRED&&n(h)&&!lt(h,t)&&a(h),h},u=e.exports={REQUIRED:!1,fastKey:o,getWeakData:s,onFreeze:l};us[t]=!0}),Fu=function(e,r){this.stopped=e,this.result=r},dx=function(e,r,t){var i=t&&t.that,n=!!(t&&t.AS_ENTRIES),a=!!(t&&t.IS_ITERATOR),o=!!(t&&t.INTERRUPTED),s=ss(r,i,1+n+o),l,u,h,f,c,d,v,g=function(m){return l&&Xp(l),new Fu(!0,m)},p=function(m){return n?(or(m),o?s(m[0],m[1],g):s(m[0],m[1])):o?s(m,g):s(m)};if(a)l=e;else{if(u=Kp(e),typeof u!="function")throw TypeError("Target is not iterable");if(HT(u)){for(h=0,f=vi(e.length);f>h;h++)if(c=p(e[h]),c&&c instanceof Fu)return c;return new Fu(!1)}l=u.call(e)}for(d=l.next;!(v=d.call(l)).done;){try{c=p(v.value)}catch(m){throw Xp(l),m}if(typeof c=="object"&&c&&c instanceof Fu)return c}return new Fu(!1)},vx=function(e,r,t){if(!(e instanceof r))throw TypeError("Incorrect "+(t?t+" ":"")+"invocation");return e},R4=Or.f,D4=Yn.forEach,A4=mi.set,M4=mi.getterFor,L4=function(e,r,t){var i=e.indexOf("Map")!==-1,n=e.indexOf("Weak")!==-1,a=i?"set":"add",o=Wt[e],s=o&&o.prototype,l={},u;if(!Et||typeof o!="function"||!(n||s.forEach&&!Ft(function(){new o().entries().next()})))u=t.getConstructor(r,e,i,a),cx.REQUIRED=!0;else{u=r(function(f,c){A4(vx(f,u,e),{type:e,collection:new o}),c!=null&&dx(c,f[a],{that:f,AS_ENTRIES:i})});var h=M4(e);D4(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(f){var c=f=="add"||f=="set";f in s&&!(n&&f=="clear")&&Ir(u.prototype,f,function(d,v){var g=h(this).collection;if(!c&&n&&!fe(d))return f=="get"?void 0:!1;var p=g[f](d===0?0:d,v);return c?this:p})}),n||R4(u.prototype,"size",{configurable:!0,get:function(){return h(this).collection.size}})}return fu(u,e,!1,!0),l[e]=u,J({global:!0,forced:!0},l),n||t.setStrong(u,e,i),u},px=function(e,r,t){for(var i in r)t&&t.unsafe&&e[i]?e[i]=r[i]:zf(e,i,r[i],t);return e},gx=ce("species"),F4=function(e){var r=za(e),t=Or.f;Et&&r&&!r[gx]&&t(r,gx,{configurable:!0,get:function(){return this}})},N4=Or.f,mx=cx.fastKey,yx=mi.set,$g=mi.getterFor,$4={getConstructor:function(e,r,t,i){var n=e(function(l,u){vx(l,n,r),yx(l,{type:r,index:rn(null),first:void 0,last:void 0,size:0}),Et||(l.size=0),u!=null&&dx(u,l[i],{that:l,AS_ENTRIES:t})}),a=$g(r),o=function(l,u,h){var f=a(l),c=s(l,u),d,v;return c?c.value=h:(f.last=c={index:v=mx(u,!0),key:u,value:h,previous:d=f.last,next:void 0,removed:!1},f.first||(f.first=c),d&&(d.next=c),Et?f.size++:l.size++,v!=="F"&&(f.index[v]=c)),l},s=function(l,u){var h=a(l),f=mx(u),c;if(f!=="F")return h.index[f];for(c=h.first;c;c=c.next)if(c.key==u)return c};return px(n.prototype,{clear:function(){for(var u=this,h=a(u),f=h.index,c=h.first;c;)c.removed=!0,c.previous&&(c.previous=c.previous.next=void 0),delete f[c.index],c=c.next;h.first=h.last=void 0,Et?h.size=0:u.size=0},delete:function(l){var u=this,h=a(u),f=s(u,l);if(f){var c=f.next,d=f.previous;delete h.index[f.index],f.removed=!0,d&&(d.next=c),c&&(c.previous=d),h.first==f&&(h.first=c),h.last==f&&(h.last=d),Et?h.size--:u.size--}return!!f},forEach:function(u){for(var h=a(this),f=ss(u,arguments.length>1?arguments[1]:void 0,3),c;c=c?c.next:h.first;)for(f(c.value,c.key,this);c&&c.removed;)c=c.previous},has:function(u){return!!s(this,u)}}),px(n.prototype,t?{get:function(u){var h=s(this,u);return h&&h.value},set:function(u,h){return o(this,u===0?0:u,h)}}:{add:function(u){return o(this,u=u===0?0:u,u)}}),Et&&N4(n.prototype,"size",{get:function(){return a(this).size}}),n},setStrong:function(e,r,t){var i=r+" Iterator",n=$g(r),a=$g(i);Bp(e,r,function(o,s){yx(this,{type:i,target:o,state:n(o),kind:s,last:void 0})},function(){for(var o=a(this),s=o.kind,l=o.last;l&&l.removed;)l=l.previous;return!o.target||!(o.last=l=l?l.next:o.state.first)?(o.target=void 0,{value:void 0,done:!0}):s=="keys"?{value:l.key,done:!1}:s=="values"?{value:l.value,done:!1}:{value:[l.key,l.value],done:!1}},t?"entries":"values",!t,!0),F4(r)}};L4("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},$4);var G4=ht.Set,Y4=G4,Dc=Y4,zn=.001;function j4(e){Pe(e).call(e,function(r,t){return r.data.start-t.data.start})}function W4(e){Pe(e).call(e,function(r,t){var i="end"in r.data?r.data.end:r.data.start,n="end"in t.data?t.data.end:t.data.start;return i-n})}function _x(e,r,t,i){if(t)for(var n=0;n<e.length;n++)e[n].top=null;for(var n=0;n<e.length;n++){var a=e[n];if(a.stack&&a.top===null){a.top=r.axis;var o=!1;do{for(var s=null,l=0,u=e.length;l<u;l++){var h=e[l];if(o=i()||!1,o)return!0;if(h.top!==null&&h!==a&&h.stack&&bx(a,h,r.item,h.options.rtl)){s=h;break}}s!=null&&(a.top=s.top+s.height+r.item.vertical)}while(s)}}return o}function H4(e,r,t){for(var i=0;i<e.length;i++)e[i].top=null;var n=t.height;for(i=0;i<e.length;i++){var a=e[i];if(a.stack&&a.top===null){a.top=a.baseTop;do{for(var o=null,s=0,l=e.length;s<l;s++){var u=e[s];if(u.top!==null&&u!==a&&bx(a,u,r.item,u.options.rtl)){o=u;break}}o!=null&&(a.top=o.top+o.height+r.item.vertical),a.top+a.height>n&&(n=a.top+a.height)}while(o)}}t.height=n-t.top+.5*r.item.vertical}function B4(e,r,t,i){for(var n=0;n<e.length;n++)if(e[n].data.subgroup==null)e[n].top=r.item.vertical;else if(e[n].data.subgroup!==void 0&&i){var a=0;for(var o in t)t.hasOwnProperty(o)&&t[o].visible==!0&&t[o].index<t[e[n].data.subgroup].index&&(a+=t[o].height,t[e[n].data.subgroup].top=a);e[n].top=a+.5*r.item.vertical}i||U4(e,r,t)}function U4(e,r,t){for(var i in t)if(t.hasOwnProperty(i)){t[i].top=0;do{var n=null;for(var a in t)if(t[a].top!==null&&a!==i&&t[i].index>t[a].index&&z4(t[i],t[a])){n=t[a];break}n!=null&&(t[i].top=n.top+n.height)}while(n)}for(var o=0;o<e.length;o++)e[o].data.subgroup!==void 0&&(e[o].top=t[e[o].data.subgroup].top+.5*r.item.vertical)}function wx(e,r,t){var i=!1,n=[];for(var a in t)t[a].hasOwnProperty("index")?n[t[a].index]=a:n.push(a);for(var o=0;o<n.length;o++)if(a=n[o],t.hasOwnProperty(a)){i=i||t[a].stack,t[a].top=0;for(var s in t)t[s].visible&&t[a].index>t[s].index&&(t[a].top+=t[s].height);for(var l=e[a],u=0;u<l.length;u++)l[u].data.subgroup!==void 0&&(l[u].top=t[l[u].data.subgroup].top+.5*r.item.vertical,t[a].stack&&(l[u].baseTop=l[u].top));i&&t[a].stack&&H4(e[a],r,t[a])}}function bx(e,r,t,i){return i?e.right-t.horizontal+zn<r.right+r.width&&e.right+e.width+t.horizontal-zn>r.right&&e.top-t.vertical+zn<r.top+r.height&&e.top+e.height+t.vertical-zn>r.top:e.left-t.horizontal+zn<r.left+r.width&&e.left+e.width+t.horizontal-zn>r.left&&e.top-t.vertical+zn<r.top+r.height&&e.top+e.height+t.vertical-zn>r.top}function z4(e,r){var t=e.start<r.end&&e.end>r.start,i=e.top<r.top+r.height&&e.top+e.height>r.top;return t&&i}var V4="__ungrouped__",X4="__background__",Tx={UNGROUPED:V4,BACKGROUND:X4},Gg=function(){function e(r,t,i){var n=this;if(Ct(this,e),this.groupId=r,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=t&&t.subgroupOrder,this.itemSet=i,this.isVisible=null,this.stackDirty=!0,this._disposeCallbacks=[],t&&t.nestedGroups&&(this.nestedGroups=t.nestedGroups,t.showNested==!1?this.showNested=!1:this.showNested=!0),t&&t.subgroupStack)if(typeof t.subgroupStack=="boolean")this.doInnerStack=t.subgroupStack,this.subgroupStackAll=t.subgroupStack;else for(var a in t.subgroupStack)this.subgroupStack[a]=t.subgroupStack[a],this.doInnerStack=this.doInnerStack||t.subgroupStack[a];t&&t.heightMode?this.heightMode=t.heightMode:this.heightMode=i.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var o=function(){n.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",o),this._disposeCallbacks.push(function(){n.itemSet.body.emitter.off("checkRangedItems",o)}),this._create(),this.setData(t)}return Ot(e,[{key:"_create",value:function(){var t=document.createElement("div");this.itemSet.options.groupEditable.order?t.className="vis-label draggable":t.className="vis-label",this.dom.label=t;var i=document.createElement("div");i.className="vis-inner",t.appendChild(i),this.dom.inner=i;var n=document.createElement("div");n.className="vis-group",n["vis-group"]=this,this.dom.foreground=n,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}},{key:"setData",value:function(t){if(!this.itemSet.groupTouchParams.isDragging){var i,n;if(t&&t.subgroupVisibility)for(var a in t.subgroupVisibility)this.subgroupVisibility[a]=t.subgroupVisibility[a];if(this.itemSet.options&&this.itemSet.options.groupTemplate){var o;n=R(o=this.itemSet.options.groupTemplate).call(o,this),i=n(t,this.dom.inner)}else i=t&&t.content;if(i instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(i)}else i instanceof Object&&i.isReactComponent||(i instanceof Object?n(t,this.dom.inner):i!=null?this.dom.inner.innerHTML=b.xss(i):this.dom.inner.innerHTML=b.xss(this.groupId||""));this.dom.label.title=t&&t.title||"",this.dom.inner.firstChild?b.removeClassName(this.dom.inner,"vis-hidden"):b.addClassName(this.dom.inner,"vis-hidden"),t&&t.nestedGroups?((!this.nestedGroups||this.nestedGroups!=t.nestedGroups)&&(this.nestedGroups=t.nestedGroups),(t.showNested!==void 0||this.showNested===void 0)&&(t.showNested==!1?this.showNested=!1:this.showNested=!0),b.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(b.removeClassName(this.dom.label,"collapsed"),b.addClassName(this.dom.label,"expanded")):(b.removeClassName(this.dom.label,"expanded"),b.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,b.removeClassName(this.dom.label,"collapsed"),b.removeClassName(this.dom.label,"expanded"),b.removeClassName(this.dom.label,"vis-nesting-group")),t&&(t.treeLevel||t.nestedInGroup)?(b.addClassName(this.dom.label,"vis-nested-group"),t.treeLevel?b.addClassName(this.dom.label,"vis-group-level-"+t.treeLevel):b.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):b.addClassName(this.dom.label,"vis-group-level-0");var s=t&&t.className||null;s!=this.className&&(this.className&&(b.removeClassName(this.dom.label,this.className),b.removeClassName(this.dom.foreground,this.className),b.removeClassName(this.dom.background,this.className),b.removeClassName(this.dom.axis,this.className)),b.addClassName(this.dom.label,s),b.addClassName(this.dom.foreground,s),b.addClassName(this.dom.background,s),b.addClassName(this.dom.axis,s),this.className=s),this.style&&(b.removeCssText(this.dom.label,this.style),this.style=null),t&&t.style&&(b.addCssText(this.dom.label,t.style),this.style=t.style)}}},{key:"getLabelWidth",value:function(){return this.props.label.width}},{key:"_didMarkerHeightChange",value:function(){var t=this.dom.marker.clientHeight;if(t!=this.lastMarkerHeight){this.lastMarkerHeight=t;var i={},n=0;G(b).call(b,this.items,function(l,u){if(l.dirty=!0,l.displayed){var h=!0;i[u]=l.redraw(h),n=i[u].length}});var a=n>0;if(a)for(var o=function(u){G(b).call(b,i,function(h){h[u]()})},s=0;s<n;s++)o(s);return!0}else return!1}},{key:"_calculateGroupSizeAndPosition",value:function(){var t=this.dom.foreground,i=t.offsetTop,n=t.offsetLeft,a=t.offsetWidth;this.top=i,this.right=n,this.width=a}},{key:"_shouldBailItemsRedraw",value:function(){var t=this,i=this.itemSet.options.onTimeout,n={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:i&&i.timeoutMs,userBailFunction:i&&i.callback,shouldBailStackItems:this.shouldBailStackItems},a=null;if(!this.itemSet.initialDrawDone){if(n.shouldBailStackItems)return!0;Math.abs(ur()-new Date(n.relativeBailingTime))>n.bailTimeMs&&(n.userBailFunction&&this.itemSet.userContinueNotBail==null?n.userBailFunction(function(o){t.itemSet.userContinueNotBail=o,a=!o}):t.itemSet.userContinueNotBail==!1?a=!0:a=!1)}return a}},{key:"_redrawItems",value:function(t,i,n,a){var o=this,s=t||this.stackDirty||this.isVisible&&!i;if(s){var l,u,h,f,c,d,v={byEnd:gt(l=this.orderedItems.byEnd).call(l,function(D){return!D.isCluster}),byStart:gt(u=this.orderedItems.byStart).call(u,function(D){return!D.isCluster})},g={byEnd:yi(new Dc(gt(h=me(f=this.orderedItems.byEnd).call(f,function(D){return D.cluster})).call(h,function(D){return!!D}))),byStart:yi(new Dc(gt(c=me(d=this.orderedItems.byStart).call(d,function(D){return D.cluster})).call(c,function(D){return!!D})))},p=function(){var N,j,W,z=o._updateItemsInRange(v,gt(N=o.visibleItems).call(N,function(k){return!k.isCluster}),a),B=o._updateClustersInRange(g,gt(j=o.visibleItems).call(j,function(k){return k.isCluster}),a);return Ut(W=[]).call(W,yi(z),yi(B))},m=function(N){var j={},W=function(k){var O,M=gt(O=o.visibleItems).call(O,function($){return $.data.subgroup===k});j[k]=N?Pe(M).call(M,function($,C){return N($.data,C.data)}):M};for(var z in o.subgroups)W(z);return j};if(typeof this.itemSet.options.order=="function"){var _=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){var y=m(this.itemSet.options.order);wx(y,n,this.subgroups),this.visibleItems=p(),this._updateSubGroupHeights(n)}else{var w,T,S,x;this.visibleItems=p(),this._updateSubGroupHeights(n);var E=Pe(w=gt(T=Pr(S=this.visibleItems).call(S)).call(T,function(D){return D.isCluster||!D.isCluster&&!D.cluster})).call(w,function(D,N){return _.itemSet.options.order(D.data,N.data)});this.shouldBailStackItems=_x(E,n,!0,R(x=this._shouldBailItemsRedraw).call(x,this))}}else if(this.visibleItems=p(),this._updateSubGroupHeights(n),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){var I=m();wx(I,n,this.subgroups)}else{var A;this.shouldBailStackItems=_x(this.visibleItems,n,!0,R(A=this._shouldBailItemsRedraw).call(A,this))}else B4(this.visibleItems,n,this.subgroups,this.itemSet.options.stackSubgroups);for(var P=0;P<this.visibleItems.length;P++)this.visibleItems[P].repositionX(),this.subgroupVisibility[this.visibleItems[P].data.subgroup]!==void 0&&(this.subgroupVisibility[this.visibleItems[P].data.subgroup]||this.visibleItems[P].hide());this.itemSet.options.cluster&&G(b).call(b,this.items,function(D){D.cluster&&D.displayed&&D.hide()}),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}},{key:"_didResize",value:function(t,i){t=b.updateProperty(this,"height",i)||t;var n=this.dom.inner.clientWidth,a=this.dom.inner.clientHeight;return t=b.updateProperty(this.props.label,"width",n)||t,t=b.updateProperty(this.props.label,"height",a)||t,t}},{key:"_applyGroupHeight",value:function(t){this.dom.background.style.height="".concat(t,"px"),this.dom.foreground.style.height="".concat(t,"px"),this.dom.label.style.height="".concat(t,"px")}},{key:"_updateItemsVerticalPosition",value:function(t){for(var i=0,n=this.visibleItems.length;i<n;i++){var a=this.visibleItems[i];a.repositionY(t),!this.isVisible&&this.groupId!=Tx.BACKGROUND&&a.displayed&&a.hide()}}},{key:"redraw",value:function(t,i,n,a){var o=this,s,l,u,h,f,c=!1,d=this.isVisible,v,g=[function(){n=o._didMarkerHeightChange.call(o)||n},R(s=this._updateSubGroupHeights).call(s,this,i),R(l=this._calculateGroupSizeAndPosition).call(l,this),function(){var m;o.isVisible=R(m=o._isGroupVisible).call(m,o)(t,i)},function(){var m;R(m=o._redrawItems).call(m,o)(n,d,i,t)},R(u=this._updateSubgroupsSizes).call(u,this),function(){var m;v=R(m=o._calculateHeight).call(m,o)(i)},R(h=this._calculateGroupSizeAndPosition).call(h,this),function(){var m;c=R(m=o._didResize).call(m,o)(c,v)},function(){var m;R(m=o._applyGroupHeight).call(m,o)(v)},function(){var m;R(m=o._updateItemsVerticalPosition).call(m,o)(i)},R(f=function(){return!o.isVisible&&o.height&&(c=!1),c}).call(f,this)];if(a)return g;var p;return G(g).call(g,function(m){p=m()}),p}},{key:"_updateSubGroupHeights",value:function(t){var i=this;if(ye(this.subgroups).length>0){var n=this;this._resetSubgroups(),G(b).call(b,this.visibleItems,function(a){a.data.subgroup!==void 0&&(n.subgroups[a.data.subgroup].height=Math.max(n.subgroups[a.data.subgroup].height,a.height+t.item.vertical),n.subgroups[a.data.subgroup].visible=typeof i.subgroupVisibility[a.data.subgroup]=="undefined"?!0:Boolean(i.subgroupVisibility[a.data.subgroup]))})}}},{key:"_isGroupVisible",value:function(t,i){return this.top<=t.body.domProps.centerContainer.height-t.body.domProps.scrollTop+i.axis&&this.top+this.height+i.axis>=-t.body.domProps.scrollTop}},{key:"_calculateHeight",value:function(t){var i,n;if(this.heightMode==="fixed"?n=b.toArray(this.items):n=this.visibleItems,n.length>0){var a=n[0].top,o=n[0].top+n[0].height;if(G(b).call(b,n,function(l){a=Math.min(a,l.top),o=Math.max(o,l.top+l.height)}),a>t.axis){var s=a-t.axis;o-=s,G(b).call(b,n,function(l){l.top-=s})}i=Math.ceil(o+t.item.vertical/2),this.heightMode!=="fitItems"&&(i=Math.max(i,this.props.label.height))}else i=this.props.label.height;return i}},{key:"show",value:function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}},{key:"hide",value:function(){var t=this.dom.label;t.parentNode&&t.parentNode.removeChild(t);var i=this.dom.foreground;i.parentNode&&i.parentNode.removeChild(i);var n=this.dom.background;n.parentNode&&n.parentNode.removeChild(n);var a=this.dom.axis;a.parentNode&&a.parentNode.removeChild(a)}},{key:"add",value:function(t){var i;if(this.items[t.id]=t,t.setParent(this),this.stackDirty=!0,t.data.subgroup!==void 0&&(this._addToSubgroup(t),this.orderSubgroups()),!Hn(i=this.visibleItems).call(i,t)){var n=this.itemSet.body.range;this._checkIfVisible(t,this.visibleItems,n)}}},{key:"_addToSubgroup",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.data.subgroup;i!=null&&this.subgroups[i]===void 0&&(this.subgroups[i]={height:0,top:0,start:t.data.start,end:t.data.end||t.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[i]||!1},this.subgroupIndex++),new Date(t.data.start)<new Date(this.subgroups[i].start)&&(this.subgroups[i].start=t.data.start);var n=t.data.end||t.data.start;new Date(n)>new Date(this.subgroups[i].end)&&(this.subgroups[i].end=n),this.subgroups[i].items.push(t)}},{key:"_updateSubgroupsSizes",value:function(){var t=this;if(t.subgroups){var i=function(o){var s,l=t.subgroups[o].items[0].data.end||t.subgroups[o].items[0].data.start,u=t.subgroups[o].items[0].data.start,h=l-1;G(s=t.subgroups[o].items).call(s,function(f){new Date(f.data.start)<new Date(u)&&(u=f.data.start);var c=f.data.end||f.data.start;new Date(c)>new Date(h)&&(h=c)}),t.subgroups[o].start=u,t.subgroups[o].end=new Date(h-1)};for(var n in t.subgroups)i(n)}}},{key:"orderSubgroups",value:function(){if(this.subgroupOrderer!==void 0){var t=[];if(typeof this.subgroupOrderer=="string"){for(var i in this.subgroups)t.push({subgroup:i,sortField:this.subgroups[i].items[0].data[this.subgroupOrderer]});Pe(t).call(t,function(o,s){return o.sortField-s.sortField})}else if(typeof this.subgroupOrderer=="function"){for(var n in this.subgroups)t.push(this.subgroups[n].items[0].data);Pe(t).call(t,this.subgroupOrderer)}if(t.length>0)for(var a=0;a<t.length;a++)this.subgroups[t[a].subgroup].index=a}}},{key:"_resetSubgroups",value:function(){for(var t in this.subgroups)this.subgroups.hasOwnProperty(t)&&(this.subgroups[t].visible=!1,this.subgroups[t].height=0)}},{key:"remove",value:function(t){var i,n;delete this.items[t.id],t.setParent(null),this.stackDirty=!0;var a=Pt(i=this.visibleItems).call(i,t);a!=-1&&kr(n=this.visibleItems).call(n,a,1),t.data.subgroup!==void 0&&(this._removeFromSubgroup(t),this.orderSubgroups())}},{key:"_removeFromSubgroup",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.data.subgroup;if(i!=null){var n=this.subgroups[i];if(n){var a,o=Pt(a=n.items).call(a,t);if(o>=0){var s;kr(s=n.items).call(s,o,1),n.items.length?this._updateSubgroupsSizes():delete this.subgroups[i]}}}}},{key:"removeFromDataSet",value:function(t){this.itemSet.removeItem(t.id)}},{key:"order",value:function(){for(var t=b.toArray(this.items),i=[],n=[],a=0;a<t.length;a++)t[a].data.end!==void 0&&n.push(t[a]),i.push(t[a]);this.orderedItems={byStart:i,byEnd:n},j4(this.orderedItems.byStart),W4(this.orderedItems.byEnd)}},{key:"_updateItemsInRange",value:function(t,i,n){var a=[],o={};if(!this.isVisible&&this.groupId!=Tx.BACKGROUND){for(var s=0;s<i.length;s++){var l=i[s];l.displayed&&l.hide()}return a}var u=(n.end-n.start)/4,h=n.start-u,f=n.end+u,c=function(D){return D<h?-1:D<=f?0:1},d=function(D){var N=D.start,j=D.end;return j<h?-1:N<=f?0:1};if(i.length>0)for(var v=0;v<i.length;v++)this._checkIfVisibleWithReference(i[v],a,o,n);var g=b.binarySearchCustom(t.byStart,c,"data","start");if(this._traceVisible(g,t.byStart,a,o,function(P){return P.data.start<h||P.data.start>f}),this.checkRangedItems==!0){this.checkRangedItems=!1;for(var p=0;p<t.byEnd.length;p++)this._checkIfVisibleWithReference(t.byEnd[p],a,o,n)}else{var m=b.binarySearchCustom(t.byEnd,d,"data");this._traceVisible(m,t.byEnd,a,o,function(P){return P.data.end<h||P.data.start>f})}for(var _={},y=0,w=0;w<a.length;w++){var T=a[w];if(!T.displayed){var S=!0;_[w]=T.redraw(S),y=_[w].length}}var x=y>0;if(x)for(var E=function(D){G(b).call(b,_,function(N){N[D]()})},I=0;I<y;I++)E(I);for(var A=0;A<a.length;A++)a[A].repositionX();return a}},{key:"_traceVisible",value:function(t,i,n,a,o){if(t!=-1){for(var s=t;s>=0;s--){var l=i[s];if(o(l))break;!(l.isCluster&&!l.hasItems())&&!l.cluster&&a[l.id]===void 0&&(a[l.id]=!0,n.push(l))}for(var u=t+1;u<i.length;u++){var h=i[u];if(o(h))break;!(h.isCluster&&!h.hasItems())&&!h.cluster&&a[h.id]===void 0&&(a[h.id]=!0,n.push(h))}}}},{key:"_checkIfVisible",value:function(t,i,n){t.isVisible(n)?(t.displayed||t.show(),t.repositionX(),i.push(t)):t.displayed&&t.hide()}},{key:"_checkIfVisibleWithReference",value:function(t,i,n,a){t.isVisible(a)?n[t.id]===void 0&&(n[t.id]=!0,i.push(t)):t.displayed&&t.hide()}},{key:"_updateClustersInRange",value:function(t,i,n){var a=[],o={};if(i.length>0)for(var s=0;s<i.length;s++)this._checkIfVisibleWithReference(i[s],a,o,n);for(var l=0;l<t.byStart.length;l++)this._checkIfVisibleWithReference(t.byStart[l],a,o,n);for(var u=0;u<t.byEnd.length;u++)this._checkIfVisibleWithReference(t.byEnd[u],a,o,n);for(var h={},f=0,c=0;c<a.length;c++){var d=a[c];if(!d.displayed){var v=!0;h[c]=d.redraw(v),f=h[c].length}}var g=f>0;if(g)for(var p=0;p<f;p++)G(b).call(b,h,function(_){_[p]()});for(var m=0;m<a.length;m++)a[m].repositionX();return a}},{key:"changeSubgroup",value:function(t,i,n){this._removeFromSubgroup(t,i),this._addToSubgroup(t,n),this.orderSubgroups()}},{key:"dispose",value:function(){this.hide();for(var t;t=this._disposeCallbacks.pop();)t()}}]),e}();function K4(e){var r=Z4();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=V(i,arguments,a)}else n=i.apply(this,arguments);return lr(this,n)}}function Z4(){if(typeof Reflect=="undefined"||!V||V.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(V(Boolean,[],function(){})),!0}catch(e){return!1}}var Ex=function(e){sr(t,e);var r=K4(t);function t(i,n,a){var o;return Ct(this,t),o=r.call(this,i,n,a),o.width=0,o.height=0,o.top=0,o.left=0,o}return Ot(t,[{key:"redraw",value:function(n,a,o){var s=!1;this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,n),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var l=0,u=this.visibleItems.length;l<u;l++){var h=this.visibleItems[l];h.repositionY(a)}return s}},{key:"show",value:function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}]),t}(Gg);function q4(e,r){var t=typeof Ja!="undefined"&&Wn(e)||e["@@iterator"];if(!t){if(ct(e)||(t=J4(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function J4(e,r){var t;if(!!e){if(typeof e=="string")return Sx(e,r);var i=Pr(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return ds(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Sx(e,r)}}function Sx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var ks=function(){function e(r,t,i){var n,a=this;Ct(this,e),this.id=null,this.parent=null,this.data=r,this.dom=null,this.conversion=t||{},this.defaultOptions={locales:Is,locale:"en"},this.options=b.extend({},this.defaultOptions,i),this.options.locales=b.extend({},Is,this.options.locales);var o=this.defaultOptions.locales[this.defaultOptions.locale];G(n=ye(this.options.locales)).call(n,function(s){a.options.locales[s]=b.extend({},o,a.options.locales[s])}),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=i&&i.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(r),this.editable=null,this._updateEditStatus()}return Ot(e,[{key:"select",value:function(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}},{key:"unselect",value:function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}},{key:"setData",value:function(t){var i=t.group!=null&&this.data.group!=t.group;i&&this.parent!=null&&this.parent.itemSet._moveToGroup(this,t.group),this.setSelectability(t),this.parent&&(this.parent.stackDirty=!0);var n=t.subgroup!=null&&this.data.subgroup!=t.subgroup;n&&this.parent!=null&&this.parent.changeSubgroup(this,this.data.subgroup,t.subgroup),this.data=t,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}},{key:"setSelectability",value:function(t){t&&(this.selectable=typeof t.selectable=="undefined"?!0:Boolean(t.selectable))}},{key:"setParent",value:function(t){this.displayed?(this.hide(),this.parent=t,this.parent&&this.show()):this.parent=t}},{key:"isVisible",value:function(t){return!1}},{key:"show",value:function(){return!1}},{key:"hide",value:function(){return!1}},{key:"redraw",value:function(){}},{key:"repositionX",value:function(){}},{key:"repositionY",value:function(){}},{key:"_repaintDragCenter",value:function(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){var t,i,n=this,a=document.createElement("div");a.className="vis-drag-center",a.dragCenterItem=this,this.hammerDragCenter=new Le(a),this.hammerDragCenter.on("tap",function(o){n.parent.itemSet.body.emitter.emit("click",{event:o,item:n.id})}),this.hammerDragCenter.on("doubletap",function(o){o.stopPropagation(),n.parent.itemSet._onUpdateItem(n),n.parent.itemSet.body.emitter.emit("doubleClick",{event:o,item:n.id})}),this.hammerDragCenter.on("panstart",function(o){o.stopPropagation(),n.parent.itemSet._onDragStart(o)}),this.hammerDragCenter.on("panmove",R(t=n.parent.itemSet._onDrag).call(t,n.parent.itemSet)),this.hammerDragCenter.on("panend",R(i=n.parent.itemSet._onDragEnd).call(i,n.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(a,this.dom.dragLeft):this.dom.box.appendChild(a):this.dom.point&&this.dom.point.appendChild(a),this.dom.dragCenter=a}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}},{key:"_repaintDeleteButton",value:function(t){var i=(this.options.editable.overrideItems||this.editable==null)&&this.options.editable.remove||!this.options.editable.overrideItems&&this.editable!=null&&this.editable.remove;if(this.selected&&i&&!this.dom.deleteButton){var n=this,a=document.createElement("div");this.options.rtl?a.className="vis-delete-rtl":a.className="vis-delete";var o=this.options.locales[this.options.locale];o||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),o=this.options.locales.en),a.title=o.deleteSelected,this.hammerDeleteButton=new Le(a).on("tap",function(s){s.stopPropagation(),n.parent.removeFromDataSet(n)}),t.appendChild(a),this.dom.deleteButton=a}else(!this.selected||!i)&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}},{key:"_repaintOnItemUpdateTimeTooltip",value:function(t){if(!!this.options.tooltipOnItemUpdateTime){var i=(this.options.editable.updateTime||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&i&&!this.dom.onItemUpdateTimeTooltip){var n=document.createElement("div");n.className="vis-onUpdateTime-tooltip",t.appendChild(n),this.dom.onItemUpdateTimeTooltip=n}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";var a=50,o=this.parent.itemSet.body.domProps.scrollTop,s;this.options.orientation.item=="top"?s=this.top:s=this.parent.height-this.top-this.height;var l=s+this.parent.top-a<-o;l?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top="".concat(this.height+2,"px")):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom="".concat(this.height+2,"px"));var u,h;if(this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template){var f;h=R(f=this.options.tooltipOnItemUpdateTime.template).call(f,this),u=h(this.data)}else u="start: ".concat(Ze(this.data.start).format("MM/DD/YYYY hh:mm")),this.data.end&&(u+="<br> end: ".concat(Ze(this.data.end).format("MM/DD/YYYY hh:mm")));this.dom.onItemUpdateTimeTooltip.innerHTML=b.xss(u)}}}},{key:"_getItemData",value:function(){return this.parent.itemSet.itemsData.get(this.id)}},{key:"_updateContents",value:function(t){var i,n,a,o,s,l=this._getItemData(),u=this.dom.box||this.dom.point,h=u.getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate){var f;s=R(f=this.options.visibleFrameTemplate).call(f,this),o=b.xss(s(l,h))}else o="";if(h){if(o instanceof Object&&!(o instanceof Element))s(l,h);else if(n=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(o),n){if(o instanceof Element)h.innerHTML="",h.appendChild(o);else if(o!=null)h.innerHTML=b.xss(o);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.itemVisibleFrameContent=o}}if(this.options.template){var c;a=R(c=this.options.template).call(c,this),i=a(l,t,this.data)}else i=this.data.content;if(i instanceof Object&&!(i instanceof Element))a(l,t);else if(n=this._contentToString(this.content)!==this._contentToString(i),n){if(i instanceof Element)t.innerHTML="",t.appendChild(i);else if(i!=null)t.innerHTML=b.xss(i);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.content=i}}},{key:"_updateDataAttributes",value:function(t){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var i=[];if(ct(this.options.dataAttributes))i=this.options.dataAttributes;else if(this.options.dataAttributes=="all")i=ye(this.data);else return;var n=q4(i),a;try{for(n.s();!(a=n.n()).done;){var o=a.value,s=this.data[o];s!=null?t.setAttribute("data-".concat(o),s):t.removeAttribute("data-".concat(o))}}catch(l){n.e(l)}finally{n.f()}}}},{key:"_updateStyle",value:function(t){this.style&&(b.removeCssText(t,this.style),this.style=null),this.data.style&&(b.addCssText(t,this.data.style),this.style=this.data.style)}},{key:"_contentToString",value:function(t){return typeof t=="string"?t:t&&"outerHTML"in t?t.outerHTML:t}},{key:"_updateEditStatus",value:function(){this.options&&(typeof this.options.editable=="boolean"?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:ot(this.options.editable)==="object"&&(this.editable={},b.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),(!this.options||!this.options.editable||this.options.editable.overrideItems!==!0)&&this.data&&(typeof this.data.editable=="boolean"?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:ot(this.data.editable)==="object"&&(this.editable={},b.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}},{key:"getWidthLeft",value:function(){return 0}},{key:"getWidthRight",value:function(){return 0}},{key:"getTitle",value:function(){if(this.options.tooltip&&this.options.tooltip.template){var t,i=R(t=this.options.tooltip.template).call(t,this);return i(this._getItemData(),this.data)}return this.data.title}}]),e}();ks.prototype.stack=!0;function Q4(e){var r=t6();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=V(i,arguments,a)}else n=i.apply(this,arguments);return lr(this,n)}}function t6(){if(typeof Reflect=="undefined"||!V||V.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(V(Boolean,[],function(){})),!0}catch(e){return!1}}var e6=function(e){sr(t,e);var r=Q4(t);function t(i,n,a){var o;if(Ct(this,t),o=r.call(this,i,n,a),o.props={dot:{width:0,height:0},line:{width:0,height:0}},i&&i.start==null)throw new Error('Property "start" missing in item '.concat(i));return o}return Ot(t,[{key:"isVisible",value:function(n){if(this.cluster)return!1;var a,o=this.data.align||this.options.align,s=this.width*n.getMillisecondsPerPixel();return o=="right"?a=this.data.start.getTime()>n.start&&this.data.start.getTime()-s<n.end:o=="left"?a=this.data.start.getTime()+s>n.start&&this.data.start.getTime()<n.end:a=this.data.start.getTime()+s/2>n.start&&this.data.start.getTime()-s/2<n.end,a}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var a=this.parent.dom.background;if(!a)throw new Error("Cannot redraw item: parent has no background container element");a.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var o=this.parent.dom.axis;if(!a)throw new Error("Cannot redraw item: parent has no axis container element");o.appendChild(this.dom.dot)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var n=this.editable.updateTime||this.editable.updateGroup,a=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(n?" vis-editable":" vis-readonly");this.dom.box.className="vis-item vis-box".concat(a),this.dom.line.className="vis-item vis-line".concat(a),this.dom.dot.className="vis-item vis-dot".concat(a)}}},{key:"_getDomComponentsSizes",value:function(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(n){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=n.dot.height,this.props.dot.width=n.dot.width,this.props.line.width=n.line.width,this.width=n.box.width,this.height=n.box.height,this.options.rtl?this.dom.box.style.right=n.previous.right:this.dom.box.style.left=n.previous.left,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}},{key:"redraw",value:function(n){var a,o,s,l=this,u,h,f=[R(a=this._createDomElement).call(a,this),R(o=this._appendDomElement).call(o,this),R(s=this._updateDirtyDomComponents).call(s,this),function(){l.dirty&&(h=l._getDomComponentsSizes())},function(){if(l.dirty){var d;R(d=l._updateDomComponentsSizes).call(d,l)(h)}},R(u=this._repaintDomAdditionals).call(u,this)];if(n)return f;var c;return G(f).call(f,function(d){c=d()}),c}},{key:"show",value:function(n){if(!this.displayed)return this.redraw(n)}},{key:"hide",value:function(){if(this.displayed){var n=this.dom;n.box.remove?n.box.remove():n.box.parentNode&&n.box.parentNode.removeChild(n.box),n.line.remove?n.line.remove():n.line.parentNode&&n.line.parentNode.removeChild(n.line),n.dot.remove?n.dot.remove():n.dot.parentNode&&n.dot.parentNode.removeChild(n.dot),this.displayed=!1}}},{key:"repositionXY",value:function(){var n=this.options.rtl,a=function(s,l,u){var h,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!(l===void 0&&u===void 0)){var c=f?l*-1:l;if(u===void 0){s.style.transform="translateX(".concat(c,"px)");return}if(l===void 0){s.style.transform="translateY(".concat(u,"px)");return}s.style.transform=Ut(h="translate(".concat(c,"px, ")).call(h,u,"px)")}};a(this.dom.box,this.boxX,this.boxY,n),a(this.dom.dot,this.dotX,this.dotY,n),a(this.dom.line,this.lineX,this.lineY,n)}},{key:"repositionX",value:function(){var n=this.conversion.toScreen(this.data.start),a=this.data.align===void 0?this.options.align:this.data.align,o=this.props.line.width,s=this.props.dot.width;a=="right"?(this.boxX=n-this.width,this.lineX=n-o,this.dotX=n-o/2-s/2):a=="left"?(this.boxX=n,this.lineX=n,this.dotX=n+o/2-s/2):(this.boxX=n-this.width/2,this.lineX=this.options.rtl?n-o:n-o/2,this.dotX=n-s/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}},{key:"repositionY",value:function(){var n=this.options.orientation.item,a=this.dom.line.style;if(n=="top"){var o=this.parent.top+this.top+1;this.boxY=this.top||0,a.height="".concat(o,"px"),a.bottom="",a.top="0"}else{var s=this.parent.itemSet.props.height,l=s-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),a.height="".concat(l,"px"),a.top="",a.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}},{key:"getWidthLeft",value:function(){return this.width/2}},{key:"getWidthRight",value:function(){return this.width/2}}]),t}(ks);function r6(e){var r=i6();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=V(i,arguments,a)}else n=i.apply(this,arguments);return lr(this,n)}}function i6(){if(typeof Reflect=="undefined"||!V||V.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(V(Boolean,[],function(){})),!0}catch(e){return!1}}var n6=function(e){sr(t,e);var r=r6(t);function t(i,n,a){var o;if(Ct(this,t),o=r.call(this,i,n,a),o.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},i&&i.start==null)throw new Error('Property "start" missing in item '.concat(i));return o}return Ot(t,[{key:"isVisible",value:function(n){if(this.cluster)return!1;var a=this.width*n.getMillisecondsPerPixel();return this.data.start.getTime()+a>n.start&&this.data.start<n.end}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){var n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.point)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var n=this.editable.updateTime||this.editable.updateGroup,a=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(n?" vis-editable":" vis-readonly");this.dom.point.className="vis-item vis-point".concat(a),this.dom.dot.className="vis-item vis-dot".concat(a)}}},{key:"_getDomComponentsSizes",value:function(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(n){this.props.dot.width=n.dot.width,this.props.dot.height=n.dot.height,this.props.content.height=n.content.height,this.options.rtl?this.dom.content.style.marginRight="".concat(this.props.dot.width/2,"px"):this.dom.content.style.marginLeft="".concat(this.props.dot.width/2,"px"),this.width=n.point.width,this.height=n.point.height,this.dom.dot.style.top="".concat((this.height-this.props.dot.height)/2,"px");var a=this.props.dot.width,o=this.options.rtl?a/2:a/2*-1;this.dom.dot.style.transform="translateX(".concat(o,"px"),this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}},{key:"redraw",value:function(n){var a,o,s,l=this,u,h,f=[R(a=this._createDomElement).call(a,this),R(o=this._appendDomElement).call(o,this),R(s=this._updateDirtyDomComponents).call(s,this),function(){l.dirty&&(h=l._getDomComponentsSizes())},function(){if(l.dirty){var d;R(d=l._updateDomComponentsSizes).call(d,l)(h)}},R(u=this._repaintDomAdditionals).call(u,this)];if(n)return f;var c;return G(f).call(f,function(d){c=d()}),c}},{key:"repositionXY",value:function(){var n=this.options.rtl,a=function(s,l,u){var h,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!(l===void 0&&u===void 0)){var c=f?l*-1:l;if(u===void 0){s.style.transform="translateX(".concat(c,"px)");return}if(l===void 0){s.style.transform="translateY(".concat(u,"px)");return}s.style.transform=Ut(h="translate(".concat(c,"px, ")).call(h,u,"px)")}};a(this.dom.point,this.pointX,this.pointY,n)}},{key:"show",value:function(n){if(!this.displayed)return this.redraw(n)}},{key:"hide",value:function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}},{key:"repositionX",value:function(){var n=this.conversion.toScreen(this.data.start);this.pointX=n,this.options.rtl?this.right=n-this.props.dot.width:this.left=n-this.props.dot.width,this.repositionXY()}},{key:"repositionY",value:function(){var n=this.options.orientation.item;n=="top"?this.pointY=this.top:this.pointY=this.parent.height-this.top-this.height,this.repositionXY()}},{key:"getWidthLeft",value:function(){return this.props.dot.width}},{key:"getWidthRight",value:function(){return this.props.dot.width}}]),t}(ks);function a6(e){var r=o6();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=V(i,arguments,a)}else n=i.apply(this,arguments);return lr(this,n)}}function o6(){if(typeof Reflect=="undefined"||!V||V.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(V(Boolean,[],function(){})),!0}catch(e){return!1}}var ho=function(e){sr(t,e);var r=a6(t);function t(i,n,a){var o;if(Ct(this,t),o=r.call(this,i,n,a),o.props={content:{width:0}},o.overflow=!1,i){if(i.start==null)throw new Error('Property "start" missing in item '.concat(i.id));if(i.end==null)throw new Error('Property "end" missing in item '.concat(i.id))}return o}return Ot(t,[{key:"isVisible",value:function(n){return this.cluster?!1:this.data.start<n.end&&this.data.end>n.start}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.box)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var n=this.editable.updateTime||this.editable.updateGroup,a=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(n?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+a,this.dom.content.style.maxWidth="none"}}},{key:"_getDomComponentsSizes",value:function(){return this.overflow=window.getComputedStyle(this.dom.frame).overflow!=="hidden",this.whiteSpace=window.getComputedStyle(this.dom.content).whiteSpace!=="nowrap",{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(n){this.props.content.width=n.content.width,this.height=n.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}},{key:"redraw",value:function(n){var a,o,s,l=this,u,h,f=[R(a=this._createDomElement).call(a,this),R(o=this._appendDomElement).call(o,this),R(s=this._updateDirtyDomComponents).call(s,this),function(){if(l.dirty){var d;h=R(d=l._getDomComponentsSizes).call(d,l)()}},function(){if(l.dirty){var d;R(d=l._updateDomComponentsSizes).call(d,l)(h)}},R(u=this._repaintDomAdditionals).call(u,this)];if(n)return f;var c;return G(f).call(f,function(d){c=d()}),c}},{key:"show",value:function(n){if(!this.displayed)return this.redraw(n)}},{key:"hide",value:function(){if(this.displayed){var n=this.dom.box;n.parentNode&&n.parentNode.removeChild(n),this.displayed=!1}}},{key:"repositionX",value:function(n){var a=this.parent.width,o=this.conversion.toScreen(this.data.start),s=this.conversion.toScreen(this.data.end),l=this.data.align===void 0?this.options.align:this.data.align,u,h;this.data.limitSize!==!1&&(n===void 0||n===!0)&&(o<-a&&(o=-a),s>2*a&&(s=2*a));var f=Math.max(Math.round((s-o)*1e3)/1e3,1);switch(this.overflow?(this.options.rtl?this.right=o:this.left=o,this.width=f+this.props.content.width,h=this.props.content.width):(this.options.rtl?this.right=o:this.left=o,this.width=f,h=Math.min(s-o,this.props.content.width)),this.options.rtl?this.dom.box.style.transform="translateX(".concat(this.right*-1,"px)"):this.dom.box.style.transform="translateX(".concat(this.left,"px)"),this.dom.box.style.width="".concat(f,"px"),this.whiteSpace&&(this.height=this.dom.box.offsetHeight),l){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){var c=Math.max(f-h,0)*-1;this.dom.content.style.transform="translateX(".concat(c,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max(f-h,0),"px)");break;case"center":if(this.options.rtl){var d=Math.max((f-h)/2,0)*-1;this.dom.content.style.transform="translateX(".concat(d,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max((f-h)/2,0),"px)");break;default:if(this.overflow?s>0?u=Math.max(-o,0):u=-h:o<0?u=-o:u=0,this.options.rtl){var v=u*-1;this.dom.content.style.transform="translateX(".concat(v,"px)")}else this.dom.content.style.transform="translateX(".concat(u,"px)")}}},{key:"repositionY",value:function(){var n=this.options.orientation.item,a=this.dom.box;n=="top"?a.style.top="".concat(this.top,"px"):a.style.top="".concat(this.parent.height-this.top-this.height,"px")}},{key:"_repaintDragLeft",value:function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){var n=document.createElement("div");n.className="vis-drag-left",n.dragLeftItem=this,this.dom.box.appendChild(n),this.dom.dragLeft=n}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}},{key:"_repaintDragRight",value:function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){var n=document.createElement("div");n.className="vis-drag-right",n.dragRightItem=this,this.dom.box.appendChild(n),this.dom.dragRight=n}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}]),t}(ks);ho.prototype.baseClassName="vis-item vis-range";function s6(e){var r=l6();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=V(i,arguments,a)}else n=i.apply(this,arguments);return lr(this,n)}}function l6(){if(typeof Reflect=="undefined"||!V||V.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(V(Boolean,[],function(){})),!0}catch(e){return!1}}var fo=function(e){sr(t,e);var r=s6(t);function t(i,n,a){var o;if(Ct(this,t),o=r.call(this,i,n,a),o.props={content:{width:0}},o.overflow=!1,i){if(i.start==null)throw new Error('Property "start" missing in item '.concat(i.id));if(i.end==null)throw new Error('Property "end" missing in item '.concat(i.id))}return o}return Ot(t,[{key:"isVisible",value:function(n){return this.data.start<n.end&&this.data.end>n.start}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var n=this.parent.dom.background;if(!n)throw new Error("Cannot redraw item: parent has no background container element");n.appendChild(this.dom.box)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var n=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+n}}},{key:"_getDomComponentsSizes",value:function(){return this.overflow=window.getComputedStyle(this.dom.content).overflow!=="hidden",{content:{width:this.dom.content.offsetWidth}}}},{key:"_updateDomComponentsSizes",value:function(n){this.props.content.width=n.content.width,this.height=0,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){}},{key:"redraw",value:function(n){var a,o,s,l=this,u,h,f=[R(a=this._createDomElement).call(a,this),R(o=this._appendDomElement).call(o,this),R(s=this._updateDirtyDomComponents).call(s,this),function(){if(l.dirty){var d;h=R(d=l._getDomComponentsSizes).call(d,l)()}},function(){if(l.dirty){var d;R(d=l._updateDomComponentsSizes).call(d,l)(h)}},R(u=this._repaintDomAdditionals).call(u,this)];if(n)return f;var c;return G(f).call(f,function(d){c=d()}),c}},{key:"repositionY",value:function(n){var a,o=this.options.orientation.item;if(this.data.subgroup!==void 0){var s=this.data.subgroup;this.dom.box.style.height="".concat(this.parent.subgroups[s].height,"px"),o=="top"?this.dom.box.style.top="".concat(this.parent.top+this.parent.subgroups[s].top,"px"):this.dom.box.style.top="".concat(this.parent.top+this.parent.height-this.parent.subgroups[s].top-this.parent.subgroups[s].height,"px"),this.dom.box.style.bottom=""}else this.parent instanceof Ex?(a=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom=o=="bottom"?"0":"",this.dom.box.style.top=o=="top"?"0":""):(a=this.parent.height,this.dom.box.style.top="".concat(this.parent.top,"px"),this.dom.box.style.bottom="");this.dom.box.style.height="".concat(a,"px")}}]),t}(ks);fo.prototype.baseClassName="vis-item vis-background";fo.prototype.stack=!1;fo.prototype.show=ho.prototype.show;fo.prototype.hide=ho.prototype.hide;fo.prototype.repositionX=ho.prototype.repositionX;var u6=function(){function e(r,t){Ct(this,e),this.container=r,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return Ot(e,[{key:"setPosition",value:function(t,i){this.x=hr(t),this.y=hr(i)}},{key:"setText",value:function(t){t instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(t)):this.frame.innerHTML=b.xss(t)}},{key:"show",value:function(t){if(t===void 0&&(t=!0),t===!0){var i=this.frame.clientHeight,n=this.frame.clientWidth,a=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,s=0,l=0;if(this.overflowMethod=="flip"||this.overflowMethod=="none"){var u=!1,h=!0;this.overflowMethod=="flip"&&(this.y-i<this.padding&&(h=!1),this.x+n>o-this.padding&&(u=!0)),u?s=this.x-n:s=this.x,h?l=this.y-i:l=this.y}else l=this.y-i,l+i+this.padding>a&&(l=a-i-this.padding),l<this.padding&&(l=this.padding),s=this.x,s+n+this.padding>o&&(s=o-n-this.padding),s<this.padding&&(s=this.padding);this.frame.style.left=s+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),e}(),h6=Yn.every,f6=cs("every");J({target:"Array",proto:!0,forced:!f6},{every:function(r){return h6(this,r,arguments.length>1?arguments[1]:void 0)}});var c6=de("Array").every,xx=Array.prototype,d6=function(e){var r=e.every;return e===xx||e instanceof Array&&r===xx.every?c6:r},v6=d6,p6=v6;function Cx(e,r){var t=typeof Ja!="undefined"&&Wn(e)||e["@@iterator"];if(!t){if(ct(e)||(t=g6(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function g6(e,r){var t;if(!!e){if(typeof e=="string")return Ox(e,r);var i=Pr(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return ds(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ox(e,r)}}function Ox(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function m6(e){var r=y6();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=V(i,arguments,a)}else n=i.apply(this,arguments);return lr(this,n)}}function y6(){if(typeof Reflect=="undefined"||!V||V.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(V(Boolean,[],function(){})),!0}catch(e){return!1}}var Ix=function(e){sr(t,e);var r=m6(t);function t(i,n,a){var o;Ct(this,t);var s=Qa({},{fitOnDoubleClick:!0},a,{editable:!1});if(o=r.call(this,i,n,s),o.props={content:{width:0,height:0}},!i||i.uiItems==null)throw new Error('Property "uiItems" missing in item '+i.id);return o.id=xs(),o.group=i.group,o._setupRange(),o.emitter=o.data.eventEmitter,o.range=o.data.range,o.attached=!1,o.isCluster=!0,o.data.isCluster=!0,o}return Ot(t,[{key:"hasItems",value:function(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}},{key:"setUiItems",value:function(n){this.detach(),this.data.uiItems=n,this._setupRange(),this.attach()}},{key:"isVisible",value:function(n){var a=this.data.end?this.data.end-this.data.start:0,o=this.width*n.getMillisecondsPerPixel(),s=Math.max(this.data.start.getTime()+a,this.data.start.getTime()+o);return this.data.start<n.end&&s>n.start&&this.hasItems()}},{key:"getData",value:function(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}},{key:"redraw",value:function(n){var a,o,s,l,u,h,f,c=[R(a=this._createDomElement).call(a,this),R(o=this._appendDomElement).call(o,this),R(s=this._updateDirtyDomComponents).call(s,this),R(l=function(){this.dirty&&(f=this._getDomComponentsSizes())}).call(l,this),R(u=function(){if(this.dirty){var g;R(g=this._updateDomComponentsSizes).call(g,this)(f)}}).call(u,this),R(h=this._repaintDomAdditionals).call(h,this)];if(n)return c;var d;return G(c).call(c,function(v){d=v()}),d}},{key:"show",value:function(){this.displayed||this.redraw()}},{key:"hide",value:function(){if(this.displayed){var n=this.dom;n.box.parentNode&&n.box.parentNode.removeChild(n.box),this.options.showStipes&&(n.line.parentNode&&n.line.parentNode.removeChild(n.line),n.dot.parentNode&&n.dot.parentNode.removeChild(n.dot)),this.displayed=!1}}},{key:"repositionX",value:function(){var n=this.conversion.toScreen(this.data.start),a=this.data.end?this.conversion.toScreen(this.data.end):0;if(a)this.repositionXWithRanges(n,a);else{var o=this.data.align===void 0?this.options.align:this.data.align;this.repositionXWithoutRanges(n,o)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(n,a))}},{key:"repositionStype",value:function(n,a){this.dom.line.style.display="block",this.dom.dot.style.display="block";var o=this.dom.line.offsetWidth,s=this.dom.dot.offsetWidth;if(a){var l=o+n+(a-n)/2,u=l-s/2,h=this.options.rtl?l*-1:l,f=this.options.rtl?u*-1:u;this.dom.line.style.transform="translateX(".concat(h,"px)"),this.dom.dot.style.transform="translateX(".concat(f,"px)")}else{var c=this.options.rtl?n*-1:n,d=this.options.rtl?(n-s/2)*-1:n-s/2;this.dom.line.style.transform="translateX(".concat(c,"px)"),this.dom.dot.style.transform="translateX(".concat(d,"px)")}}},{key:"repositionXWithoutRanges",value:function(n,a){a=="right"?this.options.rtl?(this.right=n-this.width,this.dom.box.style.right=this.right+"px"):(this.left=n-this.width,this.dom.box.style.left=this.left+"px"):a=="left"?this.options.rtl?(this.right=n,this.dom.box.style.right=this.right+"px"):(this.left=n,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=n-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=n-this.width/2,this.dom.box.style.left=this.left+"px")}},{key:"repositionXWithRanges",value:function(n,a){var o=Math.round(Math.max(a-n+.5,1));this.options.rtl?this.right=n:this.left=n,this.width=Math.max(o,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=o+"px"}},{key:"repositionY",value:function(){var n=this.options.orientation.item,a=this.dom.box;if(n=="top"?a.style.top=(this.top||0)+"px":a.style.top=(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if(n=="top")this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var o=this.parent.itemSet.props.height,s=o-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=o-s+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}},{key:"getWidthLeft",value:function(){return this.width/2}},{key:"getWidthRight",value:function(){return this.width/2}},{key:"move",value:function(){this.repositionX(),this.repositionY()}},{key:"attach",value:function(){var n,a=Cx(this.data.uiItems),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;s.cluster=this}}catch(l){a.e(l)}finally{a.f()}this.data.items=me(n=this.data.uiItems).call(n,function(l){return l.data}),this.attached=!0,this.dirty=!0}},{key:"detach",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!!this.hasItems()){var a=Cx(this.data.uiItems),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;delete s.cluster}}catch(l){a.e(l)}finally{a.f()}this.attached=!1,n&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}},{key:"_onDoubleClick",value:function(){this._fit()}},{key:"_setupRange",value:function(){var n,a,o,s=me(n=this.data.uiItems).call(n,function(h){return{start:h.data.start.valueOf(),end:h.data.end?h.data.end.valueOf():h.data.start.valueOf()}});this.data.min=Math.min.apply(Math,yi(me(s).call(s,function(h){return Math.min(h.start,h.end||h.start)}))),this.data.max=Math.max.apply(Math,yi(me(s).call(s,function(h){return Math.max(h.start,h.end||h.start)})));var l=me(a=this.data.uiItems).call(a,function(h){return h.center}),u=WT(l).call(l,function(h,f){return h+f},0)/this.data.uiItems.length;JS(o=this.data.uiItems).call(o,function(h){return h.data.end})?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(u),this.data.end=null)}},{key:"_getUiItems",value:function(){var n=this;if(this.data.uiItems&&this.data.uiItems.length){var a;return gt(a=this.data.uiItems).call(a,function(o){return o.cluster===n})}return[]}},{key:"_createDomElement",value:function(){if(!this.dom){if(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick){var n;this.dom.box.ondblclick=R(n=t.prototype._onDoubleClick).call(n,this)}this.dom.box["vis-item"]=this,this.dirty=!0}}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.box)}var a=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!a)throw new Error("Cannot redraw item: parent has no background container element");a.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var o=this.parent.dom.axis;if(!a)throw new Error("Cannot redraw item: parent has no axis container element");o.appendChild(this.dom.dot)}}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var n=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+n,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}},{key:"_getDomComponentsSizes",value:function(){var n={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(n.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},n.line={width:this.dom.line.offsetWidth}),n}},{key:"_updateDomComponentsSizes",value:function(n){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=n.box.width:this.width=n.box.width,this.height=n.box.height,this.options.rtl?this.dom.box.style.right=n.previous.right:this.dom.box.style.left=n.previous.left,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}},{key:"_isStipeVisible",value:function(){return this.minWidth>=this.width||!this.data.end}},{key:"_getFitRange",value:function(){var n=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-n,fitEnd:this.data.max+n}}},{key:"_fit",value:function(){if(this.emitter){var n=this._getFitRange(),a=n.fitStart,o=n.fitEnd,s={start:new Date(a),end:new Date(o),animation:!0};this.emitter.emit("fit",s)}}},{key:"_getItemData",value:function(){return this.data}}]),t}(ks);Ix.prototype.baseClassName="vis-item vis-range vis-cluster";function _6(e,r){var t=typeof Ja!="undefined"&&Wn(e)||e["@@iterator"];if(!t){if(ct(e)||(t=w6(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function w6(e,r){var t;if(!!e){if(typeof e=="string")return Px(e,r);var i=Pr(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return ds(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Px(e,r)}}function Px(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var b6="__ungrouped__",T6="__background__",E6={UNGROUPED:b6,BACKGROUND:T6},S6=function(){function e(r){Ct(this,e),this.itemSet=r,this.groups={},this.cache={},this.cache[-1]=[]}return Ot(e,[{key:"createClusterItem",value:function(t,i,n){var a=new Ix(t,i,n);return a}},{key:"setItems",value:function(t,i){this.items=t||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,i&&i.applyOnChangedLevel&&(this.applyOnChangedLevel=i.applyOnChangedLevel)}},{key:"updateData",value:function(){this.dataChanged=!0,this.applyOnChangedLevel=!1}},{key:"getClusters",value:function(t,i,n){var a=typeof n=="boolean"?{}:n,o=a.maxItems,s=a.clusterCriteria;s||(s=function(){return!0}),o=o||1;var l=-1,u=2,h=0;if(i>0){if(i>=1)return[];l=Math.abs(Math.round(Math.log(100/i)/Math.log(u))),h=Math.abs(Math.pow(u,l))}if(this.dataChanged){var f=l!=this.cacheLevel,c=this.applyOnChangedLevel?f:!0;c&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=l;var d=this.cache[l];if(!d){d=[];for(var v in this.groups)if(this.groups.hasOwnProperty(v))for(var g=this.groups[v],p=g.length,m=0;m<p;){for(var _=g[m],y=1,w=m-1;w>=0&&_.center-g[w].center<h/2;)!g[w].cluster&&s(_.data,g[w].data)&&y++,w--;for(var T=m+1;T<g.length&&g[T].center-_.center<h/2;)s(_.data,g[T].data)&&y++,T++;for(var S=d.length-1;S>=0&&_.center-d[S].center<h;)_.group==d[S].group&&s(_.data,d[S].data)&&y++,S--;if(y>o){for(var x=y-o+1,E=[],I=m;E.length<x&&I<g.length;)s(g[m].data,g[I].data)&&E.push(g[I]),I++;var A=this.itemSet.getGroupId(_.data),P=this.itemSet.groups[A]||this.itemSet.groups[E6.UNGROUPED],D=this._getClusterForItems(E,P,t,n);d.push(D),m+=x}else delete _.cluster,m+=1}this.cache[l]=d}return d}},{key:"_filterData",value:function(){var t={};this.groups=t;for(var i=0,n=uE(this.items);i<n.length;i++){var a=n[i],o=a.parent?a.parent.groupId:"",s=t[o];s||(s=[],t[o]=s),s.push(a),a.data.start&&(a.data.end?a.center=(a.data.start.valueOf()+a.data.end.valueOf())/2:a.center=a.data.start.valueOf())}for(var l in t)if(t.hasOwnProperty(l)){var u;Pe(u=t[l]).call(u,function(h,f){return h.center-f.center})}this.dataChanged=!1}},{key:"_getClusterForItems",value:function(t,i,n,a){var o,s=me(o=n||[]).call(o,function(y){var w;return{cluster:y,itemsIds:new Dc(me(w=y.data.uiItems).call(w,function(T){return T.id}))}}),l;if(s.length){var u=_6(s),h;try{var f=function(){var w=h.value;if(w.itemsIds.size===t.length&&p6(t).call(t,function(T){return w.itemsIds.has(T.id)}))return l=w.cluster,"break"};for(u.s();!(h=u.n()).done;){var c=f();if(c==="break")break}}catch(y){u.e(y)}finally{u.f()}}if(l)return l.setUiItems(t),l.group!==i&&(l.group&&l.group.remove(l),i&&(i.add(l),l.group=i)),l;var d=a.titleTemplate||"",v={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},g=d.replace(/{count}/,t.length),p='<div title="'+g+'">'+t.length+"</div>",m=Qa({},a,this.itemSet.options),_={content:p,title:g,group:i,uiItems:t,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return l=this.createClusterItem(_,v,m),i&&(i.add(l),l.group=i),l.attach(),l}},{key:"_dropLevelsCache",value:function(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}]),e}();function co(e,r){var t=typeof Ja!="undefined"&&Wn(e)||e["@@iterator"];if(!t){if(ct(e)||(t=x6(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function x6(e,r){var t;if(!!e){if(typeof e=="string")return kx(e,r);var i=Pr(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return ds(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kx(e,r)}}function kx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function C6(e){var r=O6();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=V(i,arguments,a)}else n=i.apply(this,arguments);return lr(this,n)}}function O6(){if(typeof Reflect=="undefined"||!V||V.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(V(Boolean,[],function(){})),!0}catch(e){return!1}}var Rs="__ungrouped__",Vn="__background__",Ac=function(e){sr(t,e);var r=C6(t);function t(i,n){var a;Ct(this,t),a=r.call(this),a.body=i,a.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap:function(l,u,h){var f=u.order;u.order=l.order,l.order=f},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:Ic.snap,onDropObjectOnItem:function(l,u,h){h(u)},onAdd:function(l,u){u(l)},onUpdate:function(l,u){u(l)},onMove:function(l,u){u(l)},onRemove:function(l,u){u(l)},onMoving:function(l,u){u(l)},onAddGroup:function(l,u){u(l)},onMoveGroup:function(l,u){u(l)},onRemoveGroup:function(l,u){u(l)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},a.options=b.extend({},a.defaultOptions),a.options.rtl=n.rtl,a.options.onTimeout=n.onTimeout,a.conversion={toScreen:i.util.toScreen,toTime:i.util.toTime},a.dom={},a.props={},a.hammer=null;var o=Oe(a);return a.itemsData=null,a.groupsData=null,a.itemsSettingTime=null,a.initialItemSetDrawn=!1,a.userContinueNotBail=null,a.sequentialSelection=!1,a.itemListeners={add:function(l,u,h){o._onAdd(u.items),o.options.cluster&&o.clusterGenerator.setItems(o.items,{applyOnChangedLevel:!1}),o.redraw()},update:function(l,u,h){o._onUpdate(u.items),o.options.cluster&&o.clusterGenerator.setItems(o.items,{applyOnChangedLevel:!1}),o.redraw()},remove:function(l,u,h){o._onRemove(u.items),o.options.cluster&&o.clusterGenerator.setItems(o.items,{applyOnChangedLevel:!1}),o.redraw()}},a.groupListeners={add:function(l,u,h){if(o._onAddGroups(u.items),o.groupsData&&o.groupsData.length>0){var f,c=o.groupsData.getDataSet();G(f=c.get()).call(f,function(d){if(d.nestedGroups){var v;d.showNested!=!1&&(d.showNested=!0);var g=[];G(v=d.nestedGroups).call(v,function(p){var m=c.get(p);!m||(m.nestedInGroup=d.id,d.showNested==!1&&(m.visible=!1),g=Ut(g).call(g,m))}),c.update(g,h)}})}},update:function(l,u,h){o._onUpdateGroups(u.items)},remove:function(l,u,h){o._onRemoveGroups(u.items)}},a.items={},a.groups={},a.groupIds=[],a.selection=[],a.popup=null,a.popupTimer=null,a.touchParams={},a.groupTouchParams={group:null,isDragging:!1},a._create(),a.setOptions(n),a.clusters=[],a}return Ot(t,[{key:"_create",value:function(){var n=this,a,o,s,l,u,h,f,c,d,v,g,p,m,_,y,w=document.createElement("div");w.className="vis-itemset",w["vis-itemset"]=this,this.dom.frame=w;var T=document.createElement("div");T.className="vis-background",w.appendChild(T),this.dom.background=T;var S=document.createElement("div");S.className="vis-foreground",w.appendChild(S),this.dom.foreground=S;var x=document.createElement("div");x.className="vis-axis",this.dom.axis=x;var E=document.createElement("div");E.className="vis-labelset",this.dom.labelSet=E,this._updateUngrouped();var I=new Ex(Vn,null,this);I.show(),this.groups[Vn]=I,this.hammer=new Le(this.body.dom.centerContainer),this.hammer.on("hammer.input",function(A){A.isFirst&&n._onTouch(A)}),this.hammer.on("panstart",R(a=this._onDragStart).call(a,this)),this.hammer.on("panmove",R(o=this._onDrag).call(o,this)),this.hammer.on("panend",R(s=this._onDragEnd).call(s,this)),this.hammer.get("pan").set({threshold:5,direction:Le.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",R(l=this._onSelectItem).call(l,this)),this.hammer.on("press",R(u=this._onMultiSelectItem).call(u,this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",R(h=this._onAddItem).call(h,this)),this.options.rtl?this.groupHammer=new Le(this.body.dom.rightContainer):this.groupHammer=new Le(this.body.dom.leftContainer),this.groupHammer.on("tap",R(f=this._onGroupClick).call(f,this)),this.groupHammer.on("panstart",R(c=this._onGroupDragStart).call(c,this)),this.groupHammer.on("panmove",R(d=this._onGroupDrag).call(d,this)),this.groupHammer.on("panend",R(v=this._onGroupDragEnd).call(v,this)),this.groupHammer.get("pan").set({threshold:5,direction:Le.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",R(g=this._onMouseOver).call(g,this)),this.body.dom.centerContainer.addEventListener("mouseout",R(p=this._onMouseOut).call(p,this)),this.body.dom.centerContainer.addEventListener("mousemove",R(m=this._onMouseMove).call(m,this)),this.body.dom.centerContainer.addEventListener("contextmenu",R(_=this._onDragEnd).call(_,this)),this.body.dom.centerContainer.addEventListener("mousewheel",R(y=this._onMouseWheel).call(y,this)),this.show()}},{key:"setOptions",value:function(n){var a=this;if(n){var o,s,l=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"];b.selectiveExtend(l,this.options,n),"itemsAlwaysDraggable"in n&&(typeof n.itemsAlwaysDraggable=="boolean"?(this.options.itemsAlwaysDraggable.item=n.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):ot(n.itemsAlwaysDraggable)==="object"&&(b.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,n.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in n&&typeof n.sequentialSelection=="boolean"&&(this.options.sequentialSelection=n.sequentialSelection),"orientation"in n&&(typeof n.orientation=="string"?this.options.orientation.item=n.orientation==="top"?"top":"bottom":ot(n.orientation)==="object"&&"item"in n.orientation&&(this.options.orientation.item=n.orientation.item)),"margin"in n&&(typeof n.margin=="number"?(this.options.margin.axis=n.margin,this.options.margin.item.horizontal=n.margin,this.options.margin.item.vertical=n.margin):ot(n.margin)==="object"&&(b.selectiveExtend(["axis"],this.options.margin,n.margin),"item"in n.margin&&(typeof n.margin.item=="number"?(this.options.margin.item.horizontal=n.margin.item,this.options.margin.item.vertical=n.margin.item):ot(n.margin.item)==="object"&&b.selectiveExtend(["horizontal","vertical"],this.options.margin.item,n.margin.item)))),G(o=["locale","locales"]).call(o,function(h){h in n&&(a.options[h]=n[h])}),"editable"in n&&(typeof n.editable=="boolean"?(this.options.editable.updateTime=n.editable,this.options.editable.updateGroup=n.editable,this.options.editable.add=n.editable,this.options.editable.remove=n.editable,this.options.editable.overrideItems=!1):ot(n.editable)==="object"&&b.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,n.editable)),"groupEditable"in n&&(typeof n.groupEditable=="boolean"?(this.options.groupEditable.order=n.groupEditable,this.options.groupEditable.add=n.groupEditable,this.options.groupEditable.remove=n.groupEditable):ot(n.groupEditable)==="object"&&b.selectiveExtend(["order","add","remove"],this.options.groupEditable,n.groupEditable));var u=function(f){var c=n[f];if(c){if(typeof c!="function"){var d;throw new Error(Ut(d="option ".concat(f," must be a function ")).call(d,f,"(item, callback)"))}a.options[f]=c}};G(s=["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"]).call(s,u),n.cluster?(Qa(this.options,{cluster:n.cluster}),this.clusterGenerator||(this.clusterGenerator=new S6(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}},{key:"markDirty",value:function(n){this.groupIds=[],n&&(n.refreshItems&&G(b).call(b,this.items,function(a){a.dirty=!0,a.displayed&&a.redraw()}),n.restackGroups&&G(b).call(b,this.groups,function(a,o){o!==Vn&&(a.stackDirty=!0)}))}},{key:"destroy",value:function(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}},{key:"hide",value:function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}},{key:"show",value:function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}},{key:"setPopupTimer",value:function(n){if(this.clearPopupTimer(),n){var a=this.options.tooltip.delay||typeof this.options.tooltip.delay=="number"?this.options.tooltip.delay:500;this.popupTimer=Ae(function(){n.show()},a)}}},{key:"clearPopupTimer",value:function(){this.popupTimer!=null&&(clearTimeout(this.popupTimer),this.popupTimer=null)}},{key:"setSelection",value:function(n){var a;n==null&&(n=[]),ct(n)||(n=[n]);var o=gt(a=this.selection).call(a,function(g){return Pt(n).call(n,g)===-1}),s=co(o),l;try{for(s.s();!(l=s.n()).done;){var u=l.value,h=this.getItemById(u);h&&h.unselect()}}catch(g){s.e(g)}finally{s.f()}this.selection=yi(n);var f=co(n),c;try{for(f.s();!(c=f.n()).done;){var d=c.value,v=this.getItemById(d);v&&v.select()}}catch(g){f.e(g)}finally{f.f()}}},{key:"getSelection",value:function(){var n;return Ut(n=this.selection).call(n,[])}},{key:"getVisibleItems",value:function(){var n=this.body.range.getRange(),a,o;this.options.rtl?(a=this.body.util.toScreen(n.start),o=this.body.util.toScreen(n.end)):(o=this.body.util.toScreen(n.start),a=this.body.util.toScreen(n.end));var s=[];for(var l in this.groups)if(this.groups.hasOwnProperty(l)){var u=this.groups[l],h=u.isVisible?u.visibleItems:[],f=co(h),c;try{for(f.s();!(c=f.n()).done;){var d=c.value;this.options.rtl?d.right<o&&d.right+d.width>a&&s.push(d.id):d.left<a&&d.left+d.width>o&&s.push(d.id)}}catch(v){f.e(v)}finally{f.f()}}return s}},{key:"getItemsAtCurrentTime",value:function(n){var a,o;this.options.rtl?(a=this.body.util.toScreen(n),o=this.body.util.toScreen(n)):(o=this.body.util.toScreen(n),a=this.body.util.toScreen(n));var s=[];for(var l in this.groups)if(this.groups.hasOwnProperty(l)){var u=this.groups[l],h=u.isVisible?u.visibleItems:[],f=co(h),c;try{for(f.s();!(c=f.n()).done;){var d=c.value;this.options.rtl?d.right<o&&d.right+d.width>a&&s.push(d.id):d.left<a&&d.left+d.width>o&&s.push(d.id)}}catch(v){f.e(v)}finally{f.f()}}return s}},{key:"getVisibleGroups",value:function(){var n=[];for(var a in this.groups)if(this.groups.hasOwnProperty(a)){var o=this.groups[a];o.isVisible&&n.push(a)}return n}},{key:"getItemById",value:function(n){var a;return this.items[n]||P4(a=this.clusters).call(a,function(o){return o.id===n})}},{key:"_deselect",value:function(n){for(var a=this.selection,o=0,s=a.length;o<s;o++)if(a[o]==n){kr(a).call(a,o,1);break}}},{key:"redraw",value:function(){var n=this,a=this.options.margin,o=this.body.range,s=b.option.asSize,l=this.options,u=l.orientation.item,h=!1,f=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,f.className="vis-itemset",this.options.cluster&&this._clusterItems(),h=this._orderGroups()||h;var c=o.end-o.start,d=c!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,v=o.start!=this.lastRangeStart,g=l.stack!=this.lastStack,p=l.stackSubgroups!=this.lastStackSubgroups,m=d||v||g||p;this.lastVisibleInterval=c,this.lastRangeStart=o.start,this.lastStack=l.stack,this.lastStackSubgroups=l.stackSubgroups,this.props.lastWidth=this.props.width;var _=this._firstGroup(),y={item:a.item,axis:a.axis},w={item:a.item,axis:a.item.vertical/2},T=0,S=a.axis+a.item.vertical;this.groups[Vn].redraw(o,w,m);var x={},E=0;G(b).call(b,this.groups,function(A,P){if(P!==Vn){var D=A==_?y:w,N=!0;x[P]=A.redraw(o,D,m,N),E=x[P].length}});var I=E>0;return I&&function(){for(var A={},P=function(j){G(b).call(b,x,function(W,z){A[z]=W[j]()})},D=0;D<E;D++)P(D);G(b).call(b,n.groups,function(N,j){if(j!==Vn){var W=A[j];h=W||h,T+=N.height}}),T=Math.max(T,S)}(),T=Math.max(T,S),f.style.height=s(T),this.props.width=f.offsetWidth,this.props.height=T,this.dom.axis.style.top=s(u=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,h=this._isResized()||h,h}},{key:"_firstGroup",value:function(){var n=this.options.orientation.item=="top"?0:this.groupIds.length-1,a=this.groupIds[n],o=this.groups[a]||this.groups[Rs];return o||null}},{key:"_updateUngrouped",value:function(){var n=this.groups[Rs],a,o;if(this.groupsData){if(n){n.dispose(),delete this.groups[Rs];for(o in this.items)if(this.items.hasOwnProperty(o)){a=this.items[o],a.parent&&a.parent.remove(a);var s=this.getGroupId(a.data),l=this.groups[s];l&&l.add(a)||a.hide()}}}else if(!n){var u=null,h=null;n=new Gg(u,h,this),this.groups[Rs]=n;for(o in this.items)this.items.hasOwnProperty(o)&&(a=this.items[o],n.add(a));n.show()}}},{key:"getLabelSet",value:function(){return this.dom.labelSet}},{key:"setItems",value:function(n){this.itemsSettingTime=new Date;var a=this,o,s=this.itemsData;if(!n)this.itemsData=null;else if(zi("id",n))this.itemsData=Cs(n);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(s&&(G(b).call(b,this.itemListeners,function(u,h){s.off(h,u)}),s.dispose(),o=s.getIds(),this._onRemove(o)),this.itemsData){var l=this.id;G(b).call(b,this.itemListeners,function(u,h){a.itemsData.on(h,u,l)}),o=this.itemsData.getIds(),this._onAdd(o),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}},{key:"getItems",value:function(){return this.itemsData!=null?this.itemsData.rawDS:null}},{key:"setGroups",value:function(n){var a=this,o;if(this.groupsData&&(G(b).call(b,this.groupListeners,function(h,f){a.groupsData.off(f,h)}),o=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(o)),!n)this.groupsData=null;else if(zi("id",n))this.groupsData=n;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var s,l=this.groupsData.getDataSet();G(s=l.get()).call(s,function(h){if(h.nestedGroups){var f;G(f=h.nestedGroups).call(f,function(c){var d=l.get(c);d.nestedInGroup=h.id,h.showNested==!1&&(d.visible=!1),l.update(d)})}});var u=this.id;G(b).call(b,this.groupListeners,function(h,f){a.groupsData.on(f,h,u)}),o=this.groupsData.getIds(),this._onAddGroups(o)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}},{key:"getGroups",value:function(){return this.groupsData}},{key:"removeItem",value:function(n){var a=this,o=this.itemsData.get(n);o&&this.options.onRemove(o,function(s){s&&a.itemsData.remove(n)})}},{key:"_getType",value:function(n){return n.type||this.options.type||(n.end?"range":"box")}},{key:"getGroupId",value:function(n){var a=this._getType(n);return a=="background"&&n.group==null?Vn:this.groupsData?n.group:Rs}},{key:"_onUpdate",value:function(n){var a=this,o=this;G(n).call(n,function(s){var l=o.itemsData.get(s),u=o.items[s],h=l?o._getType(l):null,f=t.types[h],c;if(u&&(!f||!(u instanceof f)?(c=u.selected,o._removeItem(u),u=null):o._updateItem(u,l)),!u&&l)if(f)u=new f(l,o.conversion,o.options),u.id=s,o._addItem(u),c&&(a.selection.push(s),u.select());else throw new TypeError('Unknown item type "'.concat(h,'"'))}),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}},{key:"_onRemove",value:function(n){var a=0,o=this;G(n).call(n,function(s){var l=o.items[s];l&&(a++,o._removeItem(l))}),a&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}},{key:"_order",value:function(){G(b).call(b,this.groups,function(n){n.order()})}},{key:"_onUpdateGroups",value:function(n){this._onAddGroups(n)}},{key:"_onAddGroups",value:function(n){var a=this;G(n).call(n,function(o){var s=a.groupsData.get(o),l=a.groups[o];if(l)l.setData(s);else{if(o==Rs||o==Vn)throw new Error("Illegal group id. ".concat(o," is a reserved id."));var u=oc(a.options);b.extend(u,{height:null}),l=new Gg(o,s,a),a.groups[o]=l;for(var h in a.items)if(a.items.hasOwnProperty(h)){var f=a.items[h];f.data.group==o&&l.add(f)}l.order(),l.show()}}),this.body.emitter.emit("_change",{queue:!0})}},{key:"_onRemoveGroups",value:function(n){var a=this;G(n).call(n,function(o){var s=a.groups[o];s&&(s.dispose(),delete a.groups[o])}),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}},{key:"_orderGroups",value:function(){if(this.groupsData){var n=this.groupsData.getIds({order:this.options.groupOrder});n=this._orderNestedGroups(n);var a=!b.equalArray(n,this.groupIds);if(a){var o=this.groups;G(n).call(n,function(s){o[s].hide()}),G(n).call(n,function(s){o[s].show()}),this.groupIds=n}return a}else return!1}},{key:"_orderNestedGroups",value:function(n){var a=this;function o(l,u){var h=[];return G(u).call(u,function(f){h.push(f);var c=l.groupsData.get(f);if(c.nestedGroups){var d,v=me(d=l.groupsData.get({filter:function(p){return p.nestedInGroup==f},order:l.options.groupOrder})).call(d,function(g){return g.id});h=Ut(h).call(h,o(l,v))}}),h}var s=gt(n).call(n,function(l){return!a.groupsData.get(l).nestedInGroup});return o(this,s)}},{key:"_addItem",value:function(n){this.items[n.id]=n;var a=this.getGroupId(n.data),o=this.groups[a];o?o&&o.data&&o.data.showNested&&(n.groupShowing=!0):n.groupShowing=!1,o&&o.add(n)}},{key:"_updateItem",value:function(n,a){n.setData(a);var o=this.getGroupId(n.data),s=this.groups[o];s?s&&s.data&&s.data.showNested&&(n.groupShowing=!0):n.groupShowing=!1}},{key:"_removeItem",value:function(n){var a,o;n.hide(),delete this.items[n.id];var s=Pt(a=this.selection).call(a,n.id);s!=-1&&kr(o=this.selection).call(o,s,1),n.parent&&n.parent.remove(n),this.popup!=null&&this.popup.hide()}},{key:"_constructByEndArray",value:function(n){for(var a=[],o=0;o<n.length;o++)n[o]instanceof ho&&a.push(n[o]);return a}},{key:"_onTouch",value:function(n){this.touchParams.item=this.itemFromTarget(n),this.touchParams.dragLeftItem=n.target.dragLeftItem||!1,this.touchParams.dragRightItem=n.target.dragRightItem||!1,this.touchParams.itemProps=null}},{key:"_getGroupIndex",value:function(n){for(var a=0;a<this.groupIds.length;a++)if(n==this.groupIds[a])return a}},{key:"_onDragStart",value:function(n){var a=this;if(!this.touchParams.itemIsDragging){var o=this.touchParams.item||null,s=this,l;if(o&&(o.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup||o.editable!=null&&!o.editable.updateTime&&!o.editable.updateGroup&&!this.options.editable.overrideItems)return;var u=this.touchParams.dragLeftItem,h=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=o,u)l={item:u,initialX:n.center.x,dragLeft:!0,data:this._cloneItemData(o.data)},this.touchParams.itemProps=[l];else if(h)l={item:h,initialX:n.center.x,dragRight:!0,data:this._cloneItemData(o.data)},this.touchParams.itemProps=[l];else if(this.options.editable.add&&(n.srcEvent.ctrlKey||n.srcEvent.metaKey))this._onDragStartAddItem(n);else{this.groupIds.length<1&&this.redraw();var f=this._getGroupIndex(o.data.group),c=this.options.itemsAlwaysDraggable.item&&!o.selected?[o.id]:this.getSelection();this.touchParams.itemProps=me(c).call(c,function(d){var v=s.items[d],g=s._getGroupIndex(v.data.group);return{item:v,initialX:n.center.x,groupOffset:f-g,data:a._cloneItemData(v.data)}})}n.stopPropagation()}else this.options.editable.add&&(n.srcEvent.ctrlKey||n.srcEvent.metaKey)&&this._onDragStartAddItem(n)}}},{key:"_onDragStartAddItem",value:function(n){var a=this.options.snap||null,o=this.dom.frame.getBoundingClientRect(),s=this.options.rtl?o.right-n.center.x+10:n.center.x-o.left-10,l=this.body.util.toTime(s),u=this.body.util.getScale(),h=this.body.util.getStep(),f=a?a(l,u,h):l,c=f,d={type:"range",start:f,end:c,content:"new item"},v=xs();d[this.itemsData.idProp]=v;var g=this.groupFromTarget(n);g&&(d.group=g.groupId);var p=new ho(d,this.conversion,this.options);p.id=v,p.data=this._cloneItemData(d),this._addItem(p),this.touchParams.selectedItem=p;var m={item:p,initialX:n.center.x,data:p.data};this.options.rtl?m.dragLeft=!0:m.dragRight=!0,this.touchParams.itemProps=[m],n.stopPropagation()}},{key:"_onDrag",value:function(n){var a=this;if(this.popup!=null&&this.options.showTooltips&&!this.popup.hidden){var o=this.body.dom.centerContainer,s=o.getBoundingClientRect();this.popup.setPosition(n.center.x-s.left+o.offsetLeft,n.center.y-s.top+o.offsetTop),this.popup.show()}if(this.touchParams.itemProps){var l;n.stopPropagation();var u=this,h=this.options.snap||null,f=this.body.dom.root.offsetLeft,c=this.options.rtl?f+this.body.domProps.right.width:f+this.body.domProps.left.width,d=this.body.util.getScale(),v=this.body.util.getStep(),g=this.touchParams.selectedItem,p=(this.options.editable.overrideItems||g.editable==null)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&g.editable!=null&&g.editable.updateGroup,m=null;if(p&&g&&g.data.group!=null){var _=u.groupFromTarget(n);_&&(m=this._getGroupIndex(_.groupId))}G(l=this.touchParams.itemProps).call(l,function(y){var w=u.body.util.toTime(n.center.x-c),T=u.body.util.toTime(y.initialX-c),S,x,E,I,A;a.options.rtl?S=-(w-T):S=w-T;var P=a._cloneItemData(y.item.data);if(!(y.item.editable!=null&&!y.item.editable.updateTime&&!y.item.editable.updateGroup&&!u.options.editable.overrideItems)){var D=(a.options.editable.overrideItems||g.editable==null)&&a.options.editable.updateTime||!a.options.editable.overrideItems&&g.editable!=null&&g.editable.updateTime;if(D){if(y.dragLeft)a.options.rtl?P.end!=null&&(E=b.convert(y.data.end,"Date"),A=new Date(E.valueOf()+S),P.end=h?h(A,d,v):A):P.start!=null&&(x=b.convert(y.data.start,"Date"),I=new Date(x.valueOf()+S),P.start=h?h(I,d,v):I);else if(y.dragRight)a.options.rtl?P.start!=null&&(x=b.convert(y.data.start,"Date"),I=new Date(x.valueOf()+S),P.start=h?h(I,d,v):I):P.end!=null&&(E=b.convert(y.data.end,"Date"),A=new Date(E.valueOf()+S),P.end=h?h(A,d,v):A);else if(P.start!=null)if(x=b.convert(y.data.start,"Date").valueOf(),I=new Date(x+S),P.end!=null){E=b.convert(y.data.end,"Date");var N=E.valueOf()-x.valueOf();P.start=h?h(I,d,v):I,P.end=new Date(P.start.valueOf()+N)}else P.start=h?h(I,d,v):I}if(p&&!y.dragLeft&&!y.dragRight&&m!=null&&P.group!=null){var j=m-y.groupOffset;j=Math.max(0,j),j=Math.min(u.groupIds.length-1,j),P.group=u.groupIds[j]}P=a._cloneItemData(P),u.options.onMoving(P,function(W){W&&y.item.setData(a._cloneItemData(W,"Date"))})}}),this.body.emitter.emit("_change")}}},{key:"_moveToGroup",value:function(n,a){var o=this.groups[a];if(o&&o.groupId!=n.data.group){var s=n.parent;s.remove(n),s.order(),n.data.group=o.groupId,o.add(n),o.order()}}},{key:"_onDragEnd",value:function(n){var a=this;if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){n.stopPropagation();var o=this,s=this.touchParams.itemProps;this.touchParams.itemProps=null,G(s).call(s,function(l){var u=l.item.id,h=o.itemsData.get(u)!=null;if(!h)o.options.onAdd(l.item.data,function(c){o._removeItem(l.item),c&&o.itemsData.add(c),o.body.emitter.emit("_change")});else{var f=a._cloneItemData(l.item.data);o.options.onMove(f,function(c){c?(c[a.itemsData.idProp]=u,a.itemsData.update(c)):(l.item.setData(l.data),o.body.emitter.emit("_change"))})}})}}},{key:"_onGroupClick",value:function(n){var a=this,o=this.groupFromTarget(n);Ae(function(){a.toggleGroupShowNested(o)},1)}},{key:"toggleGroupShowNested",value:function(n){var a,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(!(!n||!n.nestedGroups)){var s=this.groupsData.getDataSet();o!=null?n.showNested=!!o:n.showNested=!n.showNested;var l=s.get(n.groupId);l.showNested=n.showNested;for(var u=n.nestedGroups,h=u;h.length>0;){var f=h;h=[];for(var c=0;c<f.length;c++){var d=s.get(f[c]);d.nestedGroups&&(h=Ut(h).call(h,d.nestedGroups))}h.length>0&&(u=Ut(u).call(u,h))}var v=me(a=s.get(u)).call(a,function(g){return g.visible==null&&(g.visible=!0),g.visible=!!l.showNested,g});s.update(Ut(v).call(v,l)),l.showNested?(b.removeClassName(n.dom.label,"collapsed"),b.addClassName(n.dom.label,"expanded")):(b.removeClassName(n.dom.label,"expanded"),b.addClassName(n.dom.label,"collapsed"))}}},{key:"toggleGroupDragClassName",value:function(n){n.dom.label.classList.toggle("vis-group-is-dragging"),n.dom.foreground.classList.toggle("vis-group-is-dragging")}},{key:"_onGroupDragStart",value:function(n){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(n),this.groupTouchParams.group&&(n.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}},{key:"_onGroupDrag",value:function(n){if(this.options.groupEditable.order&&this.groupTouchParams.group){n.stopPropagation();var a=this.groupsData.getDataSet(),o=this.groupFromTarget(n);if(o&&o.height!=this.groupTouchParams.group.height){var s=o.top<this.groupTouchParams.group.top,l=n.center?n.center.y:n.clientY,u=o.dom.foreground.getBoundingClientRect(),h=this.groupTouchParams.group.height;if(s){if(u.top+h<l)return}else{var f=o.height;if(u.top+f-h>l)return}}if(o&&o!=this.groupTouchParams.group){var c=a.get(o.groupId),d=a.get(this.groupTouchParams.group.groupId);d&&c&&(this.options.groupOrderSwap(d,c,a),a.update(d),a.update(c));var v=a.getIds({order:this.options.groupOrder});if(!b.equalArray(v,this.groupTouchParams.originalOrder))for(var g=this.groupTouchParams.originalOrder,p=this.groupTouchParams.group.groupId,m=Math.min(g.length,v.length),_=0,y=0,w=0;_<m;){for(;_+y<m&&_+w<m&&v[_+y]==g[_+w];)_++;if(_+y>=m)break;if(v[_+y]==p)y=1;else if(g[_+w]==p)w=1;else{var T=Pt(v).call(v,g[_+w]),S=a.get(v[_+y]),x=a.get(g[_+w]);this.options.groupOrderSwap(S,x,a),a.update(S),a.update(x);var E=v[_+y];v[_+y]=g[_+w],v[T]=E,_++}}}}}},{key:"_onGroupDragEnd",value:function(n){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){n.stopPropagation();var a=this,o=a.groupTouchParams.group.groupId,s=a.groupsData.getDataSet(),l=b.extend({},s.get(o));a.options.onMoveGroup(l,function(u){if(u)u[s._idProp]=o,s.update(u);else{var h=s.getIds({order:a.options.groupOrder});if(!b.equalArray(h,a.groupTouchParams.originalOrder))for(var f=a.groupTouchParams.originalOrder,c=Math.min(f.length,h.length),d=0;d<c;){for(;d<c&&h[d]==f[d];)d++;if(d>=c)break;var v=Pt(h).call(h,f[d]),g=s.get(h[d]),p=s.get(f[d]);a.options.groupOrderSwap(g,p,s),s.update(g),s.update(p);var m=h[d];h[d]=f[d],h[v]=m,d++}}}),a.body.emitter.emit("groupDragged",{groupId:o}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}},{key:"_onSelectItem",value:function(n){if(!!this.options.selectable){var a=n.srcEvent&&(n.srcEvent.ctrlKey||n.srcEvent.metaKey),o=n.srcEvent&&n.srcEvent.shiftKey;if(a||o){this._onMultiSelectItem(n);return}var s=this.getSelection(),l=this.itemFromTarget(n),u=l&&l.selectable?[l.id]:[];this.setSelection(u);var h=this.getSelection();(h.length>0||s.length>0)&&this.body.emitter.emit("select",{items:h,event:n})}}},{key:"_onMouseOver",value:function(n){var a=this.itemFromTarget(n);if(!!a){var o=this.itemFromRelatedTarget(n);if(a!==o){var s=a.getTitle();if(this.options.showTooltips&&s){this.popup==null&&(this.popup=new u6(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(s);var l=this.body.dom.centerContainer,u=l.getBoundingClientRect();this.popup.setPosition(n.clientX-u.left+l.offsetLeft,n.clientY-u.top+l.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),this.popup!=null&&this.popup.hide();this.body.emitter.emit("itemover",{item:a.id,event:n})}}}},{key:"_onMouseOut",value:function(n){var a=this.itemFromTarget(n);if(!!a){var o=this.itemFromRelatedTarget(n);a!==o&&(this.clearPopupTimer(),this.popup!=null&&this.popup.hide(),this.body.emitter.emit("itemout",{item:a.id,event:n}))}}},{key:"_onMouseMove",value:function(n){var a=this.itemFromTarget(n);if(!!a&&(this.popupTimer!=null&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){var o=this.body.dom.centerContainer,s=o.getBoundingClientRect();this.popup.setPosition(n.clientX-s.left+o.offsetLeft,n.clientY-s.top+o.offsetTop),this.popup.show()}}},{key:"_onMouseWheel",value:function(n){this.touchParams.itemIsDragging&&this._onDragEnd(n)}},{key:"_onUpdateItem",value:function(n){if(!!this.options.selectable&&!(!this.options.editable.updateTime&&!this.options.editable.updateGroup)){var a=this;if(n){var o=a.itemsData.get(n.id);this.options.onUpdate(o,function(s){s&&a.itemsData.update(s)})}}}},{key:"_onDropObjectOnItem",value:function(n){var a=this.itemFromTarget(n),o=JSON.parse(n.dataTransfer.getData("text"));this.options.onDropObjectOnItem(o,a)}},{key:"_onAddItem",value:function(n){if(!!this.options.selectable&&!!this.options.editable.add){var a=this,o=this.options.snap||null,s=this.dom.frame.getBoundingClientRect(),l=this.options.rtl?s.right-n.center.x:n.center.x-s.left,u=this.body.util.toTime(l),h=this.body.util.getScale(),f=this.body.util.getStep(),c,d;n.type=="drop"?(d=JSON.parse(n.dataTransfer.getData("text")),d.content=d.content?d.content:"new item",d.start=d.start?d.start:o?o(u,h,f):u,d.type=d.type||"box",d[this.itemsData.idProp]=d.id||xs(),d.type=="range"&&!d.end&&(c=this.body.util.toTime(l+this.props.width/5),d.end=o?o(c,h,f):c)):(d={start:o?o(u,h,f):u,content:"new item"},d[this.itemsData.idProp]=xs(),this.options.type==="range"&&(c=this.body.util.toTime(l+this.props.width/5),d.end=o?o(c,h,f):c));var v=this.groupFromTarget(n);v&&(d.group=v.groupId),d=this._cloneItemData(d),this.options.onAdd(d,function(g){g&&(a.itemsData.add(g),n.type=="drop"&&a.setSelection([g.id]))})}}},{key:"_onMultiSelectItem",value:function(n){var a=this;if(!!this.options.selectable){var o=this.itemFromTarget(n);if(o){var s=this.options.multiselect?this.getSelection():[],l=n.srcEvent&&n.srcEvent.shiftKey||!1;if((l||this.options.sequentialSelection)&&this.options.multiselect){var u=this.itemsData.get(o.id).group,h=void 0;this.options.multiselectPerGroup&&s.length>0&&(h=this.itemsData.get(s[0]).group),(!this.options.multiselectPerGroup||h==null||h==u)&&s.push(o.id);var f=t._getItemRange(this.itemsData.get(s));if(!this.options.multiselectPerGroup||h==u){s=[];for(var c in this.items)if(this.items.hasOwnProperty(c)){var d=this.items[c],v=d.data.start,g=d.data.end!==void 0?d.data.end:v;v>=f.min&&g<=f.max&&(!this.options.multiselectPerGroup||h==this.itemsData.get(d.id).group)&&!(d instanceof fo)&&s.push(d.id)}}}else{var p=Pt(s).call(s,o.id);p==-1?s.push(o.id):kr(s).call(s,p,1)}var m=gt(s).call(s,function(_){return a.getItemById(_).selectable});this.setSelection(m),this.body.emitter.emit("select",{items:this.getSelection(),event:n})}}}},{key:"itemFromElement",value:function(n){for(var a=n;a;){if(a.hasOwnProperty("vis-item"))return a["vis-item"];a=a.parentNode}return null}},{key:"itemFromTarget",value:function(n){return this.itemFromElement(n.target)}},{key:"itemFromRelatedTarget",value:function(n){return this.itemFromElement(n.relatedTarget)}},{key:"groupFromTarget",value:function(n){var a=n.center?n.center.y:n.clientY,o=this.groupIds;o.length<=0&&this.groupsData&&(o=this.groupsData.getIds({order:this.options.groupOrder}));for(var s=0;s<o.length;s++){var l=o[s],u=this.groups[l],h=u.dom.foreground,f=h.getBoundingClientRect();if(a>=f.top&&a<f.top+h.offsetHeight)return u;if(this.options.orientation.item==="top"){if(s===this.groupIds.length-1&&a>f.top)return u}else if(s===0&&a<f.top+h.offset)return u}return null}},{key:"_cloneItemData",value:function(n,a){var o=b.extend({},n);return a||(a=this.itemsData.type),o.start!=null&&(o.start=b.convert(o.start,a&&a.start||"Date")),o.end!=null&&(o.end=b.convert(o.end,a&&a.end||"Date")),o}},{key:"_clusterItems",value:function(){if(!!this.options.cluster){var n=this.body.range.conversion(this.body.domProps.center.width),a=n.scale,o=this.clusterGenerator.getClusters(this.clusters,a,this.options.cluster);if(this.clusters!=o){if(this._detachAllClusters(),o){var s=co(o),l;try{for(s.s();!(l=s.n()).done;){var u=l.value;u.attach()}}catch(h){s.e(h)}finally{s.f()}this.clusters=o}this._updateClusters(o)}}}},{key:"_detachAllClusters",value:function(){if(this.options.cluster&&this.clusters&&this.clusters.length){var n=co(this.clusters),a;try{for(n.s();!(a=n.n()).done;){var o=a.value;o.detach()}}catch(s){n.e(s)}finally{n.f()}}}},{key:"_updateClusters",value:function(n){if(this.clusters&&this.clusters.length){var a,o=new Dc(me(n).call(n,function(p){return p.id})),s=gt(a=this.clusters).call(a,function(p){return!o.has(p.id)}),l=!1,u=co(s),h;try{for(u.s();!(h=u.n()).done;){var f,c=h.value,d=Pt(f=this.selection).call(f,c.id);if(d!==-1){var v;c.unselect(),kr(v=this.selection).call(v,d,1),l=!0}}}catch(p){u.e(p)}finally{u.f()}if(l){var g=this.getSelection();this.body.emitter.emit("select",{items:g,event})}}this.clusters=n||[]}}],[{key:"_getItemRange",value:function(n){var a=null,o=null;return G(n).call(n,function(s){(o==null||s.start<o)&&(o=s.start),s.end!=null?(a==null||s.end>a)&&(a=s.end):(a==null||s.start>a)&&(a=s.start)}),{min:o,max:a}}},{key:"itemSetFromTarget",value:function(n){for(var a=n.target;a;){if(a.hasOwnProperty("vis-itemset"))return a["vis-itemset"];a=a.parentNode}return null}}]),t}(Un);Ac.types={background:fo,box:e6,range:ho,point:n6};Ac.prototype._onAdd=Ac.prototype._onUpdate;var Nu=!1,Rx,Mc="background: #FFeeee; color: #dd0000",Dx=function(){function e(){Ct(this,e)}return Ot(e,null,[{key:"validate",value:function(t,i,n){Nu=!1,Rx=i;var a=i;return n!==void 0&&(a=i[n]),e.parse(t,a,[]),Nu}},{key:"parse",value:function(t,i,n){for(var a in t)t.hasOwnProperty(a)&&e.check(a,t,i,n)}},{key:"check",value:function(t,i,n,a){if(n[t]===void 0&&n.__any__===void 0){e.getSuggestion(t,n,a);return}var o=t,s=!0;n[t]===void 0&&n.__any__!==void 0&&(o="__any__",s=e.getType(i[t])==="object");var l=n[o];s&&l.__type__!==void 0&&(l=l.__type__),e.checkFields(t,i,n,o,l,a)}},{key:"checkFields",value:function(t,i,n,a,o,s){var l=function(c){console.log("%c"+c+e.printLocation(s,t),Mc)},u=e.getType(i[t]),h=o[u];h!==void 0?e.getType(h)==="array"&&Pt(h).call(h,i[t])===-1?(l('Invalid option detected in "'+t+'". Allowed values are:'+e.print(h)+' not "'+i[t]+'". '),Nu=!0):u==="object"&&a!=="__any__"&&(s=b.copyAndExtendArray(s,t),e.parse(i[t],n[a],s)):o.any===void 0&&(l('Invalid type received for "'+t+'". Expected: '+e.print(ye(o))+". Received ["+u+'] "'+i[t]+'"'),Nu=!0)}},{key:"getType",value:function(t){var i=ot(t);return i==="object"?t===null?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":ct(t)?"array":t instanceof Date?"date":t.nodeType!==void 0?"dom":t._isAMomentObject===!0?"moment":"object":i==="number"?"number":i==="boolean"?"boolean":i==="string"?"string":i===void 0?"undefined":i}},{key:"getSuggestion",value:function(t,i,n){var a=e.findInOptions(t,i,n,!1),o=e.findInOptions(t,Rx,[],!0),s=8,l=4,u;a.indexMatch!==void 0?u=" in "+e.printLocation(a.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+a.indexMatch+`"?

`:o.distance<=l&&a.distance>o.distance?u=" in "+e.printLocation(a.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""):a.distance<=s?u='. Did you mean "'+a.closestMatch+'"?'+e.printLocation(a.path,t):u=". Did you mean one of these: "+e.print(ye(i))+e.printLocation(n,t),console.log('%cUnknown option detected: "'+t+'"'+u,Mc),Nu=!0}},{key:"findInOptions",value:function(t,i,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,s="",l=[],u=t.toLowerCase(),h=void 0;for(var f in i){var c=void 0;if(i[f].__type__!==void 0&&a===!0){var d=e.findInOptions(t,i[f],b.copyAndExtendArray(n,f));o>d.distance&&(s=d.closestMatch,l=d.path,o=d.distance,h=d.indexMatch)}else{var v;Pt(v=f.toLowerCase()).call(v,u)!==-1&&(h=f),c=e.levenshteinDistance(t,f),o>c&&(s=f,l=b.copyArray(n),o=c)}}return{closestMatch:s,path:l,distance:o,indexMatch:h}}},{key:"printLocation",value:function(t,i){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,a=`

`+n+`options = {
`,o=0;o<t.length;o++){for(var s=0;s<o+1;s++)a+="  ";a+=t[o]+`: {
`}for(var l=0;l<t.length+1;l++)a+="  ";a+=i+`
`;for(var u=0;u<t.length+1;u++){for(var h=0;h<t.length-u;h++)a+="  ";a+=`}
`}return a+`

`}},{key:"print",value:function(t){return fr(t).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(t,i){if(t.length===0)return i.length;if(i.length===0)return t.length;var n=[],a;for(a=0;a<=i.length;a++)n[a]=[a];var o;for(o=0;o<=t.length;o++)n[0][o]=o;for(a=1;a<=i.length;a++)for(o=1;o<=t.length;o++)i.charAt(a-1)==t.charAt(o-1)?n[a][o]=n[a-1][o-1]:n[a][o]=Math.min(n[a-1][o-1]+1,Math.min(n[a][o-1]+1,n[a-1][o]+1));return n[i.length][t.length]}}]),e}(),rt="string",et="boolean",Nt="number",Ax="array",Ds="date",Jt="object",I6="dom",As="moment",Mx="any",P6={configure:{enabled:{boolean:et},filter:{boolean:et,function:"function"},container:{dom:I6},__type__:{object:Jt,boolean:et,function:"function"}},align:{string:rt},alignCurrentTime:{string:rt,undefined:"undefined"},rtl:{boolean:et,undefined:"undefined"},rollingMode:{follow:{boolean:et},offset:{number:Nt,undefined:"undefined"},__type__:{object:Jt}},onTimeout:{timeoutMs:{number:Nt},callback:{function:"function"},__type__:{object:Jt}},verticalScroll:{boolean:et,undefined:"undefined"},horizontalScroll:{boolean:et,undefined:"undefined"},autoResize:{boolean:et},throttleRedraw:{number:Nt},clickToUse:{boolean:et},dataAttributes:{string:rt,array:Ax},editable:{add:{boolean:et,undefined:"undefined"},remove:{boolean:et,undefined:"undefined"},updateGroup:{boolean:et,undefined:"undefined"},updateTime:{boolean:et,undefined:"undefined"},overrideItems:{boolean:et,undefined:"undefined"},__type__:{boolean:et,object:Jt}},end:{number:Nt,date:Ds,string:rt,moment:As},format:{minorLabels:{millisecond:{string:rt,undefined:"undefined"},second:{string:rt,undefined:"undefined"},minute:{string:rt,undefined:"undefined"},hour:{string:rt,undefined:"undefined"},weekday:{string:rt,undefined:"undefined"},day:{string:rt,undefined:"undefined"},week:{string:rt,undefined:"undefined"},month:{string:rt,undefined:"undefined"},year:{string:rt,undefined:"undefined"},__type__:{object:Jt,function:"function"}},majorLabels:{millisecond:{string:rt,undefined:"undefined"},second:{string:rt,undefined:"undefined"},minute:{string:rt,undefined:"undefined"},hour:{string:rt,undefined:"undefined"},weekday:{string:rt,undefined:"undefined"},day:{string:rt,undefined:"undefined"},week:{string:rt,undefined:"undefined"},month:{string:rt,undefined:"undefined"},year:{string:rt,undefined:"undefined"},__type__:{object:Jt,function:"function"}},__type__:{object:Jt}},moment:{function:"function"},groupHeightMode:{string:rt},groupOrder:{string:rt,function:"function"},groupEditable:{add:{boolean:et,undefined:"undefined"},remove:{boolean:et,undefined:"undefined"},order:{boolean:et,undefined:"undefined"},__type__:{boolean:et,object:Jt}},groupOrderSwap:{function:"function"},height:{string:rt,number:Nt},hiddenDates:{start:{date:Ds,number:Nt,string:rt,moment:As},end:{date:Ds,number:Nt,string:rt,moment:As},repeat:{string:rt},__type__:{object:Jt,array:Ax}},itemsAlwaysDraggable:{item:{boolean:et,undefined:"undefined"},range:{boolean:et,undefined:"undefined"},__type__:{boolean:et,object:Jt}},limitSize:{boolean:et},locale:{string:rt},locales:{__any__:{any:Mx},__type__:{object:Jt}},longSelectPressTime:{number:Nt},margin:{axis:{number:Nt},item:{horizontal:{number:Nt,undefined:"undefined"},vertical:{number:Nt,undefined:"undefined"},__type__:{object:Jt,number:Nt}},__type__:{object:Jt,number:Nt}},max:{date:Ds,number:Nt,string:rt,moment:As},maxHeight:{number:Nt,string:rt},maxMinorChars:{number:Nt},min:{date:Ds,number:Nt,string:rt,moment:As},minHeight:{number:Nt,string:rt},moveable:{boolean:et},multiselect:{boolean:et},multiselectPerGroup:{boolean:et},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:rt,undefined:"undefined"},item:{string:rt,undefined:"undefined"},__type__:{string:rt,object:Jt}},selectable:{boolean:et},sequentialSelection:{boolean:et},showCurrentTime:{boolean:et},showMajorLabels:{boolean:et},showMinorLabels:{boolean:et},showWeekScale:{boolean:et},stack:{boolean:et},stackSubgroups:{boolean:et},cluster:{maxItems:{number:Nt,undefined:"undefined"},titleTemplate:{string:rt,undefined:"undefined"},clusterCriteria:{function:"function",undefined:"undefined"},showStipes:{boolean:et,undefined:"undefined"},fitOnDoubleClick:{boolean:et,undefined:"undefined"},__type__:{boolean:et,object:Jt}},snap:{function:"function",null:"null"},start:{date:Ds,number:Nt,string:rt,moment:As},template:{function:"function"},loadingScreenTemplate:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:rt,function:"function"},showTooltips:{boolean:et},tooltip:{followMouse:{boolean:et},overflowMethod:{string:["cap","flip","none"]},delay:{number:Nt},template:{function:"function"},__type__:{object:Jt}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:et,object:Jt}},timeAxis:{scale:{string:rt,undefined:"undefined"},step:{number:Nt,undefined:"undefined"},__type__:{object:Jt}},type:{string:rt},width:{string:rt,number:Nt},preferZoom:{boolean:et},zoomable:{boolean:et},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:Nt},zoomMax:{number:Nt},zoomMin:{number:Nt},xss:{disabled:{boolean:et},filterOptions:{__any__:{any:Mx},__type__:{object:Jt}},__type__:{object:Jt}},__type__:{object:Jt}},k6={global:{align:["center","left","right"],alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],xss:{disabled:!1}}},R6={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},D6=function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;Ct(this,e),this.pixelRatio=r,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return Ot(e,[{key:"insertTo",value:function(t){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if(typeof t=="function")this.updateCallback=t;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(t){if(typeof t=="function")this.closeCallback=t;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(t){if(typeof t=="string")return R6[t]}},{key:"setColor",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t!=="none"){var n,a=this._isColorString(t);if(a!==void 0&&(t=a),b.isString(t)===!0){if(b.isValidRGB(t)===!0){var o=t.substr(4).substr(0,t.length-5).split(",");n={r:o[0],g:o[1],b:o[2],a:1}}else if(b.isValidRGBA(t)===!0){var s=t.substr(5).substr(0,t.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(b.isValidHex(t)===!0){var l=b.hexToRGB(t);n={r:l.r,g:l.g,b:l.b,a:1}}}else if(t instanceof Object&&t.r!==void 0&&t.g!==void 0&&t.b!==void 0){var u=t.a!==void 0?t.a:"1.0";n={r:t.r,g:t.g,b:t.b,a:u}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+fr(t));this._setColor(n,i)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i===!0&&(this.previousColor=b.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Ae(function(){t.closeCallback!==void 0&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i===!0&&(this.initialColor=b.extend({},t)),this.color=t;var n=b.RGBToHSV(t.r,t.g,t.b),a=2*Math.PI,o=this.r*n.s,s=this.centerCoordinates.x+o*Math.sin(a*n.h),l=this.centerCoordinates.y+o*Math.cos(a*n.h);this.colorPickerSelector.style.left=s-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var i=b.RGBToHSV(this.color.r,this.color.g,this.color.b);i.v=t/100;var n=b.HSVToRGB(i.h,i.s,i.v);n.a=this.color.a,this.color=n,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,i=b.RGBToHSV(t.r,t.g,t.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var a=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,a,o),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-i.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),_E(n).call(n),this.brightnessRange.value=100*i.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,i,n,a;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var s=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(u){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(u){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var l=this;this.opacityRange.onchange=function(){l._setOpacity(this.value)},this.opacityRange.oninput=function(){l._setOpacity(this.value)},this.brightnessRange.onchange=function(){l._setBrightness(this.value)},this.brightnessRange.oninput=function(){l._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=R(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=R(i=this._apply).call(i,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=R(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=R(a=this._loadLast).call(a,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new Le(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),QS(this.hammer,function(i){t._moveSelector(i)}),this.hammer.on("tap",function(i){t._moveSelector(i)}),this.hammer.on("panstart",function(i){t._moveSelector(i)}),this.hammer.on("panmove",function(i){t._moveSelector(i)}),this.hammer.on("panend",function(i){t._moveSelector(i)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,i,n);var a,o,s,l;this.centerCoordinates={x:i*.5,y:n*.5},this.r=.49*i;var u=2*Math.PI/360,h=1/360,f=1/this.r,c;for(s=0;s<360;s++)for(l=0;l<this.r;l++)a=this.centerCoordinates.x+l*Math.sin(u*s),o=this.centerCoordinates.y+l*Math.cos(u*s),c=b.HSVToRGB(s*h,l*f,1),t.fillStyle="rgb("+c.r+","+c.g+","+c.b+")",t.fillRect(a-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,i,n)}this.generated=!0}},{key:"_moveSelector",value:function(t){var i=this.colorPickerDiv.getBoundingClientRect(),n=t.center.x-i.left,a=t.center.y-i.top,o=.5*this.colorPickerDiv.clientHeight,s=.5*this.colorPickerDiv.clientWidth,l=n-s,u=a-o,h=Math.atan2(l,u),f=.98*Math.min(Math.sqrt(l*l+u*u),s),c=Math.cos(h)*f+o,d=Math.sin(h)*f+s;this.colorPickerSelector.style.top=c-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=d-.5*this.colorPickerSelector.clientWidth+"px";var v=h/(2*Math.PI);v=v<0?v+1:v;var g=f/this.r,p=b.RGBToHSV(this.color.r,this.color.g,this.color.b);p.h=v,p.s=g;var m=b.HSVToRGB(p.h,p.s,p.v);m.a=this.color.a,this.color=m,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}(),Lx=function(){function e(r,t,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;Ct(this,e),this.parent=r,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},b.extend(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new D6(n),this.wrapper=void 0}return Ot(e,[{key:"setOptions",value:function(t){if(t!==void 0){this.popupHistory={},this._removePopup();var i=!0;if(typeof t=="string")this.options.filter=t;else if(ct(t))this.options.filter=t.join();else if(ot(t)==="object"){if(t==null)throw new TypeError("options cannot be null");t.container!==void 0&&(this.options.container=t.container),gt(t)!==void 0&&(this.options.filter=gt(t)),t.showButton!==void 0&&(this.options.showButton=t.showButton),t.enabled!==void 0&&(i=t.enabled)}else typeof t=="boolean"?(this.options.filter=!0,i=t):typeof t=="function"&&(this.options.filter=t,i=!0);gt(this.options)===!1&&(i=!1),this.options.enabled=i}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=gt(this.options),i=0,n=!1;for(var a in this.configureOptions)this.configureOptions.hasOwnProperty(a)&&(this.allowCreation=!1,n=!1,typeof t=="function"?(n=t(a,[]),n=n||this._handleObject(this.configureOptions[a],[a],!0)):(t===!0||Pt(t).call(t,a)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,i>0&&this._makeItem([]),this._makeHeader(a),this._handleObject(this.configureOptions[a],[a])),i++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var i=this.moduleOptions,n=0;n<t.length;n++)if(i[t[n]]!==void 0)i=i[t[n]];else{i=void 0;break}return i}},{key:"_makeItem",value:function(t){if(this.allowCreation===!0){var i=document.createElement("div");i.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return G(a).call(a,function(s){i.appendChild(s)}),this.domElements.push(i),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var i=document.createElement("div");i.className="vis-configuration vis-config-header",i.innerHTML=b.xss(t),this._makeItem([],i)}},{key:"_makeLabel",value:function(t,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=document.createElement("div");return a.className="vis-configuration vis-config-label vis-config-s"+i.length,n===!0?a.innerHTML=b.xss("<i><b>"+t+":</b></i>"):a.innerHTML=b.xss(t+":"),a}},{key:"_makeDropdown",value:function(t,i,n){var a=document.createElement("select");a.className="vis-configuration vis-config-select";var o=0;i!==void 0&&Pt(t).call(t,i)!==-1&&(o=Pt(t).call(t,i));for(var s=0;s<t.length;s++){var l=document.createElement("option");l.value=t[s],s===o&&(l.selected="selected"),l.innerHTML=t[s],a.appendChild(l)}var u=this;a.onchange=function(){u._update(this.value,n)};var h=this._makeLabel(n[n.length-1],n);this._makeItem(n,h,a)}},{key:"_makeRange",value:function(t,i,n){var a=t[0],o=t[1],s=t[2],l=t[3],u=document.createElement("input");u.className="vis-configuration vis-config-range";try{u.type="range",u.min=o,u.max=s}catch(m){}u.step=l;var h="",f=0;if(i!==void 0){var c=1.2;i<0&&i*c<o?(u.min=Math.ceil(i*c),f=u.min,h="range increased"):i/c<o&&(u.min=Math.ceil(i/c),f=u.min,h="range increased"),i*c>s&&s!==1&&(u.max=Math.ceil(i*c),f=u.max,h="range increased"),u.value=i}else u.value=a;var d=document.createElement("input");d.className="vis-configuration vis-config-rangeinput",d.value=Number(u.value);var v=this;u.onchange=function(){d.value=this.value,v._update(Number(this.value),n)},u.oninput=function(){d.value=this.value};var g=this._makeLabel(n[n.length-1],n),p=this._makeItem(n,g,u,d);h!==""&&this.popupHistory[p]!==f&&(this.popupHistory[p]=f,this._setupPopup(h,p))}},{key:"_makeButton",value:function(){var t=this;if(this.options.showButton===!0){var i=document.createElement("div");i.className="vis-configuration vis-config-button",i.innerHTML="generate options",i.onclick=function(){t._printOptions()},i.onmouseover=function(){i.className="vis-configuration vis-config-button hover"},i.onmouseout=function(){i.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(i)}}},{key:"_setupPopup",value:function(t,i){var n=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var a=document.createElement("div");a.id="vis-configuration-popup",a.className="vis-configuration-popup",a.innerHTML=b.xss(t),a.onclick=function(){n._removePopup()},this.popupCounter+=1,this.popupDiv={html:a,index:i}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(this.popupDiv.html!==void 0){var i=this.domElements[this.popupDiv.index],n=i.getBoundingClientRect();this.popupDiv.html.style.left=n.left+"px",this.popupDiv.html.style.top=n.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Ae(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Ae(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,i,n){var a=document.createElement("input");a.type="checkbox",a.className="vis-configuration vis-config-checkbox",a.checked=t,i!==void 0&&(a.checked=i,i!==t&&(ot(t)==="object"?i!==t.enabled&&this.changedOptions.push({path:n,value:i}):this.changedOptions.push({path:n,value:i})));var o=this;a.onchange=function(){o._update(this.checked,n)};var s=this._makeLabel(n[n.length-1],n);this._makeItem(n,s,a)}},{key:"_makeTextInput",value:function(t,i,n){var a=document.createElement("input");a.type="text",a.className="vis-configuration vis-config-text",a.value=i,i!==t&&this.changedOptions.push({path:n,value:i});var o=this;a.onchange=function(){o._update(this.value,n)};var s=this._makeLabel(n[n.length-1],n);this._makeItem(n,s,a)}},{key:"_makeColorField",value:function(t,i,n){var a=this,o=t[1],s=document.createElement("div");i=i===void 0?o:i,i!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=i):s.className="vis-configuration vis-config-colorBlock none",i=i===void 0?o:i,s.onclick=function(){a._showColorPicker(i,s,n)};var l=this._makeLabel(n[n.length-1],n);this._makeItem(n,l,s)}},{key:"_showColorPicker",value:function(t,i,n){var a=this;i.onclick=function(){},this.colorPicker.insertTo(i),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(o){var s="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";i.style.backgroundColor=s,a._update(s,n)}),this.colorPicker.setCloseCallback(function(){i.onclick=function(){a._showColorPicker(t,i,n)}})}},{key:"_handleObject",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=!1,o=gt(this.options),s=!1;for(var l in t)if(t.hasOwnProperty(l)){a=!0;var u=t[l],h=b.copyAndExtendArray(i,l);if(typeof o=="function"&&(a=o(l,i),a===!1&&!ct(u)&&typeof u!="string"&&typeof u!="boolean"&&u instanceof Object&&(this.allowCreation=!1,a=this._handleObject(u,h,!0),this.allowCreation=n===!1)),a!==!1){s=!0;var f=this._getValue(h);if(ct(u))this._handleArray(u,f,h);else if(typeof u=="string")this._makeTextInput(u,f,h);else if(typeof u=="boolean")this._makeCheckbox(u,f,h);else if(u instanceof Object){var c=!0;if(Pt(i).call(i,"physics")!==-1&&this.moduleOptions.physics.solver!==l&&(c=!1),c===!0)if(u.enabled!==void 0){var d=b.copyAndExtendArray(h,"enabled"),v=this._getValue(d);if(v===!0){var g=this._makeLabel(l,h,!0);this._makeItem(h,g),s=this._handleObject(u,h)||s}else this._makeCheckbox(u,v,h)}else{var p=this._makeLabel(l,h,!0);this._makeItem(h,p),s=this._handleObject(u,h)||s}}else console.error("dont know how to handle",u,l,h)}}return s}},{key:"_handleArray",value:function(t,i,n){typeof t[0]=="string"&&t[0]==="color"?(this._makeColorField(t,i,n),t[1]!==i&&this.changedOptions.push({path:n,value:i})):typeof t[0]=="string"?(this._makeDropdown(t,i,n),t[0]!==i&&this.changedOptions.push({path:n,value:i})):typeof t[0]=="number"&&(this._makeRange(t,i,n),t[0]!==i&&this.changedOptions.push({path:n,value:Number(i)}))}},{key:"_update",value:function(t,i){var n=this._constructOptions(t,i);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}},{key:"_constructOptions",value:function(t,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n;t=t==="true"?!0:t,t=t==="false"?!1:t;for(var o=0;o<i.length;o++)i[o]!=="global"&&(a[i[o]]===void 0&&(a[i[o]]={}),o!==i.length-1?a=a[i[o]]:a[i[o]]=t);return n}},{key:"_printOptions",value:function(){var t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+fr(t,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var t={},i=0;i<this.changedOptions.length;i++)this._constructOptions(this.changedOptions[i].value,this.changedOptions[i].path,t);return t}}]),e}();function A6(e){var r=M6();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=V(i,arguments,a)}else n=i.apply(this,arguments);return lr(this,n)}}function M6(){if(typeof Reflect=="undefined"||!V||V.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(V(Boolean,[],function(){})),!0}catch(e){return!1}}var a8=function(e){sr(t,e);var r=A6(t);function t(i,n,a,o){var s,l,u,h,f,c,d,v;if(Ct(this,t),v=r.call(this),v.initTime=new Date,v.itemsDone=!1,!(Oe(v)instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!(ct(a)||zi("id",a))&&a instanceof Object){var g=o;o=a,a=g}o&&o.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var p=Oe(v);if(v.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:Ze},v.options=b.deepExtend({},v.defaultOptions),o&&b.setupXSSProtection(o.xss),v._create(i),!o||o&&typeof o.rtl=="undefined"){v.dom.root.style.visibility="hidden";for(var m,_=v.dom.root;!m&&_;)m=window.getComputedStyle(_,null).direction,_=_.parentElement;v.options.rtl=m&&m.toLowerCase()=="rtl"}else v.options.rtl=o.rtl;o&&(o.rollingMode&&(v.options.rollingMode=o.rollingMode),o.onInitialDrawComplete&&(v.options.onInitialDrawComplete=o.onInitialDrawComplete),o.onTimeout&&(v.options.onTimeout=o.onTimeout),o.loadingScreenTemplate&&(v.options.loadingScreenTemplate=o.loadingScreenTemplate));var y=document.createElement("div");if(v.options.loadingScreenTemplate){var w,T=R(w=v.options.loadingScreenTemplate).call(w,Oe(v)),S=T(v.dom.loadingScreen);S instanceof Object&&!(S instanceof Element)?T(y):S instanceof Element?(y.innerHTML="",y.appendChild(S)):S!=null&&(y.innerHTML=b.xss(S))}v.dom.loadingScreen.appendChild(y),v.components=[],v.body={dom:v.dom,domProps:v.props,emitter:{on:R(s=v.on).call(s,Oe(v)),off:R(l=v.off).call(l,Oe(v)),emit:R(u=v.emit).call(u,Oe(v))},hiddenDates:[],util:{getScale:function(){return p.timeAxis.step.scale},getStep:function(){return p.timeAxis.step.step},toScreen:R(h=p._toScreen).call(h,p),toGlobalScreen:R(f=p._toGlobalScreen).call(f,p),toTime:R(c=p._toTime).call(c,p),toGlobalTime:R(d=p._toGlobalTime).call(d,p)}},v.range=new KS(v.body,v.options),v.components.push(v.range),v.body.range=v.range,v.timeAxis=new Pc(v.body,v.options),v.timeAxis2=null,v.components.push(v.timeAxis),v.currentTime=new lx(v.body,v.options),v.components.push(v.currentTime),v.itemSet=new Ac(v.body,v.options),v.components.push(v.itemSet),v.itemsData=null,v.groupsData=null;function x(E,I){!p.hasListeners(E)||p.emit(E,p.getEventProperties(I))}return v.dom.root.onclick=function(E){x("click",E)},v.dom.root.ondblclick=function(E){x("doubleClick",E)},v.dom.root.oncontextmenu=function(E){x("contextmenu",E)},v.dom.root.onmouseover=function(E){x("mouseOver",E)},window.PointerEvent?(v.dom.root.onpointerdown=function(E){x("mouseDown",E)},v.dom.root.onpointermove=function(E){x("mouseMove",E)},v.dom.root.onpointerup=function(E){x("mouseUp",E)}):(v.dom.root.onmousemove=function(E){x("mouseMove",E)},v.dom.root.onmousedown=function(E){x("mouseDown",E)},v.dom.root.onmouseup=function(E){x("mouseUp",E)}),v.initialFitDone=!1,v.on("changed",function(){if(p.itemsData!=null){if(!p.initialFitDone&&!p.options.rollingMode)if(p.initialFitDone=!0,p.options.start!=null||p.options.end!=null){if(p.options.start==null||p.options.end==null)var E=p.getItemRange();var I=p.options.start!=null?p.options.start:E.min,A=p.options.end!=null?p.options.end:E.max;p.setWindow(I,A,{animation:!1})}else p.fit({animation:!1});!p.initialDrawDone&&(p.initialRangeChangeDone||!p.options.start&&!p.options.end||p.options.rollingMode)&&(p.initialDrawDone=!0,p.itemSet.initialDrawDone=!0,p.dom.root.style.visibility="visible",p.dom.loadingScreen.parentNode.removeChild(p.dom.loadingScreen),p.options.onInitialDrawComplete&&Ae(function(){return p.options.onInitialDrawComplete()},0))}}),v.on("destroyTimeline",function(){p.destroy()}),o&&v.setOptions(o),v.body.emitter.on("fit",function(E){v._onFit(E),v.redraw()}),a&&v.setGroups(a),n&&v.setItems(n),v._redraw(),v}return Ot(t,[{key:"_createConfigurator",value:function(){return new Lx(this,this.dom.container,k6)}},{key:"redraw",value:function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()}},{key:"setOptions",value:function(n){var a=Dx.validate(n,P6);if(a===!0&&console.log("%cErrors have been found in the supplied options object.",Mc),Ps.prototype.setOptions.call(this,n),"type"in n&&n.type!==this.options.type){this.options.type=n.type;var o=this.itemsData;if(o){var s=this.getSelection();this.setItems(null),this.setItems(o.rawDS),this.setSelection(s)}}}},{key:"setItems",value:function(n){this.itemsDone=!1;var a;n?zi("id",n)?a=Cs(n):a=Cs(new Ko(n)):a=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=a,this.itemSet&&this.itemSet.setItems(a!=null?a.rawDS:null)}},{key:"setGroups",value:function(n){var a,o=function(l){return l.visible!==!1};n?(ct(n)&&(n=new Ko(n)),a=new G2(n,{filter:o})):a=null,this.groupsData!=null&&typeof this.groupsData.setData=="function"&&this.groupsData.setData(null),this.groupsData=a,this.itemSet.setGroups(a)}},{key:"setData",value:function(n){n&&n.groups&&this.setGroups(n.groups),n&&n.items&&this.setItems(n.items)}},{key:"setSelection",value:function(n,a){this.itemSet&&this.itemSet.setSelection(n),a&&a.focus&&this.focus(n,a)}},{key:"getSelection",value:function(){return this.itemSet&&this.itemSet.getSelection()||[]}},{key:"focus",value:function(n,a){if(!(!this.itemsData||n==null)){var o=ct(n)?n:[n],s=this.itemsData.get(o),l=null,u=null;if(G(s).call(s,function(T){var S=T.start.valueOf(),x="end"in T?T.end.valueOf():T.start.valueOf();(l===null||S<l)&&(l=S),(u===null||x>u)&&(u=x)}),l!==null&&u!==null){var h=this,f=this.itemSet.items[o[0]],c=this._getScrollTop()*-1,d=null,v=function(S,x,E){var I=Fx(h,f);if(I!==!1&&(d||(d=I),!(d.itemTop==I.itemTop&&!d.shouldScroll))){d.itemTop!=I.itemTop&&I.shouldScroll&&(d=I,c=h._getScrollTop()*-1);var A=c,P=d.scrollOffset,D=E?P:A+(P-A)*S;h._setScrollTop(-D),x||h._redraw()}},g=function(){var S=Fx(h,f);S.shouldScroll&&S.itemTop!=d.itemTop&&(h._setScrollTop(-S.scrollOffset),h._redraw())},p=function(){g(),Ae(g,100)},m=a&&a.zoom!==void 0?a.zoom:!0,_=(l+u)/2,y=m?(u-l)*1.1:Math.max(this.range.end-this.range.start,(u-l)*1.1),w=a&&a.animation!==void 0?a.animation:!0;w||(d={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.setRange(_-y/2,_+y/2,{animation:w},p,v)}}}},{key:"fit",value:function(n,a){var o=n&&n.animation!==void 0?n.animation:!0,s;this.itemsData.length===1&&this.itemsData.get()[0].end===void 0?(s=this.getDataRange(),this.moveTo(s.min.valueOf(),{animation:o},a)):(s=this.getItemRange(),this.range.setRange(s.min,s.max,{animation:o},a))}},{key:"getItemRange",value:function(){var n=this,a=this.getDataRange(),o=a.min!==null?a.min.valueOf():null,s=a.max!==null?a.max.valueOf():null,l=null,u=null;if(o!=null&&s!=null){var h=s-o;h<=0&&(h=10);var f=h/this.props.center.width,c={},d=0;G(b).call(b,this.itemSet.items,function(w,T){if(w.groupShowing){var S=!0;c[T]=w.redraw(S),d=c[T].length}});var v=d>0;if(v)for(var g=function(T){G(b).call(b,c,function(S){S[T]()})},p=0;p<d;p++)g(p);if(G(b).call(b,this.itemSet.items,function(w){var T=Yg(w),S=jg(w),x,E;n.options.rtl?(x=T-(w.getWidthRight()+10)*f,E=S+(w.getWidthLeft()+10)*f):(x=T-(w.getWidthLeft()+10)*f,E=S+(w.getWidthRight()+10)*f),x<o&&(o=x,l=w),E>s&&(s=E,u=w)}),l&&u){var m=l.getWidthLeft()+10,_=u.getWidthRight()+10,y=this.props.center.width-m-_;y>0&&(this.options.rtl?(o=Yg(l)-_*h/y,s=jg(u)+m*h/y):(o=Yg(l)-m*h/y,s=jg(u)+_*h/y))}}return{min:o!=null?new Date(o):null,max:s!=null?new Date(s):null}}},{key:"getDataRange",value:function(){var n=null,a=null;if(this.itemsData){var o;G(o=this.itemsData).call(o,function(s){var l=b.convert(s.start,"Date").valueOf(),u=b.convert(s.end!=null?s.end:s.start,"Date").valueOf();(n===null||l<n)&&(n=l),(a===null||u>a)&&(a=u)})}return{min:n!=null?new Date(n):null,max:a!=null?new Date(a):null}}},{key:"getEventProperties",value:function(n){var a=n.center?n.center.x:n.clientX,o=n.center?n.center.y:n.clientY,s=this.dom.centerContainer.getBoundingClientRect(),l=this.options.rtl?s.right-a:a-s.left,u=o-s.top,h=this.itemSet.itemFromTarget(n),f=this.itemSet.groupFromTarget(n),c=Ng.customTimeFromTarget(n),d=this.itemSet.options.snap||null,v=this.body.util.getScale(),g=this.body.util.getStep(),p=this._toTime(l),m=d?d(p,v,g):p,_=b.getTarget(n),y=null;return h!=null?y="item":c!=null?y="custom-time":b.hasParent(_,this.timeAxis.dom.foreground)||this.timeAxis2&&b.hasParent(_,this.timeAxis2.dom.foreground)?y="axis":b.hasParent(_,this.itemSet.dom.labelSet)?y="group-label":b.hasParent(_,this.currentTime.bar)?y="current-time":b.hasParent(_,this.dom.center)&&(y="background"),{event:n,item:h?h.id:null,isCluster:h?!!h.isCluster:!1,items:h?h.items||[]:null,group:f?f.groupId:null,customTime:c?c.options.id:null,what:y,pageX:n.srcEvent?n.srcEvent.pageX:n.pageX,pageY:n.srcEvent?n.srcEvent.pageY:n.pageY,x:l,y:u,time:p,snappedTime:m}}},{key:"toggleRollingMode",value:function(){this.range.rolling?this.range.stopRolling():(this.options.rollingMode==null&&this.setOptions(this.options),this.range.startRolling())}},{key:"_redraw",value:function(){Ps.prototype._redraw.call(this)}},{key:"_onFit",value:function(n){var a=n.start,o=n.end,s=n.animation;o?this.range.setRange(a,o,{animation:s}):this.moveTo(a.valueOf(),{animation:s})}}]),t}(Ps);function Yg(e){return b.convert(e.data.start,"Date").valueOf()}function jg(e){var r=e.data.end!=null?e.data.end:e.data.start;return b.convert(r,"Date").valueOf()}function Fx(e,r){if(!r.parent)return!1;var t=e.options.rtl?e.props.rightContainer.height:e.props.leftContainer.height,i=e.props.center.height,n=r.parent,a=n.top,o=!0,s=e.timeAxis.options.orientation.axis,l=function(){return s=="bottom"?n.height-r.top-r.height:r.top},u=e._getScrollTop()*-1,h=a+l(),f=r.height;return h<u?a+t<=a+l()+f&&(a+=l()-e.itemSet.options.margin.item.vertical):h+f>u+t?a+=l()+f-t+e.itemSet.options.margin.item.vertical:o=!1,a=Math.min(a,i-t),{shouldScroll:o,scrollOffset:a,itemTop:h}}function Xn(e){for(var r in e)e.hasOwnProperty(r)&&(e[r].redundant=e[r].used,e[r].used=[])}function Mr(e){for(var r in e)if(e.hasOwnProperty(r)&&e[r].redundant){for(var t=0;t<e[r].redundant.length;t++)e[r].redundant[t].parentNode.removeChild(e[r].redundant[t]);e[r].redundant=[]}}function L6(e){Xn(e),Mr(e),Xn(e)}function Kr(e,r,t){var i;return r.hasOwnProperty(e)?r[e].redundant.length>0?(i=r[e].redundant[0],r[e].redundant.shift()):(i=document.createElementNS("http://www.w3.org/2000/svg",e),t.appendChild(i)):(i=document.createElementNS("http://www.w3.org/2000/svg",e),r[e]={used:[],redundant:[]},t.appendChild(i)),r[e].used.push(i),i}function Wg(e,r,t,i){var n;return r.hasOwnProperty(e)?r[e].redundant.length>0?(n=r[e].redundant[0],r[e].redundant.shift()):(n=document.createElement(e),i!==void 0?t.insertBefore(n,i):t.appendChild(n)):(n=document.createElement(e),r[e]={used:[],redundant:[]},i!==void 0?t.insertBefore(n,i):t.appendChild(n)),r[e].used.push(n),n}function Ms(e,r,t,i,n,a){var o;if(t.style=="circle"?(o=Kr("circle",i,n),o.setAttributeNS(null,"cx",e),o.setAttributeNS(null,"cy",r),o.setAttributeNS(null,"r",.5*t.size)):(o=Kr("rect",i,n),o.setAttributeNS(null,"x",e-.5*t.size),o.setAttributeNS(null,"y",r-.5*t.size),o.setAttributeNS(null,"width",t.size),o.setAttributeNS(null,"height",t.size)),t.styles!==void 0&&o.setAttributeNS(null,"style",t.styles),o.setAttributeNS(null,"class",t.className+" vis-point"),a){var s=Kr("text",i,n);a.xOffset&&(e=e+a.xOffset),a.yOffset&&(r=r+a.yOffset),a.content&&(s.textContent=a.content),a.className&&s.setAttributeNS(null,"class",a.className+" vis-label"),s.setAttributeNS(null,"x",e),s.setAttributeNS(null,"y",r)}return o}function Hg(e,r,t,i,n,a,o,s){if(i!=0){i<0&&(i*=-1,r-=i);var l=Kr("rect",a,o);l.setAttributeNS(null,"x",e-.5*t),l.setAttributeNS(null,"y",r),l.setAttributeNS(null,"width",t),l.setAttributeNS(null,"height",i),l.setAttributeNS(null,"class",n),s&&l.setAttributeNS(null,"style",s)}}function F6(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch(e){return"en"}}var N6=function(){function e(r,t,i,n,a,o){var s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;if(Ct(this,e),this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=a,this.majorCharHeight=o,this._start=r,this._end=t,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=s,this.autoScaleStart=i,this.autoScaleEnd=n,this.formattingFunction=l,i||n){var u=this,h=function(c){var d=c-c%(u.magnitudefactor*u.minorSteps[u.minorStepIdx]);return c%(u.magnitudefactor*u.minorSteps[u.minorStepIdx])>.5*(u.magnitudefactor*u.minorSteps[u.minorStepIdx])?d+u.magnitudefactor*u.minorSteps[u.minorStepIdx]:d};i&&(this._start-=this.magnitudefactor*2*this.minorSteps[this.minorStepIdx],this._start=h(this._start)),n&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=h(this._end)),this.determineScale()}}return Ot(e,[{key:"setCharHeight",value:function(t){this.majorCharHeight=t}},{key:"setHeight",value:function(t){this.containerHeight=t}},{key:"determineScale",value:function(){var t=this._end-this._start;this.scale=this.containerHeight/t;var i=this.majorCharHeight/this.scale,n=t>0?Math.round(Math.log(t)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,n);var a=0;n<0&&(a=n);for(var o=!1,s=a;Math.abs(s)<=Math.abs(n);s++){this.magnitudefactor=Math.pow(10,s);for(var l=0;l<this.minorSteps.length;l++){var u=this.magnitudefactor*this.minorSteps[l];if(u>=i){o=!0,this.minorStepIdx=l;break}}if(o===!0)break}}},{key:"is_major",value:function(t){return t%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])==0}},{key:"getStep",value:function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}},{key:"getFirstMajor",value:function(){var t=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(t-this._start%t)%t)}},{key:"formatValue",value:function(t){var i=t.toPrecision(5);return typeof this.formattingFunction=="function"&&(i=this.formattingFunction(t)),typeof i=="number"?"".concat(i):typeof i=="string"?i:t.toPrecision(5)}},{key:"getLines",value:function(){for(var t=[],i=this.getStep(),n=(i-this._start%i)%i,a=this._start+n;this._end-a>1e-5;a+=i)a!=this._start&&t.push({major:this.is_major(a),y:this.convertValue(a),val:this.formatValue(a)});return t}},{key:"followScale",value:function(t){var i=this.minorStepIdx,n=this._start,a=this._end,o=this,s=function(){o.magnitudefactor*=2},l=function(){o.magnitudefactor/=2};t.minorStepIdx<=1&&this.minorStepIdx<=1||t.minorStepIdx>1&&this.minorStepIdx>1||(t.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,i==2||s(),s()):(this.minorStepIdx=2,i==1||l(),l()));for(var u=t.convertValue(0),h=t.getStep()*t.scale,f=!1,c=0;!f&&c++<5;){this.scale=h/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var d=this.containerHeight/this.scale;this._start=n,this._end=this._start+d;var v=this._end*this.scale,g=this.magnitudefactor*this.majorSteps[this.minorStepIdx],p=this.getFirstMajor()-t.getFirstMajor();if(this.zeroAlign){var m=u-v;this._end+=m/this.scale,this._start=this._end-d}else this.autoScaleStart?(this._start-=p/this.scale,this._end=this._start+d):(this._start+=g-p/this.scale,this._end=this._start+d);if(!this.autoScaleEnd&&this._end>a+1e-5){l(),f=!1;continue}if(!this.autoScaleStart&&this._start<n-1e-5)if(this.zeroAlign&&n>=0)console.warn("Can't adhere to given 'min' range, due to zeroalign");else{l(),f=!1;continue}if(this.autoScaleStart&&this.autoScaleEnd&&d<a-n){s(),f=!1;continue}f=!0}}},{key:"convertValue",value:function(t){return this.containerHeight-(t-this._start)*this.scale}},{key:"screenToValue",value:function(t){return(this.containerHeight-t)/this.scale+this._start}}]),e}();function $6(e,r){var t=typeof Ja!="undefined"&&Wn(e)||e["@@iterator"];if(!t){if(ct(e)||(t=G6(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(o)throw s}}}}function G6(e,r){var t;if(!!e){if(typeof e=="string")return Nx(e,r);var i=Pr(t=Object.prototype.toString.call(e)).call(t,8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return ds(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Nx(e,r)}}function Nx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function Y6(e){var r=j6();return function(){var i=It(e),n;if(r){var a=It(this).constructor;n=V(i,arguments,a)}else n=i.apply(this,arguments);return lr(this,n)}}function j6(){if(typeof Reflect=="undefined"||!V||V.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(V(Boolean,[],function(){})),!0}catch(e){return!1}}var $x=function(e){sr(t,e);var r=Y6(t);function t(i,n,a,o){var s;Ct(this,t),s=r.call(this),s.id=xs(),s.body=i,s.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(h){return"".concat(Ec(h.toPrecision(3)))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:function(h){return"".concat(Ec(h.toPrecision(3)))},title:{text:void 0,style:void 0}}},s.linegraphOptions=o,s.linegraphSVG=a,s.props={},s.DOMelements={lines:{},labels:{},title:{}},s.dom={},s.scale=void 0,s.range={start:0,end:0},s.options=b.extend({},s.defaultOptions),s.conversionFactor=1,s.setOptions(n),s.width=Number("".concat(s.options.width).replace("px","")),s.minWidth=s.width,s.height=s.linegraphSVG.getBoundingClientRect().height,s.hidden=!1,s.stepPixels=25,s.zeroCrossing=-1,s.amountOfSteps=-1,s.lineOffset=0,s.master=!0,s.masterAxis=null,s.svgElements={},s.iconsRemoved=!1,s.groups={},s.amountOfGroups=0,s._create(),s.scale==null&&s._redrawLabels(),s.framework={svg:s.svg,svgElements:s.svgElements,options:s.options,groups:s.groups};var l=Oe(s);return s.body.emitter.on("verticalDrag",function(){l.dom.lineContainer.style.top="".concat(l.body.domProps.scrollTop,"px")}),s}return Ot(t,[{key:"addGroup",value:function(n,a){this.groups.hasOwnProperty(n)||(this.groups[n]=a),this.amountOfGroups+=1}},{key:"updateGroup",value:function(n,a){this.groups.hasOwnProperty(n)||(this.amountOfGroups+=1),this.groups[n]=a}},{key:"removeGroup",value:function(n){this.groups.hasOwnProperty(n)&&(delete this.groups[n],this.amountOfGroups-=1)}},{key:"setOptions",value:function(n){if(n){var a=!1;this.options.orientation!=n.orientation&&n.orientation!==void 0&&(a=!0);var o=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];b.selectiveDeepExtend(o,this.options,n),this.minWidth=Number("".concat(this.options.width).replace("px","")),a===!0&&this.dom.frame&&(this.hide(),this.show())}}},{key:"_create",value:function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}},{key:"_redrawGroupIcons",value:function(){Xn(this.svgElements);var n,a=this.options.iconWidth,o=15,s=4,l=s+.5*o;this.options.orientation==="left"?n=s:n=this.width-a-s;var u=ye(this.groups);Pe(u).call(u,function(d,v){return d<v?-1:1});var h=$6(u),f;try{for(h.s();!(f=h.n()).done;){var c=f.value;this.groups[c].visible===!0&&(this.linegraphOptions.visibility[c]===void 0||this.linegraphOptions.visibility[c]===!0)&&(this.groups[c].getLegend(a,o,this.framework,n,l),l+=o+s)}}catch(d){h.e(d)}finally{h.f()}Mr(this.svgElements),this.iconsRemoved=!1}},{key:"_cleanupIcons",value:function(){this.iconsRemoved===!1&&(Xn(this.svgElements),Mr(this.svgElements),this.iconsRemoved=!0)}},{key:"show",value:function(){this.hidden=!1,this.dom.frame.parentNode||(this.options.orientation==="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}},{key:"hide",value:function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}},{key:"setRange",value:function(n,a){this.range.start=n,this.range.end=a}},{key:"redraw",value:function(){var n=!1,a=0;this.dom.lineContainer.style.top="".concat(this.body.domProps.scrollTop,"px");for(var o in this.groups)this.groups.hasOwnProperty(o)&&this.groups[o].visible===!0&&(this.linegraphOptions.visibility[o]===void 0||this.linegraphOptions.visibility[o]===!0)&&a++;if(this.amountOfGroups===0||a===0)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height="".concat(this.height,"px"),this.width=this.options.visible===!0?Number("".concat(this.options.width).replace("px","")):0;var s=this.props,l=this.dom.frame;l.className="vis-data-axis",this._calculateCharSize();var u=this.options.orientation,h=this.options.showMinorLabels,f=this.options.showMajorLabels,c=this.body.dom.backgroundHorizontal.offsetWidth;s.minorLabelHeight=h?s.minorCharHeight:0,s.majorLabelHeight=f?s.majorCharHeight:0,s.minorLineWidth=c-this.lineOffset-this.width+2*this.options.minorLinesOffset,s.minorLineHeight=1,s.majorLineWidth=c-this.lineOffset-this.width+2*this.options.majorLinesOffset,s.majorLineHeight=1,u==="left"?(l.style.top="0",l.style.left="0",l.style.bottom="",l.style.width="".concat(this.width,"px"),l.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(l.style.top="",l.style.bottom="0",l.style.left="0",l.style.width="".concat(this.width,"px"),l.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),n=this._redrawLabels(),n=this._isResized()||n,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(u)}return n}},{key:"_redrawLabels",value:function(){var n=this,a=!1;Xn(this.DOMelements.lines),Xn(this.DOMelements.labels);var o=this.options.orientation,s=this.options[o].range!=null?this.options[o].range:{},l=!0;s.max!=null&&(this.range.end=s.max,l=!1);var u=!0;s.min!=null&&(this.range.start=s.min,u=!1),this.scale=new N6(this.range.start,this.range.end,u,l,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[o].format),this.master===!1&&this.masterAxis!=null?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0;var h=this.scale.getLines();G(h).call(h,function(d){var v=d.y,g=d.major;n.options.showMinorLabels&&g===!1&&n._redrawLabel(v-2,d.val,o,"vis-y-axis vis-minor",n.props.minorCharHeight),g&&v>=0&&n._redrawLabel(v-2,d.val,o,"vis-y-axis vis-major",n.props.majorCharHeight),n.master===!0&&(g?n._redrawLine(v,o,"vis-grid vis-horizontal vis-major",n.options.majorLinesOffset,n.props.majorLineWidth):n._redrawLine(v,o,"vis-grid vis-horizontal vis-minor",n.options.minorLinesOffset,n.props.minorLineWidth))});var f=0;this.options[o].title!==void 0&&this.options[o].title.text!==void 0&&(f=this.props.titleCharHeight);var c=this.options.icons===!0?Math.max(this.options.iconWidth,f)+this.options.labelOffsetX+15:f+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-c&&this.options.visible===!0?(this.width=this.maxLabelSize+c,this.options.width="".concat(this.width,"px"),Mr(this.DOMelements.lines),Mr(this.DOMelements.labels),this.redraw(),a=!0):this.maxLabelSize<this.width-c&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+c),this.options.width="".concat(this.width,"px"),Mr(this.DOMelements.lines),Mr(this.DOMelements.labels),this.redraw(),a=!0):(Mr(this.DOMelements.lines),Mr(this.DOMelements.labels),a=!1),a}},{key:"convertValue",value:function(n){return this.scale.convertValue(n)}},{key:"screenToValue",value:function(n){return this.scale.screenToValue(n)}},{key:"_redrawLabel",value:function(n,a,o,s,l){var u=Wg("div",this.DOMelements.labels,this.dom.frame);u.className=s,u.innerHTML=b.xss(a),o==="left"?(u.style.left="-".concat(this.options.labelOffsetX,"px"),u.style.textAlign="right"):(u.style.right="-".concat(this.options.labelOffsetX,"px"),u.style.textAlign="left"),u.style.top="".concat(n-.5*l+this.options.labelOffsetY,"px"),a+="";var h=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<a.length*h&&(this.maxLabelSize=a.length*h)}},{key:"_redrawLine",value:function(n,a,o,s,l){if(this.master===!0){var u=Wg("div",this.DOMelements.lines,this.dom.lineContainer);u.className=o,u.innerHTML="",a==="left"?u.style.left="".concat(this.width-s,"px"):u.style.right="".concat(this.width-s,"px"),u.style.width="".concat(l,"px"),u.style.top="".concat(n,"px")}}},{key:"_redrawTitle",value:function(n){if(Xn(this.DOMelements.title),this.options[n].title!==void 0&&this.options[n].title.text!==void 0){var a=Wg("div",this.DOMelements.title,this.dom.frame);a.className="vis-y-axis vis-title vis-".concat(n),a.innerHTML=b.xss(this.options[n].title.text),this.options[n].title.style!==void 0&&b.addCssText(a,this.options[n].title.style),n==="left"?a.style.left="".concat(this.props.titleCharHeight,"px"):a.style.right="".concat(this.props.titleCharHeight,"px"),a.style.width="".concat(this.height,"px")}Mr(this.DOMelements.title)}},{key:"_calculateCharSize",value:function(){if(!("minorCharHeight"in this.props)){var n=document.createTextNode("0"),a=document.createElement("div");a.className="vis-y-axis vis-minor vis-measure",a.appendChild(n),this.dom.frame.appendChild(a),this.props.minorCharHeight=a.clientHeight,this.props.minorCharWidth=a.clientWidth,this.dom.frame.removeChild(a)}if(!("majorCharHeight"in this.props)){var o=document.createTextNode("0"),s=document.createElement("div");s.className="vis-y-axis vis-major vis-measure",s.appendChild(o),this.dom.frame.appendChild(s),this.props.majorCharHeight=s.clientHeight,this.props.majorCharWidth=s.clientWidth,this.dom.frame.removeChild(s)}if(!("titleCharHeight"in this.props)){var l=document.createTextNode("0"),u=document.createElement("div");u.className="vis-y-axis vis-title vis-measure",u.appendChild(l),this.dom.frame.appendChild(u),this.props.titleCharHeight=u.clientHeight,this.props.titleCharWidth=u.clientWidth,this.dom.frame.removeChild(u)}}}]),t}(Un);function $u(e,r){}$u.draw=function(e,r,t,i){i=i||0;for(var n=W6(t,r),a=0;a<e.length;a++)if(!n)Ms(e[a].screen_x+i,e[a].screen_y,Bg(r),t.svgElements,t.svg,e[a].label);else{var o=n(e[a],r);(o===!0||ot(o)==="object")&&Ms(e[a].screen_x+i,e[a].screen_y,Bg(r,o),t.svgElements,t.svg,e[a].label)}};$u.drawIcon=function(e,r,t,i,n,a){var o=n*.5,s=Kr("rect",a.svgElements,a.svg);s.setAttributeNS(null,"x",r),s.setAttributeNS(null,"y",t-o),s.setAttributeNS(null,"width",i),s.setAttributeNS(null,"height",2*o),s.setAttributeNS(null,"class","vis-outline"),Ms(r+.5*i,t,Bg(e),a.svgElements,a.svg)};function Bg(e,r){return r=typeof r=="undefined"?{}:r,{style:r.style||e.options.drawPoints.style,styles:r.styles||e.options.drawPoints.styles,size:r.size||e.options.drawPoints.size,className:r.className||e.className}}function W6(e,r){var t=void 0;return e.options&&e.options.drawPoints&&e.options.drawPoints.onRender&&typeof e.options.drawPoints.onRender=="function"&&(t=e.options.drawPoints.onRender),r.group.options&&r.group.options.drawPoints&&r.group.options.drawPoints.onRender&&typeof r.group.options.drawPoints.onRender=="function"&&(t=r.group.options.drawPoints.onRender),t}function Fe(e,r){}Fe.drawIcon=function(e,r,t,i,n,a){var o=n*.5,s=Kr("rect",a.svgElements,a.svg);s.setAttributeNS(null,"x",r),s.setAttributeNS(null,"y",t-o),s.setAttributeNS(null,"width",i),s.setAttributeNS(null,"height",2*o),s.setAttributeNS(null,"class","vis-outline");var l=Math.round(.3*i),u=e.options.barChart.width,h=u/l,f=Math.round(.4*n),c=Math.round(.75*n),d=Math.round((i-2*l)/3);if(Hg(r+.5*l+d,t+o-f-1,l,f,e.className+" vis-bar",a.svgElements,a.svg,e.style),Hg(r+1.5*l+d+2,t+o-c-1,l,c,e.className+" vis-bar",a.svgElements,a.svg,e.style),e.options.drawPoints.enabled==!0){var v={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size/h,className:e.className};Ms(r+.5*l+d,t+o-f-1,v,a.svgElements,a.svg),Ms(r+1.5*l+d+2,t+o-c-1,v,a.svgElements,a.svg)}};Fe.draw=function(e,r,t){var i=[],n={},a,o,s,l,u,h,f=0;for(u=0;u<e.length;u++)if(l=t.groups[e[u]],l.options.style==="bar"&&l.visible===!0&&(t.options.groups.visibility[e[u]]===void 0||t.options.groups.visibility[e[u]]===!0))for(h=0;h<r[e[u]].length;h++)i.push({screen_x:r[e[u]][h].screen_x,screen_end:r[e[u]][h].screen_end,screen_y:r[e[u]][h].screen_y,x:r[e[u]][h].x,end:r[e[u]][h].end,y:r[e[u]][h].y,groupId:e[u],label:r[e[u]][h].label}),f+=1;if(f!==0)for(Pe(i).call(i,function(_,y){return _.screen_x===y.screen_x?_.groupId<y.groupId?-1:1:_.screen_x-y.screen_x}),Fe._getDataIntersections(n,i),u=0;u<i.length;u++){l=t.groups[i[u].groupId];var c=l.options.barChart.minWidth!=null?l.options.barChart.minWidth:.1*l.options.barChart.width;o=i[u].screen_x;var d=0;if(n[o]===void 0)u+1<i.length&&(a=Math.abs(i[u+1].screen_x-o)),s=Fe._getSafeDrawData(a,l,c);else{var v=u+(n[o].amount-n[o].resolved);v<i.length&&(a=Math.abs(i[v].screen_x-o)),s=Fe._getSafeDrawData(a,l,c),n[o].resolved+=1,l.options.stack===!0&&l.options.excludeFromStacking!==!0?i[u].screen_y<l.zeroPosition?(d=n[o].accumulatedNegative,n[o].accumulatedNegative+=l.zeroPosition-i[u].screen_y):(d=n[o].accumulatedPositive,n[o].accumulatedPositive+=l.zeroPosition-i[u].screen_y):l.options.barChart.sideBySide===!0&&(s.width=s.width/n[o].amount,s.offset+=n[o].resolved*s.width-.5*s.width*(n[o].amount+1))}var g=s.width,p=i[u].screen_x;if(i[u].screen_end!=null?(g=i[u].screen_end-i[u].screen_x,p+=g*.5):p+=s.offset,Hg(p,i[u].screen_y-d,g,l.zeroPosition-i[u].screen_y,l.className+" vis-bar",t.svgElements,t.svg,l.style),l.options.drawPoints.enabled===!0){var m={screen_x:i[u].screen_x,screen_y:i[u].screen_y-d,x:i[u].x,y:i[u].y,groupId:i[u].groupId,label:i[u].label};$u.draw([m],l,t,s.offset)}}};Fe._getDataIntersections=function(e,r){for(var t,i=0;i<r.length;i++)i+1<r.length&&(t=Math.abs(r[i+1].screen_x-r[i].screen_x)),i>0&&(t=Math.min(t,Math.abs(r[i-1].screen_x-r[i].screen_x))),t===0&&(e[r[i].screen_x]===void 0&&(e[r[i].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),e[r[i].screen_x].amount+=1)};Fe._getSafeDrawData=function(e,r,t){var i,n;return e<r.options.barChart.width&&e>0?(i=e<t?t:e,n=0,r.options.barChart.align==="left"?n-=.5*e:r.options.barChart.align==="right"&&(n+=.5*e)):(i=r.options.barChart.width,n=0,r.options.barChart.align==="left"?n-=.5*r.options.barChart.width:r.options.barChart.align==="right"&&(n+=.5*r.options.barChart.width)),{width:i,offset:n}};Fe.getStackedYRange=function(e,r,t,i,n){if(e.length>0){Pe(e).call(e,function(o,s){return o.screen_x===s.screen_x?o.groupId<s.groupId?-1:1:o.screen_x-s.screen_x});var a={};Fe._getDataIntersections(a,e),r[i]=Fe._getStackedYRange(a,e),r[i].yAxisOrientation=n,t.push(i)}};Fe._getStackedYRange=function(e,r){for(var t,i=r[0].screen_y,n=r[0].screen_y,a=0;a<r.length;a++)t=r[a].screen_x,e[t]===void 0?(i=i>r[a].screen_y?r[a].screen_y:i,n=n<r[a].screen_y?r[a].screen_y:n):r[a].screen_y<0?e[t].accumulatedNegative+=r[a].screen_y:e[t].accumulatedPositive+=r[a].screen_y;for(var o in e)e.hasOwnProperty(o)&&(i=i>e[o].accumulatedNegative?e[o].accumulatedNegative:i,i=i>e[o].accumulatedPositive?e[o].accumulatedPositive:i,n=n<e[o].accumulatedNegative?e[o].accumulatedNegative:n,n=n<e[o].accumulatedPositive?e[o].accumulatedPositive:n);return{min:i,max:n}};function we(e,r){}we.calcPath=function(e,r){if(e!=null&&e.length>0){var t=[];return r.options.interpolation.enabled==!0?t=we._catmullRom(e,r):t=we._linear(e),t}};we.drawIcon=function(e,r,t,i,n,a){var o=n*.5,s,l,u=Kr("rect",a.svgElements,a.svg);if(u.setAttributeNS(null,"x",r),u.setAttributeNS(null,"y",t-o),u.setAttributeNS(null,"width",i),u.setAttributeNS(null,"height",2*o),u.setAttributeNS(null,"class","vis-outline"),s=Kr("path",a.svgElements,a.svg),s.setAttributeNS(null,"class",e.className),e.style!==void 0&&s.setAttributeNS(null,"style",e.style),s.setAttributeNS(null,"d","M"+r+","+t+" L"+(r+i)+","+t+""),e.options.shaded.enabled==!0&&(l=Kr("path",a.svgElements,a.svg),e.options.shaded.orientation=="top"?l.setAttributeNS(null,"d","M"+r+", "+(t-o)+"L"+r+","+t+" L"+(r+i)+","+t+" L"+(r+i)+","+(t-o)):l.setAttributeNS(null,"d","M"+r+","+t+" L"+r+","+(t+o)+" L"+(r+i)+","+(t+o)+"L"+(r+i)+","+t),l.setAttributeNS(null,"class",e.className+" vis-icon-fill"),e.options.shaded.style!==void 0&&e.options.shaded.style!==""&&l.setAttributeNS(null,"style",e.options.shaded.style)),e.options.drawPoints.enabled==!0){var h={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size,className:e.className};Ms(r+.5*i,t,h,a.svgElements,a.svg)}};we.drawShading=function(e,r,t,i){if(r.options.shaded.enabled==!0){var n=Number(i.svg.style.height.replace("px","")),a=Kr("path",i.svgElements,i.svg),o="L";r.options.interpolation.enabled==!0&&(o="C");var s,l=0;r.options.shaded.orientation=="top"?l=0:r.options.shaded.orientation=="bottom"?l=n:l=Math.min(Math.max(0,r.zeroPosition),n),r.options.shaded.orientation=="group"&&t!=null&&t!=null?s="M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,o,!1)+" L"+t[t.length-1][0]+","+t[t.length-1][1]+" "+this.serializePath(t,o,!0)+t[0][0]+","+t[0][1]+" Z":s="M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,o,!1)+" V"+l+" H"+e[0][0]+" Z",a.setAttributeNS(null,"class",r.className+" vis-fill"),r.options.shaded.style!==void 0&&a.setAttributeNS(null,"style",r.options.shaded.style),a.setAttributeNS(null,"d",s)}};we.draw=function(e,r,t){if(e!=null&&e!=null){var i=Kr("path",t.svgElements,t.svg);i.setAttributeNS(null,"class",r.className),r.style!==void 0&&i.setAttributeNS(null,"style",r.style);var n="L";r.options.interpolation.enabled==!0&&(n="C"),i.setAttributeNS(null,"d","M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,n,!1))}};we.serializePath=function(e,r,t){if(e.length<2)return"";var i=r,n;if(t)for(n=e.length-2;n>0;n--)i+=e[n][0]+","+e[n][1]+" ";else for(n=1;n<e.length;n++)i+=e[n][0]+","+e[n][1]+" ";return i};we._catmullRomUniform=function(e){var r,t,i,n,a,o,s=[];s.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);for(var l=1/6,u=e.length,h=0;h<u-1;h++)r=h==0?e[0]:e[h-1],t=e[h],i=e[h+1],n=h+2<u?e[h+2]:i,a={screen_x:(-r.screen_x+6*t.screen_x+i.screen_x)*l,screen_y:(-r.screen_y+6*t.screen_y+i.screen_y)*l},o={screen_x:(t.screen_x+6*i.screen_x-n.screen_x)*l,screen_y:(t.screen_y+6*i.screen_y-n.screen_y)*l},s.push([a.screen_x,a.screen_y]),s.push([o.screen_x,o.screen_y]),s.push([i.screen_x,i.screen_y]);return s};we._catmullRom=function(e,r){var t=r.options.interpolation.alpha;if(t==0||t===void 0)return this._catmullRomUniform(e);var i,n,a,o,s,l,u,h,f,c,d,v,g,p,m,_,y,w,T,S=[];S.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);for(var x=e.length,E=0;E<x-1;E++)i=E==0?e[0]:e[E-1],n=e[E],a=e[E+1],o=E+2<x?e[E+2]:a,u=Math.sqrt(Math.pow(i.screen_x-n.screen_x,2)+Math.pow(i.screen_y-n.screen_y,2)),h=Math.sqrt(Math.pow(n.screen_x-a.screen_x,2)+Math.pow(n.screen_y-a.screen_y,2)),f=Math.sqrt(Math.pow(a.screen_x-o.screen_x,2)+Math.pow(a.screen_y-o.screen_y,2)),p=Math.pow(f,t),_=Math.pow(f,2*t),m=Math.pow(h,t),y=Math.pow(h,2*t),T=Math.pow(u,t),w=Math.pow(u,2*t),c=2*w+3*T*m+y,d=2*_+3*p*m+y,v=3*T*(T+m),v>0&&(v=1/v),g=3*p*(p+m),g>0&&(g=1/g),s={screen_x:(-y*i.screen_x+c*n.screen_x+w*a.screen_x)*v,screen_y:(-y*i.screen_y+c*n.screen_y+w*a.screen_y)*v},l={screen_x:(_*n.screen_x+d*a.screen_x-y*o.screen_x)*g,screen_y:(_*n.screen_y+d*a.screen_y-y*o.screen_y)*g},s.screen_x==0&&s.screen_y==0&&(s=n),l.screen_x==0&&l.screen_y==0&&(l=a),S.push([s.screen_x,s.screen_y]),S.push([l.screen_x,l.screen_y]),S.push([a.screen_x,a.screen_y]);return S};we._linear=function(e){for(var r=[],t=0;t<e.length;t++)r.push([e[t].screen_x,e[t].screen_y]);return r};function Kn(e,r,t,i){this.id=r;var n=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=b.selectiveBridgeObject(n,t),this.usingDefaultStyle=e.className===void 0,this.groupsUsingDefaultStyles=i,this.zeroPosition=0,this.update(e),this.usingDefaultStyle==!0&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=e.visible===void 0?!0:e.visible}Kn.prototype.setItems=function(e){e!=null?(this.itemsData=e,Pe(this.options)==!0&&b.insertSort(this.itemsData,function(r,t){return r.x>t.x?1:-1})):this.itemsData=[]};Kn.prototype.getItems=function(){return this.itemsData};Kn.prototype.setZeroPosition=function(e){this.zeroPosition=e};Kn.prototype.setOptions=function(e){if(e!==void 0){var r=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];b.selectiveDeepExtend(r,this.options,e),typeof e.drawPoints=="function"&&(e.drawPoints={onRender:e.drawPoints}),b.mergeOptions(this.options,e,"interpolation"),b.mergeOptions(this.options,e,"drawPoints"),b.mergeOptions(this.options,e,"shaded"),e.interpolation&&ot(e.interpolation)=="object"&&e.interpolation.parametrization&&(e.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:e.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}};Kn.prototype.update=function(e){this.group=e,this.content=e.content||"graph",this.className=e.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=e.visible===void 0?!0:e.visible,this.style=e.style,this.setOptions(e.options)};Kn.prototype.getLegend=function(e,r,t,i,n){if(t==null||t==null){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");t={svg:a,svgElements:{},options:this.options,groups:[this]}}switch((i==null||i==null)&&(i=0),(n==null||n==null)&&(n=.5*r),this.options.style){case"line":we.drawIcon(this,i,n,e,r,t);break;case"points":case"point":$u.drawIcon(this,i,n,e,r,t);break;case"bar":Fe.drawIcon(this,i,n,e,r,t);break}return{icon:t.svg,label:this.content,orientation:this.options.yAxisOrientation}};Kn.prototype.getYRange=function(e){for(var r=e[0].y,t=e[0].y,i=0;i<e.length;i++)r=r>e[i].y?e[i].y:r,t=t<e[i].y?e[i].y:t;return{min:r,max:t,yAxisOrientation:this.options.yAxisOrientation}};function vr(e,r,t,i){this.body=e,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=t,this.options=b.extend({},this.defaultOptions),this.linegraphOptions=i,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(r)}vr.prototype=new Un;vr.prototype.clear=function(){this.groups={},this.amountOfGroups=0};vr.prototype.addGroup=function(e,r){r.options.excludeFromLegend!=!0&&(this.groups.hasOwnProperty(e)||(this.groups[e]=r),this.amountOfGroups+=1)};vr.prototype.updateGroup=function(e,r){this.groups[e]=r};vr.prototype.removeGroup=function(e){this.groups.hasOwnProperty(e)&&(delete this.groups[e],this.amountOfGroups-=1)};vr.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top=0+"px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)};vr.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};vr.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};vr.prototype.setOptions=function(e){var r=["enabled","orientation","icons","left","right"];b.selectiveDeepExtend(r,this.options,e)};vr.prototype.redraw=function(){var e=0,r=ye(this.groups);Pe(r).call(r,function(o,s){return o<s?-1:1});for(var t=0;t<r.length;t++){var i=r[t];this.groups[i].visible==!0&&(this.linegraphOptions.visibility[i]===void 0||this.linegraphOptions.visibility[i]==!0)&&e++}if(this.options[this.side].visible==!1||this.amountOfGroups==0||this.options.enabled==!1||e==0)this.hide();else{if(this.show(),this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left=0+"px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right=0+"px",this.svg.style.left=""),this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right")this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var n=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+n+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}this.options.icons==!1?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var a="";for(t=0;t<r.length;t++)i=r[t],this.groups[i].visible==!0&&(this.linegraphOptions.visibility[i]===void 0||this.linegraphOptions.visibility[i]==!0)&&(a+=this.groups[i].content+"<br />");this.dom.textArea.innerHTML=b.xss(a),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};vr.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var e=ye(this.groups);Pe(e).call(e,function(u,h){return u<h?-1:1}),L6(this.svgElements);var r=window.getComputedStyle(this.dom.frame).paddingTop,t=Number(r.replace("px","")),i=t,n=this.options.iconSize,a=.75*this.options.iconSize,o=t+.5*a+3;this.svg.style.width=n+5+t+"px";for(var s=0;s<e.length;s++){var l=e[s];this.groups[l].visible==!0&&(this.linegraphOptions.visibility[l]===void 0||this.linegraphOptions.visibility[l]==!0)&&(this.groups[l].getLegend(n,a,this.framework,i,o),o+=a+this.options.iconSpacing)}}};var Lc="__ungrouped__";function kt(e,r){this.id=xs(),this.body=e,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=b.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var t=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(n,a,o){t._onAdd(a.items)},update:function(n,a,o){t._onUpdate(a.items)},remove:function(n,a,o){t._onRemove(a.items)}},this.groupListeners={add:function(n,a,o){t._onAddGroups(a.items)},update:function(n,a,o){t._onUpdateGroups(a.items)},remove:function(n,a,o){t._onRemoveGroups(a.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(r),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){t.svg.style.left=b.option.asSize(-t.props.width),t.forceGraphUpdate=!0,t.redraw.call(t)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}kt.prototype=new Un;kt.prototype._create=function(){var e=document.createElement("div");e.className="vis-line-graph",this.dom.frame=e,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",e.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new $x(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new $x(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new vr(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new vr(this.body,this.options.legend,"right",this.options.groups),this.show()};kt.prototype.setOptions=function(e){if(e){var r=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];e.graphHeight===void 0&&e.height!==void 0?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):this.body.domProps.centerContainer.height!==void 0&&e.graphHeight!==void 0&&hr((e.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),b.selectiveDeepExtend(r,this.options,e),b.mergeOptions(this.options,e,"interpolation"),b.mergeOptions(this.options,e,"drawPoints"),b.mergeOptions(this.options,e,"shaded"),b.mergeOptions(this.options,e,"legend"),e.interpolation&&ot(e.interpolation)=="object"&&e.interpolation.parametrization&&(e.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:e.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&e.dataAxis!==void 0&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&e.legend!==void 0&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(Lc)&&this.groups[Lc].setOptions(e)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))};kt.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};kt.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};kt.prototype.setItems=function(e){var r=this,t,i=this.itemsData;if(!e)this.itemsData=null;else if(zi("id",e))this.itemsData=Cs(e);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(i&&(G(b).call(b,this.itemListeners,function(a,o){i.off(o,a)}),i.dispose(),t=i.getIds(),this._onRemove(t)),this.itemsData){var n=this.id;G(b).call(b,this.itemListeners,function(a,o){r.itemsData.on(o,a,n)}),t=this.itemsData.getIds(),this._onAdd(t)}};kt.prototype.setGroups=function(e){var r=this,t;if(this.groupsData){G(b).call(b,this.groupListeners,function(a,o){r.groupsData.off(o,a)}),t=this.groupsData.getIds(),this.groupsData=null;for(var i=0;i<t.length;i++)this._removeGroup(t[i])}if(!e)this.groupsData=null;else if(zi("id",e))this.groupsData=e;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var n=this.id;G(b).call(b,this.groupListeners,function(a,o){r.groupsData.on(o,a,n)}),t=this.groupsData.getIds(),this._onAddGroups(t)}};kt.prototype._onUpdate=function(e){this._updateAllGroupData(e)};kt.prototype._onAdd=function(e){this._onUpdate(e)};kt.prototype._onRemove=function(e){this._onUpdate(e)};kt.prototype._onUpdateGroups=function(e){this._updateAllGroupData(null,e)};kt.prototype._onAddGroups=function(e){this._onUpdateGroups(e)};kt.prototype._onRemoveGroups=function(e){for(var r=0;r<e.length;r++)this._removeGroup(e[r]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})};kt.prototype._removeGroup=function(e){this.groups.hasOwnProperty(e)&&(this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e),this.legendLeft.redraw()),delete this.groups[e])};kt.prototype._updateGroup=function(e,r){this.groups.hasOwnProperty(r)?(this.groups[r].update(e),this.groups[r].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(r,this.groups[r]),this.legendRight.updateGroup(r,this.groups[r]),this.yAxisLeft.removeGroup(r),this.legendLeft.removeGroup(r)):(this.yAxisLeft.updateGroup(r,this.groups[r]),this.legendLeft.updateGroup(r,this.groups[r]),this.yAxisRight.removeGroup(r),this.legendRight.removeGroup(r))):(this.groups[r]=new Kn(e,r,this.options,this.groupsUsingDefaultStyles),this.groups[r].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(r,this.groups[r]),this.legendRight.addGroup(r,this.groups[r])):(this.yAxisLeft.addGroup(r,this.groups[r]),this.legendLeft.addGroup(r,this.groups[r]))),this.legendLeft.redraw(),this.legendRight.redraw()};kt.prototype._updateAllGroupData=function(e,r){if(this.itemsData!=null){var t={},i=this.itemsData.get(),n=this.itemsData.idProp,a={};e&&me(e).call(e,function(p){a[p]=p});for(var o={},s=0;s<i.length;s++){var l=i[s],u=l.group;u==null&&(u=Lc),o.hasOwnProperty(u)?o[u]++:o[u]=1}var h={};if(!r&&e){for(u in this.groups)if(this.groups.hasOwnProperty(u)){g=this.groups[u];var f=g.getItems();t[u]=gt(f).call(f,function(p){return h[p[n]]=p[n],p[n]!==a[p[n]]});var c=o[u];o[u]-=t[u].length,t[u].length<c&&(t[u][c-1]={})}}for(s=0;s<i.length;s++)if(l=i[s],u=l.group,u==null&&(u=Lc),!(!r&&e&&l[n]!==a[l[n]]&&h.hasOwnProperty(l[n]))){t.hasOwnProperty(u)||(t[u]=new Array(o[u]));var d=b.bridgeObject(l);d.x=b.convert(l.x,"Date"),d.end=b.convert(l.end,"Date"),d.orginalY=l.y,d.y=Number(l.y),d[n]=l[n];var v=t[u].length-o[u]--;t[u][v]=d}for(u in this.groups)this.groups.hasOwnProperty(u)&&(t.hasOwnProperty(u)||(t[u]=new Array(0)));for(u in t)if(t.hasOwnProperty(u))if(t[u].length==0)this.groups.hasOwnProperty(u)&&this._removeGroup(u);else{var g=void 0;this.groupsData!=null&&(g=this.groupsData.get(u)),g==null&&(g={id:u,content:this.options.defaultGroup+u}),this._updateGroup(g,u),this.groups[u].setItems(t[u])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}};kt.prototype.redraw=function(){var e=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,e=this._isResized()||e;var r=this.body.range.end-this.body.range.start,t=r!=this.lastVisibleInterval;if(this.lastVisibleInterval=r,e==!0){var i;this.svg.style.width=b.option.asSize(3*this.props.width),this.svg.style.left=b.option.asSize(-this.props.width),(Pt(i=this.options.height+"").call(i,"%")!=-1||this.updateSVGheightOnResize==!0)&&(this.updateSVGheight=!0)}if(this.updateSVGheight==!0?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",e==!0||t==!0||this.abortedGraphUpdate==!0||this.forceGraphUpdate==!0)e=this._updateGraph()||e,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(this.lastStart!=0){var n=this.body.range.start-this.lastStart,a=this.body.range.end-this.body.range.start;if(this.props.width!=0){var o=this.props.width/a,s=n*o;this.svg.style.left=-this.props.width-s+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),e};kt.prototype._getSortedGroupIds=function(){var e=[];for(var r in this.groups)if(this.groups.hasOwnProperty(r)){var t=this.groups[r];t.visible==!0&&(this.options.groups.visibility[r]===void 0||this.options.groups.visibility[r]==!0)&&e.push({id:r,zIndex:t.options.zIndex})}b.insertSort(e,function(a,o){var s=a.zIndex,l=o.zIndex;return s===void 0&&(s=0),l===void 0&&(l=0),s==l?0:s<l?-1:1});for(var i=new Array(e.length),n=0;n<e.length;n++)i[n]=e[n].id;return i};kt.prototype._updateGraph=function(){if(Xn(this.svgElements),this.props.width!=0&&this.itemsData!=null){var e,r,t={},i=!1,n=this.body.util.toGlobalTime(-this.body.domProps.root.width),a=this.body.util.toGlobalTime(2*this.body.domProps.root.width),o=this._getSortedGroupIds();if(o.length>0){var s={};for(this._getRelevantData(o,s,n,a),this._applySampling(o,s),r=0;r<o.length;r++)this._convertXcoordinates(s[o[r]]);if(this._getYRanges(o,s,t),i=this._updateYAxis(o,t),i==!0)return Mr(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var l=void 0;for(r=0;r<o.length;r++)e=this.groups[o[r]],this.options.stack===!0&&this.options.style==="line"&&(e.options.excludeFromStacking==null||!e.options.excludeFromStacking)&&(l!=null&&(this._stack(s[e.id],s[l.id]),e.options.shaded.enabled==!0&&e.options.shaded.orientation!=="group"&&(e.options.shaded.orientation=="top"&&l.options.shaded.orientation!=="group"?(l.options.shaded.orientation="group",l.options.shaded.groupId=e.id):(e.options.shaded.orientation="group",e.options.shaded.groupId=l.id))),l=e),this._convertYcoordinates(s[o[r]],e);var u={};for(r=0;r<o.length;r++)if(e=this.groups[o[r]],e.options.style==="line"&&e.options.shaded.enabled==!0){var h=s[o[r]];if(h==null||h.length==0)continue;if(u.hasOwnProperty(o[r])||(u[o[r]]=we.calcPath(h,e)),e.options.shaded.orientation==="group"){var f=e.options.shaded.groupId;if(Pt(o).call(o,f)===-1){console.log(e.id+": Unknown shading group target given:"+f);continue}u.hasOwnProperty(f)||(u[f]=we.calcPath(s[f],this.groups[f])),we.drawShading(u[o[r]],e,u[f],this.framework)}else we.drawShading(u[o[r]],e,void 0,this.framework)}for(Fe.draw(o,s,this.framework),r=0;r<o.length;r++)if(e=this.groups[o[r]],s[o[r]].length>0)switch(e.options.style){case"line":u.hasOwnProperty(o[r])||(u[o[r]]=we.calcPath(s[o[r]],e)),we.draw(u[o[r]],e,this.framework);case"point":case"points":(e.options.style=="point"||e.options.style=="points"||e.options.drawPoints.enabled==!0)&&$u.draw(s[o[r]],e,this.framework);break}}}return Mr(this.svgElements),!1};kt.prototype._stack=function(e,r){var t,i,n,a,o;t=0;for(var s=0;s<e.length;s++){a=void 0,o=void 0;for(var l=t;l<r.length;l++)if(r[l].x===e[s].x){a=r[l],o=r[l],t=l;break}else if(r[l].x>e[s].x){o=r[l],l==0?a=o:a=r[l-1],t=l;break}o===void 0&&(a=r[r.length-1],o=r[r.length-1]),i=o.x-a.x,n=o.y-a.y,i==0?e[s].y=e[s].orginalY+o.y:e[s].y=e[s].orginalY+n/i*(e[s].x-a.x)+a.y}};kt.prototype._getRelevantData=function(e,r,t,i){var n,a,o,s;if(e.length>0)for(a=0;a<e.length;a++){n=this.groups[e[a]];var l=n.getItems();if(Pe(n.options)==!0){var u=function(v,g){return v.getTime()==g.getTime()?0:v<g?-1:1},h=Math.max(0,b.binarySearchValue(l,t,"x","before",u)),f=Math.min(l.length,b.binarySearchValue(l,i,"x","after",u)+1);f<=0&&(f=l.length);var c=new Array(f-h);for(o=h;o<f;o++)s=n.itemsData[o],c[o-h]=s;r[e[a]]=c}else r[e[a]]=n.itemsData}};kt.prototype._applySampling=function(e,r){var t;if(e.length>0){for(var i=0;i<e.length;i++)if(t=this.groups[e[i]],t.options.sampling==!0){var n=r[e[i]];if(n.length>0){var a=1,o=n.length,s=this.body.util.toGlobalScreen(n[n.length-1].x)-this.body.util.toGlobalScreen(n[0].x),l=o/s;a=Math.min(Math.ceil(.2*o),Math.max(1,Math.round(l)));for(var u=new Array(o),h=0;h<o;h+=a){var f=Math.round(h/a);u[f]=n[h]}r[e[i]]=kr(u).call(u,0,Math.round(o/a))}}}};kt.prototype._getYRanges=function(e,r,t){var i,n,a,o=[],s=[],l;if(e.length>0){for(a=0;a<e.length;a++)i=r[e[a]],l=this.groups[e[a]].options,i.length>0&&(n=this.groups[e[a]],l.stack===!0&&l.style==="bar"?l.yAxisOrientation==="left"?o=Ut(o).call(o,i):s=Ut(s).call(s,i):t[e[a]]=n.getYRange(i,e[a]));Fe.getStackedYRange(o,t,e,"__barStackLeft","left"),Fe.getStackedYRange(s,t,e,"__barStackRight","right")}};kt.prototype._updateYAxis=function(e,r){var t=!1,i=!1,n=!1,a=1e9,o=1e9,s=-1e9,l=-1e9,u,h;if(e.length>0){for(var f=0;f<e.length;f++){var c=this.groups[e[f]];c&&c.options.yAxisOrientation!="right"?(i=!0,a=1e9,s=-1e9):c&&c.options.yAxisOrientation&&(n=!0,o=1e9,l=-1e9)}for(f=0;f<e.length;f++)r.hasOwnProperty(e[f])&&r[e[f]].ignore!==!0&&(u=r[e[f]].min,h=r[e[f]].max,r[e[f]].yAxisOrientation!="right"?(i=!0,a=a>u?u:a,s=s<h?h:s):(n=!0,o=o>u?u:o,l=l<h?h:l));i==!0&&this.yAxisLeft.setRange(a,s),n==!0&&this.yAxisRight.setRange(o,l)}t=this._toggleAxisVisiblity(i,this.yAxisLeft)||t,t=this._toggleAxisVisiblity(n,this.yAxisRight)||t,n==!0&&i==!0?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!i,this.yAxisRight.masterAxis=this.yAxisLeft,this.yAxisRight.master==!1?(n==!0?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,t=this.yAxisLeft.redraw()||t,t=this.yAxisRight.redraw()||t):t=this.yAxisRight.redraw()||t;var d=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(f=0;f<d.length;f++)Pt(e).call(e,d[f])!=-1&&kr(e).call(e,Pt(e).call(e,d[f]),1);return t};kt.prototype._toggleAxisVisiblity=function(e,r){var t=!1;return e==!1?r.dom.frame.parentNode&&r.hidden==!1&&(r.hide(),t=!0):!r.dom.frame.parentNode&&r.hidden==!0&&(r.show(),t=!0),t};kt.prototype._convertXcoordinates=function(e){for(var r=this.body.util.toScreen,t=0;t<e.length;t++)e[t].screen_x=r(e[t].x)+this.props.width,e[t].screen_y=e[t].y,e[t].end!=null?e[t].screen_end=r(e[t].end)+this.props.width:e[t].screen_end=void 0};kt.prototype._convertYcoordinates=function(e,r){var t=this.yAxisLeft,i=Number(this.svg.style.height.replace("px",""));r.options.yAxisOrientation=="right"&&(t=this.yAxisRight);for(var n=0;n<e.length;n++)e[n].screen_y=Math.round(t.convertValue(e[n].y));r.setZeroPosition(Math.min(i,t.convertValue(0)))};var it="string",mt="boolean",Rt="number",H6="array",Ls="date",zt="object",B6="dom",Fs="moment",Gx="any",U6={configure:{enabled:{boolean:mt},filter:{boolean:mt,function:"function"},container:{dom:B6},__type__:{object:zt,boolean:mt,function:"function"}},alignCurrentTime:{string:it,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:it},sort:{boolean:mt},sampling:{boolean:mt},stack:{boolean:mt},graphHeight:{string:it,number:Rt},shaded:{enabled:{boolean:mt},orientation:{string:["bottom","top","zero","group"]},groupId:{object:zt},__type__:{boolean:mt,object:zt}},style:{string:["line","bar","points"]},barChart:{width:{number:Rt},minWidth:{number:Rt},sideBySide:{boolean:mt},align:{string:["left","center","right"]},__type__:{object:zt}},interpolation:{enabled:{boolean:mt},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:Rt},__type__:{object:zt,boolean:mt}},drawPoints:{enabled:{boolean:mt},onRender:{function:"function"},size:{number:Rt},style:{string:["square","circle"]},__type__:{object:zt,boolean:mt,function:"function"}},dataAxis:{showMinorLabels:{boolean:mt},showMajorLabels:{boolean:mt},showWeekScale:{boolean:mt},icons:{boolean:mt},width:{string:it,number:Rt},visible:{boolean:mt},alignZeros:{boolean:mt},left:{range:{min:{number:Rt,undefined:"undefined"},max:{number:Rt,undefined:"undefined"},__type__:{object:zt}},format:{function:"function"},title:{text:{string:it,number:Rt,undefined:"undefined"},style:{string:it,undefined:"undefined"},__type__:{object:zt}},__type__:{object:zt}},right:{range:{min:{number:Rt,undefined:"undefined"},max:{number:Rt,undefined:"undefined"},__type__:{object:zt}},format:{function:"function"},title:{text:{string:it,number:Rt,undefined:"undefined"},style:{string:it,undefined:"undefined"},__type__:{object:zt}},__type__:{object:zt}},__type__:{object:zt}},legend:{enabled:{boolean:mt},icons:{boolean:mt},left:{visible:{boolean:mt},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:zt}},right:{visible:{boolean:mt},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:zt}},__type__:{object:zt,boolean:mt}},groups:{visibility:{any:Gx},__type__:{object:zt}},autoResize:{boolean:mt},throttleRedraw:{number:Rt},clickToUse:{boolean:mt},end:{number:Rt,date:Ls,string:it,moment:Fs},format:{minorLabels:{millisecond:{string:it,undefined:"undefined"},second:{string:it,undefined:"undefined"},minute:{string:it,undefined:"undefined"},hour:{string:it,undefined:"undefined"},weekday:{string:it,undefined:"undefined"},day:{string:it,undefined:"undefined"},week:{string:it,undefined:"undefined"},month:{string:it,undefined:"undefined"},quarter:{string:it,undefined:"undefined"},year:{string:it,undefined:"undefined"},__type__:{object:zt}},majorLabels:{millisecond:{string:it,undefined:"undefined"},second:{string:it,undefined:"undefined"},minute:{string:it,undefined:"undefined"},hour:{string:it,undefined:"undefined"},weekday:{string:it,undefined:"undefined"},day:{string:it,undefined:"undefined"},week:{string:it,undefined:"undefined"},month:{string:it,undefined:"undefined"},quarter:{string:it,undefined:"undefined"},year:{string:it,undefined:"undefined"},__type__:{object:zt}},__type__:{object:zt}},moment:{function:"function"},height:{string:it,number:Rt},hiddenDates:{start:{date:Ls,number:Rt,string:it,moment:Fs},end:{date:Ls,number:Rt,string:it,moment:Fs},repeat:{string:it},__type__:{object:zt,array:H6}},locale:{string:it},locales:{__any__:{any:Gx},__type__:{object:zt}},max:{date:Ls,number:Rt,string:it,moment:Fs},maxHeight:{number:Rt,string:it},maxMinorChars:{number:Rt},min:{date:Ls,number:Rt,string:it,moment:Fs},minHeight:{number:Rt,string:it},moveable:{boolean:mt},multiselect:{boolean:mt},orientation:{string:it},showCurrentTime:{boolean:mt},showMajorLabels:{boolean:mt},showMinorLabels:{boolean:mt},showWeekScale:{boolean:mt},snap:{function:"function",null:"null"},start:{date:Ls,number:Rt,string:it,moment:Fs},timeAxis:{scale:{string:it,undefined:"undefined"},step:{number:Rt,undefined:"undefined"},__type__:{object:zt}},width:{string:it,number:Rt},zoomable:{boolean:mt},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:Rt},zoomMin:{number:Rt},zIndex:{number:Rt},__type__:{object:zt}},z6={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};function hn(e,r,t,i){var n,a,o,s,l,u,h;if(!(ct(t)||zi("id",t))&&t instanceof Object){var f=i;i=t,t=f}i&&i.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var c=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:Ze,width:null,height:null,maxHeight:null,minHeight:null},this.options=b.deepExtend({},this.defaultOptions),this._create(e),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:R(n=this.on).call(n,this),off:R(a=this.off).call(a,this),emit:R(o=this.emit).call(o,this)},hiddenDates:[],util:{getScale:function(){return c.timeAxis.step.scale},getStep:function(){return c.timeAxis.step.step},toScreen:R(s=c._toScreen).call(s,c),toGlobalScreen:R(l=c._toGlobalScreen).call(l,c),toTime:R(u=c._toTime).call(u,c),toGlobalTime:R(h=c._toGlobalTime).call(h,c)}},this.range=new KS(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Pc(this.body),this.components.push(this.timeAxis),this.currentTime=new lx(this.body),this.components.push(this.currentTime),this.linegraph=new kt(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(d){c.emit("click",c.getEventProperties(d))}),this.on("doubletap",function(d){c.emit("doubleClick",c.getEventProperties(d))}),this.dom.root.oncontextmenu=function(d){c.emit("contextmenu",c.getEventProperties(d))},this.initialFitDone=!1,this.on("changed",function(){if(c.itemsData!=null){if(!c.initialFitDone&&!c.options.rollingMode)if(c.initialFitDone=!0,c.options.start!=null||c.options.end!=null){if(c.options.start==null||c.options.end==null)var d=c.getItemRange();var v=c.options.start!=null?c.options.start:d.min,g=c.options.end!=null?c.options.end:d.max;c.setWindow(v,g,{animation:!1})}else c.fit({animation:!1});!c.initialDrawDone&&(c.initialRangeChangeDone||!c.options.start&&!c.options.end||c.options.rollingMode)&&(c.initialDrawDone=!0,c.dom.root.style.visibility="visible",c.dom.loadingScreen.parentNode.removeChild(c.dom.loadingScreen),c.options.onInitialDrawComplete&&Ae(function(){return c.options.onInitialDrawComplete()},0))}}),i&&this.setOptions(i),t&&this.setGroups(t),r&&this.setItems(r),this._redraw()}hn.prototype=new Ps;hn.prototype.setOptions=function(e){var r=Dx.validate(e,U6);r===!0&&console.log("%cErrors have been found in the supplied options object.",Mc),Ps.prototype.setOptions.call(this,e)};hn.prototype.setItems=function(e){var r=this.itemsData==null,t;if(e?zi("id",e)?t=Cs(e):t=Cs(new Ko(e)):t=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=t,this.linegraph&&this.linegraph.setItems(t!=null?t.rawDS:null),r)if(this.options.start!=null||this.options.end!=null){var i=this.options.start!=null?this.options.start:null,n=this.options.end!=null?this.options.end:null;this.setWindow(i,n,{animation:!1})}else this.fit({animation:!1})};hn.prototype.setGroups=function(e){var r;e?zi("id",e)?r=e:r=new Ko(e):r=null,this.groupsData=r,this.linegraph.setGroups(r)};hn.prototype.getLegend=function(e,r,t){return r===void 0&&(r=15),t===void 0&&(t=15),this.linegraph.groups[e]!==void 0?this.linegraph.groups[e].getLegend(r,t):"cannot find group:'"+e+"'"};hn.prototype.isGroupVisible=function(e){return this.linegraph.groups[e]!==void 0?this.linegraph.groups[e].visible&&(this.linegraph.options.groups.visibility[e]===void 0||this.linegraph.options.groups.visibility[e]==!0):!1};hn.prototype.getDataRange=function(){var e=null,r=null;for(var t in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(t)&&this.linegraph.groups[t].visible==!0)for(var i=0;i<this.linegraph.groups[t].itemsData.length;i++){var n=this.linegraph.groups[t].itemsData[i],a=b.convert(n.x,"Date").valueOf();e=e==null||e>a?a:e,r=r==null||r<a?a:r}return{min:e!=null?new Date(e):null,max:r!=null?new Date(r):null}};hn.prototype.getEventProperties=function(e){var r=e.center?e.center.x:e.clientX,t=e.center?e.center.y:e.clientY,i=r-b.getAbsoluteLeft(this.dom.centerContainer),n=t-b.getAbsoluteTop(this.dom.centerContainer),a=this._toTime(i),o=Ng.customTimeFromTarget(e),s=b.getTarget(e),l=null;b.hasParent(s,this.timeAxis.dom.foreground)||this.timeAxis2&&b.hasParent(s,this.timeAxis2.dom.foreground)?l="axis":b.hasParent(s,this.linegraph.yAxisLeft.dom.frame)||b.hasParent(s,this.linegraph.yAxisRight.dom.frame)?l="data-axis":b.hasParent(s,this.linegraph.legendLeft.dom.frame)||b.hasParent(s,this.linegraph.legendRight.dom.frame)?l="legend":o!=null?l="custom-time":b.hasParent(s,this.currentTime.bar)?l="current-time":b.hasParent(s,this.dom.center)&&(l="background");var u=[],h=this.linegraph.yAxisLeft,f=this.linegraph.yAxisRight;return!h.hidden&&this.itemsData.length>0&&u.push(h.screenToValue(n)),!f.hidden&&this.itemsData.length>0&&u.push(f.screenToValue(n)),{event:e,customTime:o?o.options.id:null,what:l,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:i,y:n,time:a,value:u}};hn.prototype._createConfigurator=function(){return new Lx(this,this.dom.container,z6)};var V6=F6();F.locale(V6);export{vk as C,Ko as D,gk as F,e8 as G,hR as I,Dd as L,t8 as M,Z6 as O,yh as P,q6 as S,n8 as T,ma as V,r8 as X,a8 as a,yk as b,J6 as c,Q6 as d,K6 as e,uC as f,i8 as g,X6 as t};
