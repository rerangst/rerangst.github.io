import{O as _,M as z,V as N,T as j,X as R,D as Y,a as Z,S as u,I as P,b as f,C as H,F as X,c as S,d as k,G as q,t as J,e as K,g as Q,P as O,f as x,L as U}from"./vendor.2c9267fc.js";const W=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))g(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&g(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function g(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}};W();const $="Rzyup56YSzgY1t6M2B7l",ee=document.getElementById("popup"),te=document.getElementById("popup-content"),p=document.getElementById("popup-closer"),T=document.getElementById("segments"),L=new _({element:ee,autoPan:!0,autoPanAnimation:{duration:250}}),oe=[-13767242957508618e-9,5542175421488685e-9],s=new z({target:document.getElementById("map"),overlays:[L],view:new N({center:oe,zoom:10,minZoom:2,maxZoom:19}),layers:[new j({source:new R({url:"https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key="+$,tileSize:512})})]});function ne(e){var t=e.getSource().getFeatures()[0].getProperties().time;l=new Date(t[0]),y=new Date(t[t.length-1]),C.length<1&&(C.add([{id:"item0",start:l,end:y,content:"Demo GPS Tracks"}]),m.addCustomTime(l,A,!1)),m.fit()}var C=new Y,re={width:"100%",height:"120px",align:"center"},m=new Z(document.getElementById("timeline"),C,re);m.on("timechange",ae);function ae(e){const t=y-l;n=(e.time.getTime()-l.getTime())/t,B()}const v={invisibleStyleIcon:new u({image:new P({src:"data/icon.png",opacity:0})}),route:new u({stroke:new f({width:6,color:[237,212,0,.8]})}),icon:new u({image:new P({anchor:[.5,1],src:"data/icon.png"})}),geoMarker:new u({image:new H({radius:7,fill:new X({color:"black"}),stroke:new f({color:"white",width:2})})})},i=new S({source:new k({format:new q,url:"./data/demo-tracks-line.json"}),style:new u({stroke:new f({color:"rgba(255, 0, 0, 0.7)",lineDash:[2,5],width:5})})}),F=new S({source:new k,style:new u({stroke:new f({color:"rgba(30, 139, 195, 1)",width:5})})}),c=new S({source:new k,style:function(e){return v[e.get("type")]}});s.addLayer(i);s.addLayer(c);s.addLayer(F);i.setVisible(T.checked);var A="id";let l=new Date,y=new Date;const ie=document.getElementById("speed"),b=document.getElementById("start-animation");let I=!1,n=0,E,w=[],D=[];function V(e){const t=Number(ie.value),r=e.frameState.time,g=r-E;n=(n+t*g/1e6)%2,E=r,i.getSource().getFeatures().forEach(function(d,h,ce){const G=d.getGeometry().getCoordinateAt(n>1?2-n:n);w[h].setCoordinates(G),D[h].getGeometry().appendCoordinate(G);const M=Q(e);M.setStyle(v.geoMarker),M.drawGeometry(w[h])}),s.render();const o=y-l;var a=new Date(l.getTime()+o*n);m.customTimes[0].setCustomTime(a),m.setCustomTimeMarker(a,A,!1),n>1&&B()}function se(){I=!0,E=Date.now(),b.textContent="Stop",n=n>1?0:n,c.getSource().clear(),w=[],console.log(n),n==0&&(F.getSource().clear(),D=[]);for(let e=0;e<i.getSource().getFeatures().length;e++)w.push(new O([0,0]));for(const e of i.getSource().getFeatures()){const t=new x({type:"invisibleStyleIcon",geometry:new O(e.getGeometry().getFirstCoordinate())});if(c.getSource().addFeature(t),n==0){const r=new x({geometry:new U([])});r.getGeometry().appendCoordinate(e.getGeometry().getFirstCoordinate()),D.push(r),F.getSource().addFeature(r)}}c.on("postrender",V),p.onclick()}function B(){I=!1,b.textContent="Start",c.un("postrender",V),i.getSource().getFeatures().forEach(function(e,t){const r=e.getGeometry().getCoordinateAt(n>1?2-n:n);c.getSource().getFeatures()[t].getGeometry().setCoordinates(r),c.getSource().getFeatures()[t].setStyle(v.geoMarker)}),p.onclick(),s.render()}b.addEventListener("click",function(){I?B():(ne(i),se())});T.onchange=function(){i.setVisible(T.checked)};p.onclick=function(){return L.setPosition(void 0),p.blur(),!1};s.on("click",function(e){if(s.forEachFeatureAtPixel(e.pixel,function(r){return r})){const r=J(K(e.coordinate));te.innerHTML="<p> here: </p><code>"+r+"</code>",L.setPosition(e.coordinate)}});
